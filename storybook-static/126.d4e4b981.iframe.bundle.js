/*! For license information please see 126.d4e4b981.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkdungeonchat=self.webpackChunkdungeonchat||[]).push([[126],{"./node_modules/@babel/runtime/helpers/esm/objectSpread2.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function toPropertyKey(t){var i=function toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}function _defineProperty(e,r,t){return(r=toPropertyKey(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread2(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}__webpack_require__.d(__webpack_exports__,{A:()=>_objectSpread2})},"./node_modules/@firebase/app/dist/esm/index.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{MF:()=>SDK_VERSION,j6:()=>_getProvider,xZ:()=>_isFirebaseServerApp,om:()=>_registerComponent,Sx:()=>getApp,Wp:()=>initializeApp,KO:()=>registerVersion});var index_esm=__webpack_require__("./node_modules/@firebase/component/dist/esm/index.esm.js"),esm_index_esm=__webpack_require__("./node_modules/@firebase/logger/dist/esm/index.esm.js"),dist_index_esm=__webpack_require__("./node_modules/@firebase/util/dist/index.esm.js");let idbProxyableTypes,cursorAdvanceMethods;const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;let idbProxyTraps={get(target,prop,receiver){if(target instanceof IDBTransaction){if("done"===prop)return transactionDoneMap.get(target);if("objectStoreNames"===prop)return target.objectStoreNames||transactionStoreNamesMap.get(target);if("store"===prop)return receiver.objectStoreNames[1]?void 0:receiver.objectStore(receiver.objectStoreNames[0])}return wrap_idb_value_wrap(target[prop])},set:(target,prop,value)=>(target[prop]=value,!0),has:(target,prop)=>target instanceof IDBTransaction&&("done"===prop||"store"===prop)||prop in target};function wrapFunction(func){return func!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(func)?function(...args){return func.apply(unwrap(this),args),wrap_idb_value_wrap(cursorRequestMap.get(this))}:function(...args){return wrap_idb_value_wrap(func.apply(unwrap(this),args))}:function(storeNames,...args){const tx=func.call(unwrap(this),storeNames,...args);return transactionStoreNamesMap.set(tx,storeNames.sort?storeNames.sort():[storeNames]),wrap_idb_value_wrap(tx)}}function transformCachableValue(value){return"function"==typeof value?wrapFunction(value):(value instanceof IDBTransaction&&function cacheDonePromiseForTransaction(tx){if(transactionDoneMap.has(tx))return;const done=new Promise((resolve,reject)=>{const unlisten=()=>{tx.removeEventListener("complete",complete),tx.removeEventListener("error",error),tx.removeEventListener("abort",error)},complete=()=>{resolve(),unlisten()},error=()=>{reject(tx.error||new DOMException("AbortError","AbortError")),unlisten()};tx.addEventListener("complete",complete),tx.addEventListener("error",error),tx.addEventListener("abort",error)});transactionDoneMap.set(tx,done)}(value),object=value,function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}().some(c=>object instanceof c)?new Proxy(value,idbProxyTraps):value);var object}function wrap_idb_value_wrap(value){if(value instanceof IDBRequest)return function promisifyRequest(request){const promise=new Promise((resolve,reject)=>{const unlisten=()=>{request.removeEventListener("success",success),request.removeEventListener("error",error)},success=()=>{resolve(wrap_idb_value_wrap(request.result)),unlisten()},error=()=>{reject(request.error),unlisten()};request.addEventListener("success",success),request.addEventListener("error",error)});return promise.then(value=>{value instanceof IDBCursor&&cursorRequestMap.set(value,request)}).catch(()=>{}),reverseTransformCache.set(promise,request),promise}(value);if(transformCache.has(value))return transformCache.get(value);const newValue=transformCachableValue(value);return newValue!==value&&(transformCache.set(value,newValue),reverseTransformCache.set(newValue,value)),newValue}const unwrap=value=>reverseTransformCache.get(value);const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(target,prop){if(!(target instanceof IDBDatabase)||prop in target||"string"!=typeof prop)return;if(cachedMethods.get(prop))return cachedMethods.get(prop);const targetFuncName=prop.replace(/FromIndex$/,""),useIndex=prop!==targetFuncName,isWrite=writeMethods.includes(targetFuncName);if(!(targetFuncName in(useIndex?IDBIndex:IDBObjectStore).prototype)||!isWrite&&!readMethods.includes(targetFuncName))return;const method=async function(storeName,...args){const tx=this.transaction(storeName,isWrite?"readwrite":"readonly");let target=tx.store;return useIndex&&(target=target.index(args.shift())),(await Promise.all([target[targetFuncName](...args),isWrite&&tx.done]))[0]};return cachedMethods.set(prop,method),method}!function replaceTraps(callback){idbProxyTraps=callback(idbProxyTraps)}(oldTraps=>({...oldTraps,get:(target,prop,receiver)=>getMethod(target,prop)||oldTraps.get(target,prop,receiver),has:(target,prop)=>!!getMethod(target,prop)||oldTraps.has(target,prop)}));class PlatformLoggerServiceImpl{constructor(container){this.container=container}getPlatformInfoString(){return this.container.getProviders().map(provider=>{if(function isVersionServiceProvider(provider){const component=provider.getComponent();return"VERSION"===component?.type}(provider)){const service=provider.getImmediate();return`${service.library}/${service.version}`}return null}).filter(logString=>logString).join(" ")}}const name$q="@firebase/app",logger=new esm_index_esm.Vy("@firebase/app"),name$p="@firebase/app-compat",name$o="@firebase/analytics-compat",name$n="@firebase/analytics",name$m="@firebase/app-check-compat",name$l="@firebase/app-check",name$k="@firebase/auth",name$j="@firebase/auth-compat",name$i="@firebase/database",name$h="@firebase/data-connect",name$g="@firebase/database-compat",name$f="@firebase/functions",name$e="@firebase/functions-compat",name$d="@firebase/installations",name$c="@firebase/installations-compat",name$b="@firebase/messaging",name$a="@firebase/messaging-compat",name$9="@firebase/performance",name$8="@firebase/performance-compat",name$7="@firebase/remote-config",name$6="@firebase/remote-config-compat",name$5="@firebase/storage",name$4="@firebase/storage-compat",name$3="@firebase/firestore",name$2="@firebase/ai",name$1="@firebase/firestore-compat",index_esm_name="firebase",DEFAULT_ENTRY_NAME="[DEFAULT]",PLATFORM_LOG_STRING={[name$q]:"fire-core",[name$p]:"fire-core-compat",[name$n]:"fire-analytics",[name$o]:"fire-analytics-compat",[name$l]:"fire-app-check",[name$m]:"fire-app-check-compat",[name$k]:"fire-auth",[name$j]:"fire-auth-compat",[name$i]:"fire-rtdb",[name$h]:"fire-data-connect",[name$g]:"fire-rtdb-compat",[name$f]:"fire-fn",[name$e]:"fire-fn-compat",[name$d]:"fire-iid",[name$c]:"fire-iid-compat",[name$b]:"fire-fcm",[name$a]:"fire-fcm-compat",[name$9]:"fire-perf",[name$8]:"fire-perf-compat",[name$7]:"fire-rc",[name$6]:"fire-rc-compat",[name$5]:"fire-gcs",[name$4]:"fire-gcs-compat",[name$3]:"fire-fst",[name$1]:"fire-fst-compat",[name$2]:"fire-vertex","fire-js":"fire-js",[index_esm_name]:"fire-js-all"},_apps=new Map,_serverApps=new Map,_components=new Map;function _addComponent(app,component){try{app.container.addComponent(component)}catch(e){logger.debug(`Component ${component.name} failed to register with FirebaseApp ${app.name}`,e)}}function _registerComponent(component){const componentName=component.name;if(_components.has(componentName))return logger.debug(`There were multiple attempts to register component ${componentName}.`),!1;_components.set(componentName,component);for(const app of _apps.values())_addComponent(app,component);for(const serverApp of _serverApps.values())_addComponent(serverApp,component);return!0}function _getProvider(app,name){const heartbeatController=app.container.getProvider("heartbeat").getImmediate({optional:!0});return heartbeatController&&heartbeatController.triggerHeartbeat(),app.container.getProvider(name)}function _isFirebaseServerApp(obj){return null!=obj&&void 0!==obj.settings}const ERRORS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ERROR_FACTORY=new dist_index_esm.FA("app","Firebase",ERRORS);class FirebaseAppImpl{constructor(options,config,container){this._isDeleted=!1,this._options={...options},this._config={...config},this._name=config.name,this._automaticDataCollectionEnabled=config.automaticDataCollectionEnabled,this._container=container,this.container.addComponent(new index_esm.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(val){this.checkDestroyed(),this._automaticDataCollectionEnabled=val}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(val){this._isDeleted=val}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY.create("app-deleted",{appName:this._name})}}const SDK_VERSION="12.3.0";function initializeApp(_options,rawConfig={}){let options=_options;if("object"!=typeof rawConfig){rawConfig={name:rawConfig}}const config={name:DEFAULT_ENTRY_NAME,automaticDataCollectionEnabled:!0,...rawConfig},name=config.name;if("string"!=typeof name||!name)throw ERROR_FACTORY.create("bad-app-name",{appName:String(name)});if(options||(options=(0,dist_index_esm.T9)()),!options)throw ERROR_FACTORY.create("no-options");const existingApp=_apps.get(name);if(existingApp){if((0,dist_index_esm.bD)(options,existingApp.options)&&(0,dist_index_esm.bD)(config,existingApp.config))return existingApp;throw ERROR_FACTORY.create("duplicate-app",{appName:name})}const container=new index_esm.h1(name);for(const component of _components.values())container.addComponent(component);const newApp=new FirebaseAppImpl(options,config,container);return _apps.set(name,newApp),newApp}function getApp(name=DEFAULT_ENTRY_NAME){const app=_apps.get(name);if(!app&&name===DEFAULT_ENTRY_NAME&&(0,dist_index_esm.T9)())return initializeApp();if(!app)throw ERROR_FACTORY.create("no-app",{appName:name});return app}function registerVersion(libraryKeyOrName,version,variant){let library=PLATFORM_LOG_STRING[libraryKeyOrName]??libraryKeyOrName;variant&&(library+=`-${variant}`);const libraryMismatch=library.match(/\s|\//),versionMismatch=version.match(/\s|\//);if(libraryMismatch||versionMismatch){const warning=[`Unable to register library "${library}" with version "${version}":`];return libraryMismatch&&warning.push(`library name "${library}" contains illegal characters (whitespace or "/")`),libraryMismatch&&versionMismatch&&warning.push("and"),versionMismatch&&warning.push(`version name "${version}" contains illegal characters (whitespace or "/")`),void logger.warn(warning.join(" "))}_registerComponent(new index_esm.uA(`${library}-version`,()=>({library,version}),"VERSION"))}const STORE_NAME="firebase-heartbeat-store";let dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=function openDB(name,version,{blocked,upgrade,blocking,terminated}={}){const request=indexedDB.open(name,version),openPromise=wrap_idb_value_wrap(request);return upgrade&&request.addEventListener("upgradeneeded",event=>{upgrade(wrap_idb_value_wrap(request.result),event.oldVersion,event.newVersion,wrap_idb_value_wrap(request.transaction),event)}),blocked&&request.addEventListener("blocked",event=>blocked(event.oldVersion,event.newVersion,event)),openPromise.then(db=>{terminated&&db.addEventListener("close",()=>terminated()),blocking&&db.addEventListener("versionchange",event=>blocking(event.oldVersion,event.newVersion,event))}).catch(()=>{}),openPromise}("firebase-heartbeat-database",1,{upgrade:(db,oldVersion)=>{if(0===oldVersion)try{db.createObjectStore(STORE_NAME)}catch(e){console.warn(e)}}}).catch(e=>{throw ERROR_FACTORY.create("idb-open",{originalErrorMessage:e.message})})),dbPromise}async function writeHeartbeatsToIndexedDB(app,heartbeatObject){try{const tx=(await getDbPromise()).transaction(STORE_NAME,"readwrite"),objectStore=tx.objectStore(STORE_NAME);await objectStore.put(heartbeatObject,computeKey(app)),await tx.done}catch(e){if(e instanceof dist_index_esm.g)logger.warn(e.message);else{const idbGetError=ERROR_FACTORY.create("idb-set",{originalErrorMessage:e?.message});logger.warn(idbGetError.message)}}}function computeKey(app){return`${app.name}!${app.options.appId}`}class HeartbeatServiceImpl{constructor(container){this.container=container,this._heartbeatsCache=null;const app=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(app),this._heartbeatsCachePromise=this._storage.read().then(result=>(this._heartbeatsCache=result,result))}async triggerHeartbeat(){try{const agent=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),date=getUTCDateString();if(null==this._heartbeatsCache?.heartbeats&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==this._heartbeatsCache?.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===date||this._heartbeatsCache.heartbeats.some(singleDateHeartbeat=>singleDateHeartbeat.date===date))return;if(this._heartbeatsCache.heartbeats.push({date,agent}),this._heartbeatsCache.heartbeats.length>30){const earliestHeartbeatIdx=function getEarliestHeartbeatIdx(heartbeats){if(0===heartbeats.length)return-1;let earliestHeartbeatIdx=0,earliestHeartbeatDate=heartbeats[0].date;for(let i=1;i<heartbeats.length;i++)heartbeats[i].date<earliestHeartbeatDate&&(earliestHeartbeatDate=heartbeats[i].date,earliestHeartbeatIdx=i);return earliestHeartbeatIdx}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(earliestHeartbeatIdx,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){logger.warn(e)}}async getHeartbeatsHeader(){try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==this._heartbeatsCache?.heartbeats||0===this._heartbeatsCache.heartbeats.length)return"";const date=getUTCDateString(),{heartbeatsToSend,unsentEntries}=function extractHeartbeatsForHeader(heartbeatsCache,maxSize=1024){const heartbeatsToSend=[];let unsentEntries=heartbeatsCache.slice();for(const singleDateHeartbeat of heartbeatsCache){const heartbeatEntry=heartbeatsToSend.find(hb=>hb.agent===singleDateHeartbeat.agent);if(heartbeatEntry){if(heartbeatEntry.dates.push(singleDateHeartbeat.date),countBytes(heartbeatsToSend)>maxSize){heartbeatEntry.dates.pop();break}}else if(heartbeatsToSend.push({agent:singleDateHeartbeat.agent,dates:[singleDateHeartbeat.date]}),countBytes(heartbeatsToSend)>maxSize){heartbeatsToSend.pop();break}unsentEntries=unsentEntries.slice(1)}return{heartbeatsToSend,unsentEntries}}(this._heartbeatsCache.heartbeats),headerString=(0,dist_index_esm.Uj)(JSON.stringify({version:2,heartbeats:heartbeatsToSend}));return this._heartbeatsCache.lastSentHeartbeatDate=date,unsentEntries.length>0?(this._heartbeatsCache.heartbeats=unsentEntries,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),headerString}catch(e){return logger.warn(e),""}}}function getUTCDateString(){return(new Date).toISOString().substring(0,10)}class HeartbeatStorageImpl{constructor(app){this.app=app,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,dist_index_esm.zW)()&&(0,dist_index_esm.eX)().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const idbHeartbeatObject=await async function readHeartbeatsFromIndexedDB(app){try{const tx=(await getDbPromise()).transaction(STORE_NAME),result=await tx.objectStore(STORE_NAME).get(computeKey(app));return await tx.done,result}catch(e){if(e instanceof dist_index_esm.g)logger.warn(e.message);else{const idbGetError=ERROR_FACTORY.create("idb-get",{originalErrorMessage:e?.message});logger.warn(idbGetError.message)}}}(this.app);return idbHeartbeatObject?.heartbeats?idbHeartbeatObject:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(heartbeatsObject){if(await this._canUseIndexedDBPromise){const existingHeartbeatsObject=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:heartbeatsObject.lastSentHeartbeatDate??existingHeartbeatsObject.lastSentHeartbeatDate,heartbeats:heartbeatsObject.heartbeats})}}async add(heartbeatsObject){if(await this._canUseIndexedDBPromise){const existingHeartbeatsObject=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:heartbeatsObject.lastSentHeartbeatDate??existingHeartbeatsObject.lastSentHeartbeatDate,heartbeats:[...existingHeartbeatsObject.heartbeats,...heartbeatsObject.heartbeats]})}}}function countBytes(heartbeatsCache){return(0,dist_index_esm.Uj)(JSON.stringify({version:2,heartbeats:heartbeatsCache})).length}!function registerCoreComponents(variant){_registerComponent(new index_esm.uA("platform-logger",container=>new PlatformLoggerServiceImpl(container),"PRIVATE")),_registerComponent(new index_esm.uA("heartbeat",container=>new HeartbeatServiceImpl(container),"PRIVATE")),registerVersion(name$q,"0.14.3",variant),registerVersion(name$q,"0.14.3","esm2020"),registerVersion("fire-js","")}("")},"./node_modules/@firebase/component/dist/esm/index.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{h1:()=>ComponentContainer,uA:()=>Component});var _firebase_util__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@firebase/util/dist/index.esm.js");class Component{constructor(name,instanceFactory,type){this.name=name,this.instanceFactory=instanceFactory,this.type=type,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(mode){return this.instantiationMode=mode,this}setMultipleInstances(multipleInstances){return this.multipleInstances=multipleInstances,this}setServiceProps(props){return this.serviceProps=props,this}setInstanceCreatedCallback(callback){return this.onInstanceCreated=callback,this}}class Provider{constructor(name,container){this.name=name,this.container=container,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(identifier){const normalizedIdentifier=this.normalizeInstanceIdentifier(identifier);if(!this.instancesDeferred.has(normalizedIdentifier)){const deferred=new _firebase_util__WEBPACK_IMPORTED_MODULE_0__.cY;if(this.instancesDeferred.set(normalizedIdentifier,deferred),this.isInitialized(normalizedIdentifier)||this.shouldAutoInitialize())try{const instance=this.getOrInitializeService({instanceIdentifier:normalizedIdentifier});instance&&deferred.resolve(instance)}catch(e){}}return this.instancesDeferred.get(normalizedIdentifier).promise}getImmediate(options){const normalizedIdentifier=this.normalizeInstanceIdentifier(options?.identifier),optional=options?.optional??!1;if(!this.isInitialized(normalizedIdentifier)&&!this.shouldAutoInitialize()){if(optional)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:normalizedIdentifier})}catch(e){if(optional)return null;throw e}}getComponent(){return this.component}setComponent(component){if(component.name!==this.name)throw Error(`Mismatching Component ${component.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=component,this.shouldAutoInitialize()){if(function isComponentEager(component){return"EAGER"===component.instantiationMode}(component))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(e){}for(const[instanceIdentifier,instanceDeferred]of this.instancesDeferred.entries()){const normalizedIdentifier=this.normalizeInstanceIdentifier(instanceIdentifier);try{const instance=this.getOrInitializeService({instanceIdentifier:normalizedIdentifier});instanceDeferred.resolve(instance)}catch(e){}}}}clearInstance(identifier="[DEFAULT]"){this.instancesDeferred.delete(identifier),this.instancesOptions.delete(identifier),this.instances.delete(identifier)}async delete(){const services=Array.from(this.instances.values());await Promise.all([...services.filter(service=>"INTERNAL"in service).map(service=>service.INTERNAL.delete()),...services.filter(service=>"_delete"in service).map(service=>service._delete())])}isComponentSet(){return null!=this.component}isInitialized(identifier="[DEFAULT]"){return this.instances.has(identifier)}getOptions(identifier="[DEFAULT]"){return this.instancesOptions.get(identifier)||{}}initialize(opts={}){const{options={}}=opts,normalizedIdentifier=this.normalizeInstanceIdentifier(opts.instanceIdentifier);if(this.isInitialized(normalizedIdentifier))throw Error(`${this.name}(${normalizedIdentifier}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const instance=this.getOrInitializeService({instanceIdentifier:normalizedIdentifier,options});for(const[instanceIdentifier,instanceDeferred]of this.instancesDeferred.entries()){normalizedIdentifier===this.normalizeInstanceIdentifier(instanceIdentifier)&&instanceDeferred.resolve(instance)}return instance}onInit(callback,identifier){const normalizedIdentifier=this.normalizeInstanceIdentifier(identifier),existingCallbacks=this.onInitCallbacks.get(normalizedIdentifier)??new Set;existingCallbacks.add(callback),this.onInitCallbacks.set(normalizedIdentifier,existingCallbacks);const existingInstance=this.instances.get(normalizedIdentifier);return existingInstance&&callback(existingInstance,normalizedIdentifier),()=>{existingCallbacks.delete(callback)}}invokeOnInitCallbacks(instance,identifier){const callbacks=this.onInitCallbacks.get(identifier);if(callbacks)for(const callback of callbacks)try{callback(instance,identifier)}catch{}}getOrInitializeService({instanceIdentifier,options={}}){let instance=this.instances.get(instanceIdentifier);if(!instance&&this.component&&(instance=this.component.instanceFactory(this.container,{instanceIdentifier:(identifier=instanceIdentifier,"[DEFAULT]"===identifier?void 0:identifier),options}),this.instances.set(instanceIdentifier,instance),this.instancesOptions.set(instanceIdentifier,options),this.invokeOnInitCallbacks(instance,instanceIdentifier),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,instanceIdentifier,instance)}catch{}var identifier;return instance||null}normalizeInstanceIdentifier(identifier="[DEFAULT]"){return this.component?this.component.multipleInstances?identifier:"[DEFAULT]":identifier}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ComponentContainer{constructor(name){this.name=name,this.providers=new Map}addComponent(component){const provider=this.getProvider(component.name);if(provider.isComponentSet())throw new Error(`Component ${component.name} has already been registered with ${this.name}`);provider.setComponent(component)}addOrOverwriteComponent(component){this.getProvider(component.name).isComponentSet()&&this.providers.delete(component.name),this.addComponent(component)}getProvider(name){if(this.providers.has(name))return this.providers.get(name);const provider=new Provider(name,this);return this.providers.set(name,provider),provider}getProviders(){return Array.from(this.providers.values())}}},"./node_modules/@firebase/logger/dist/esm/index.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$b:()=>LogLevel,Vy:()=>Logger});const instances=[];var LogLevel;!function(LogLevel){LogLevel[LogLevel.DEBUG=0]="DEBUG",LogLevel[LogLevel.VERBOSE=1]="VERBOSE",LogLevel[LogLevel.INFO=2]="INFO",LogLevel[LogLevel.WARN=3]="WARN",LogLevel[LogLevel.ERROR=4]="ERROR",LogLevel[LogLevel.SILENT=5]="SILENT"}(LogLevel||(LogLevel={}));const levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod={[LogLevel.DEBUG]:"log",[LogLevel.VERBOSE]:"log",[LogLevel.INFO]:"info",[LogLevel.WARN]:"warn",[LogLevel.ERROR]:"error"},defaultLogHandler=(instance,logType,...args)=>{if(logType<instance.logLevel)return;const now=(new Date).toISOString(),method=ConsoleMethod[logType];if(!method)throw new Error(`Attempted to log a message with an invalid logType (value: ${logType})`);console[method](`[${now}]  ${instance.name}:`,...args)};class Logger{constructor(name){this.name=name,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null,instances.push(this)}get logLevel(){return this._logLevel}set logLevel(val){if(!(val in LogLevel))throw new TypeError(`Invalid value "${val}" assigned to \`logLevel\``);this._logLevel=val}setLogLevel(val){this._logLevel="string"==typeof val?levelStringToEnum[val]:val}get logHandler(){return this._logHandler}set logHandler(val){if("function"!=typeof val)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=val}get userLogHandler(){return this._userLogHandler}set userLogHandler(val){this._userLogHandler=val}debug(...args){this._userLogHandler&&this._userLogHandler(this,LogLevel.DEBUG,...args),this._logHandler(this,LogLevel.DEBUG,...args)}log(...args){this._userLogHandler&&this._userLogHandler(this,LogLevel.VERBOSE,...args),this._logHandler(this,LogLevel.VERBOSE,...args)}info(...args){this._userLogHandler&&this._userLogHandler(this,LogLevel.INFO,...args),this._logHandler(this,LogLevel.INFO,...args)}warn(...args){this._userLogHandler&&this._userLogHandler(this,LogLevel.WARN,...args),this._logHandler(this,LogLevel.WARN,...args)}error(...args){this._userLogHandler&&this._userLogHandler(this,LogLevel.ERROR,...args),this._logHandler(this,LogLevel.ERROR,...args)}}},"./node_modules/@firebase/util/dist/index.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{cY:()=>Deferred,FA:()=>ErrorFactory,g:()=>FirebaseError,gz:()=>Sha1,vA:()=>assert,Hk:()=>assertionError,K3:()=>base64,u:()=>base64Decode,KA:()=>base64Encode,Uj:()=>base64urlEncodeWithoutPadding,gR:()=>contains,Fy:()=>createMockUserToken,tD:()=>createSubscribe,A4:()=>deepCopy,bD:()=>deepEqual,dI:()=>errorPrefix,hp:()=>extractQuerystring,T9:()=>getDefaultAppConfig,Tj:()=>getDefaultEmulatorHost,yU:()=>getDefaultEmulatorHostnameAndPort,XA:()=>getExperimentalSetting,mS:()=>getGlobal,Ku:()=>getModularInstance,ZQ:()=>getUA,qc:()=>isAdmin,sr:()=>isBrowserExtension,zJ:()=>isCloudWorkstation,c1:()=>isCloudflareWorker,Im:()=>isEmpty,lT:()=>isIE,zW:()=>isIndexedDBAvailable,jZ:()=>isMobileCordova,$g:()=>isNodeSdk,lV:()=>isReactNative,nr:()=>isSafari,Ov:()=>isSafariOrWebkit,Cv:()=>isValidFormat,$L:()=>jsonEval,kH:()=>map,gE:()=>pingServer,Am:()=>querystring,I9:()=>querystringDecode,yw:()=>safeGet,OE:()=>stringLength,kj:()=>stringToByteArray,As:()=>stringify,P1:()=>updateEmulatorBanner,eX:()=>validateIndexedDBOpenable});var process=__webpack_require__("./node_modules/process/browser.js");const CONSTANTS={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},assert=function(assertion,message){if(!assertion)throw assertionError(message)},assertionError=function(message){return new Error("Firebase Database ("+CONSTANTS.SDK_VERSION+") INTERNAL ASSERT FAILED: "+message)},stringToByteArray$1=function(str){const out=[];let p=0;for(let i=0;i<str.length;i++){let c=str.charCodeAt(i);c<128?out[p++]=c:c<2048?(out[p++]=c>>6|192,out[p++]=63&c|128):55296==(64512&c)&&i+1<str.length&&56320==(64512&str.charCodeAt(i+1))?(c=65536+((1023&c)<<10)+(1023&str.charCodeAt(++i)),out[p++]=c>>18|240,out[p++]=c>>12&63|128,out[p++]=c>>6&63|128,out[p++]=63&c|128):(out[p++]=c>>12|224,out[p++]=c>>6&63|128,out[p++]=63&c|128)}return out},base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(input,webSafe){if(!Array.isArray(input))throw Error("encodeByteArray takes an array as a parameter");this.init_();const byteToCharMap=webSafe?this.byteToCharMapWebSafe_:this.byteToCharMap_,output=[];for(let i=0;i<input.length;i+=3){const byte1=input[i],haveByte2=i+1<input.length,byte2=haveByte2?input[i+1]:0,haveByte3=i+2<input.length,byte3=haveByte3?input[i+2]:0,outByte1=byte1>>2,outByte2=(3&byte1)<<4|byte2>>4;let outByte3=(15&byte2)<<2|byte3>>6,outByte4=63&byte3;haveByte3||(outByte4=64,haveByte2||(outByte3=64)),output.push(byteToCharMap[outByte1],byteToCharMap[outByte2],byteToCharMap[outByte3],byteToCharMap[outByte4])}return output.join("")},encodeString(input,webSafe){return this.HAS_NATIVE_SUPPORT&&!webSafe?btoa(input):this.encodeByteArray(stringToByteArray$1(input),webSafe)},decodeString(input,webSafe){return this.HAS_NATIVE_SUPPORT&&!webSafe?atob(input):function(bytes){const out=[];let pos=0,c=0;for(;pos<bytes.length;){const c1=bytes[pos++];if(c1<128)out[c++]=String.fromCharCode(c1);else if(c1>191&&c1<224){const c2=bytes[pos++];out[c++]=String.fromCharCode((31&c1)<<6|63&c2)}else if(c1>239&&c1<365){const u=((7&c1)<<18|(63&bytes[pos++])<<12|(63&bytes[pos++])<<6|63&bytes[pos++])-65536;out[c++]=String.fromCharCode(55296+(u>>10)),out[c++]=String.fromCharCode(56320+(1023&u))}else{const c2=bytes[pos++],c3=bytes[pos++];out[c++]=String.fromCharCode((15&c1)<<12|(63&c2)<<6|63&c3)}}return out.join("")}(this.decodeStringToByteArray(input,webSafe))},decodeStringToByteArray(input,webSafe){this.init_();const charToByteMap=webSafe?this.charToByteMapWebSafe_:this.charToByteMap_,output=[];for(let i=0;i<input.length;){const byte1=charToByteMap[input.charAt(i++)],byte2=i<input.length?charToByteMap[input.charAt(i)]:0;++i;const byte3=i<input.length?charToByteMap[input.charAt(i)]:64;++i;const byte4=i<input.length?charToByteMap[input.charAt(i)]:64;if(++i,null==byte1||null==byte2||null==byte3||null==byte4)throw new DecodeBase64StringError;const outByte1=byte1<<2|byte2>>4;if(output.push(outByte1),64!==byte3){const outByte2=byte2<<4&240|byte3>>2;if(output.push(outByte2),64!==byte4){const outByte3=byte3<<6&192|byte4;output.push(outByte3)}}}return output},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const base64Encode=function(str){const utf8Bytes=stringToByteArray$1(str);return base64.encodeByteArray(utf8Bytes,!0)},base64urlEncodeWithoutPadding=function(str){return base64Encode(str).replace(/\./g,"")},base64Decode=function(str){try{return base64.decodeString(str,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function deepCopy(value){return deepExtend(void 0,value)}function deepExtend(target,source){if(!(source instanceof Object))return source;switch(source.constructor){case Date:return new Date(source.getTime());case Object:void 0===target&&(target={});break;case Array:target=[];break;default:return source}for(const prop in source)source.hasOwnProperty(prop)&&isValidKey(prop)&&(target[prop]=deepExtend(target[prop],source[prop]));return target}function isValidKey(key){return"__proto__"!==key}function getGlobal(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==__webpack_require__.g)return __webpack_require__.g;throw new Error("Unable to locate global object.")}const getDefaults=()=>{try{return getGlobal().__FIREBASE_DEFAULTS__||(()=>{if(void 0===process||void 0===process.env)return;const defaultsJsonString=process.env.__FIREBASE_DEFAULTS__;return defaultsJsonString?JSON.parse(defaultsJsonString):void 0})()||(()=>{if("undefined"==typeof document)return;let match;try{match=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const decoded=match&&base64Decode(match[1]);return decoded&&JSON.parse(decoded)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},getDefaultEmulatorHost=productName=>getDefaults()?.emulatorHosts?.[productName],getDefaultEmulatorHostnameAndPort=productName=>{const host=getDefaultEmulatorHost(productName);if(!host)return;const separatorIndex=host.lastIndexOf(":");if(separatorIndex<=0||separatorIndex+1===host.length)throw new Error(`Invalid host ${host} with no separate hostname and port!`);const port=parseInt(host.substring(separatorIndex+1),10);return"["===host[0]?[host.substring(1,separatorIndex-1),port]:[host.substring(0,separatorIndex),port]},getDefaultAppConfig=()=>getDefaults()?.config,getExperimentalSetting=name=>getDefaults()?.[`_${name}`];class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((resolve,reject)=>{this.resolve=resolve,this.reject=reject})}wrapCallback(callback){return(error,value)=>{error?this.reject(error):this.resolve(value),"function"==typeof callback&&(this.promise.catch(()=>{}),1===callback.length?callback(error):callback(error,value))}}}function isCloudWorkstation(url){try{return(url.startsWith("http://")||url.startsWith("https://")?new URL(url).hostname:url).endsWith(".cloudworkstations.dev")}catch{return!1}}async function pingServer(endpoint){return(await fetch(endpoint,{credentials:"include"})).ok}function createMockUserToken(token,projectId){if(token.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const project=projectId||"demo-project",iat=token.iat||0,sub=token.sub||token.user_id;if(!sub)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const payload={iss:`https://securetoken.google.com/${project}`,aud:project,iat,exp:iat+3600,auth_time:iat,sub,user_id:sub,firebase:{sign_in_provider:"custom",identities:{}},...token};return[base64urlEncodeWithoutPadding(JSON.stringify({alg:"none",type:"JWT"})),base64urlEncodeWithoutPadding(JSON.stringify(payload)),""].join(".")}const emulatorStatus={};let previouslyDismissed=!1;function updateEmulatorBanner(name,isRunningEmulator){if("undefined"==typeof window||"undefined"==typeof document||!isCloudWorkstation(window.location.host)||emulatorStatus[name]===isRunningEmulator||emulatorStatus[name]||previouslyDismissed)return;function prefixedId(id){return`__firebase__banner__${id}`}emulatorStatus[name]=isRunningEmulator;const showError=function getEmulatorSummary(){const summary={prod:[],emulator:[]};for(const key of Object.keys(emulatorStatus))emulatorStatus[key]?summary.emulator.push(key):summary.prod.push(key);return summary}().prod.length>0;function setupCloseBtn(){const closeBtn=document.createElement("span");return closeBtn.style.cursor="pointer",closeBtn.style.marginLeft="16px",closeBtn.style.fontSize="24px",closeBtn.innerHTML=" &times;",closeBtn.onclick=()=>{previouslyDismissed=!0,function tearDown(){const element=document.getElementById("__firebase__banner");element&&element.remove()}()},closeBtn}function setupDom(){const banner=function getOrCreateEl(id){let parentDiv=document.getElementById(id),created=!1;return parentDiv||(parentDiv=document.createElement("div"),parentDiv.setAttribute("id",id),created=!0),{created,element:parentDiv}}("__firebase__banner"),firebaseTextId=prefixedId("text"),firebaseText=document.getElementById(firebaseTextId)||document.createElement("span"),learnMoreId=prefixedId("learnmore"),learnMoreLink=document.getElementById(learnMoreId)||document.createElement("a"),prependIconId=prefixedId("preprendIcon"),prependIcon=document.getElementById(prependIconId)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(banner.created){const bannerEl=banner.element;!function setupBannerStyles(bannerEl){bannerEl.style.display="flex",bannerEl.style.background="#7faaf0",bannerEl.style.position="fixed",bannerEl.style.bottom="5px",bannerEl.style.left="5px",bannerEl.style.padding=".5em",bannerEl.style.borderRadius="5px",bannerEl.style.alignItems="center"}(bannerEl),function setupLinkStyles(learnMoreLink,learnMoreId){learnMoreLink.setAttribute("id",learnMoreId),learnMoreLink.innerText="Learn more",learnMoreLink.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",learnMoreLink.setAttribute("target","__blank"),learnMoreLink.style.paddingLeft="5px",learnMoreLink.style.textDecoration="underline"}(learnMoreLink,learnMoreId);const closeBtn=setupCloseBtn();!function setupIconStyles(prependIcon,iconId){prependIcon.setAttribute("width","24"),prependIcon.setAttribute("id",iconId),prependIcon.setAttribute("height","24"),prependIcon.setAttribute("viewBox","0 0 24 24"),prependIcon.setAttribute("fill","none"),prependIcon.style.marginLeft="-6px"}(prependIcon,prependIconId),bannerEl.append(prependIcon,firebaseText,learnMoreLink,closeBtn),document.body.appendChild(bannerEl)}showError?(firebaseText.innerText="Preview backend disconnected.",prependIcon.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(prependIcon.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',firebaseText.innerText="Preview backend running in this workspace."),firebaseText.setAttribute("id",firebaseTextId)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",setupDom):setupDom()}function getUA(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function isMobileCordova(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())}function isNode(){const forceEnvironment=getDefaults()?.forceEnvironment;if("node"===forceEnvironment)return!0;if("browser"===forceEnvironment)return!1;try{return"[object process]"===Object.prototype.toString.call(__webpack_require__.g.process)}catch(e){return!1}}function isCloudflareWorker(){return"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent}function isBrowserExtension(){const runtime="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof runtime&&void 0!==runtime.id}function isReactNative(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function isIE(){const ua=getUA();return ua.indexOf("MSIE ")>=0||ua.indexOf("Trident/")>=0}function isNodeSdk(){return!0===CONSTANTS.NODE_CLIENT||!0===CONSTANTS.NODE_ADMIN}function isSafari(){return!isNode()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function isSafariOrWebkit(){return!isNode()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function isIndexedDBAvailable(){try{return"object"==typeof indexedDB}catch(e){return!1}}function validateIndexedDBOpenable(){return new Promise((resolve,reject)=>{try{let preExist=!0;const DB_CHECK_NAME="validate-browser-context-for-indexeddb-analytics-module",request=self.indexedDB.open(DB_CHECK_NAME);request.onsuccess=()=>{request.result.close(),preExist||self.indexedDB.deleteDatabase(DB_CHECK_NAME),resolve(!0)},request.onupgradeneeded=()=>{preExist=!1},request.onerror=()=>{reject(request.error?.message||"")}}catch(error){reject(error)}})}class FirebaseError extends Error{constructor(code,message,customData){super(message),this.code=code,this.customData=customData,this.name="FirebaseError",Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(service,serviceName,errors){this.service=service,this.serviceName=serviceName,this.errors=errors}create(code,...data){const customData=data[0]||{},fullCode=`${this.service}/${code}`,template=this.errors[code],message=template?function replaceTemplate(template,data){return template.replace(PATTERN,(_,key)=>{const value=data[key];return null!=value?String(value):`<${key}?>`})}(template,customData):"Error",fullMessage=`${this.serviceName}: ${message} (${fullCode}).`;return new FirebaseError(fullCode,fullMessage,customData)}}const PATTERN=/\{\$([^}]+)}/g;function jsonEval(str){return JSON.parse(str)}function stringify(data){return JSON.stringify(data)}const decode=function(token){let header={},claims={},data={},signature="";try{const parts=token.split(".");header=jsonEval(base64Decode(parts[0])||""),claims=jsonEval(base64Decode(parts[1])||""),signature=parts[2],data=claims.d||{},delete claims.d}catch(e){}return{header,claims,data,signature}},isValidFormat=function(token){const claims=decode(token).claims;return!!claims&&"object"==typeof claims&&claims.hasOwnProperty("iat")},isAdmin=function(token){const claims=decode(token).claims;return"object"==typeof claims&&!0===claims.admin};function contains(obj,key){return Object.prototype.hasOwnProperty.call(obj,key)}function safeGet(obj,key){return Object.prototype.hasOwnProperty.call(obj,key)?obj[key]:void 0}function isEmpty(obj){for(const key in obj)if(Object.prototype.hasOwnProperty.call(obj,key))return!1;return!0}function map(obj,fn,contextObj){const res={};for(const key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(res[key]=fn.call(contextObj,obj[key],key,obj));return res}function deepEqual(a,b){if(a===b)return!0;const aKeys=Object.keys(a),bKeys=Object.keys(b);for(const k of aKeys){if(!bKeys.includes(k))return!1;const aProp=a[k],bProp=b[k];if(isObject(aProp)&&isObject(bProp)){if(!deepEqual(aProp,bProp))return!1}else if(aProp!==bProp)return!1}for(const k of bKeys)if(!aKeys.includes(k))return!1;return!0}function isObject(thing){return null!==thing&&"object"==typeof thing}function querystring(querystringParams){const params=[];for(const[key,value]of Object.entries(querystringParams))Array.isArray(value)?value.forEach(arrayVal=>{params.push(encodeURIComponent(key)+"="+encodeURIComponent(arrayVal))}):params.push(encodeURIComponent(key)+"="+encodeURIComponent(value));return params.length?"&"+params.join("&"):""}function querystringDecode(querystring){const obj={};return querystring.replace(/^\?/,"").split("&").forEach(token=>{if(token){const[key,value]=token.split("=");obj[decodeURIComponent(key)]=decodeURIComponent(value)}}),obj}function extractQuerystring(url){const queryStart=url.indexOf("?");if(!queryStart)return"";const fragmentStart=url.indexOf("#",queryStart);return url.substring(queryStart,fragmentStart>0?fragmentStart:void 0)}class Sha1{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let i=1;i<this.blockSize;++i)this.pad_[i]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(buf,offset){offset||(offset=0);const W=this.W_;if("string"==typeof buf)for(let i=0;i<16;i++)W[i]=buf.charCodeAt(offset)<<24|buf.charCodeAt(offset+1)<<16|buf.charCodeAt(offset+2)<<8|buf.charCodeAt(offset+3),offset+=4;else for(let i=0;i<16;i++)W[i]=buf[offset]<<24|buf[offset+1]<<16|buf[offset+2]<<8|buf[offset+3],offset+=4;for(let i=16;i<80;i++){const t=W[i-3]^W[i-8]^W[i-14]^W[i-16];W[i]=4294967295&(t<<1|t>>>31)}let f,k,a=this.chain_[0],b=this.chain_[1],c=this.chain_[2],d=this.chain_[3],e=this.chain_[4];for(let i=0;i<80;i++){i<40?i<20?(f=d^b&(c^d),k=1518500249):(f=b^c^d,k=1859775393):i<60?(f=b&c|d&(b|c),k=2400959708):(f=b^c^d,k=3395469782);const t=(a<<5|a>>>27)+f+e+k+W[i]&4294967295;e=d,d=c,c=4294967295&(b<<30|b>>>2),b=a,a=t}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+b&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+d&4294967295,this.chain_[4]=this.chain_[4]+e&4294967295}update(bytes,length){if(null==bytes)return;void 0===length&&(length=bytes.length);const lengthMinusBlock=length-this.blockSize;let n=0;const buf=this.buf_;let inbuf=this.inbuf_;for(;n<length;){if(0===inbuf)for(;n<=lengthMinusBlock;)this.compress_(bytes,n),n+=this.blockSize;if("string"==typeof bytes){for(;n<length;)if(buf[inbuf]=bytes.charCodeAt(n),++inbuf,++n,inbuf===this.blockSize){this.compress_(buf),inbuf=0;break}}else for(;n<length;)if(buf[inbuf]=bytes[n],++inbuf,++n,inbuf===this.blockSize){this.compress_(buf),inbuf=0;break}}this.inbuf_=inbuf,this.total_+=length}digest(){const digest=[];let totalBits=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&totalBits,totalBits/=256;this.compress_(this.buf_);let n=0;for(let i=0;i<5;i++)for(let j=24;j>=0;j-=8)digest[n]=this.chain_[i]>>j&255,++n;return digest}}function createSubscribe(executor,onNoObservers){const proxy=new ObserverProxy(executor,onNoObservers);return proxy.subscribe.bind(proxy)}class ObserverProxy{constructor(executor,onNoObservers){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=onNoObservers,this.task.then(()=>{executor(this)}).catch(e=>{this.error(e)})}next(value){this.forEachObserver(observer=>{observer.next(value)})}error(error){this.forEachObserver(observer=>{observer.error(error)}),this.close(error)}complete(){this.forEachObserver(observer=>{observer.complete()}),this.close()}subscribe(nextOrObserver,error,complete){let observer;if(void 0===nextOrObserver&&void 0===error&&void 0===complete)throw new Error("Missing Observer.");observer=function implementsAnyMethods(obj,methods){if("object"!=typeof obj||null===obj)return!1;for(const method of methods)if(method in obj&&"function"==typeof obj[method])return!0;return!1}(nextOrObserver,["next","error","complete"])?nextOrObserver:{next:nextOrObserver,error,complete},void 0===observer.next&&(observer.next=noop),void 0===observer.error&&(observer.error=noop),void 0===observer.complete&&(observer.complete=noop);const unsub=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?observer.error(this.finalError):observer.complete()}catch(e){}}),this.observers.push(observer),unsub}unsubscribeOne(i){void 0!==this.observers&&void 0!==this.observers[i]&&(delete this.observers[i],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(fn){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,fn)}sendOne(i,fn){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[i])try{fn(this.observers[i])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})}close(err){this.finalized||(this.finalized=!0,void 0!==err&&(this.finalError=err),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function noop(){}function errorPrefix(fnName,argName){return`${fnName} failed: ${argName} argument `}const stringToByteArray=function(str){const out=[];let p=0;for(let i=0;i<str.length;i++){let c=str.charCodeAt(i);if(c>=55296&&c<=56319){const high=c-55296;i++,assert(i<str.length,"Surrogate pair missing trail surrogate.");c=65536+(high<<10)+(str.charCodeAt(i)-56320)}c<128?out[p++]=c:c<2048?(out[p++]=c>>6|192,out[p++]=63&c|128):c<65536?(out[p++]=c>>12|224,out[p++]=c>>6&63|128,out[p++]=63&c|128):(out[p++]=c>>18|240,out[p++]=c>>12&63|128,out[p++]=c>>6&63|128,out[p++]=63&c|128)}return out},stringLength=function(str){let p=0;for(let i=0;i<str.length;i++){const c=str.charCodeAt(i);c<128?p++:c<2048?p+=2:c>=55296&&c<=56319?(p+=4,i++):p+=3}return p};function getModularInstance(service){return service&&service._delegate?service._delegate:service}},"./node_modules/emoji-picker-react/dist/emoji-picker-react.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>emoji_picker_react_esm});var react=__webpack_require__("./node_modules/react/index.js");function asArray(v){return[].concat(v)}function isPsuedoSelector(selector){return selector.startsWith(":")}function isStyleCondition(selector){return isString(selector)&&("*"===selector||selector.length>1&&":>~.+*".includes(selector.slice(0,1))||isImmediatePostcondition(selector))}function isValidProperty(property,value){return(isString(value)||"number"==typeof value)&&!isCssVariables(property)&&!isPsuedoSelector(property)&&!isMediaQuery(property)}function isMediaQuery(selector){return selector.startsWith("@media")}function isCssVariables(selector){return"--"===selector}function isString(value){return value+""===value}function isImmediatePostcondition(value){return isString(value)&&(value.startsWith("&")||isPsuedoSelector(value))}function joinTruthy(arr,delimiter=""){return arr.filter(Boolean).join(delimiter)}function stableHash(prefix,seed){let hash=0;if(0===seed.length)return hash.toString();for(let i=0;i<seed.length;i++){hash=(hash<<5)-hash+seed.charCodeAt(i),hash&=hash}return`${prefix??"cl"}_${hash.toString(36)}`}function joinedProperty(property,value){return`${property}:${value}`}var Rule=class _Rule{constructor(sheet,property,value,selector){this.sheet=sheet,this.property=property,this.value=value,this.selector=selector,this.property=property,this.value=value,this.joined=joinedProperty(property,value);const joinedConditions=this.selector.preconditions.concat(this.selector.postconditions);this.hash=this.selector.hasConditions?this.selector.scopeClassName:stableHash(this.sheet.name,this.joined),this.key=joinTruthy([this.joined,joinedConditions,this.hash])}toString(){let selectors=mergeSelectors(this.selector.preconditions,{right:this.hash});return selectors=mergeSelectors(this.selector.postconditions,{left:selectors}),`${selectors} {${_Rule.genRule(this.property,this.value)}}`}static genRule(property,value){return joinedProperty(function camelCaseToDash(str){return str.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}(property),function handlePropertyValue(property,value){return"content"===property?`"${value}"`:value}(property,value))+";"}};function mergeSelectors(selectors,{left="",right=""}={}){const output=selectors.reduce((selectors2,current)=>isPsuedoSelector(current)?selectors2+current:isImmediatePostcondition(current)?selectors2+current.slice(1):joinTruthy([selectors2,current]," "),left);return joinTruthy([output,(str=right,str?`.${str}`:"")]," ");var str}var ClassNames,Selector=class _Selector{constructor(sheet,scopeName=null,{preconditions,postconditions}={}){this.sheet=sheet,this.preconditions=[],this.scopeClassName=null,this.scopeName=null,this.postconditions=[],this.preconditions=preconditions?asArray(preconditions):[],this.postconditions=postconditions?asArray(postconditions):[],this.setScope(scopeName)}setScope(scopeName){return scopeName?(this.scopeClassName||(this.scopeName=scopeName,this.scopeClassName=stableHash(this.sheet.name,scopeName+this.sheet.count)),this):this}get hasConditions(){return this.preconditions.length>0||this.postconditions.length>0}addScope(scopeName){return new _Selector(this.sheet,scopeName,{preconditions:this.preconditions,postconditions:this.postconditions})}addPrecondition(precondition){return new _Selector(this.sheet,this.scopeClassName,{postconditions:this.postconditions,preconditions:this.preconditions.concat(precondition)})}addPostcondition(postcondition){return new _Selector(this.sheet,this.scopeClassName,{preconditions:this.preconditions,postconditions:this.postconditions.concat(postcondition)})}createRule(property,value){return new Rule(this.sheet,property,value,this)}},Sheet=class{constructor(name,rootNode){this.name=name,this.rootNode=rootNode,this.storedStyles={},this.storedClasses={},this.style="",this.count=0,this.id=`flairup-${name}`,this.styleTag=this.createStyleTag()}getStyle(){return this.style}append(css){this.style=function appendString(base,line){return base?`${base}\n${line}`:line}(this.style,css)}apply(){this.count++,this.styleTag&&(this.styleTag.innerHTML=this.style)}isApplied(){return!!this.styleTag}createStyleTag(){if("undefined"==typeof document||this.isApplied()||null===this.rootNode)return this.styleTag;const styleTag=document.createElement("style");return styleTag.type="text/css",styleTag.id=this.id,(this.rootNode??document.head).appendChild(styleTag),styleTag}addRule(rule){const storedClass=this.storedClasses[rule.key];return isString(storedClass)?storedClass:(this.storedClasses[rule.key]=rule.hash,this.storedStyles[rule.hash]=[rule.property,rule.value],this.append(rule.toString()),rule.hash)}};function forIn(obj,fn){for(const key in obj)fn(key.trim(),obj[key])}function cx(...args){return joinTruthy(args.reduce((classes2,arg)=>(arg instanceof Set?classes2.push(...arg):"string"==typeof arg?classes2.push(arg):Array.isArray(arg)?classes2.push(cx(...arg)):"object"==typeof arg&&Object.entries(arg).forEach(([key,value])=>{value&&classes2.push(key)}),classes2),[])," ").trim()}function createSheet(name,rootNode){const sheet=new Sheet(name,rootNode);return{create:function create(styles){const scopedStyles={};return iteratePreconditions(sheet,styles,new Selector(sheet)).forEach(([scopeName,styles2,selector])=>{iterateStyles(sheet,styles2,selector).forEach(className=>{!function addScopedStyle(name2,className){scopedStyles[name2]=scopedStyles[name2]??new Set,scopedStyles[name2].add(className)}(scopeName,className)})}),sheet.apply(),scopedStyles},getStyle:sheet.getStyle.bind(sheet),isApplied:sheet.isApplied.bind(sheet)}}function iteratePreconditions(sheet,styles,selector){const output=[];return forIn(styles,(key,value)=>{if(isStyleCondition(key))return iteratePreconditions(sheet,value,selector.addPrecondition(key)).forEach(item=>output.push(item));output.push([key,styles[key],selector.addScope(key)])}),output}function iterateStyles(sheet,styles,selector){const output=new Set;return forIn(styles,(property,value)=>{let res=[];if(isStyleCondition(property))res=iterateStyles(sheet,value,selector.addPostcondition(property));else if(function isDirectClass(selector){return"."===selector}(property))res=asArray(value);else if(isMediaQuery(property))res=function handleMediaQuery(sheet,styles,mediaQuery,selector){sheet.append(mediaQuery+" {");const output=iterateStyles(sheet,styles,selector);return sheet.append("}"),output}(sheet,value,property,selector);else if(isCssVariables(property))res=function cssVariablesBlock(sheet,styles,selector){const classes=new Set,chunkRows=[];if(forIn(styles,(property,value)=>{if(isValidProperty(property,value))return void chunkRows.push(Rule.genRule(property,value));addEachClass(iterateStyles(sheet,value??{},selector),classes)}),!selector.scopeClassName)return classes;if(chunkRows.length){const output=chunkRows.join(" ");sheet.append(`${mergeSelectors(selector.preconditions,{right:selector.scopeClassName})} {${output}}`)}return classes.add(selector.scopeClassName),classes}(sheet,value,selector);else if(isValidProperty(property,value)){const rule=selector.createRule(property,value);sheet.addRule(rule),output.add(rule.hash)}return addEachClass(res,output)}),output}function addEachClass(list,to){return list.forEach(className=>to.add(className)),to}function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _createForOfIteratorHelperLoose(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(it)return(it=it.call(o)).next.bind(it);if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0;return function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function asSelectors(){for(var _len=arguments.length,classNames=new Array(_len),_key=0;_key<_len;_key++)classNames[_key]=arguments[_key];return classNames.map(function(c){return"."+c}).join("")}!function(ClassNames){ClassNames.hiddenOnSearch="epr-hidden-on-search",ClassNames.searchActive="epr-search-active",ClassNames.hidden="epr-hidden",ClassNames.visible="epr-visible",ClassNames.active="epr-active",ClassNames.emoji="epr-emoji",ClassNames.category="epr-emoji-category",ClassNames.label="epr-emoji-category-label",ClassNames.categoryContent="epr-emoji-category-content",ClassNames.emojiHasVariations="epr-emoji-has-variations",ClassNames.scrollBody="epr-body",ClassNames.emojiList="epr-emoji-list",ClassNames.external="__EmojiPicker__",ClassNames.emojiPicker="EmojiPickerReact",ClassNames.open="epr-open",ClassNames.vertical="epr-vertical",ClassNames.horizontal="epr-horizontal",ClassNames.variationPicker="epr-emoji-variation-picker",ClassNames.darkTheme="epr-dark-theme",ClassNames.autoTheme="epr-auto-theme"}(ClassNames||(ClassNames={}));var stylesheet=createSheet("epr",null),emoji_picker_react_esm_hidden={display:"none",opacity:"0",pointerEvents:"none",visibility:"hidden",overflow:"hidden"},commonStyles=stylesheet.create({hidden:_extends({".":ClassNames.hidden},emoji_picker_react_esm_hidden)}),PickerStyleTag=(0,react.memo)(function PickerStyleTag(){return(0,react.createElement)("style",{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:stylesheet.getStyle()}})}),commonInteractionStyles=stylesheet.create({".epr-main":{":has(input:not(:placeholder-shown))":{categoryBtn:{":hover":{opacity:"1",backgroundPositionY:"var(--epr-category-navigation-button-size)"}},hiddenOnSearch:_extends({".":ClassNames.hiddenOnSearch},emoji_picker_react_esm_hidden)},":has(input:placeholder-shown)":{visibleOnSearchOnly:emoji_picker_react_esm_hidden}},hiddenOnReactions:{transition:"all 0.5s ease-in-out"},".epr-reactions":{hiddenOnReactions:{height:"0px",width:"0px",opacity:"0",pointerEvents:"none",overflow:"hidden"}},".EmojiPickerReact:not(.epr-search-active)":{categoryBtn:{":hover":{opacity:"1",backgroundPositionY:"var(--epr-category-navigation-button-size)"},"&.epr-active":{opacity:"1",backgroundPositionY:"var(--epr-category-navigation-button-size)"}},visibleOnSearchOnly:_extends({".":"epr-visible-on-search-only"},emoji_picker_react_esm_hidden)}});function darkMode(key,value){var _eprDarkTheme,_eprAutoTheme;return{".epr-dark-theme":(_eprDarkTheme={},_eprDarkTheme[key]=value,_eprDarkTheme),".epr-auto-theme":(_eprAutoTheme={},_eprAutoTheme[key]={"@media (prefers-color-scheme: dark)":value},_eprAutoTheme)}}function compareConfig(prev,next){var _prev$customEmojis,_next$customEmojis,prevCustomEmojis=null!=(_prev$customEmojis=prev.customEmojis)?_prev$customEmojis:[],nextCustomEmojis=null!=(_next$customEmojis=next.customEmojis)?_next$customEmojis:[];return prev.open===next.open&&prev.emojiVersion===next.emojiVersion&&prev.reactionsDefaultOpen===next.reactionsDefaultOpen&&prev.searchPlaceHolder===next.searchPlaceHolder&&prev.searchPlaceholder===next.searchPlaceholder&&prev.defaultSkinTone===next.defaultSkinTone&&prev.skinTonesDisabled===next.skinTonesDisabled&&prev.autoFocusSearch===next.autoFocusSearch&&prev.emojiStyle===next.emojiStyle&&prev.theme===next.theme&&prev.suggestedEmojisMode===next.suggestedEmojisMode&&prev.lazyLoadEmojis===next.lazyLoadEmojis&&prev.className===next.className&&prev.height===next.height&&prev.width===next.width&&prev.style===next.style&&prev.searchDisabled===next.searchDisabled&&prev.skinTonePickerLocation===next.skinTonePickerLocation&&prevCustomEmojis.length===nextCustomEmojis.length}var SuggestionMode,EmojiStyle,Theme,SkinTones,Categories,SkinTonePickerLocation,_configByCategory,DEFAULT_REACTIONS=["1f44d","2764-fe0f","1f603","1f622","1f64f","1f44e","1f621"];!function(SuggestionMode){SuggestionMode.RECENT="recent",SuggestionMode.FREQUENT="frequent"}(SuggestionMode||(SuggestionMode={})),function(EmojiStyle){EmojiStyle.NATIVE="native",EmojiStyle.APPLE="apple",EmojiStyle.TWITTER="twitter",EmojiStyle.GOOGLE="google",EmojiStyle.FACEBOOK="facebook"}(EmojiStyle||(EmojiStyle={})),function(Theme){Theme.DARK="dark",Theme.LIGHT="light",Theme.AUTO="auto"}(Theme||(Theme={})),function(SkinTones){SkinTones.NEUTRAL="neutral",SkinTones.LIGHT="1f3fb",SkinTones.MEDIUM_LIGHT="1f3fc",SkinTones.MEDIUM="1f3fd",SkinTones.MEDIUM_DARK="1f3fe",SkinTones.DARK="1f3ff"}(SkinTones||(SkinTones={})),function(Categories){Categories.SUGGESTED="suggested",Categories.CUSTOM="custom",Categories.SMILEYS_PEOPLE="smileys_people",Categories.ANIMALS_NATURE="animals_nature",Categories.FOOD_DRINK="food_drink",Categories.TRAVEL_PLACES="travel_places",Categories.ACTIVITIES="activities",Categories.OBJECTS="objects",Categories.SYMBOLS="symbols",Categories.FLAGS="flags"}(Categories||(Categories={})),function(SkinTonePickerLocation){SkinTonePickerLocation.SEARCH="SEARCH",SkinTonePickerLocation.PREVIEW="PREVIEW"}(SkinTonePickerLocation||(SkinTonePickerLocation={}));var categoriesOrdered=[Categories.SUGGESTED,Categories.CUSTOM,Categories.SMILEYS_PEOPLE,Categories.ANIMALS_NATURE,Categories.FOOD_DRINK,Categories.TRAVEL_PLACES,Categories.ACTIVITIES,Categories.OBJECTS,Categories.SYMBOLS,Categories.FLAGS],SuggestedRecent={name:"Recently Used",category:Categories.SUGGESTED},configByCategory=((_configByCategory={})[Categories.SUGGESTED]={category:Categories.SUGGESTED,name:"Frequently Used"},_configByCategory[Categories.CUSTOM]={category:Categories.CUSTOM,name:"Custom Emojis"},_configByCategory[Categories.SMILEYS_PEOPLE]={category:Categories.SMILEYS_PEOPLE,name:"Smileys & People"},_configByCategory[Categories.ANIMALS_NATURE]={category:Categories.ANIMALS_NATURE,name:"Animals & Nature"},_configByCategory[Categories.FOOD_DRINK]={category:Categories.FOOD_DRINK,name:"Food & Drink"},_configByCategory[Categories.TRAVEL_PLACES]={category:Categories.TRAVEL_PLACES,name:"Travel & Places"},_configByCategory[Categories.ACTIVITIES]={category:Categories.ACTIVITIES,name:"Activities"},_configByCategory[Categories.OBJECTS]={category:Categories.OBJECTS,name:"Objects"},_configByCategory[Categories.SYMBOLS]={category:Categories.SYMBOLS,name:"Symbols"},_configByCategory[Categories.FLAGS]={category:Categories.FLAGS,name:"Flags"},_configByCategory);function baseCategoriesConfig(modifiers){return categoriesOrdered.map(function(category){return _extends({},configByCategory[category],modifiers&&modifiers[category]&&modifiers[category])})}function categoryFromCategoryConfig(category){return category.category}function categoryNameFromCategoryConfig(category){return category.name}function getBaseConfigByCategory(category,modifier){return void 0===modifier&&(modifier={}),Object.assign(configByCategory[category],modifier)}var EmojiProperties,emojis={custom:[],smileys_people:[{n:["grinning","grinning face"],u:"1f600",a:"1.0"},{n:["smiley","smiling face with open mouth"],u:"1f603",a:"0.6"},{n:["smile","smiling face with open mouth and smiling eyes"],u:"1f604",a:"0.6"},{n:["grin","grinning face with smiling eyes"],u:"1f601",a:"0.6"},{n:["laughing","satisfied","smiling face with open mouth and tightly-closed eyes"],u:"1f606",a:"0.6"},{n:["sweat smile","smiling face with open mouth and cold sweat"],u:"1f605",a:"0.6"},{n:["rolling on the floor laughing"],u:"1f923",a:"3.0"},{n:["joy","face with tears of joy"],u:"1f602",a:"0.6"},{n:["slightly smiling face"],u:"1f642",a:"1.0"},{n:["upside-down face","upside down face"],u:"1f643",a:"1.0"},{n:["melting face"],u:"1fae0",a:"14.0"},{n:["wink","winking face"],u:"1f609",a:"0.6"},{n:["blush","smiling face with smiling eyes"],u:"1f60a",a:"0.6"},{n:["innocent","smiling face with halo"],u:"1f607",a:"1.0"},{n:["smiling face with 3 hearts","smiling face with smiling eyes and three hearts"],u:"1f970",a:"11.0"},{n:["heart eyes","smiling face with heart-shaped eyes"],u:"1f60d",a:"0.6"},{n:["star-struck","grinning face with star eyes"],u:"1f929",a:"5.0"},{n:["kissing heart","face throwing a kiss"],u:"1f618",a:"0.6"},{n:["kissing","kissing face"],u:"1f617",a:"1.0"},{n:["relaxed","white smiling face"],u:"263a-fe0f",a:"0.6"},{n:["kissing closed eyes","kissing face with closed eyes"],u:"1f61a",a:"0.6"},{n:["kissing smiling eyes","kissing face with smiling eyes"],u:"1f619",a:"1.0"},{n:["smiling face with tear"],u:"1f972",a:"13.0"},{n:["yum","face savouring delicious food"],u:"1f60b",a:"0.6"},{n:["stuck out tongue","face with stuck-out tongue"],u:"1f61b",a:"1.0"},{n:["stuck out tongue winking eye","face with stuck-out tongue and winking eye"],u:"1f61c",a:"0.6"},{n:["zany face","grinning face with one large and one small eye"],u:"1f92a",a:"5.0"},{n:["stuck out tongue closed eyes","face with stuck-out tongue and tightly-closed eyes"],u:"1f61d",a:"0.6"},{n:["money-mouth face","money mouth face"],u:"1f911",a:"1.0"},{n:["hugging face"],u:"1f917",a:"1.0"},{n:["face with hand over mouth","smiling face with smiling eyes and hand covering mouth"],u:"1f92d",a:"5.0"},{n:["face with open eyes and hand over mouth"],u:"1fae2",a:"14.0"},{n:["face with peeking eye"],u:"1fae3",a:"14.0"},{n:["shushing face","face with finger covering closed lips"],u:"1f92b",a:"5.0"},{n:["thinking face"],u:"1f914",a:"1.0"},{n:["saluting face"],u:"1fae1",a:"14.0"},{n:["zipper-mouth face","zipper mouth face"],u:"1f910",a:"1.0"},{n:["face with raised eyebrow","face with one eyebrow raised"],u:"1f928",a:"5.0"},{n:["neutral face"],u:"1f610",a:"0.7"},{n:["expressionless","expressionless face"],u:"1f611",a:"1.0"},{n:["no mouth","face without mouth"],u:"1f636",a:"1.0"},{n:["dotted line face"],u:"1fae5",a:"14.0"},{n:["face in clouds"],u:"1f636-200d-1f32b-fe0f",a:"13.1"},{n:["smirk","smirking face"],u:"1f60f",a:"0.6"},{n:["unamused","unamused face"],u:"1f612",a:"0.6"},{n:["face with rolling eyes"],u:"1f644",a:"1.0"},{n:["grimacing","grimacing face"],u:"1f62c",a:"1.0"},{n:["face exhaling"],u:"1f62e-200d-1f4a8",a:"13.1"},{n:["lying face"],u:"1f925",a:"3.0"},{n:["shaking face"],u:"1fae8",a:"15.0"},{n:["head shaking horizontally"],u:"1f642-200d-2194-fe0f",a:"15.1"},{n:["head shaking vertically"],u:"1f642-200d-2195-fe0f",a:"15.1"},{n:["relieved","relieved face"],u:"1f60c",a:"0.6"},{n:["pensive","pensive face"],u:"1f614",a:"0.6"},{n:["sleepy","sleepy face"],u:"1f62a",a:"0.6"},{n:["drooling face"],u:"1f924",a:"3.0"},{n:["sleeping","sleeping face"],u:"1f634",a:"1.0"},{n:["mask","face with medical mask"],u:"1f637",a:"0.6"},{n:["face with thermometer"],u:"1f912",a:"1.0"},{n:["face with head-bandage","face with head bandage"],u:"1f915",a:"1.0"},{n:["nauseated face"],u:"1f922",a:"3.0"},{n:["face vomiting","face with open mouth vomiting"],u:"1f92e",a:"5.0"},{n:["sneezing face"],u:"1f927",a:"3.0"},{n:["hot face","overheated face"],u:"1f975",a:"11.0"},{n:["cold face","freezing face"],u:"1f976",a:"11.0"},{n:["woozy face","face with uneven eyes and wavy mouth"],u:"1f974",a:"11.0"},{n:["dizzy face"],u:"1f635",a:"0.6"},{n:["face with spiral eyes"],u:"1f635-200d-1f4ab",a:"13.1"},{n:["exploding head","shocked face with exploding head"],u:"1f92f",a:"5.0"},{n:["face with cowboy hat"],u:"1f920",a:"3.0"},{n:["partying face","face with party horn and party hat"],u:"1f973",a:"11.0"},{n:["disguised face"],u:"1f978",a:"13.0"},{n:["sunglasses","smiling face with sunglasses"],u:"1f60e",a:"1.0"},{n:["nerd face"],u:"1f913",a:"1.0"},{n:["face with monocle"],u:"1f9d0",a:"5.0"},{n:["confused","confused face"],u:"1f615",a:"1.0"},{n:["face with diagonal mouth"],u:"1fae4",a:"14.0"},{n:["worried","worried face"],u:"1f61f",a:"1.0"},{n:["slightly frowning face"],u:"1f641",a:"1.0"},{n:["frowning face","white frowning face"],u:"2639-fe0f",a:"0.7"},{n:["open mouth","face with open mouth"],u:"1f62e",a:"1.0"},{n:["hushed","hushed face"],u:"1f62f",a:"1.0"},{n:["astonished","astonished face"],u:"1f632",a:"0.6"},{n:["flushed","flushed face"],u:"1f633",a:"0.6"},{n:["pleading face","face with pleading eyes"],u:"1f97a",a:"11.0"},{n:["face holding back tears"],u:"1f979",a:"14.0"},{n:["frowning","frowning face with open mouth"],u:"1f626",a:"1.0"},{n:["anguished","anguished face"],u:"1f627",a:"1.0"},{n:["fearful","fearful face"],u:"1f628",a:"0.6"},{n:["cold sweat","face with open mouth and cold sweat"],u:"1f630",a:"0.6"},{n:["disappointed relieved","disappointed but relieved face"],u:"1f625",a:"0.6"},{n:["cry","crying face"],u:"1f622",a:"0.6"},{n:["sob","loudly crying face"],u:"1f62d",a:"0.6"},{n:["scream","face screaming in fear"],u:"1f631",a:"0.6"},{n:["confounded","confounded face"],u:"1f616",a:"0.6"},{n:["persevere","persevering face"],u:"1f623",a:"0.6"},{n:["disappointed","disappointed face"],u:"1f61e",a:"0.6"},{n:["sweat","face with cold sweat"],u:"1f613",a:"0.6"},{n:["weary","weary face"],u:"1f629",a:"0.6"},{n:["tired face"],u:"1f62b",a:"0.6"},{n:["yawning face"],u:"1f971",a:"12.0"},{n:["triumph","face with look of triumph"],u:"1f624",a:"0.6"},{n:["rage","pouting face"],u:"1f621",a:"0.6"},{n:["angry","angry face"],u:"1f620",a:"0.6"},{n:["face with symbols on mouth","serious face with symbols covering mouth"],u:"1f92c",a:"5.0"},{n:["smiling imp","smiling face with horns"],u:"1f608",a:"1.0"},{n:["imp"],u:"1f47f",a:"0.6"},{n:["skull"],u:"1f480",a:"0.6"},{n:["skull and crossbones"],u:"2620-fe0f",a:"1.0"},{n:["poop","shit","hankey","pile of poo"],u:"1f4a9",a:"0.6"},{n:["clown face"],u:"1f921",a:"3.0"},{n:["japanese ogre"],u:"1f479",a:"0.6"},{n:["japanese goblin"],u:"1f47a",a:"0.6"},{n:["ghost"],u:"1f47b",a:"0.6"},{n:["alien","extraterrestrial alien"],u:"1f47d",a:"0.6"},{n:["alien monster","space invader"],u:"1f47e",a:"0.6"},{n:["robot face"],u:"1f916",a:"1.0"},{n:["smiley cat","smiling cat face with open mouth"],u:"1f63a",a:"0.6"},{n:["smile cat","grinning cat face with smiling eyes"],u:"1f638",a:"0.6"},{n:["joy cat","cat face with tears of joy"],u:"1f639",a:"0.6"},{n:["heart eyes cat","smiling cat face with heart-shaped eyes"],u:"1f63b",a:"0.6"},{n:["smirk cat","cat face with wry smile"],u:"1f63c",a:"0.6"},{n:["kissing cat","kissing cat face with closed eyes"],u:"1f63d",a:"0.6"},{n:["scream cat","weary cat face"],u:"1f640",a:"0.6"},{n:["crying cat face"],u:"1f63f",a:"0.6"},{n:["pouting cat","pouting cat face"],u:"1f63e",a:"0.6"},{n:["see no evil","see-no-evil monkey"],u:"1f648",a:"0.6"},{n:["hear no evil","hear-no-evil monkey"],u:"1f649",a:"0.6"},{n:["speak no evil","speak-no-evil monkey"],u:"1f64a",a:"0.6"},{n:["love letter"],u:"1f48c",a:"0.6"},{n:["cupid","heart with arrow"],u:"1f498",a:"0.6"},{n:["gift heart","heart with ribbon"],u:"1f49d",a:"0.6"},{n:["sparkling heart"],u:"1f496",a:"0.6"},{n:["heartpulse","growing heart"],u:"1f497",a:"0.6"},{n:["heartbeat","beating heart"],u:"1f493",a:"0.6"},{n:["revolving hearts"],u:"1f49e",a:"0.6"},{n:["two hearts"],u:"1f495",a:"0.6"},{n:["heart decoration"],u:"1f49f",a:"0.6"},{n:["heart exclamation","heavy heart exclamation mark ornament"],u:"2763-fe0f",a:"1.0"},{n:["broken heart"],u:"1f494",a:"0.6"},{n:["heart on fire"],u:"2764-fe0f-200d-1f525",a:"13.1"},{n:["mending heart"],u:"2764-fe0f-200d-1fa79",a:"13.1"},{n:["heart","heavy black heart"],u:"2764-fe0f",a:"0.6"},{n:["pink heart"],u:"1fa77",a:"15.0"},{n:["orange heart"],u:"1f9e1",a:"5.0"},{n:["yellow heart"],u:"1f49b",a:"0.6"},{n:["green heart"],u:"1f49a",a:"0.6"},{n:["blue heart"],u:"1f499",a:"0.6"},{n:["light blue heart"],u:"1fa75",a:"15.0"},{n:["purple heart"],u:"1f49c",a:"0.6"},{n:["brown heart"],u:"1f90e",a:"12.0"},{n:["black heart"],u:"1f5a4",a:"3.0"},{n:["grey heart"],u:"1fa76",a:"15.0"},{n:["white heart"],u:"1f90d",a:"12.0"},{n:["kiss","kiss mark"],u:"1f48b",a:"0.6"},{n:["100","hundred points symbol"],u:"1f4af",a:"0.6"},{n:["anger","anger symbol"],u:"1f4a2",a:"0.6"},{n:["boom","collision","collision symbol"],u:"1f4a5",a:"0.6"},{n:["dizzy","dizzy symbol"],u:"1f4ab",a:"0.6"},{n:["sweat drops","splashing sweat symbol"],u:"1f4a6",a:"0.6"},{n:["dash","dash symbol"],u:"1f4a8",a:"0.6"},{n:["hole"],u:"1f573-fe0f",a:"0.7"},{n:["speech balloon"],u:"1f4ac",a:"0.6"},{n:["eye in speech bubble","eye-in-speech-bubble"],u:"1f441-fe0f-200d-1f5e8-fe0f",a:"2.0"},{n:["left speech bubble"],u:"1f5e8-fe0f",a:"2.0"},{n:["right anger bubble"],u:"1f5ef-fe0f",a:"0.7"},{n:["thought balloon"],u:"1f4ad",a:"1.0"},{n:["zzz","sleeping symbol"],u:"1f4a4",a:"0.6"},{n:["wave","waving hand sign"],u:"1f44b",v:["1f44b-1f3fb","1f44b-1f3fc","1f44b-1f3fd","1f44b-1f3fe","1f44b-1f3ff"],a:"0.6"},{n:["raised back of hand"],u:"1f91a",v:["1f91a-1f3fb","1f91a-1f3fc","1f91a-1f3fd","1f91a-1f3fe","1f91a-1f3ff"],a:"3.0"},{n:["hand with fingers splayed","raised hand with fingers splayed"],u:"1f590-fe0f",v:["1f590-1f3fb","1f590-1f3fc","1f590-1f3fd","1f590-1f3fe","1f590-1f3ff"],a:"0.7"},{n:["hand","raised hand"],u:"270b",v:["270b-1f3fb","270b-1f3fc","270b-1f3fd","270b-1f3fe","270b-1f3ff"],a:"0.6"},{n:["spock-hand","raised hand with part between middle and ring fingers"],u:"1f596",v:["1f596-1f3fb","1f596-1f3fc","1f596-1f3fd","1f596-1f3fe","1f596-1f3ff"],a:"1.0"},{n:["rightwards hand"],u:"1faf1",v:["1faf1-1f3fb","1faf1-1f3fc","1faf1-1f3fd","1faf1-1f3fe","1faf1-1f3ff"],a:"14.0"},{n:["leftwards hand"],u:"1faf2",v:["1faf2-1f3fb","1faf2-1f3fc","1faf2-1f3fd","1faf2-1f3fe","1faf2-1f3ff"],a:"14.0"},{n:["palm down hand"],u:"1faf3",v:["1faf3-1f3fb","1faf3-1f3fc","1faf3-1f3fd","1faf3-1f3fe","1faf3-1f3ff"],a:"14.0"},{n:["palm up hand"],u:"1faf4",v:["1faf4-1f3fb","1faf4-1f3fc","1faf4-1f3fd","1faf4-1f3fe","1faf4-1f3ff"],a:"14.0"},{n:["leftwards pushing hand"],u:"1faf7",v:["1faf7-1f3fb","1faf7-1f3fc","1faf7-1f3fd","1faf7-1f3fe","1faf7-1f3ff"],a:"15.0"},{n:["rightwards pushing hand"],u:"1faf8",v:["1faf8-1f3fb","1faf8-1f3fc","1faf8-1f3fd","1faf8-1f3fe","1faf8-1f3ff"],a:"15.0"},{n:["ok hand","ok hand sign"],u:"1f44c",v:["1f44c-1f3fb","1f44c-1f3fc","1f44c-1f3fd","1f44c-1f3fe","1f44c-1f3ff"],a:"0.6"},{n:["pinched fingers"],u:"1f90c",v:["1f90c-1f3fb","1f90c-1f3fc","1f90c-1f3fd","1f90c-1f3fe","1f90c-1f3ff"],a:"13.0"},{n:["pinching hand"],u:"1f90f",v:["1f90f-1f3fb","1f90f-1f3fc","1f90f-1f3fd","1f90f-1f3fe","1f90f-1f3ff"],a:"12.0"},{n:["v","victory hand"],u:"270c-fe0f",v:["270c-1f3fb","270c-1f3fc","270c-1f3fd","270c-1f3fe","270c-1f3ff"],a:"0.6"},{n:["crossed fingers","hand with index and middle fingers crossed"],u:"1f91e",v:["1f91e-1f3fb","1f91e-1f3fc","1f91e-1f3fd","1f91e-1f3fe","1f91e-1f3ff"],a:"3.0"},{n:["hand with index finger and thumb crossed"],u:"1faf0",v:["1faf0-1f3fb","1faf0-1f3fc","1faf0-1f3fd","1faf0-1f3fe","1faf0-1f3ff"],a:"14.0"},{n:["i love you hand sign"],u:"1f91f",v:["1f91f-1f3fb","1f91f-1f3fc","1f91f-1f3fd","1f91f-1f3fe","1f91f-1f3ff"],a:"5.0"},{n:["the horns","sign of the horns"],u:"1f918",v:["1f918-1f3fb","1f918-1f3fc","1f918-1f3fd","1f918-1f3fe","1f918-1f3ff"],a:"1.0"},{n:["call me hand"],u:"1f919",v:["1f919-1f3fb","1f919-1f3fc","1f919-1f3fd","1f919-1f3fe","1f919-1f3ff"],a:"3.0"},{n:["point left","white left pointing backhand index"],u:"1f448",v:["1f448-1f3fb","1f448-1f3fc","1f448-1f3fd","1f448-1f3fe","1f448-1f3ff"],a:"0.6"},{n:["point right","white right pointing backhand index"],u:"1f449",v:["1f449-1f3fb","1f449-1f3fc","1f449-1f3fd","1f449-1f3fe","1f449-1f3ff"],a:"0.6"},{n:["point up 2","white up pointing backhand index"],u:"1f446",v:["1f446-1f3fb","1f446-1f3fc","1f446-1f3fd","1f446-1f3fe","1f446-1f3ff"],a:"0.6"},{n:["middle finger","reversed hand with middle finger extended"],u:"1f595",v:["1f595-1f3fb","1f595-1f3fc","1f595-1f3fd","1f595-1f3fe","1f595-1f3ff"],a:"1.0"},{n:["point down","white down pointing backhand index"],u:"1f447",v:["1f447-1f3fb","1f447-1f3fc","1f447-1f3fd","1f447-1f3fe","1f447-1f3ff"],a:"0.6"},{n:["point up","white up pointing index"],u:"261d-fe0f",v:["261d-1f3fb","261d-1f3fc","261d-1f3fd","261d-1f3fe","261d-1f3ff"],a:"0.6"},{n:["index pointing at the viewer"],u:"1faf5",v:["1faf5-1f3fb","1faf5-1f3fc","1faf5-1f3fd","1faf5-1f3fe","1faf5-1f3ff"],a:"14.0"},{n:["+1","thumbsup","thumbs up sign"],u:"1f44d",v:["1f44d-1f3fb","1f44d-1f3fc","1f44d-1f3fd","1f44d-1f3fe","1f44d-1f3ff"],a:"0.6"},{n:["-1","thumbsdown","thumbs down sign"],u:"1f44e",v:["1f44e-1f3fb","1f44e-1f3fc","1f44e-1f3fd","1f44e-1f3fe","1f44e-1f3ff"],a:"0.6"},{n:["fist","raised fist"],u:"270a",v:["270a-1f3fb","270a-1f3fc","270a-1f3fd","270a-1f3fe","270a-1f3ff"],a:"0.6"},{n:["punch","facepunch","fisted hand sign"],u:"1f44a",v:["1f44a-1f3fb","1f44a-1f3fc","1f44a-1f3fd","1f44a-1f3fe","1f44a-1f3ff"],a:"0.6"},{n:["left-facing fist"],u:"1f91b",v:["1f91b-1f3fb","1f91b-1f3fc","1f91b-1f3fd","1f91b-1f3fe","1f91b-1f3ff"],a:"3.0"},{n:["right-facing fist"],u:"1f91c",v:["1f91c-1f3fb","1f91c-1f3fc","1f91c-1f3fd","1f91c-1f3fe","1f91c-1f3ff"],a:"3.0"},{n:["clap","clapping hands sign"],u:"1f44f",v:["1f44f-1f3fb","1f44f-1f3fc","1f44f-1f3fd","1f44f-1f3fe","1f44f-1f3ff"],a:"0.6"},{n:["raised hands","person raising both hands in celebration"],u:"1f64c",v:["1f64c-1f3fb","1f64c-1f3fc","1f64c-1f3fd","1f64c-1f3fe","1f64c-1f3ff"],a:"0.6"},{n:["heart hands"],u:"1faf6",v:["1faf6-1f3fb","1faf6-1f3fc","1faf6-1f3fd","1faf6-1f3fe","1faf6-1f3ff"],a:"14.0"},{n:["open hands","open hands sign"],u:"1f450",v:["1f450-1f3fb","1f450-1f3fc","1f450-1f3fd","1f450-1f3fe","1f450-1f3ff"],a:"0.6"},{n:["palms up together"],u:"1f932",v:["1f932-1f3fb","1f932-1f3fc","1f932-1f3fd","1f932-1f3fe","1f932-1f3ff"],a:"5.0"},{n:["handshake"],u:"1f91d",v:["1f91d-1f3fb","1f91d-1f3fc","1f91d-1f3fd","1f91d-1f3fe","1f91d-1f3ff","1faf1-1f3fb-200d-1faf2-1f3fc","1faf1-1f3fb-200d-1faf2-1f3fd","1faf1-1f3fb-200d-1faf2-1f3fe","1faf1-1f3fb-200d-1faf2-1f3ff","1faf1-1f3fc-200d-1faf2-1f3fb","1faf1-1f3fc-200d-1faf2-1f3fd","1faf1-1f3fc-200d-1faf2-1f3fe","1faf1-1f3fc-200d-1faf2-1f3ff","1faf1-1f3fd-200d-1faf2-1f3fb","1faf1-1f3fd-200d-1faf2-1f3fc","1faf1-1f3fd-200d-1faf2-1f3fe","1faf1-1f3fd-200d-1faf2-1f3ff","1faf1-1f3fe-200d-1faf2-1f3fb","1faf1-1f3fe-200d-1faf2-1f3fc","1faf1-1f3fe-200d-1faf2-1f3fd","1faf1-1f3fe-200d-1faf2-1f3ff","1faf1-1f3ff-200d-1faf2-1f3fb","1faf1-1f3ff-200d-1faf2-1f3fc","1faf1-1f3ff-200d-1faf2-1f3fd","1faf1-1f3ff-200d-1faf2-1f3fe"],a:"3.0"},{n:["pray","person with folded hands"],u:"1f64f",v:["1f64f-1f3fb","1f64f-1f3fc","1f64f-1f3fd","1f64f-1f3fe","1f64f-1f3ff"],a:"0.6"},{n:["writing hand"],u:"270d-fe0f",v:["270d-1f3fb","270d-1f3fc","270d-1f3fd","270d-1f3fe","270d-1f3ff"],a:"0.7"},{n:["nail care","nail polish"],u:"1f485",v:["1f485-1f3fb","1f485-1f3fc","1f485-1f3fd","1f485-1f3fe","1f485-1f3ff"],a:"0.6"},{n:["selfie"],u:"1f933",v:["1f933-1f3fb","1f933-1f3fc","1f933-1f3fd","1f933-1f3fe","1f933-1f3ff"],a:"3.0"},{n:["muscle","flexed biceps"],u:"1f4aa",v:["1f4aa-1f3fb","1f4aa-1f3fc","1f4aa-1f3fd","1f4aa-1f3fe","1f4aa-1f3ff"],a:"0.6"},{n:["mechanical arm"],u:"1f9be",a:"12.0"},{n:["mechanical leg"],u:"1f9bf",a:"12.0"},{n:["leg"],u:"1f9b5",v:["1f9b5-1f3fb","1f9b5-1f3fc","1f9b5-1f3fd","1f9b5-1f3fe","1f9b5-1f3ff"],a:"11.0"},{n:["foot"],u:"1f9b6",v:["1f9b6-1f3fb","1f9b6-1f3fc","1f9b6-1f3fd","1f9b6-1f3fe","1f9b6-1f3ff"],a:"11.0"},{n:["ear"],u:"1f442",v:["1f442-1f3fb","1f442-1f3fc","1f442-1f3fd","1f442-1f3fe","1f442-1f3ff"],a:"0.6"},{n:["ear with hearing aid"],u:"1f9bb",v:["1f9bb-1f3fb","1f9bb-1f3fc","1f9bb-1f3fd","1f9bb-1f3fe","1f9bb-1f3ff"],a:"12.0"},{n:["nose"],u:"1f443",v:["1f443-1f3fb","1f443-1f3fc","1f443-1f3fd","1f443-1f3fe","1f443-1f3ff"],a:"0.6"},{n:["brain"],u:"1f9e0",a:"5.0"},{n:["anatomical heart"],u:"1fac0",a:"13.0"},{n:["lungs"],u:"1fac1",a:"13.0"},{n:["tooth"],u:"1f9b7",a:"11.0"},{n:["bone"],u:"1f9b4",a:"11.0"},{n:["eyes"],u:"1f440",a:"0.6"},{n:["eye"],u:"1f441-fe0f",a:"0.7"},{n:["tongue"],u:"1f445",a:"0.6"},{n:["lips","mouth"],u:"1f444",a:"0.6"},{n:["biting lip"],u:"1fae6",a:"14.0"},{n:["baby"],u:"1f476",v:["1f476-1f3fb","1f476-1f3fc","1f476-1f3fd","1f476-1f3fe","1f476-1f3ff"],a:"0.6"},{n:["child"],u:"1f9d2",v:["1f9d2-1f3fb","1f9d2-1f3fc","1f9d2-1f3fd","1f9d2-1f3fe","1f9d2-1f3ff"],a:"5.0"},{n:["boy"],u:"1f466",v:["1f466-1f3fb","1f466-1f3fc","1f466-1f3fd","1f466-1f3fe","1f466-1f3ff"],a:"0.6"},{n:["girl"],u:"1f467",v:["1f467-1f3fb","1f467-1f3fc","1f467-1f3fd","1f467-1f3fe","1f467-1f3ff"],a:"0.6"},{n:["adult"],u:"1f9d1",v:["1f9d1-1f3fb","1f9d1-1f3fc","1f9d1-1f3fd","1f9d1-1f3fe","1f9d1-1f3ff"],a:"5.0"},{n:["person with blond hair"],u:"1f471",v:["1f471-1f3fb","1f471-1f3fc","1f471-1f3fd","1f471-1f3fe","1f471-1f3ff"],a:"0.6"},{n:["man"],u:"1f468",v:["1f468-1f3fb","1f468-1f3fc","1f468-1f3fd","1f468-1f3fe","1f468-1f3ff"],a:"0.6"},{n:["bearded person"],u:"1f9d4",v:["1f9d4-1f3fb","1f9d4-1f3fc","1f9d4-1f3fd","1f9d4-1f3fe","1f9d4-1f3ff"],a:"5.0"},{n:["man: beard","man with beard"],u:"1f9d4-200d-2642-fe0f",v:["1f9d4-1f3fb-200d-2642-fe0f","1f9d4-1f3fc-200d-2642-fe0f","1f9d4-1f3fd-200d-2642-fe0f","1f9d4-1f3fe-200d-2642-fe0f","1f9d4-1f3ff-200d-2642-fe0f"],a:"13.1"},{n:["woman: beard","woman with beard"],u:"1f9d4-200d-2640-fe0f",v:["1f9d4-1f3fb-200d-2640-fe0f","1f9d4-1f3fc-200d-2640-fe0f","1f9d4-1f3fd-200d-2640-fe0f","1f9d4-1f3fe-200d-2640-fe0f","1f9d4-1f3ff-200d-2640-fe0f"],a:"13.1"},{n:["man: red hair","red haired man"],u:"1f468-200d-1f9b0",v:["1f468-1f3fb-200d-1f9b0","1f468-1f3fc-200d-1f9b0","1f468-1f3fd-200d-1f9b0","1f468-1f3fe-200d-1f9b0","1f468-1f3ff-200d-1f9b0"],a:"11.0"},{n:["man: curly hair","curly haired man"],u:"1f468-200d-1f9b1",v:["1f468-1f3fb-200d-1f9b1","1f468-1f3fc-200d-1f9b1","1f468-1f3fd-200d-1f9b1","1f468-1f3fe-200d-1f9b1","1f468-1f3ff-200d-1f9b1"],a:"11.0"},{n:["man: white hair","white haired man"],u:"1f468-200d-1f9b3",v:["1f468-1f3fb-200d-1f9b3","1f468-1f3fc-200d-1f9b3","1f468-1f3fd-200d-1f9b3","1f468-1f3fe-200d-1f9b3","1f468-1f3ff-200d-1f9b3"],a:"11.0"},{n:["bald man","man: bald"],u:"1f468-200d-1f9b2",v:["1f468-1f3fb-200d-1f9b2","1f468-1f3fc-200d-1f9b2","1f468-1f3fd-200d-1f9b2","1f468-1f3fe-200d-1f9b2","1f468-1f3ff-200d-1f9b2"],a:"11.0"},{n:["woman"],u:"1f469",v:["1f469-1f3fb","1f469-1f3fc","1f469-1f3fd","1f469-1f3fe","1f469-1f3ff"],a:"0.6"},{n:["woman: red hair","red haired woman"],u:"1f469-200d-1f9b0",v:["1f469-1f3fb-200d-1f9b0","1f469-1f3fc-200d-1f9b0","1f469-1f3fd-200d-1f9b0","1f469-1f3fe-200d-1f9b0","1f469-1f3ff-200d-1f9b0"],a:"11.0"},{n:["person: red hair","red haired person"],u:"1f9d1-200d-1f9b0",v:["1f9d1-1f3fb-200d-1f9b0","1f9d1-1f3fc-200d-1f9b0","1f9d1-1f3fd-200d-1f9b0","1f9d1-1f3fe-200d-1f9b0","1f9d1-1f3ff-200d-1f9b0"],a:"12.1"},{n:["woman: curly hair","curly haired woman"],u:"1f469-200d-1f9b1",v:["1f469-1f3fb-200d-1f9b1","1f469-1f3fc-200d-1f9b1","1f469-1f3fd-200d-1f9b1","1f469-1f3fe-200d-1f9b1","1f469-1f3ff-200d-1f9b1"],a:"11.0"},{n:["person: curly hair","curly haired person"],u:"1f9d1-200d-1f9b1",v:["1f9d1-1f3fb-200d-1f9b1","1f9d1-1f3fc-200d-1f9b1","1f9d1-1f3fd-200d-1f9b1","1f9d1-1f3fe-200d-1f9b1","1f9d1-1f3ff-200d-1f9b1"],a:"12.1"},{n:["woman: white hair","white haired woman"],u:"1f469-200d-1f9b3",v:["1f469-1f3fb-200d-1f9b3","1f469-1f3fc-200d-1f9b3","1f469-1f3fd-200d-1f9b3","1f469-1f3fe-200d-1f9b3","1f469-1f3ff-200d-1f9b3"],a:"11.0"},{n:["person: white hair","white haired person"],u:"1f9d1-200d-1f9b3",v:["1f9d1-1f3fb-200d-1f9b3","1f9d1-1f3fc-200d-1f9b3","1f9d1-1f3fd-200d-1f9b3","1f9d1-1f3fe-200d-1f9b3","1f9d1-1f3ff-200d-1f9b3"],a:"12.1"},{n:["bald woman","woman: bald"],u:"1f469-200d-1f9b2",v:["1f469-1f3fb-200d-1f9b2","1f469-1f3fc-200d-1f9b2","1f469-1f3fd-200d-1f9b2","1f469-1f3fe-200d-1f9b2","1f469-1f3ff-200d-1f9b2"],a:"11.0"},{n:["bald person","person: bald"],u:"1f9d1-200d-1f9b2",v:["1f9d1-1f3fb-200d-1f9b2","1f9d1-1f3fc-200d-1f9b2","1f9d1-1f3fd-200d-1f9b2","1f9d1-1f3fe-200d-1f9b2","1f9d1-1f3ff-200d-1f9b2"],a:"12.1"},{n:["woman: blond hair","blond-haired-woman"],u:"1f471-200d-2640-fe0f",v:["1f471-1f3fb-200d-2640-fe0f","1f471-1f3fc-200d-2640-fe0f","1f471-1f3fd-200d-2640-fe0f","1f471-1f3fe-200d-2640-fe0f","1f471-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["man: blond hair","blond-haired-man"],u:"1f471-200d-2642-fe0f",v:["1f471-1f3fb-200d-2642-fe0f","1f471-1f3fc-200d-2642-fe0f","1f471-1f3fd-200d-2642-fe0f","1f471-1f3fe-200d-2642-fe0f","1f471-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["older adult"],u:"1f9d3",v:["1f9d3-1f3fb","1f9d3-1f3fc","1f9d3-1f3fd","1f9d3-1f3fe","1f9d3-1f3ff"],a:"5.0"},{n:["older man"],u:"1f474",v:["1f474-1f3fb","1f474-1f3fc","1f474-1f3fd","1f474-1f3fe","1f474-1f3ff"],a:"0.6"},{n:["older woman"],u:"1f475",v:["1f475-1f3fb","1f475-1f3fc","1f475-1f3fd","1f475-1f3fe","1f475-1f3ff"],a:"0.6"},{n:["person frowning"],u:"1f64d",v:["1f64d-1f3fb","1f64d-1f3fc","1f64d-1f3fd","1f64d-1f3fe","1f64d-1f3ff"],a:"0.6"},{n:["man frowning","man-frowning"],u:"1f64d-200d-2642-fe0f",v:["1f64d-1f3fb-200d-2642-fe0f","1f64d-1f3fc-200d-2642-fe0f","1f64d-1f3fd-200d-2642-fe0f","1f64d-1f3fe-200d-2642-fe0f","1f64d-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman frowning","woman-frowning"],u:"1f64d-200d-2640-fe0f",v:["1f64d-1f3fb-200d-2640-fe0f","1f64d-1f3fc-200d-2640-fe0f","1f64d-1f3fd-200d-2640-fe0f","1f64d-1f3fe-200d-2640-fe0f","1f64d-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person with pouting face"],u:"1f64e",v:["1f64e-1f3fb","1f64e-1f3fc","1f64e-1f3fd","1f64e-1f3fe","1f64e-1f3ff"],a:"0.6"},{n:["man pouting","man-pouting"],u:"1f64e-200d-2642-fe0f",v:["1f64e-1f3fb-200d-2642-fe0f","1f64e-1f3fc-200d-2642-fe0f","1f64e-1f3fd-200d-2642-fe0f","1f64e-1f3fe-200d-2642-fe0f","1f64e-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman pouting","woman-pouting"],u:"1f64e-200d-2640-fe0f",v:["1f64e-1f3fb-200d-2640-fe0f","1f64e-1f3fc-200d-2640-fe0f","1f64e-1f3fd-200d-2640-fe0f","1f64e-1f3fe-200d-2640-fe0f","1f64e-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["no good","face with no good gesture"],u:"1f645",v:["1f645-1f3fb","1f645-1f3fc","1f645-1f3fd","1f645-1f3fe","1f645-1f3ff"],a:"0.6"},{n:["man gesturing no","man-gesturing-no"],u:"1f645-200d-2642-fe0f",v:["1f645-1f3fb-200d-2642-fe0f","1f645-1f3fc-200d-2642-fe0f","1f645-1f3fd-200d-2642-fe0f","1f645-1f3fe-200d-2642-fe0f","1f645-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman gesturing no","woman-gesturing-no"],u:"1f645-200d-2640-fe0f",v:["1f645-1f3fb-200d-2640-fe0f","1f645-1f3fc-200d-2640-fe0f","1f645-1f3fd-200d-2640-fe0f","1f645-1f3fe-200d-2640-fe0f","1f645-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["ok woman","face with ok gesture"],u:"1f646",v:["1f646-1f3fb","1f646-1f3fc","1f646-1f3fd","1f646-1f3fe","1f646-1f3ff"],a:"0.6"},{n:["man gesturing ok","man-gesturing-ok"],u:"1f646-200d-2642-fe0f",v:["1f646-1f3fb-200d-2642-fe0f","1f646-1f3fc-200d-2642-fe0f","1f646-1f3fd-200d-2642-fe0f","1f646-1f3fe-200d-2642-fe0f","1f646-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman gesturing ok","woman-gesturing-ok"],u:"1f646-200d-2640-fe0f",v:["1f646-1f3fb-200d-2640-fe0f","1f646-1f3fc-200d-2640-fe0f","1f646-1f3fd-200d-2640-fe0f","1f646-1f3fe-200d-2640-fe0f","1f646-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["information desk person"],u:"1f481",v:["1f481-1f3fb","1f481-1f3fc","1f481-1f3fd","1f481-1f3fe","1f481-1f3ff"],a:"0.6"},{n:["man tipping hand","man-tipping-hand"],u:"1f481-200d-2642-fe0f",v:["1f481-1f3fb-200d-2642-fe0f","1f481-1f3fc-200d-2642-fe0f","1f481-1f3fd-200d-2642-fe0f","1f481-1f3fe-200d-2642-fe0f","1f481-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman tipping hand","woman-tipping-hand"],u:"1f481-200d-2640-fe0f",v:["1f481-1f3fb-200d-2640-fe0f","1f481-1f3fc-200d-2640-fe0f","1f481-1f3fd-200d-2640-fe0f","1f481-1f3fe-200d-2640-fe0f","1f481-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["raising hand","happy person raising one hand"],u:"1f64b",v:["1f64b-1f3fb","1f64b-1f3fc","1f64b-1f3fd","1f64b-1f3fe","1f64b-1f3ff"],a:"0.6"},{n:["man raising hand","man-raising-hand"],u:"1f64b-200d-2642-fe0f",v:["1f64b-1f3fb-200d-2642-fe0f","1f64b-1f3fc-200d-2642-fe0f","1f64b-1f3fd-200d-2642-fe0f","1f64b-1f3fe-200d-2642-fe0f","1f64b-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman raising hand","woman-raising-hand"],u:"1f64b-200d-2640-fe0f",v:["1f64b-1f3fb-200d-2640-fe0f","1f64b-1f3fc-200d-2640-fe0f","1f64b-1f3fd-200d-2640-fe0f","1f64b-1f3fe-200d-2640-fe0f","1f64b-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["deaf person"],u:"1f9cf",v:["1f9cf-1f3fb","1f9cf-1f3fc","1f9cf-1f3fd","1f9cf-1f3fe","1f9cf-1f3ff"],a:"12.0"},{n:["deaf man"],u:"1f9cf-200d-2642-fe0f",v:["1f9cf-1f3fb-200d-2642-fe0f","1f9cf-1f3fc-200d-2642-fe0f","1f9cf-1f3fd-200d-2642-fe0f","1f9cf-1f3fe-200d-2642-fe0f","1f9cf-1f3ff-200d-2642-fe0f"],a:"12.0"},{n:["deaf woman"],u:"1f9cf-200d-2640-fe0f",v:["1f9cf-1f3fb-200d-2640-fe0f","1f9cf-1f3fc-200d-2640-fe0f","1f9cf-1f3fd-200d-2640-fe0f","1f9cf-1f3fe-200d-2640-fe0f","1f9cf-1f3ff-200d-2640-fe0f"],a:"12.0"},{n:["bow","person bowing deeply"],u:"1f647",v:["1f647-1f3fb","1f647-1f3fc","1f647-1f3fd","1f647-1f3fe","1f647-1f3ff"],a:"0.6"},{n:["man bowing","man-bowing"],u:"1f647-200d-2642-fe0f",v:["1f647-1f3fb-200d-2642-fe0f","1f647-1f3fc-200d-2642-fe0f","1f647-1f3fd-200d-2642-fe0f","1f647-1f3fe-200d-2642-fe0f","1f647-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman bowing","woman-bowing"],u:"1f647-200d-2640-fe0f",v:["1f647-1f3fb-200d-2640-fe0f","1f647-1f3fc-200d-2640-fe0f","1f647-1f3fd-200d-2640-fe0f","1f647-1f3fe-200d-2640-fe0f","1f647-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["face palm"],u:"1f926",v:["1f926-1f3fb","1f926-1f3fc","1f926-1f3fd","1f926-1f3fe","1f926-1f3ff"],a:"3.0"},{n:["man facepalming","man-facepalming"],u:"1f926-200d-2642-fe0f",v:["1f926-1f3fb-200d-2642-fe0f","1f926-1f3fc-200d-2642-fe0f","1f926-1f3fd-200d-2642-fe0f","1f926-1f3fe-200d-2642-fe0f","1f926-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman facepalming","woman-facepalming"],u:"1f926-200d-2640-fe0f",v:["1f926-1f3fb-200d-2640-fe0f","1f926-1f3fc-200d-2640-fe0f","1f926-1f3fd-200d-2640-fe0f","1f926-1f3fe-200d-2640-fe0f","1f926-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["shrug"],u:"1f937",v:["1f937-1f3fb","1f937-1f3fc","1f937-1f3fd","1f937-1f3fe","1f937-1f3ff"],a:"3.0"},{n:["man shrugging","man-shrugging"],u:"1f937-200d-2642-fe0f",v:["1f937-1f3fb-200d-2642-fe0f","1f937-1f3fc-200d-2642-fe0f","1f937-1f3fd-200d-2642-fe0f","1f937-1f3fe-200d-2642-fe0f","1f937-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman shrugging","woman-shrugging"],u:"1f937-200d-2640-fe0f",v:["1f937-1f3fb-200d-2640-fe0f","1f937-1f3fc-200d-2640-fe0f","1f937-1f3fd-200d-2640-fe0f","1f937-1f3fe-200d-2640-fe0f","1f937-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["health worker"],u:"1f9d1-200d-2695-fe0f",v:["1f9d1-1f3fb-200d-2695-fe0f","1f9d1-1f3fc-200d-2695-fe0f","1f9d1-1f3fd-200d-2695-fe0f","1f9d1-1f3fe-200d-2695-fe0f","1f9d1-1f3ff-200d-2695-fe0f"],a:"12.1"},{n:["male-doctor","man health worker"],u:"1f468-200d-2695-fe0f",v:["1f468-1f3fb-200d-2695-fe0f","1f468-1f3fc-200d-2695-fe0f","1f468-1f3fd-200d-2695-fe0f","1f468-1f3fe-200d-2695-fe0f","1f468-1f3ff-200d-2695-fe0f"],a:"4.0"},{n:["female-doctor","woman health worker"],u:"1f469-200d-2695-fe0f",v:["1f469-1f3fb-200d-2695-fe0f","1f469-1f3fc-200d-2695-fe0f","1f469-1f3fd-200d-2695-fe0f","1f469-1f3fe-200d-2695-fe0f","1f469-1f3ff-200d-2695-fe0f"],a:"4.0"},{n:["student"],u:"1f9d1-200d-1f393",v:["1f9d1-1f3fb-200d-1f393","1f9d1-1f3fc-200d-1f393","1f9d1-1f3fd-200d-1f393","1f9d1-1f3fe-200d-1f393","1f9d1-1f3ff-200d-1f393"],a:"12.1"},{n:["man student","male-student"],u:"1f468-200d-1f393",v:["1f468-1f3fb-200d-1f393","1f468-1f3fc-200d-1f393","1f468-1f3fd-200d-1f393","1f468-1f3fe-200d-1f393","1f468-1f3ff-200d-1f393"],a:"4.0"},{n:["woman student","female-student"],u:"1f469-200d-1f393",v:["1f469-1f3fb-200d-1f393","1f469-1f3fc-200d-1f393","1f469-1f3fd-200d-1f393","1f469-1f3fe-200d-1f393","1f469-1f3ff-200d-1f393"],a:"4.0"},{n:["teacher"],u:"1f9d1-200d-1f3eb",v:["1f9d1-1f3fb-200d-1f3eb","1f9d1-1f3fc-200d-1f3eb","1f9d1-1f3fd-200d-1f3eb","1f9d1-1f3fe-200d-1f3eb","1f9d1-1f3ff-200d-1f3eb"],a:"12.1"},{n:["man teacher","male-teacher"],u:"1f468-200d-1f3eb",v:["1f468-1f3fb-200d-1f3eb","1f468-1f3fc-200d-1f3eb","1f468-1f3fd-200d-1f3eb","1f468-1f3fe-200d-1f3eb","1f468-1f3ff-200d-1f3eb"],a:"4.0"},{n:["woman teacher","female-teacher"],u:"1f469-200d-1f3eb",v:["1f469-1f3fb-200d-1f3eb","1f469-1f3fc-200d-1f3eb","1f469-1f3fd-200d-1f3eb","1f469-1f3fe-200d-1f3eb","1f469-1f3ff-200d-1f3eb"],a:"4.0"},{n:["judge"],u:"1f9d1-200d-2696-fe0f",v:["1f9d1-1f3fb-200d-2696-fe0f","1f9d1-1f3fc-200d-2696-fe0f","1f9d1-1f3fd-200d-2696-fe0f","1f9d1-1f3fe-200d-2696-fe0f","1f9d1-1f3ff-200d-2696-fe0f"],a:"12.1"},{n:["man judge","male-judge"],u:"1f468-200d-2696-fe0f",v:["1f468-1f3fb-200d-2696-fe0f","1f468-1f3fc-200d-2696-fe0f","1f468-1f3fd-200d-2696-fe0f","1f468-1f3fe-200d-2696-fe0f","1f468-1f3ff-200d-2696-fe0f"],a:"4.0"},{n:["woman judge","female-judge"],u:"1f469-200d-2696-fe0f",v:["1f469-1f3fb-200d-2696-fe0f","1f469-1f3fc-200d-2696-fe0f","1f469-1f3fd-200d-2696-fe0f","1f469-1f3fe-200d-2696-fe0f","1f469-1f3ff-200d-2696-fe0f"],a:"4.0"},{n:["farmer"],u:"1f9d1-200d-1f33e",v:["1f9d1-1f3fb-200d-1f33e","1f9d1-1f3fc-200d-1f33e","1f9d1-1f3fd-200d-1f33e","1f9d1-1f3fe-200d-1f33e","1f9d1-1f3ff-200d-1f33e"],a:"12.1"},{n:["man farmer","male-farmer"],u:"1f468-200d-1f33e",v:["1f468-1f3fb-200d-1f33e","1f468-1f3fc-200d-1f33e","1f468-1f3fd-200d-1f33e","1f468-1f3fe-200d-1f33e","1f468-1f3ff-200d-1f33e"],a:"4.0"},{n:["woman farmer","female-farmer"],u:"1f469-200d-1f33e",v:["1f469-1f3fb-200d-1f33e","1f469-1f3fc-200d-1f33e","1f469-1f3fd-200d-1f33e","1f469-1f3fe-200d-1f33e","1f469-1f3ff-200d-1f33e"],a:"4.0"},{n:["cook"],u:"1f9d1-200d-1f373",v:["1f9d1-1f3fb-200d-1f373","1f9d1-1f3fc-200d-1f373","1f9d1-1f3fd-200d-1f373","1f9d1-1f3fe-200d-1f373","1f9d1-1f3ff-200d-1f373"],a:"12.1"},{n:["man cook","male-cook"],u:"1f468-200d-1f373",v:["1f468-1f3fb-200d-1f373","1f468-1f3fc-200d-1f373","1f468-1f3fd-200d-1f373","1f468-1f3fe-200d-1f373","1f468-1f3ff-200d-1f373"],a:"4.0"},{n:["woman cook","female-cook"],u:"1f469-200d-1f373",v:["1f469-1f3fb-200d-1f373","1f469-1f3fc-200d-1f373","1f469-1f3fd-200d-1f373","1f469-1f3fe-200d-1f373","1f469-1f3ff-200d-1f373"],a:"4.0"},{n:["mechanic"],u:"1f9d1-200d-1f527",v:["1f9d1-1f3fb-200d-1f527","1f9d1-1f3fc-200d-1f527","1f9d1-1f3fd-200d-1f527","1f9d1-1f3fe-200d-1f527","1f9d1-1f3ff-200d-1f527"],a:"12.1"},{n:["man mechanic","male-mechanic"],u:"1f468-200d-1f527",v:["1f468-1f3fb-200d-1f527","1f468-1f3fc-200d-1f527","1f468-1f3fd-200d-1f527","1f468-1f3fe-200d-1f527","1f468-1f3ff-200d-1f527"],a:"4.0"},{n:["woman mechanic","female-mechanic"],u:"1f469-200d-1f527",v:["1f469-1f3fb-200d-1f527","1f469-1f3fc-200d-1f527","1f469-1f3fd-200d-1f527","1f469-1f3fe-200d-1f527","1f469-1f3ff-200d-1f527"],a:"4.0"},{n:["factory worker"],u:"1f9d1-200d-1f3ed",v:["1f9d1-1f3fb-200d-1f3ed","1f9d1-1f3fc-200d-1f3ed","1f9d1-1f3fd-200d-1f3ed","1f9d1-1f3fe-200d-1f3ed","1f9d1-1f3ff-200d-1f3ed"],a:"12.1"},{n:["man factory worker","male-factory-worker"],u:"1f468-200d-1f3ed",v:["1f468-1f3fb-200d-1f3ed","1f468-1f3fc-200d-1f3ed","1f468-1f3fd-200d-1f3ed","1f468-1f3fe-200d-1f3ed","1f468-1f3ff-200d-1f3ed"],a:"4.0"},{n:["woman factory worker","female-factory-worker"],u:"1f469-200d-1f3ed",v:["1f469-1f3fb-200d-1f3ed","1f469-1f3fc-200d-1f3ed","1f469-1f3fd-200d-1f3ed","1f469-1f3fe-200d-1f3ed","1f469-1f3ff-200d-1f3ed"],a:"4.0"},{n:["office worker"],u:"1f9d1-200d-1f4bc",v:["1f9d1-1f3fb-200d-1f4bc","1f9d1-1f3fc-200d-1f4bc","1f9d1-1f3fd-200d-1f4bc","1f9d1-1f3fe-200d-1f4bc","1f9d1-1f3ff-200d-1f4bc"],a:"12.1"},{n:["man office worker","male-office-worker"],u:"1f468-200d-1f4bc",v:["1f468-1f3fb-200d-1f4bc","1f468-1f3fc-200d-1f4bc","1f468-1f3fd-200d-1f4bc","1f468-1f3fe-200d-1f4bc","1f468-1f3ff-200d-1f4bc"],a:"4.0"},{n:["woman office worker","female-office-worker"],u:"1f469-200d-1f4bc",v:["1f469-1f3fb-200d-1f4bc","1f469-1f3fc-200d-1f4bc","1f469-1f3fd-200d-1f4bc","1f469-1f3fe-200d-1f4bc","1f469-1f3ff-200d-1f4bc"],a:"4.0"},{n:["scientist"],u:"1f9d1-200d-1f52c",v:["1f9d1-1f3fb-200d-1f52c","1f9d1-1f3fc-200d-1f52c","1f9d1-1f3fd-200d-1f52c","1f9d1-1f3fe-200d-1f52c","1f9d1-1f3ff-200d-1f52c"],a:"12.1"},{n:["man scientist","male-scientist"],u:"1f468-200d-1f52c",v:["1f468-1f3fb-200d-1f52c","1f468-1f3fc-200d-1f52c","1f468-1f3fd-200d-1f52c","1f468-1f3fe-200d-1f52c","1f468-1f3ff-200d-1f52c"],a:"4.0"},{n:["woman scientist","female-scientist"],u:"1f469-200d-1f52c",v:["1f469-1f3fb-200d-1f52c","1f469-1f3fc-200d-1f52c","1f469-1f3fd-200d-1f52c","1f469-1f3fe-200d-1f52c","1f469-1f3ff-200d-1f52c"],a:"4.0"},{n:["technologist"],u:"1f9d1-200d-1f4bb",v:["1f9d1-1f3fb-200d-1f4bb","1f9d1-1f3fc-200d-1f4bb","1f9d1-1f3fd-200d-1f4bb","1f9d1-1f3fe-200d-1f4bb","1f9d1-1f3ff-200d-1f4bb"],a:"12.1"},{n:["man technologist","male-technologist"],u:"1f468-200d-1f4bb",v:["1f468-1f3fb-200d-1f4bb","1f468-1f3fc-200d-1f4bb","1f468-1f3fd-200d-1f4bb","1f468-1f3fe-200d-1f4bb","1f468-1f3ff-200d-1f4bb"],a:"4.0"},{n:["woman technologist","female-technologist"],u:"1f469-200d-1f4bb",v:["1f469-1f3fb-200d-1f4bb","1f469-1f3fc-200d-1f4bb","1f469-1f3fd-200d-1f4bb","1f469-1f3fe-200d-1f4bb","1f469-1f3ff-200d-1f4bb"],a:"4.0"},{n:["singer"],u:"1f9d1-200d-1f3a4",v:["1f9d1-1f3fb-200d-1f3a4","1f9d1-1f3fc-200d-1f3a4","1f9d1-1f3fd-200d-1f3a4","1f9d1-1f3fe-200d-1f3a4","1f9d1-1f3ff-200d-1f3a4"],a:"12.1"},{n:["man singer","male-singer"],u:"1f468-200d-1f3a4",v:["1f468-1f3fb-200d-1f3a4","1f468-1f3fc-200d-1f3a4","1f468-1f3fd-200d-1f3a4","1f468-1f3fe-200d-1f3a4","1f468-1f3ff-200d-1f3a4"],a:"4.0"},{n:["woman singer","female-singer"],u:"1f469-200d-1f3a4",v:["1f469-1f3fb-200d-1f3a4","1f469-1f3fc-200d-1f3a4","1f469-1f3fd-200d-1f3a4","1f469-1f3fe-200d-1f3a4","1f469-1f3ff-200d-1f3a4"],a:"4.0"},{n:["artist"],u:"1f9d1-200d-1f3a8",v:["1f9d1-1f3fb-200d-1f3a8","1f9d1-1f3fc-200d-1f3a8","1f9d1-1f3fd-200d-1f3a8","1f9d1-1f3fe-200d-1f3a8","1f9d1-1f3ff-200d-1f3a8"],a:"12.1"},{n:["man artist","male-artist"],u:"1f468-200d-1f3a8",v:["1f468-1f3fb-200d-1f3a8","1f468-1f3fc-200d-1f3a8","1f468-1f3fd-200d-1f3a8","1f468-1f3fe-200d-1f3a8","1f468-1f3ff-200d-1f3a8"],a:"4.0"},{n:["woman artist","female-artist"],u:"1f469-200d-1f3a8",v:["1f469-1f3fb-200d-1f3a8","1f469-1f3fc-200d-1f3a8","1f469-1f3fd-200d-1f3a8","1f469-1f3fe-200d-1f3a8","1f469-1f3ff-200d-1f3a8"],a:"4.0"},{n:["pilot"],u:"1f9d1-200d-2708-fe0f",v:["1f9d1-1f3fb-200d-2708-fe0f","1f9d1-1f3fc-200d-2708-fe0f","1f9d1-1f3fd-200d-2708-fe0f","1f9d1-1f3fe-200d-2708-fe0f","1f9d1-1f3ff-200d-2708-fe0f"],a:"12.1"},{n:["man pilot","male-pilot"],u:"1f468-200d-2708-fe0f",v:["1f468-1f3fb-200d-2708-fe0f","1f468-1f3fc-200d-2708-fe0f","1f468-1f3fd-200d-2708-fe0f","1f468-1f3fe-200d-2708-fe0f","1f468-1f3ff-200d-2708-fe0f"],a:"4.0"},{n:["woman pilot","female-pilot"],u:"1f469-200d-2708-fe0f",v:["1f469-1f3fb-200d-2708-fe0f","1f469-1f3fc-200d-2708-fe0f","1f469-1f3fd-200d-2708-fe0f","1f469-1f3fe-200d-2708-fe0f","1f469-1f3ff-200d-2708-fe0f"],a:"4.0"},{n:["astronaut"],u:"1f9d1-200d-1f680",v:["1f9d1-1f3fb-200d-1f680","1f9d1-1f3fc-200d-1f680","1f9d1-1f3fd-200d-1f680","1f9d1-1f3fe-200d-1f680","1f9d1-1f3ff-200d-1f680"],a:"12.1"},{n:["man astronaut","male-astronaut"],u:"1f468-200d-1f680",v:["1f468-1f3fb-200d-1f680","1f468-1f3fc-200d-1f680","1f468-1f3fd-200d-1f680","1f468-1f3fe-200d-1f680","1f468-1f3ff-200d-1f680"],a:"4.0"},{n:["woman astronaut","female-astronaut"],u:"1f469-200d-1f680",v:["1f469-1f3fb-200d-1f680","1f469-1f3fc-200d-1f680","1f469-1f3fd-200d-1f680","1f469-1f3fe-200d-1f680","1f469-1f3ff-200d-1f680"],a:"4.0"},{n:["firefighter"],u:"1f9d1-200d-1f692",v:["1f9d1-1f3fb-200d-1f692","1f9d1-1f3fc-200d-1f692","1f9d1-1f3fd-200d-1f692","1f9d1-1f3fe-200d-1f692","1f9d1-1f3ff-200d-1f692"],a:"12.1"},{n:["man firefighter","male-firefighter"],u:"1f468-200d-1f692",v:["1f468-1f3fb-200d-1f692","1f468-1f3fc-200d-1f692","1f468-1f3fd-200d-1f692","1f468-1f3fe-200d-1f692","1f468-1f3ff-200d-1f692"],a:"4.0"},{n:["woman firefighter","female-firefighter"],u:"1f469-200d-1f692",v:["1f469-1f3fb-200d-1f692","1f469-1f3fc-200d-1f692","1f469-1f3fd-200d-1f692","1f469-1f3fe-200d-1f692","1f469-1f3ff-200d-1f692"],a:"4.0"},{n:["cop","police officer"],u:"1f46e",v:["1f46e-1f3fb","1f46e-1f3fc","1f46e-1f3fd","1f46e-1f3fe","1f46e-1f3ff"],a:"0.6"},{n:["man police officer","male-police-officer"],u:"1f46e-200d-2642-fe0f",v:["1f46e-1f3fb-200d-2642-fe0f","1f46e-1f3fc-200d-2642-fe0f","1f46e-1f3fd-200d-2642-fe0f","1f46e-1f3fe-200d-2642-fe0f","1f46e-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman police officer","female-police-officer"],u:"1f46e-200d-2640-fe0f",v:["1f46e-1f3fb-200d-2640-fe0f","1f46e-1f3fc-200d-2640-fe0f","1f46e-1f3fd-200d-2640-fe0f","1f46e-1f3fe-200d-2640-fe0f","1f46e-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["detective","sleuth or spy"],u:"1f575-fe0f",v:["1f575-1f3fb","1f575-1f3fc","1f575-1f3fd","1f575-1f3fe","1f575-1f3ff"],a:"0.7"},{n:["man detective","male-detective"],u:"1f575-fe0f-200d-2642-fe0f",v:["1f575-1f3fb-200d-2642-fe0f","1f575-1f3fc-200d-2642-fe0f","1f575-1f3fd-200d-2642-fe0f","1f575-1f3fe-200d-2642-fe0f","1f575-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman detective","female-detective"],u:"1f575-fe0f-200d-2640-fe0f",v:["1f575-1f3fb-200d-2640-fe0f","1f575-1f3fc-200d-2640-fe0f","1f575-1f3fd-200d-2640-fe0f","1f575-1f3fe-200d-2640-fe0f","1f575-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["guardsman"],u:"1f482",v:["1f482-1f3fb","1f482-1f3fc","1f482-1f3fd","1f482-1f3fe","1f482-1f3ff"],a:"0.6"},{n:["man guard","male-guard"],u:"1f482-200d-2642-fe0f",v:["1f482-1f3fb-200d-2642-fe0f","1f482-1f3fc-200d-2642-fe0f","1f482-1f3fd-200d-2642-fe0f","1f482-1f3fe-200d-2642-fe0f","1f482-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman guard","female-guard"],u:"1f482-200d-2640-fe0f",v:["1f482-1f3fb-200d-2640-fe0f","1f482-1f3fc-200d-2640-fe0f","1f482-1f3fd-200d-2640-fe0f","1f482-1f3fe-200d-2640-fe0f","1f482-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["ninja"],u:"1f977",v:["1f977-1f3fb","1f977-1f3fc","1f977-1f3fd","1f977-1f3fe","1f977-1f3ff"],a:"13.0"},{n:["construction worker"],u:"1f477",v:["1f477-1f3fb","1f477-1f3fc","1f477-1f3fd","1f477-1f3fe","1f477-1f3ff"],a:"0.6"},{n:["man construction worker","male-construction-worker"],u:"1f477-200d-2642-fe0f",v:["1f477-1f3fb-200d-2642-fe0f","1f477-1f3fc-200d-2642-fe0f","1f477-1f3fd-200d-2642-fe0f","1f477-1f3fe-200d-2642-fe0f","1f477-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman construction worker","female-construction-worker"],u:"1f477-200d-2640-fe0f",v:["1f477-1f3fb-200d-2640-fe0f","1f477-1f3fc-200d-2640-fe0f","1f477-1f3fd-200d-2640-fe0f","1f477-1f3fe-200d-2640-fe0f","1f477-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person with crown"],u:"1fac5",v:["1fac5-1f3fb","1fac5-1f3fc","1fac5-1f3fd","1fac5-1f3fe","1fac5-1f3ff"],a:"14.0"},{n:["prince"],u:"1f934",v:["1f934-1f3fb","1f934-1f3fc","1f934-1f3fd","1f934-1f3fe","1f934-1f3ff"],a:"3.0"},{n:["princess"],u:"1f478",v:["1f478-1f3fb","1f478-1f3fc","1f478-1f3fd","1f478-1f3fe","1f478-1f3ff"],a:"0.6"},{n:["man with turban"],u:"1f473",v:["1f473-1f3fb","1f473-1f3fc","1f473-1f3fd","1f473-1f3fe","1f473-1f3ff"],a:"0.6"},{n:["man wearing turban","man-wearing-turban"],u:"1f473-200d-2642-fe0f",v:["1f473-1f3fb-200d-2642-fe0f","1f473-1f3fc-200d-2642-fe0f","1f473-1f3fd-200d-2642-fe0f","1f473-1f3fe-200d-2642-fe0f","1f473-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman wearing turban","woman-wearing-turban"],u:"1f473-200d-2640-fe0f",v:["1f473-1f3fb-200d-2640-fe0f","1f473-1f3fc-200d-2640-fe0f","1f473-1f3fd-200d-2640-fe0f","1f473-1f3fe-200d-2640-fe0f","1f473-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["man with gua pi mao"],u:"1f472",v:["1f472-1f3fb","1f472-1f3fc","1f472-1f3fd","1f472-1f3fe","1f472-1f3ff"],a:"0.6"},{n:["person with headscarf"],u:"1f9d5",v:["1f9d5-1f3fb","1f9d5-1f3fc","1f9d5-1f3fd","1f9d5-1f3fe","1f9d5-1f3ff"],a:"5.0"},{n:["man in tuxedo","person in tuxedo"],u:"1f935",v:["1f935-1f3fb","1f935-1f3fc","1f935-1f3fd","1f935-1f3fe","1f935-1f3ff"],a:"3.0"},{n:["man in tuxedo"],u:"1f935-200d-2642-fe0f",v:["1f935-1f3fb-200d-2642-fe0f","1f935-1f3fc-200d-2642-fe0f","1f935-1f3fd-200d-2642-fe0f","1f935-1f3fe-200d-2642-fe0f","1f935-1f3ff-200d-2642-fe0f"],a:"13.0"},{n:["woman in tuxedo"],u:"1f935-200d-2640-fe0f",v:["1f935-1f3fb-200d-2640-fe0f","1f935-1f3fc-200d-2640-fe0f","1f935-1f3fd-200d-2640-fe0f","1f935-1f3fe-200d-2640-fe0f","1f935-1f3ff-200d-2640-fe0f"],a:"13.0"},{n:["bride with veil"],u:"1f470",v:["1f470-1f3fb","1f470-1f3fc","1f470-1f3fd","1f470-1f3fe","1f470-1f3ff"],a:"0.6"},{n:["man with veil"],u:"1f470-200d-2642-fe0f",v:["1f470-1f3fb-200d-2642-fe0f","1f470-1f3fc-200d-2642-fe0f","1f470-1f3fd-200d-2642-fe0f","1f470-1f3fe-200d-2642-fe0f","1f470-1f3ff-200d-2642-fe0f"],a:"13.0"},{n:["woman with veil"],u:"1f470-200d-2640-fe0f",v:["1f470-1f3fb-200d-2640-fe0f","1f470-1f3fc-200d-2640-fe0f","1f470-1f3fd-200d-2640-fe0f","1f470-1f3fe-200d-2640-fe0f","1f470-1f3ff-200d-2640-fe0f"],a:"13.0"},{n:["pregnant woman"],u:"1f930",v:["1f930-1f3fb","1f930-1f3fc","1f930-1f3fd","1f930-1f3fe","1f930-1f3ff"],a:"3.0"},{n:["pregnant man"],u:"1fac3",v:["1fac3-1f3fb","1fac3-1f3fc","1fac3-1f3fd","1fac3-1f3fe","1fac3-1f3ff"],a:"14.0"},{n:["pregnant person"],u:"1fac4",v:["1fac4-1f3fb","1fac4-1f3fc","1fac4-1f3fd","1fac4-1f3fe","1fac4-1f3ff"],a:"14.0"},{n:["breast-feeding"],u:"1f931",v:["1f931-1f3fb","1f931-1f3fc","1f931-1f3fd","1f931-1f3fe","1f931-1f3ff"],a:"5.0"},{n:["woman feeding baby"],u:"1f469-200d-1f37c",v:["1f469-1f3fb-200d-1f37c","1f469-1f3fc-200d-1f37c","1f469-1f3fd-200d-1f37c","1f469-1f3fe-200d-1f37c","1f469-1f3ff-200d-1f37c"],a:"13.0"},{n:["man feeding baby"],u:"1f468-200d-1f37c",v:["1f468-1f3fb-200d-1f37c","1f468-1f3fc-200d-1f37c","1f468-1f3fd-200d-1f37c","1f468-1f3fe-200d-1f37c","1f468-1f3ff-200d-1f37c"],a:"13.0"},{n:["person feeding baby"],u:"1f9d1-200d-1f37c",v:["1f9d1-1f3fb-200d-1f37c","1f9d1-1f3fc-200d-1f37c","1f9d1-1f3fd-200d-1f37c","1f9d1-1f3fe-200d-1f37c","1f9d1-1f3ff-200d-1f37c"],a:"13.0"},{n:["angel","baby angel"],u:"1f47c",v:["1f47c-1f3fb","1f47c-1f3fc","1f47c-1f3fd","1f47c-1f3fe","1f47c-1f3ff"],a:"0.6"},{n:["santa","father christmas"],u:"1f385",v:["1f385-1f3fb","1f385-1f3fc","1f385-1f3fd","1f385-1f3fe","1f385-1f3ff"],a:"0.6"},{n:["mrs claus","mother christmas"],u:"1f936",v:["1f936-1f3fb","1f936-1f3fc","1f936-1f3fd","1f936-1f3fe","1f936-1f3ff"],a:"3.0"},{n:["mx claus"],u:"1f9d1-200d-1f384",v:["1f9d1-1f3fb-200d-1f384","1f9d1-1f3fc-200d-1f384","1f9d1-1f3fd-200d-1f384","1f9d1-1f3fe-200d-1f384","1f9d1-1f3ff-200d-1f384"],a:"13.0"},{n:["superhero"],u:"1f9b8",v:["1f9b8-1f3fb","1f9b8-1f3fc","1f9b8-1f3fd","1f9b8-1f3fe","1f9b8-1f3ff"],a:"11.0"},{n:["man superhero","male superhero"],u:"1f9b8-200d-2642-fe0f",v:["1f9b8-1f3fb-200d-2642-fe0f","1f9b8-1f3fc-200d-2642-fe0f","1f9b8-1f3fd-200d-2642-fe0f","1f9b8-1f3fe-200d-2642-fe0f","1f9b8-1f3ff-200d-2642-fe0f"],a:"11.0"},{n:["woman superhero","female superhero"],u:"1f9b8-200d-2640-fe0f",v:["1f9b8-1f3fb-200d-2640-fe0f","1f9b8-1f3fc-200d-2640-fe0f","1f9b8-1f3fd-200d-2640-fe0f","1f9b8-1f3fe-200d-2640-fe0f","1f9b8-1f3ff-200d-2640-fe0f"],a:"11.0"},{n:["supervillain"],u:"1f9b9",v:["1f9b9-1f3fb","1f9b9-1f3fc","1f9b9-1f3fd","1f9b9-1f3fe","1f9b9-1f3ff"],a:"11.0"},{n:["man supervillain","male supervillain"],u:"1f9b9-200d-2642-fe0f",v:["1f9b9-1f3fb-200d-2642-fe0f","1f9b9-1f3fc-200d-2642-fe0f","1f9b9-1f3fd-200d-2642-fe0f","1f9b9-1f3fe-200d-2642-fe0f","1f9b9-1f3ff-200d-2642-fe0f"],a:"11.0"},{n:["woman supervillain","female supervillain"],u:"1f9b9-200d-2640-fe0f",v:["1f9b9-1f3fb-200d-2640-fe0f","1f9b9-1f3fc-200d-2640-fe0f","1f9b9-1f3fd-200d-2640-fe0f","1f9b9-1f3fe-200d-2640-fe0f","1f9b9-1f3ff-200d-2640-fe0f"],a:"11.0"},{n:["mage"],u:"1f9d9",v:["1f9d9-1f3fb","1f9d9-1f3fc","1f9d9-1f3fd","1f9d9-1f3fe","1f9d9-1f3ff"],a:"5.0"},{n:["man mage","male mage"],u:"1f9d9-200d-2642-fe0f",v:["1f9d9-1f3fb-200d-2642-fe0f","1f9d9-1f3fc-200d-2642-fe0f","1f9d9-1f3fd-200d-2642-fe0f","1f9d9-1f3fe-200d-2642-fe0f","1f9d9-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman mage","female mage"],u:"1f9d9-200d-2640-fe0f",v:["1f9d9-1f3fb-200d-2640-fe0f","1f9d9-1f3fc-200d-2640-fe0f","1f9d9-1f3fd-200d-2640-fe0f","1f9d9-1f3fe-200d-2640-fe0f","1f9d9-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["fairy"],u:"1f9da",v:["1f9da-1f3fb","1f9da-1f3fc","1f9da-1f3fd","1f9da-1f3fe","1f9da-1f3ff"],a:"5.0"},{n:["man fairy","male fairy"],u:"1f9da-200d-2642-fe0f",v:["1f9da-1f3fb-200d-2642-fe0f","1f9da-1f3fc-200d-2642-fe0f","1f9da-1f3fd-200d-2642-fe0f","1f9da-1f3fe-200d-2642-fe0f","1f9da-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman fairy","female fairy"],u:"1f9da-200d-2640-fe0f",v:["1f9da-1f3fb-200d-2640-fe0f","1f9da-1f3fc-200d-2640-fe0f","1f9da-1f3fd-200d-2640-fe0f","1f9da-1f3fe-200d-2640-fe0f","1f9da-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["vampire"],u:"1f9db",v:["1f9db-1f3fb","1f9db-1f3fc","1f9db-1f3fd","1f9db-1f3fe","1f9db-1f3ff"],a:"5.0"},{n:["man vampire","male vampire"],u:"1f9db-200d-2642-fe0f",v:["1f9db-1f3fb-200d-2642-fe0f","1f9db-1f3fc-200d-2642-fe0f","1f9db-1f3fd-200d-2642-fe0f","1f9db-1f3fe-200d-2642-fe0f","1f9db-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman vampire","female vampire"],u:"1f9db-200d-2640-fe0f",v:["1f9db-1f3fb-200d-2640-fe0f","1f9db-1f3fc-200d-2640-fe0f","1f9db-1f3fd-200d-2640-fe0f","1f9db-1f3fe-200d-2640-fe0f","1f9db-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["merperson"],u:"1f9dc",v:["1f9dc-1f3fb","1f9dc-1f3fc","1f9dc-1f3fd","1f9dc-1f3fe","1f9dc-1f3ff"],a:"5.0"},{n:["merman"],u:"1f9dc-200d-2642-fe0f",v:["1f9dc-1f3fb-200d-2642-fe0f","1f9dc-1f3fc-200d-2642-fe0f","1f9dc-1f3fd-200d-2642-fe0f","1f9dc-1f3fe-200d-2642-fe0f","1f9dc-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["mermaid"],u:"1f9dc-200d-2640-fe0f",v:["1f9dc-1f3fb-200d-2640-fe0f","1f9dc-1f3fc-200d-2640-fe0f","1f9dc-1f3fd-200d-2640-fe0f","1f9dc-1f3fe-200d-2640-fe0f","1f9dc-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["elf"],u:"1f9dd",v:["1f9dd-1f3fb","1f9dd-1f3fc","1f9dd-1f3fd","1f9dd-1f3fe","1f9dd-1f3ff"],a:"5.0"},{n:["man elf","male elf"],u:"1f9dd-200d-2642-fe0f",v:["1f9dd-1f3fb-200d-2642-fe0f","1f9dd-1f3fc-200d-2642-fe0f","1f9dd-1f3fd-200d-2642-fe0f","1f9dd-1f3fe-200d-2642-fe0f","1f9dd-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman elf","female elf"],u:"1f9dd-200d-2640-fe0f",v:["1f9dd-1f3fb-200d-2640-fe0f","1f9dd-1f3fc-200d-2640-fe0f","1f9dd-1f3fd-200d-2640-fe0f","1f9dd-1f3fe-200d-2640-fe0f","1f9dd-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["genie"],u:"1f9de",a:"5.0"},{n:["man genie","male genie"],u:"1f9de-200d-2642-fe0f",a:"5.0"},{n:["woman genie","female genie"],u:"1f9de-200d-2640-fe0f",a:"5.0"},{n:["zombie"],u:"1f9df",a:"5.0"},{n:["man zombie","male zombie"],u:"1f9df-200d-2642-fe0f",a:"5.0"},{n:["woman zombie","female zombie"],u:"1f9df-200d-2640-fe0f",a:"5.0"},{n:["troll"],u:"1f9cc",a:"14.0"},{n:["massage","face massage"],u:"1f486",v:["1f486-1f3fb","1f486-1f3fc","1f486-1f3fd","1f486-1f3fe","1f486-1f3ff"],a:"0.6"},{n:["man getting massage","man-getting-massage"],u:"1f486-200d-2642-fe0f",v:["1f486-1f3fb-200d-2642-fe0f","1f486-1f3fc-200d-2642-fe0f","1f486-1f3fd-200d-2642-fe0f","1f486-1f3fe-200d-2642-fe0f","1f486-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman getting massage","woman-getting-massage"],u:"1f486-200d-2640-fe0f",v:["1f486-1f3fb-200d-2640-fe0f","1f486-1f3fc-200d-2640-fe0f","1f486-1f3fd-200d-2640-fe0f","1f486-1f3fe-200d-2640-fe0f","1f486-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["haircut"],u:"1f487",v:["1f487-1f3fb","1f487-1f3fc","1f487-1f3fd","1f487-1f3fe","1f487-1f3ff"],a:"0.6"},{n:["man getting haircut","man-getting-haircut"],u:"1f487-200d-2642-fe0f",v:["1f487-1f3fb-200d-2642-fe0f","1f487-1f3fc-200d-2642-fe0f","1f487-1f3fd-200d-2642-fe0f","1f487-1f3fe-200d-2642-fe0f","1f487-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman getting haircut","woman-getting-haircut"],u:"1f487-200d-2640-fe0f",v:["1f487-1f3fb-200d-2640-fe0f","1f487-1f3fc-200d-2640-fe0f","1f487-1f3fd-200d-2640-fe0f","1f487-1f3fe-200d-2640-fe0f","1f487-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["walking","pedestrian"],u:"1f6b6",v:["1f6b6-1f3fb","1f6b6-1f3fc","1f6b6-1f3fd","1f6b6-1f3fe","1f6b6-1f3ff"],a:"0.6"},{n:["man walking","man-walking"],u:"1f6b6-200d-2642-fe0f",v:["1f6b6-1f3fb-200d-2642-fe0f","1f6b6-1f3fc-200d-2642-fe0f","1f6b6-1f3fd-200d-2642-fe0f","1f6b6-1f3fe-200d-2642-fe0f","1f6b6-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman walking","woman-walking"],u:"1f6b6-200d-2640-fe0f",v:["1f6b6-1f3fb-200d-2640-fe0f","1f6b6-1f3fc-200d-2640-fe0f","1f6b6-1f3fd-200d-2640-fe0f","1f6b6-1f3fe-200d-2640-fe0f","1f6b6-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person walking facing right"],u:"1f6b6-200d-27a1-fe0f",v:["1f6b6-1f3fb-200d-27a1-fe0f","1f6b6-1f3fc-200d-27a1-fe0f","1f6b6-1f3fd-200d-27a1-fe0f","1f6b6-1f3fe-200d-27a1-fe0f","1f6b6-1f3ff-200d-27a1-fe0f"],a:"15.1"},{n:["woman walking facing right"],u:"1f6b6-200d-2640-fe0f-200d-27a1-fe0f",v:["1f6b6-1f3fb-200d-2640-fe0f-200d-27a1-fe0f","1f6b6-1f3fc-200d-2640-fe0f-200d-27a1-fe0f","1f6b6-1f3fd-200d-2640-fe0f-200d-27a1-fe0f","1f6b6-1f3fe-200d-2640-fe0f-200d-27a1-fe0f","1f6b6-1f3ff-200d-2640-fe0f-200d-27a1-fe0f"],a:"15.1"},{n:["man walking facing right"],u:"1f6b6-200d-2642-fe0f-200d-27a1-fe0f",v:["1f6b6-1f3fb-200d-2642-fe0f-200d-27a1-fe0f","1f6b6-1f3fc-200d-2642-fe0f-200d-27a1-fe0f","1f6b6-1f3fd-200d-2642-fe0f-200d-27a1-fe0f","1f6b6-1f3fe-200d-2642-fe0f-200d-27a1-fe0f","1f6b6-1f3ff-200d-2642-fe0f-200d-27a1-fe0f"],a:"15.1"},{n:["standing person"],u:"1f9cd",v:["1f9cd-1f3fb","1f9cd-1f3fc","1f9cd-1f3fd","1f9cd-1f3fe","1f9cd-1f3ff"],a:"12.0"},{n:["man standing"],u:"1f9cd-200d-2642-fe0f",v:["1f9cd-1f3fb-200d-2642-fe0f","1f9cd-1f3fc-200d-2642-fe0f","1f9cd-1f3fd-200d-2642-fe0f","1f9cd-1f3fe-200d-2642-fe0f","1f9cd-1f3ff-200d-2642-fe0f"],a:"12.0"},{n:["woman standing"],u:"1f9cd-200d-2640-fe0f",v:["1f9cd-1f3fb-200d-2640-fe0f","1f9cd-1f3fc-200d-2640-fe0f","1f9cd-1f3fd-200d-2640-fe0f","1f9cd-1f3fe-200d-2640-fe0f","1f9cd-1f3ff-200d-2640-fe0f"],a:"12.0"},{n:["kneeling person"],u:"1f9ce",v:["1f9ce-1f3fb","1f9ce-1f3fc","1f9ce-1f3fd","1f9ce-1f3fe","1f9ce-1f3ff"],a:"12.0"},{n:["man kneeling"],u:"1f9ce-200d-2642-fe0f",v:["1f9ce-1f3fb-200d-2642-fe0f","1f9ce-1f3fc-200d-2642-fe0f","1f9ce-1f3fd-200d-2642-fe0f","1f9ce-1f3fe-200d-2642-fe0f","1f9ce-1f3ff-200d-2642-fe0f"],a:"12.0"},{n:["woman kneeling"],u:"1f9ce-200d-2640-fe0f",v:["1f9ce-1f3fb-200d-2640-fe0f","1f9ce-1f3fc-200d-2640-fe0f","1f9ce-1f3fd-200d-2640-fe0f","1f9ce-1f3fe-200d-2640-fe0f","1f9ce-1f3ff-200d-2640-fe0f"],a:"12.0"},{n:["person kneeling facing right"],u:"1f9ce-200d-27a1-fe0f",v:["1f9ce-1f3fb-200d-27a1-fe0f","1f9ce-1f3fc-200d-27a1-fe0f","1f9ce-1f3fd-200d-27a1-fe0f","1f9ce-1f3fe-200d-27a1-fe0f","1f9ce-1f3ff-200d-27a1-fe0f"],a:"15.1"},{n:["woman kneeling facing right"],u:"1f9ce-200d-2640-fe0f-200d-27a1-fe0f",v:["1f9ce-1f3fb-200d-2640-fe0f-200d-27a1-fe0f","1f9ce-1f3fc-200d-2640-fe0f-200d-27a1-fe0f","1f9ce-1f3fd-200d-2640-fe0f-200d-27a1-fe0f","1f9ce-1f3fe-200d-2640-fe0f-200d-27a1-fe0f","1f9ce-1f3ff-200d-2640-fe0f-200d-27a1-fe0f"],a:"15.1"},{n:["man kneeling facing right"],u:"1f9ce-200d-2642-fe0f-200d-27a1-fe0f",v:["1f9ce-1f3fb-200d-2642-fe0f-200d-27a1-fe0f","1f9ce-1f3fc-200d-2642-fe0f-200d-27a1-fe0f","1f9ce-1f3fd-200d-2642-fe0f-200d-27a1-fe0f","1f9ce-1f3fe-200d-2642-fe0f-200d-27a1-fe0f","1f9ce-1f3ff-200d-2642-fe0f-200d-27a1-fe0f"],a:"15.1"},{n:["person with white cane","person with probing cane"],u:"1f9d1-200d-1f9af",v:["1f9d1-1f3fb-200d-1f9af","1f9d1-1f3fc-200d-1f9af","1f9d1-1f3fd-200d-1f9af","1f9d1-1f3fe-200d-1f9af","1f9d1-1f3ff-200d-1f9af"],a:"12.1"},{n:["person with white cane facing right"],u:"1f9d1-200d-1f9af-200d-27a1-fe0f",v:["1f9d1-1f3fb-200d-1f9af-200d-27a1-fe0f","1f9d1-1f3fc-200d-1f9af-200d-27a1-fe0f","1f9d1-1f3fd-200d-1f9af-200d-27a1-fe0f","1f9d1-1f3fe-200d-1f9af-200d-27a1-fe0f","1f9d1-1f3ff-200d-1f9af-200d-27a1-fe0f"],a:"15.1"},{n:["man with white cane","man with probing cane"],u:"1f468-200d-1f9af",v:["1f468-1f3fb-200d-1f9af","1f468-1f3fc-200d-1f9af","1f468-1f3fd-200d-1f9af","1f468-1f3fe-200d-1f9af","1f468-1f3ff-200d-1f9af"],a:"12.0"},{n:["man with white cane facing right"],u:"1f468-200d-1f9af-200d-27a1-fe0f",v:["1f468-1f3fb-200d-1f9af-200d-27a1-fe0f","1f468-1f3fc-200d-1f9af-200d-27a1-fe0f","1f468-1f3fd-200d-1f9af-200d-27a1-fe0f","1f468-1f3fe-200d-1f9af-200d-27a1-fe0f","1f468-1f3ff-200d-1f9af-200d-27a1-fe0f"],a:"15.1"},{n:["woman with white cane","woman with probing cane"],u:"1f469-200d-1f9af",v:["1f469-1f3fb-200d-1f9af","1f469-1f3fc-200d-1f9af","1f469-1f3fd-200d-1f9af","1f469-1f3fe-200d-1f9af","1f469-1f3ff-200d-1f9af"],a:"12.0"},{n:["woman with white cane facing right"],u:"1f469-200d-1f9af-200d-27a1-fe0f",v:["1f469-1f3fb-200d-1f9af-200d-27a1-fe0f","1f469-1f3fc-200d-1f9af-200d-27a1-fe0f","1f469-1f3fd-200d-1f9af-200d-27a1-fe0f","1f469-1f3fe-200d-1f9af-200d-27a1-fe0f","1f469-1f3ff-200d-1f9af-200d-27a1-fe0f"],a:"15.1"},{n:["person in motorized wheelchair"],u:"1f9d1-200d-1f9bc",v:["1f9d1-1f3fb-200d-1f9bc","1f9d1-1f3fc-200d-1f9bc","1f9d1-1f3fd-200d-1f9bc","1f9d1-1f3fe-200d-1f9bc","1f9d1-1f3ff-200d-1f9bc"],a:"12.1"},{n:["person in motorized wheelchair facing right"],u:"1f9d1-200d-1f9bc-200d-27a1-fe0f",v:["1f9d1-1f3fb-200d-1f9bc-200d-27a1-fe0f","1f9d1-1f3fc-200d-1f9bc-200d-27a1-fe0f","1f9d1-1f3fd-200d-1f9bc-200d-27a1-fe0f","1f9d1-1f3fe-200d-1f9bc-200d-27a1-fe0f","1f9d1-1f3ff-200d-1f9bc-200d-27a1-fe0f"],a:"15.1"},{n:["man in motorized wheelchair"],u:"1f468-200d-1f9bc",v:["1f468-1f3fb-200d-1f9bc","1f468-1f3fc-200d-1f9bc","1f468-1f3fd-200d-1f9bc","1f468-1f3fe-200d-1f9bc","1f468-1f3ff-200d-1f9bc"],a:"12.0"},{n:["man in motorized wheelchair facing right"],u:"1f468-200d-1f9bc-200d-27a1-fe0f",v:["1f468-1f3fb-200d-1f9bc-200d-27a1-fe0f","1f468-1f3fc-200d-1f9bc-200d-27a1-fe0f","1f468-1f3fd-200d-1f9bc-200d-27a1-fe0f","1f468-1f3fe-200d-1f9bc-200d-27a1-fe0f","1f468-1f3ff-200d-1f9bc-200d-27a1-fe0f"],a:"15.1"},{n:["woman in motorized wheelchair"],u:"1f469-200d-1f9bc",v:["1f469-1f3fb-200d-1f9bc","1f469-1f3fc-200d-1f9bc","1f469-1f3fd-200d-1f9bc","1f469-1f3fe-200d-1f9bc","1f469-1f3ff-200d-1f9bc"],a:"12.0"},{n:["woman in motorized wheelchair facing right"],u:"1f469-200d-1f9bc-200d-27a1-fe0f",v:["1f469-1f3fb-200d-1f9bc-200d-27a1-fe0f","1f469-1f3fc-200d-1f9bc-200d-27a1-fe0f","1f469-1f3fd-200d-1f9bc-200d-27a1-fe0f","1f469-1f3fe-200d-1f9bc-200d-27a1-fe0f","1f469-1f3ff-200d-1f9bc-200d-27a1-fe0f"],a:"15.1"},{n:["person in manual wheelchair"],u:"1f9d1-200d-1f9bd",v:["1f9d1-1f3fb-200d-1f9bd","1f9d1-1f3fc-200d-1f9bd","1f9d1-1f3fd-200d-1f9bd","1f9d1-1f3fe-200d-1f9bd","1f9d1-1f3ff-200d-1f9bd"],a:"12.1"},{n:["person in manual wheelchair facing right"],u:"1f9d1-200d-1f9bd-200d-27a1-fe0f",v:["1f9d1-1f3fb-200d-1f9bd-200d-27a1-fe0f","1f9d1-1f3fc-200d-1f9bd-200d-27a1-fe0f","1f9d1-1f3fd-200d-1f9bd-200d-27a1-fe0f","1f9d1-1f3fe-200d-1f9bd-200d-27a1-fe0f","1f9d1-1f3ff-200d-1f9bd-200d-27a1-fe0f"],a:"15.1"},{n:["man in manual wheelchair"],u:"1f468-200d-1f9bd",v:["1f468-1f3fb-200d-1f9bd","1f468-1f3fc-200d-1f9bd","1f468-1f3fd-200d-1f9bd","1f468-1f3fe-200d-1f9bd","1f468-1f3ff-200d-1f9bd"],a:"12.0"},{n:["man in manual wheelchair facing right"],u:"1f468-200d-1f9bd-200d-27a1-fe0f",v:["1f468-1f3fb-200d-1f9bd-200d-27a1-fe0f","1f468-1f3fc-200d-1f9bd-200d-27a1-fe0f","1f468-1f3fd-200d-1f9bd-200d-27a1-fe0f","1f468-1f3fe-200d-1f9bd-200d-27a1-fe0f","1f468-1f3ff-200d-1f9bd-200d-27a1-fe0f"],a:"15.1"},{n:["woman in manual wheelchair"],u:"1f469-200d-1f9bd",v:["1f469-1f3fb-200d-1f9bd","1f469-1f3fc-200d-1f9bd","1f469-1f3fd-200d-1f9bd","1f469-1f3fe-200d-1f9bd","1f469-1f3ff-200d-1f9bd"],a:"12.0"},{n:["woman in manual wheelchair facing right"],u:"1f469-200d-1f9bd-200d-27a1-fe0f",v:["1f469-1f3fb-200d-1f9bd-200d-27a1-fe0f","1f469-1f3fc-200d-1f9bd-200d-27a1-fe0f","1f469-1f3fd-200d-1f9bd-200d-27a1-fe0f","1f469-1f3fe-200d-1f9bd-200d-27a1-fe0f","1f469-1f3ff-200d-1f9bd-200d-27a1-fe0f"],a:"15.1"},{n:["runner","running"],u:"1f3c3",v:["1f3c3-1f3fb","1f3c3-1f3fc","1f3c3-1f3fd","1f3c3-1f3fe","1f3c3-1f3ff"],a:"0.6"},{n:["man running","man-running"],u:"1f3c3-200d-2642-fe0f",v:["1f3c3-1f3fb-200d-2642-fe0f","1f3c3-1f3fc-200d-2642-fe0f","1f3c3-1f3fd-200d-2642-fe0f","1f3c3-1f3fe-200d-2642-fe0f","1f3c3-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman running","woman-running"],u:"1f3c3-200d-2640-fe0f",v:["1f3c3-1f3fb-200d-2640-fe0f","1f3c3-1f3fc-200d-2640-fe0f","1f3c3-1f3fd-200d-2640-fe0f","1f3c3-1f3fe-200d-2640-fe0f","1f3c3-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person running facing right"],u:"1f3c3-200d-27a1-fe0f",v:["1f3c3-1f3fb-200d-27a1-fe0f","1f3c3-1f3fc-200d-27a1-fe0f","1f3c3-1f3fd-200d-27a1-fe0f","1f3c3-1f3fe-200d-27a1-fe0f","1f3c3-1f3ff-200d-27a1-fe0f"],a:"15.1"},{n:["woman running facing right"],u:"1f3c3-200d-2640-fe0f-200d-27a1-fe0f",v:["1f3c3-1f3fb-200d-2640-fe0f-200d-27a1-fe0f","1f3c3-1f3fc-200d-2640-fe0f-200d-27a1-fe0f","1f3c3-1f3fd-200d-2640-fe0f-200d-27a1-fe0f","1f3c3-1f3fe-200d-2640-fe0f-200d-27a1-fe0f","1f3c3-1f3ff-200d-2640-fe0f-200d-27a1-fe0f"],a:"15.1"},{n:["man running facing right"],u:"1f3c3-200d-2642-fe0f-200d-27a1-fe0f",v:["1f3c3-1f3fb-200d-2642-fe0f-200d-27a1-fe0f","1f3c3-1f3fc-200d-2642-fe0f-200d-27a1-fe0f","1f3c3-1f3fd-200d-2642-fe0f-200d-27a1-fe0f","1f3c3-1f3fe-200d-2642-fe0f-200d-27a1-fe0f","1f3c3-1f3ff-200d-2642-fe0f-200d-27a1-fe0f"],a:"15.1"},{n:["dancer"],u:"1f483",v:["1f483-1f3fb","1f483-1f3fc","1f483-1f3fd","1f483-1f3fe","1f483-1f3ff"],a:"0.6"},{n:["man dancing"],u:"1f57a",v:["1f57a-1f3fb","1f57a-1f3fc","1f57a-1f3fd","1f57a-1f3fe","1f57a-1f3ff"],a:"3.0"},{n:["person in suit levitating","man in business suit levitating"],u:"1f574-fe0f",v:["1f574-1f3fb","1f574-1f3fc","1f574-1f3fd","1f574-1f3fe","1f574-1f3ff"],a:"0.7"},{n:["dancers","woman with bunny ears"],u:"1f46f",a:"0.6"},{n:["men with bunny ears","men-with-bunny-ears-partying","man-with-bunny-ears-partying"],u:"1f46f-200d-2642-fe0f",a:"4.0"},{n:["women with bunny ears","women-with-bunny-ears-partying","woman-with-bunny-ears-partying"],u:"1f46f-200d-2640-fe0f",a:"4.0"},{n:["person in steamy room"],u:"1f9d6",v:["1f9d6-1f3fb","1f9d6-1f3fc","1f9d6-1f3fd","1f9d6-1f3fe","1f9d6-1f3ff"],a:"5.0"},{n:["man in steamy room"],u:"1f9d6-200d-2642-fe0f",v:["1f9d6-1f3fb-200d-2642-fe0f","1f9d6-1f3fc-200d-2642-fe0f","1f9d6-1f3fd-200d-2642-fe0f","1f9d6-1f3fe-200d-2642-fe0f","1f9d6-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman in steamy room"],u:"1f9d6-200d-2640-fe0f",v:["1f9d6-1f3fb-200d-2640-fe0f","1f9d6-1f3fc-200d-2640-fe0f","1f9d6-1f3fd-200d-2640-fe0f","1f9d6-1f3fe-200d-2640-fe0f","1f9d6-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["person climbing"],u:"1f9d7",v:["1f9d7-1f3fb","1f9d7-1f3fc","1f9d7-1f3fd","1f9d7-1f3fe","1f9d7-1f3ff"],a:"5.0"},{n:["man climbing"],u:"1f9d7-200d-2642-fe0f",v:["1f9d7-1f3fb-200d-2642-fe0f","1f9d7-1f3fc-200d-2642-fe0f","1f9d7-1f3fd-200d-2642-fe0f","1f9d7-1f3fe-200d-2642-fe0f","1f9d7-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman climbing"],u:"1f9d7-200d-2640-fe0f",v:["1f9d7-1f3fb-200d-2640-fe0f","1f9d7-1f3fc-200d-2640-fe0f","1f9d7-1f3fd-200d-2640-fe0f","1f9d7-1f3fe-200d-2640-fe0f","1f9d7-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["fencer"],u:"1f93a",a:"3.0"},{n:["horse racing"],u:"1f3c7",v:["1f3c7-1f3fb","1f3c7-1f3fc","1f3c7-1f3fd","1f3c7-1f3fe","1f3c7-1f3ff"],a:"1.0"},{n:["skier"],u:"26f7-fe0f",a:"0.7"},{n:["snowboarder"],u:"1f3c2",v:["1f3c2-1f3fb","1f3c2-1f3fc","1f3c2-1f3fd","1f3c2-1f3fe","1f3c2-1f3ff"],a:"0.6"},{n:["golfer","person golfing"],u:"1f3cc-fe0f",v:["1f3cc-1f3fb","1f3cc-1f3fc","1f3cc-1f3fd","1f3cc-1f3fe","1f3cc-1f3ff"],a:"0.7"},{n:["man golfing","man-golfing"],u:"1f3cc-fe0f-200d-2642-fe0f",v:["1f3cc-1f3fb-200d-2642-fe0f","1f3cc-1f3fc-200d-2642-fe0f","1f3cc-1f3fd-200d-2642-fe0f","1f3cc-1f3fe-200d-2642-fe0f","1f3cc-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman golfing","woman-golfing"],u:"1f3cc-fe0f-200d-2640-fe0f",v:["1f3cc-1f3fb-200d-2640-fe0f","1f3cc-1f3fc-200d-2640-fe0f","1f3cc-1f3fd-200d-2640-fe0f","1f3cc-1f3fe-200d-2640-fe0f","1f3cc-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["surfer"],u:"1f3c4",v:["1f3c4-1f3fb","1f3c4-1f3fc","1f3c4-1f3fd","1f3c4-1f3fe","1f3c4-1f3ff"],a:"0.6"},{n:["man surfing","man-surfing"],u:"1f3c4-200d-2642-fe0f",v:["1f3c4-1f3fb-200d-2642-fe0f","1f3c4-1f3fc-200d-2642-fe0f","1f3c4-1f3fd-200d-2642-fe0f","1f3c4-1f3fe-200d-2642-fe0f","1f3c4-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman surfing","woman-surfing"],u:"1f3c4-200d-2640-fe0f",v:["1f3c4-1f3fb-200d-2640-fe0f","1f3c4-1f3fc-200d-2640-fe0f","1f3c4-1f3fd-200d-2640-fe0f","1f3c4-1f3fe-200d-2640-fe0f","1f3c4-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["rowboat"],u:"1f6a3",v:["1f6a3-1f3fb","1f6a3-1f3fc","1f6a3-1f3fd","1f6a3-1f3fe","1f6a3-1f3ff"],a:"1.0"},{n:["man rowing boat","man-rowing-boat"],u:"1f6a3-200d-2642-fe0f",v:["1f6a3-1f3fb-200d-2642-fe0f","1f6a3-1f3fc-200d-2642-fe0f","1f6a3-1f3fd-200d-2642-fe0f","1f6a3-1f3fe-200d-2642-fe0f","1f6a3-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman rowing boat","woman-rowing-boat"],u:"1f6a3-200d-2640-fe0f",v:["1f6a3-1f3fb-200d-2640-fe0f","1f6a3-1f3fc-200d-2640-fe0f","1f6a3-1f3fd-200d-2640-fe0f","1f6a3-1f3fe-200d-2640-fe0f","1f6a3-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["swimmer"],u:"1f3ca",v:["1f3ca-1f3fb","1f3ca-1f3fc","1f3ca-1f3fd","1f3ca-1f3fe","1f3ca-1f3ff"],a:"0.6"},{n:["man swimming","man-swimming"],u:"1f3ca-200d-2642-fe0f",v:["1f3ca-1f3fb-200d-2642-fe0f","1f3ca-1f3fc-200d-2642-fe0f","1f3ca-1f3fd-200d-2642-fe0f","1f3ca-1f3fe-200d-2642-fe0f","1f3ca-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman swimming","woman-swimming"],u:"1f3ca-200d-2640-fe0f",v:["1f3ca-1f3fb-200d-2640-fe0f","1f3ca-1f3fc-200d-2640-fe0f","1f3ca-1f3fd-200d-2640-fe0f","1f3ca-1f3fe-200d-2640-fe0f","1f3ca-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person with ball","person bouncing ball"],u:"26f9-fe0f",v:["26f9-1f3fb","26f9-1f3fc","26f9-1f3fd","26f9-1f3fe","26f9-1f3ff"],a:"0.7"},{n:["man bouncing ball","man-bouncing-ball"],u:"26f9-fe0f-200d-2642-fe0f",v:["26f9-1f3fb-200d-2642-fe0f","26f9-1f3fc-200d-2642-fe0f","26f9-1f3fd-200d-2642-fe0f","26f9-1f3fe-200d-2642-fe0f","26f9-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman bouncing ball","woman-bouncing-ball"],u:"26f9-fe0f-200d-2640-fe0f",v:["26f9-1f3fb-200d-2640-fe0f","26f9-1f3fc-200d-2640-fe0f","26f9-1f3fd-200d-2640-fe0f","26f9-1f3fe-200d-2640-fe0f","26f9-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["weight lifter","person lifting weights"],u:"1f3cb-fe0f",v:["1f3cb-1f3fb","1f3cb-1f3fc","1f3cb-1f3fd","1f3cb-1f3fe","1f3cb-1f3ff"],a:"0.7"},{n:["man lifting weights","man-lifting-weights"],u:"1f3cb-fe0f-200d-2642-fe0f",v:["1f3cb-1f3fb-200d-2642-fe0f","1f3cb-1f3fc-200d-2642-fe0f","1f3cb-1f3fd-200d-2642-fe0f","1f3cb-1f3fe-200d-2642-fe0f","1f3cb-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman lifting weights","woman-lifting-weights"],u:"1f3cb-fe0f-200d-2640-fe0f",v:["1f3cb-1f3fb-200d-2640-fe0f","1f3cb-1f3fc-200d-2640-fe0f","1f3cb-1f3fd-200d-2640-fe0f","1f3cb-1f3fe-200d-2640-fe0f","1f3cb-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["bicyclist"],u:"1f6b4",v:["1f6b4-1f3fb","1f6b4-1f3fc","1f6b4-1f3fd","1f6b4-1f3fe","1f6b4-1f3ff"],a:"1.0"},{n:["man biking","man-biking"],u:"1f6b4-200d-2642-fe0f",v:["1f6b4-1f3fb-200d-2642-fe0f","1f6b4-1f3fc-200d-2642-fe0f","1f6b4-1f3fd-200d-2642-fe0f","1f6b4-1f3fe-200d-2642-fe0f","1f6b4-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman biking","woman-biking"],u:"1f6b4-200d-2640-fe0f",v:["1f6b4-1f3fb-200d-2640-fe0f","1f6b4-1f3fc-200d-2640-fe0f","1f6b4-1f3fd-200d-2640-fe0f","1f6b4-1f3fe-200d-2640-fe0f","1f6b4-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["mountain bicyclist"],u:"1f6b5",v:["1f6b5-1f3fb","1f6b5-1f3fc","1f6b5-1f3fd","1f6b5-1f3fe","1f6b5-1f3ff"],a:"1.0"},{n:["man mountain biking","man-mountain-biking"],u:"1f6b5-200d-2642-fe0f",v:["1f6b5-1f3fb-200d-2642-fe0f","1f6b5-1f3fc-200d-2642-fe0f","1f6b5-1f3fd-200d-2642-fe0f","1f6b5-1f3fe-200d-2642-fe0f","1f6b5-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman mountain biking","woman-mountain-biking"],u:"1f6b5-200d-2640-fe0f",v:["1f6b5-1f3fb-200d-2640-fe0f","1f6b5-1f3fc-200d-2640-fe0f","1f6b5-1f3fd-200d-2640-fe0f","1f6b5-1f3fe-200d-2640-fe0f","1f6b5-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person doing cartwheel"],u:"1f938",v:["1f938-1f3fb","1f938-1f3fc","1f938-1f3fd","1f938-1f3fe","1f938-1f3ff"],a:"3.0"},{n:["man cartwheeling","man-cartwheeling"],u:"1f938-200d-2642-fe0f",v:["1f938-1f3fb-200d-2642-fe0f","1f938-1f3fc-200d-2642-fe0f","1f938-1f3fd-200d-2642-fe0f","1f938-1f3fe-200d-2642-fe0f","1f938-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman cartwheeling","woman-cartwheeling"],u:"1f938-200d-2640-fe0f",v:["1f938-1f3fb-200d-2640-fe0f","1f938-1f3fc-200d-2640-fe0f","1f938-1f3fd-200d-2640-fe0f","1f938-1f3fe-200d-2640-fe0f","1f938-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["wrestlers"],u:"1f93c",a:"3.0"},{n:["men wrestling","man-wrestling"],u:"1f93c-200d-2642-fe0f",a:"4.0"},{n:["women wrestling","woman-wrestling"],u:"1f93c-200d-2640-fe0f",a:"4.0"},{n:["water polo"],u:"1f93d",v:["1f93d-1f3fb","1f93d-1f3fc","1f93d-1f3fd","1f93d-1f3fe","1f93d-1f3ff"],a:"3.0"},{n:["man playing water polo","man-playing-water-polo"],u:"1f93d-200d-2642-fe0f",v:["1f93d-1f3fb-200d-2642-fe0f","1f93d-1f3fc-200d-2642-fe0f","1f93d-1f3fd-200d-2642-fe0f","1f93d-1f3fe-200d-2642-fe0f","1f93d-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman playing water polo","woman-playing-water-polo"],u:"1f93d-200d-2640-fe0f",v:["1f93d-1f3fb-200d-2640-fe0f","1f93d-1f3fc-200d-2640-fe0f","1f93d-1f3fd-200d-2640-fe0f","1f93d-1f3fe-200d-2640-fe0f","1f93d-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["handball"],u:"1f93e",v:["1f93e-1f3fb","1f93e-1f3fc","1f93e-1f3fd","1f93e-1f3fe","1f93e-1f3ff"],a:"3.0"},{n:["man playing handball","man-playing-handball"],u:"1f93e-200d-2642-fe0f",v:["1f93e-1f3fb-200d-2642-fe0f","1f93e-1f3fc-200d-2642-fe0f","1f93e-1f3fd-200d-2642-fe0f","1f93e-1f3fe-200d-2642-fe0f","1f93e-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman playing handball","woman-playing-handball"],u:"1f93e-200d-2640-fe0f",v:["1f93e-1f3fb-200d-2640-fe0f","1f93e-1f3fc-200d-2640-fe0f","1f93e-1f3fd-200d-2640-fe0f","1f93e-1f3fe-200d-2640-fe0f","1f93e-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["juggling"],u:"1f939",v:["1f939-1f3fb","1f939-1f3fc","1f939-1f3fd","1f939-1f3fe","1f939-1f3ff"],a:"3.0"},{n:["man juggling","man-juggling"],u:"1f939-200d-2642-fe0f",v:["1f939-1f3fb-200d-2642-fe0f","1f939-1f3fc-200d-2642-fe0f","1f939-1f3fd-200d-2642-fe0f","1f939-1f3fe-200d-2642-fe0f","1f939-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman juggling","woman-juggling"],u:"1f939-200d-2640-fe0f",v:["1f939-1f3fb-200d-2640-fe0f","1f939-1f3fc-200d-2640-fe0f","1f939-1f3fd-200d-2640-fe0f","1f939-1f3fe-200d-2640-fe0f","1f939-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person in lotus position"],u:"1f9d8",v:["1f9d8-1f3fb","1f9d8-1f3fc","1f9d8-1f3fd","1f9d8-1f3fe","1f9d8-1f3ff"],a:"5.0"},{n:["man in lotus position"],u:"1f9d8-200d-2642-fe0f",v:["1f9d8-1f3fb-200d-2642-fe0f","1f9d8-1f3fc-200d-2642-fe0f","1f9d8-1f3fd-200d-2642-fe0f","1f9d8-1f3fe-200d-2642-fe0f","1f9d8-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman in lotus position"],u:"1f9d8-200d-2640-fe0f",v:["1f9d8-1f3fb-200d-2640-fe0f","1f9d8-1f3fc-200d-2640-fe0f","1f9d8-1f3fd-200d-2640-fe0f","1f9d8-1f3fe-200d-2640-fe0f","1f9d8-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["bath"],u:"1f6c0",v:["1f6c0-1f3fb","1f6c0-1f3fc","1f6c0-1f3fd","1f6c0-1f3fe","1f6c0-1f3ff"],a:"0.6"},{n:["sleeping accommodation"],u:"1f6cc",v:["1f6cc-1f3fb","1f6cc-1f3fc","1f6cc-1f3fd","1f6cc-1f3fe","1f6cc-1f3ff"],a:"1.0"},{n:["people holding hands"],u:"1f9d1-200d-1f91d-200d-1f9d1",v:["1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fb","1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fc","1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fd","1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fe","1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3ff","1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fb","1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fc","1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fd","1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fe","1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3ff","1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fb","1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fc","1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fd","1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fe","1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3ff","1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fb","1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fc","1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fd","1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fe","1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3ff","1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fb","1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fc","1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fd","1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fe","1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3ff"],a:"12.0"},{n:["women holding hands","two women holding hands"],u:"1f46d",v:["1f46d-1f3fb","1f46d-1f3fc","1f46d-1f3fd","1f46d-1f3fe","1f46d-1f3ff","1f469-1f3fb-200d-1f91d-200d-1f469-1f3fc","1f469-1f3fb-200d-1f91d-200d-1f469-1f3fd","1f469-1f3fb-200d-1f91d-200d-1f469-1f3fe","1f469-1f3fb-200d-1f91d-200d-1f469-1f3ff","1f469-1f3fc-200d-1f91d-200d-1f469-1f3fb","1f469-1f3fc-200d-1f91d-200d-1f469-1f3fd","1f469-1f3fc-200d-1f91d-200d-1f469-1f3fe","1f469-1f3fc-200d-1f91d-200d-1f469-1f3ff","1f469-1f3fd-200d-1f91d-200d-1f469-1f3fb","1f469-1f3fd-200d-1f91d-200d-1f469-1f3fc","1f469-1f3fd-200d-1f91d-200d-1f469-1f3fe","1f469-1f3fd-200d-1f91d-200d-1f469-1f3ff","1f469-1f3fe-200d-1f91d-200d-1f469-1f3fb","1f469-1f3fe-200d-1f91d-200d-1f469-1f3fc","1f469-1f3fe-200d-1f91d-200d-1f469-1f3fd","1f469-1f3fe-200d-1f91d-200d-1f469-1f3ff","1f469-1f3ff-200d-1f91d-200d-1f469-1f3fb","1f469-1f3ff-200d-1f91d-200d-1f469-1f3fc","1f469-1f3ff-200d-1f91d-200d-1f469-1f3fd","1f469-1f3ff-200d-1f91d-200d-1f469-1f3fe"],a:"1.0"},{n:["couple","man and woman holding hands","woman and man holding hands"],u:"1f46b",v:["1f46b-1f3fb","1f46b-1f3fc","1f46b-1f3fd","1f46b-1f3fe","1f46b-1f3ff","1f469-1f3fb-200d-1f91d-200d-1f468-1f3fc","1f469-1f3fb-200d-1f91d-200d-1f468-1f3fd","1f469-1f3fb-200d-1f91d-200d-1f468-1f3fe","1f469-1f3fb-200d-1f91d-200d-1f468-1f3ff","1f469-1f3fc-200d-1f91d-200d-1f468-1f3fb","1f469-1f3fc-200d-1f91d-200d-1f468-1f3fd","1f469-1f3fc-200d-1f91d-200d-1f468-1f3fe","1f469-1f3fc-200d-1f91d-200d-1f468-1f3ff","1f469-1f3fd-200d-1f91d-200d-1f468-1f3fb","1f469-1f3fd-200d-1f91d-200d-1f468-1f3fc","1f469-1f3fd-200d-1f91d-200d-1f468-1f3fe","1f469-1f3fd-200d-1f91d-200d-1f468-1f3ff","1f469-1f3fe-200d-1f91d-200d-1f468-1f3fb","1f469-1f3fe-200d-1f91d-200d-1f468-1f3fc","1f469-1f3fe-200d-1f91d-200d-1f468-1f3fd","1f469-1f3fe-200d-1f91d-200d-1f468-1f3ff","1f469-1f3ff-200d-1f91d-200d-1f468-1f3fb","1f469-1f3ff-200d-1f91d-200d-1f468-1f3fc","1f469-1f3ff-200d-1f91d-200d-1f468-1f3fd","1f469-1f3ff-200d-1f91d-200d-1f468-1f3fe"],a:"0.6"},{n:["men holding hands","two men holding hands"],u:"1f46c",v:["1f46c-1f3fb","1f46c-1f3fc","1f46c-1f3fd","1f46c-1f3fe","1f46c-1f3ff","1f468-1f3fb-200d-1f91d-200d-1f468-1f3fc","1f468-1f3fb-200d-1f91d-200d-1f468-1f3fd","1f468-1f3fb-200d-1f91d-200d-1f468-1f3fe","1f468-1f3fb-200d-1f91d-200d-1f468-1f3ff","1f468-1f3fc-200d-1f91d-200d-1f468-1f3fb","1f468-1f3fc-200d-1f91d-200d-1f468-1f3fd","1f468-1f3fc-200d-1f91d-200d-1f468-1f3fe","1f468-1f3fc-200d-1f91d-200d-1f468-1f3ff","1f468-1f3fd-200d-1f91d-200d-1f468-1f3fb","1f468-1f3fd-200d-1f91d-200d-1f468-1f3fc","1f468-1f3fd-200d-1f91d-200d-1f468-1f3fe","1f468-1f3fd-200d-1f91d-200d-1f468-1f3ff","1f468-1f3fe-200d-1f91d-200d-1f468-1f3fb","1f468-1f3fe-200d-1f91d-200d-1f468-1f3fc","1f468-1f3fe-200d-1f91d-200d-1f468-1f3fd","1f468-1f3fe-200d-1f91d-200d-1f468-1f3ff","1f468-1f3ff-200d-1f91d-200d-1f468-1f3fb","1f468-1f3ff-200d-1f91d-200d-1f468-1f3fc","1f468-1f3ff-200d-1f91d-200d-1f468-1f3fd","1f468-1f3ff-200d-1f91d-200d-1f468-1f3fe"],a:"1.0"},{n:["kiss","couplekiss"],u:"1f48f",v:["1f48f-1f3fb","1f48f-1f3fc","1f48f-1f3fd","1f48f-1f3fe","1f48f-1f3ff","1f9d1-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fc","1f9d1-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fd","1f9d1-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fe","1f9d1-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3ff","1f9d1-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fb","1f9d1-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fd","1f9d1-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fe","1f9d1-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3ff","1f9d1-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fb","1f9d1-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fc","1f9d1-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fe","1f9d1-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3ff","1f9d1-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fb","1f9d1-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fc","1f9d1-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fd","1f9d1-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3ff","1f9d1-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fb","1f9d1-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fc","1f9d1-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fd","1f9d1-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fe"],a:"0.6"},{n:["woman-kiss-man","kiss: woman, man"],u:"1f469-200d-2764-fe0f-200d-1f48b-200d-1f468",v:["1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff"],a:"2.0"},{n:["man-kiss-man","kiss: man, man"],u:"1f468-200d-2764-fe0f-200d-1f48b-200d-1f468",v:["1f468-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f468-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f468-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f468-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f468-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f468-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f468-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f468-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f468-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f468-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f468-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f468-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f468-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f468-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f468-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f468-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f468-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f468-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f468-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f468-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f468-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f468-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f468-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f468-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f468-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff"],a:"2.0"},{n:["woman-kiss-woman","kiss: woman, woman"],u:"1f469-200d-2764-fe0f-200d-1f48b-200d-1f469",v:["1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fb","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fc","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fd","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fe","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3ff","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fb","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fc","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fd","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fe","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3ff","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fb","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fc","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fd","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fe","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3ff","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fb","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fc","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fd","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fe","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3ff","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fb","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fc","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fd","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fe","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3ff"],a:"2.0"},{n:["couple with heart"],u:"1f491",v:["1f491-1f3fb","1f491-1f3fc","1f491-1f3fd","1f491-1f3fe","1f491-1f3ff","1f9d1-1f3fb-200d-2764-fe0f-200d-1f9d1-1f3fc","1f9d1-1f3fb-200d-2764-fe0f-200d-1f9d1-1f3fd","1f9d1-1f3fb-200d-2764-fe0f-200d-1f9d1-1f3fe","1f9d1-1f3fb-200d-2764-fe0f-200d-1f9d1-1f3ff","1f9d1-1f3fc-200d-2764-fe0f-200d-1f9d1-1f3fb","1f9d1-1f3fc-200d-2764-fe0f-200d-1f9d1-1f3fd","1f9d1-1f3fc-200d-2764-fe0f-200d-1f9d1-1f3fe","1f9d1-1f3fc-200d-2764-fe0f-200d-1f9d1-1f3ff","1f9d1-1f3fd-200d-2764-fe0f-200d-1f9d1-1f3fb","1f9d1-1f3fd-200d-2764-fe0f-200d-1f9d1-1f3fc","1f9d1-1f3fd-200d-2764-fe0f-200d-1f9d1-1f3fe","1f9d1-1f3fd-200d-2764-fe0f-200d-1f9d1-1f3ff","1f9d1-1f3fe-200d-2764-fe0f-200d-1f9d1-1f3fb","1f9d1-1f3fe-200d-2764-fe0f-200d-1f9d1-1f3fc","1f9d1-1f3fe-200d-2764-fe0f-200d-1f9d1-1f3fd","1f9d1-1f3fe-200d-2764-fe0f-200d-1f9d1-1f3ff","1f9d1-1f3ff-200d-2764-fe0f-200d-1f9d1-1f3fb","1f9d1-1f3ff-200d-2764-fe0f-200d-1f9d1-1f3fc","1f9d1-1f3ff-200d-2764-fe0f-200d-1f9d1-1f3fd","1f9d1-1f3ff-200d-2764-fe0f-200d-1f9d1-1f3fe"],a:"0.6"},{n:["woman-heart-man","couple with heart: woman, man"],u:"1f469-200d-2764-fe0f-200d-1f468",v:["1f469-1f3fb-200d-2764-fe0f-200d-1f468-1f3fb","1f469-1f3fb-200d-2764-fe0f-200d-1f468-1f3fc","1f469-1f3fb-200d-2764-fe0f-200d-1f468-1f3fd","1f469-1f3fb-200d-2764-fe0f-200d-1f468-1f3fe","1f469-1f3fb-200d-2764-fe0f-200d-1f468-1f3ff","1f469-1f3fc-200d-2764-fe0f-200d-1f468-1f3fb","1f469-1f3fc-200d-2764-fe0f-200d-1f468-1f3fc","1f469-1f3fc-200d-2764-fe0f-200d-1f468-1f3fd","1f469-1f3fc-200d-2764-fe0f-200d-1f468-1f3fe","1f469-1f3fc-200d-2764-fe0f-200d-1f468-1f3ff","1f469-1f3fd-200d-2764-fe0f-200d-1f468-1f3fb","1f469-1f3fd-200d-2764-fe0f-200d-1f468-1f3fc","1f469-1f3fd-200d-2764-fe0f-200d-1f468-1f3fd","1f469-1f3fd-200d-2764-fe0f-200d-1f468-1f3fe","1f469-1f3fd-200d-2764-fe0f-200d-1f468-1f3ff","1f469-1f3fe-200d-2764-fe0f-200d-1f468-1f3fb","1f469-1f3fe-200d-2764-fe0f-200d-1f468-1f3fc","1f469-1f3fe-200d-2764-fe0f-200d-1f468-1f3fd","1f469-1f3fe-200d-2764-fe0f-200d-1f468-1f3fe","1f469-1f3fe-200d-2764-fe0f-200d-1f468-1f3ff","1f469-1f3ff-200d-2764-fe0f-200d-1f468-1f3fb","1f469-1f3ff-200d-2764-fe0f-200d-1f468-1f3fc","1f469-1f3ff-200d-2764-fe0f-200d-1f468-1f3fd","1f469-1f3ff-200d-2764-fe0f-200d-1f468-1f3fe","1f469-1f3ff-200d-2764-fe0f-200d-1f468-1f3ff"],a:"2.0"},{n:["man-heart-man","couple with heart: man, man"],u:"1f468-200d-2764-fe0f-200d-1f468",v:["1f468-1f3fb-200d-2764-fe0f-200d-1f468-1f3fb","1f468-1f3fb-200d-2764-fe0f-200d-1f468-1f3fc","1f468-1f3fb-200d-2764-fe0f-200d-1f468-1f3fd","1f468-1f3fb-200d-2764-fe0f-200d-1f468-1f3fe","1f468-1f3fb-200d-2764-fe0f-200d-1f468-1f3ff","1f468-1f3fc-200d-2764-fe0f-200d-1f468-1f3fb","1f468-1f3fc-200d-2764-fe0f-200d-1f468-1f3fc","1f468-1f3fc-200d-2764-fe0f-200d-1f468-1f3fd","1f468-1f3fc-200d-2764-fe0f-200d-1f468-1f3fe","1f468-1f3fc-200d-2764-fe0f-200d-1f468-1f3ff","1f468-1f3fd-200d-2764-fe0f-200d-1f468-1f3fb","1f468-1f3fd-200d-2764-fe0f-200d-1f468-1f3fc","1f468-1f3fd-200d-2764-fe0f-200d-1f468-1f3fd","1f468-1f3fd-200d-2764-fe0f-200d-1f468-1f3fe","1f468-1f3fd-200d-2764-fe0f-200d-1f468-1f3ff","1f468-1f3fe-200d-2764-fe0f-200d-1f468-1f3fb","1f468-1f3fe-200d-2764-fe0f-200d-1f468-1f3fc","1f468-1f3fe-200d-2764-fe0f-200d-1f468-1f3fd","1f468-1f3fe-200d-2764-fe0f-200d-1f468-1f3fe","1f468-1f3fe-200d-2764-fe0f-200d-1f468-1f3ff","1f468-1f3ff-200d-2764-fe0f-200d-1f468-1f3fb","1f468-1f3ff-200d-2764-fe0f-200d-1f468-1f3fc","1f468-1f3ff-200d-2764-fe0f-200d-1f468-1f3fd","1f468-1f3ff-200d-2764-fe0f-200d-1f468-1f3fe","1f468-1f3ff-200d-2764-fe0f-200d-1f468-1f3ff"],a:"2.0"},{n:["woman-heart-woman","couple with heart: woman, woman"],u:"1f469-200d-2764-fe0f-200d-1f469",v:["1f469-1f3fb-200d-2764-fe0f-200d-1f469-1f3fb","1f469-1f3fb-200d-2764-fe0f-200d-1f469-1f3fc","1f469-1f3fb-200d-2764-fe0f-200d-1f469-1f3fd","1f469-1f3fb-200d-2764-fe0f-200d-1f469-1f3fe","1f469-1f3fb-200d-2764-fe0f-200d-1f469-1f3ff","1f469-1f3fc-200d-2764-fe0f-200d-1f469-1f3fb","1f469-1f3fc-200d-2764-fe0f-200d-1f469-1f3fc","1f469-1f3fc-200d-2764-fe0f-200d-1f469-1f3fd","1f469-1f3fc-200d-2764-fe0f-200d-1f469-1f3fe","1f469-1f3fc-200d-2764-fe0f-200d-1f469-1f3ff","1f469-1f3fd-200d-2764-fe0f-200d-1f469-1f3fb","1f469-1f3fd-200d-2764-fe0f-200d-1f469-1f3fc","1f469-1f3fd-200d-2764-fe0f-200d-1f469-1f3fd","1f469-1f3fd-200d-2764-fe0f-200d-1f469-1f3fe","1f469-1f3fd-200d-2764-fe0f-200d-1f469-1f3ff","1f469-1f3fe-200d-2764-fe0f-200d-1f469-1f3fb","1f469-1f3fe-200d-2764-fe0f-200d-1f469-1f3fc","1f469-1f3fe-200d-2764-fe0f-200d-1f469-1f3fd","1f469-1f3fe-200d-2764-fe0f-200d-1f469-1f3fe","1f469-1f3fe-200d-2764-fe0f-200d-1f469-1f3ff","1f469-1f3ff-200d-2764-fe0f-200d-1f469-1f3fb","1f469-1f3ff-200d-2764-fe0f-200d-1f469-1f3fc","1f469-1f3ff-200d-2764-fe0f-200d-1f469-1f3fd","1f469-1f3ff-200d-2764-fe0f-200d-1f469-1f3fe","1f469-1f3ff-200d-2764-fe0f-200d-1f469-1f3ff"],a:"2.0"},{n:["man-woman-boy","family: man, woman, boy"],u:"1f468-200d-1f469-200d-1f466",a:"2.0"},{n:["man-woman-girl","family: man, woman, girl"],u:"1f468-200d-1f469-200d-1f467",a:"2.0"},{n:["man-woman-girl-boy","family: man, woman, girl, boy"],u:"1f468-200d-1f469-200d-1f467-200d-1f466",a:"2.0"},{n:["man-woman-boy-boy","family: man, woman, boy, boy"],u:"1f468-200d-1f469-200d-1f466-200d-1f466",a:"2.0"},{n:["man-woman-girl-girl","family: man, woman, girl, girl"],u:"1f468-200d-1f469-200d-1f467-200d-1f467",a:"2.0"},{n:["man-man-boy","family: man, man, boy"],u:"1f468-200d-1f468-200d-1f466",a:"2.0"},{n:["man-man-girl","family: man, man, girl"],u:"1f468-200d-1f468-200d-1f467",a:"2.0"},{n:["man-man-girl-boy","family: man, man, girl, boy"],u:"1f468-200d-1f468-200d-1f467-200d-1f466",a:"2.0"},{n:["man-man-boy-boy","family: man, man, boy, boy"],u:"1f468-200d-1f468-200d-1f466-200d-1f466",a:"2.0"},{n:["man-man-girl-girl","family: man, man, girl, girl"],u:"1f468-200d-1f468-200d-1f467-200d-1f467",a:"2.0"},{n:["woman-woman-boy","family: woman, woman, boy"],u:"1f469-200d-1f469-200d-1f466",a:"2.0"},{n:["woman-woman-girl","family: woman, woman, girl"],u:"1f469-200d-1f469-200d-1f467",a:"2.0"},{n:["woman-woman-girl-boy","family: woman, woman, girl, boy"],u:"1f469-200d-1f469-200d-1f467-200d-1f466",a:"2.0"},{n:["woman-woman-boy-boy","family: woman, woman, boy, boy"],u:"1f469-200d-1f469-200d-1f466-200d-1f466",a:"2.0"},{n:["woman-woman-girl-girl","family: woman, woman, girl, girl"],u:"1f469-200d-1f469-200d-1f467-200d-1f467",a:"2.0"},{n:["man-boy","family: man, boy"],u:"1f468-200d-1f466",a:"4.0"},{n:["man-boy-boy","family: man, boy, boy"],u:"1f468-200d-1f466-200d-1f466",a:"4.0"},{n:["man-girl","family: man, girl"],u:"1f468-200d-1f467",a:"4.0"},{n:["man-girl-boy","family: man, girl, boy"],u:"1f468-200d-1f467-200d-1f466",a:"4.0"},{n:["man-girl-girl","family: man, girl, girl"],u:"1f468-200d-1f467-200d-1f467",a:"4.0"},{n:["woman-boy","family: woman, boy"],u:"1f469-200d-1f466",a:"4.0"},{n:["woman-boy-boy","family: woman, boy, boy"],u:"1f469-200d-1f466-200d-1f466",a:"4.0"},{n:["woman-girl","family: woman, girl"],u:"1f469-200d-1f467",a:"4.0"},{n:["woman-girl-boy","family: woman, girl, boy"],u:"1f469-200d-1f467-200d-1f466",a:"4.0"},{n:["woman-girl-girl","family: woman, girl, girl"],u:"1f469-200d-1f467-200d-1f467",a:"4.0"},{n:["speaking head","speaking head in silhouette"],u:"1f5e3-fe0f",a:"0.7"},{n:["bust in silhouette"],u:"1f464",a:"0.6"},{n:["busts in silhouette"],u:"1f465",a:"1.0"},{n:["people hugging"],u:"1fac2",a:"13.0"},{n:["family"],u:"1f46a",a:"0.6"},{n:["family adult adult child","family: adult, adult, child"],u:"1f9d1-200d-1f9d1-200d-1f9d2",a:"15.1"},{n:["family adult adult child child","family: adult, adult, child, child"],u:"1f9d1-200d-1f9d1-200d-1f9d2-200d-1f9d2",a:"15.1"},{n:["family adult child","family: adult, child"],u:"1f9d1-200d-1f9d2",a:"15.1"},{n:["family adult child child","family: adult, child, child"],u:"1f9d1-200d-1f9d2-200d-1f9d2",a:"15.1"},{n:["footprints"],u:"1f463",a:"0.6"}],animals_nature:[{n:["monkey face"],u:"1f435",a:"0.6"},{n:["monkey"],u:"1f412",a:"0.6"},{n:["gorilla"],u:"1f98d",a:"3.0"},{n:["orangutan"],u:"1f9a7",a:"12.0"},{n:["dog","dog face"],u:"1f436",a:"0.6"},{n:["dog","dog2"],u:"1f415",a:"0.7"},{n:["guide dog"],u:"1f9ae",a:"12.0"},{n:["service dog"],u:"1f415-200d-1f9ba",a:"12.0"},{n:["poodle"],u:"1f429",a:"0.6"},{n:["wolf","wolf face"],u:"1f43a",a:"0.6"},{n:["fox face"],u:"1f98a",a:"3.0"},{n:["raccoon"],u:"1f99d",a:"11.0"},{n:["cat","cat face"],u:"1f431",a:"0.6"},{n:["cat","cat2"],u:"1f408",a:"0.7"},{n:["black cat"],u:"1f408-200d-2b1b",a:"13.0"},{n:["lion face"],u:"1f981",a:"1.0"},{n:["tiger","tiger face"],u:"1f42f",a:"0.6"},{n:["tiger","tiger2"],u:"1f405",a:"1.0"},{n:["leopard"],u:"1f406",a:"1.0"},{n:["horse","horse face"],u:"1f434",a:"0.6"},{n:["moose"],u:"1face",a:"15.0"},{n:["donkey"],u:"1facf",a:"15.0"},{n:["horse","racehorse"],u:"1f40e",a:"0.6"},{n:["unicorn face"],u:"1f984",a:"1.0"},{n:["zebra face"],u:"1f993",a:"5.0"},{n:["deer"],u:"1f98c",a:"3.0"},{n:["bison"],u:"1f9ac",a:"13.0"},{n:["cow","cow face"],u:"1f42e",a:"0.6"},{n:["ox"],u:"1f402",a:"1.0"},{n:["water buffalo"],u:"1f403",a:"1.0"},{n:["cow","cow2"],u:"1f404",a:"1.0"},{n:["pig","pig face"],u:"1f437",a:"0.6"},{n:["pig","pig2"],u:"1f416",a:"1.0"},{n:["boar"],u:"1f417",a:"0.6"},{n:["pig nose"],u:"1f43d",a:"0.6"},{n:["ram"],u:"1f40f",a:"1.0"},{n:["sheep"],u:"1f411",a:"0.6"},{n:["goat"],u:"1f410",a:"1.0"},{n:["dromedary camel"],u:"1f42a",a:"1.0"},{n:["camel","bactrian camel"],u:"1f42b",a:"0.6"},{n:["llama"],u:"1f999",a:"11.0"},{n:["giraffe face"],u:"1f992",a:"5.0"},{n:["elephant"],u:"1f418",a:"0.6"},{n:["mammoth"],u:"1f9a3",a:"13.0"},{n:["rhinoceros"],u:"1f98f",a:"3.0"},{n:["hippopotamus"],u:"1f99b",a:"11.0"},{n:["mouse","mouse face"],u:"1f42d",a:"0.6"},{n:["mouse","mouse2"],u:"1f401",a:"1.0"},{n:["rat"],u:"1f400",a:"1.0"},{n:["hamster","hamster face"],u:"1f439",a:"0.6"},{n:["rabbit","rabbit face"],u:"1f430",a:"0.6"},{n:["rabbit","rabbit2"],u:"1f407",a:"1.0"},{n:["chipmunk"],u:"1f43f-fe0f",a:"0.7"},{n:["beaver"],u:"1f9ab",a:"13.0"},{n:["hedgehog"],u:"1f994",a:"5.0"},{n:["bat"],u:"1f987",a:"3.0"},{n:["bear","bear face"],u:"1f43b",a:"0.6"},{n:["polar bear"],u:"1f43b-200d-2744-fe0f",a:"13.0"},{n:["koala"],u:"1f428",a:"0.6"},{n:["panda face"],u:"1f43c",a:"0.6"},{n:["sloth"],u:"1f9a5",a:"12.0"},{n:["otter"],u:"1f9a6",a:"12.0"},{n:["skunk"],u:"1f9a8",a:"12.0"},{n:["kangaroo"],u:"1f998",a:"11.0"},{n:["badger"],u:"1f9a1",a:"11.0"},{n:["feet","paw prints"],u:"1f43e",a:"0.6"},{n:["turkey"],u:"1f983",a:"1.0"},{n:["chicken"],u:"1f414",a:"0.6"},{n:["rooster"],u:"1f413",a:"1.0"},{n:["hatching chick"],u:"1f423",a:"0.6"},{n:["baby chick"],u:"1f424",a:"0.6"},{n:["hatched chick","front-facing baby chick"],u:"1f425",a:"0.6"},{n:["bird"],u:"1f426",a:"0.6"},{n:["penguin"],u:"1f427",a:"0.6"},{n:["dove","dove of peace"],u:"1f54a-fe0f",a:"0.7"},{n:["eagle"],u:"1f985",a:"3.0"},{n:["duck"],u:"1f986",a:"3.0"},{n:["swan"],u:"1f9a2",a:"11.0"},{n:["owl"],u:"1f989",a:"3.0"},{n:["dodo"],u:"1f9a4",a:"13.0"},{n:["feather"],u:"1fab6",a:"13.0"},{n:["flamingo"],u:"1f9a9",a:"12.0"},{n:["peacock"],u:"1f99a",a:"11.0"},{n:["parrot"],u:"1f99c",a:"11.0"},{n:["wing"],u:"1fabd",a:"15.0"},{n:["black bird"],u:"1f426-200d-2b1b",a:"15.0"},{n:["goose"],u:"1fabf",a:"15.0"},{n:["phoenix"],u:"1f426-200d-1f525",a:"15.1"},{n:["frog","frog face"],u:"1f438",a:"0.6"},{n:["crocodile"],u:"1f40a",a:"1.0"},{n:["turtle"],u:"1f422",a:"0.6"},{n:["lizard"],u:"1f98e",a:"3.0"},{n:["snake"],u:"1f40d",a:"0.6"},{n:["dragon face"],u:"1f432",a:"0.6"},{n:["dragon"],u:"1f409",a:"1.0"},{n:["sauropod"],u:"1f995",a:"5.0"},{n:["t-rex"],u:"1f996",a:"5.0"},{n:["whale","spouting whale"],u:"1f433",a:"0.6"},{n:["whale","whale2"],u:"1f40b",a:"1.0"},{n:["dolphin","flipper"],u:"1f42c",a:"0.6"},{n:["seal"],u:"1f9ad",a:"13.0"},{n:["fish"],u:"1f41f",a:"0.6"},{n:["tropical fish"],u:"1f420",a:"0.6"},{n:["blowfish"],u:"1f421",a:"0.6"},{n:["shark"],u:"1f988",a:"3.0"},{n:["octopus"],u:"1f419",a:"0.6"},{n:["shell","spiral shell"],u:"1f41a",a:"0.6"},{n:["coral"],u:"1fab8",a:"14.0"},{n:["jellyfish"],u:"1fabc",a:"15.0"},{n:["snail"],u:"1f40c",a:"0.6"},{n:["butterfly"],u:"1f98b",a:"3.0"},{n:["bug"],u:"1f41b",a:"0.6"},{n:["ant"],u:"1f41c",a:"0.6"},{n:["bee","honeybee"],u:"1f41d",a:"0.6"},{n:["beetle"],u:"1fab2",a:"13.0"},{n:["ladybug","lady beetle"],u:"1f41e",a:"0.6"},{n:["cricket"],u:"1f997",a:"5.0"},{n:["cockroach"],u:"1fab3",a:"13.0"},{n:["spider"],u:"1f577-fe0f",a:"0.7"},{n:["spider web"],u:"1f578-fe0f",a:"0.7"},{n:["scorpion"],u:"1f982",a:"1.0"},{n:["mosquito"],u:"1f99f",a:"11.0"},{n:["fly"],u:"1fab0",a:"13.0"},{n:["worm"],u:"1fab1",a:"13.0"},{n:["microbe"],u:"1f9a0",a:"11.0"},{n:["bouquet"],u:"1f490",a:"0.6"},{n:["cherry blossom"],u:"1f338",a:"0.6"},{n:["white flower"],u:"1f4ae",a:"0.6"},{n:["lotus"],u:"1fab7",a:"14.0"},{n:["rosette"],u:"1f3f5-fe0f",a:"0.7"},{n:["rose"],u:"1f339",a:"0.6"},{n:["wilted flower"],u:"1f940",a:"3.0"},{n:["hibiscus"],u:"1f33a",a:"0.6"},{n:["sunflower"],u:"1f33b",a:"0.6"},{n:["blossom"],u:"1f33c",a:"0.6"},{n:["tulip"],u:"1f337",a:"0.6"},{n:["hyacinth"],u:"1fabb",a:"15.0"},{n:["seedling"],u:"1f331",a:"0.6"},{n:["potted plant"],u:"1fab4",a:"13.0"},{n:["evergreen tree"],u:"1f332",a:"1.0"},{n:["deciduous tree"],u:"1f333",a:"1.0"},{n:["palm tree"],u:"1f334",a:"0.6"},{n:["cactus"],u:"1f335",a:"0.6"},{n:["ear of rice"],u:"1f33e",a:"0.6"},{n:["herb"],u:"1f33f",a:"0.6"},{n:["shamrock"],u:"2618-fe0f",a:"1.0"},{n:["four leaf clover"],u:"1f340",a:"0.6"},{n:["maple leaf"],u:"1f341",a:"0.6"},{n:["fallen leaf"],u:"1f342",a:"0.6"},{n:["leaves","leaf fluttering in wind"],u:"1f343",a:"0.6"},{n:["empty nest"],u:"1fab9",a:"14.0"},{n:["nest with eggs"],u:"1faba",a:"14.0"},{n:["mushroom"],u:"1f344",a:"0.6"}],food_drink:[{n:["grapes"],u:"1f347",a:"0.6"},{n:["melon"],u:"1f348",a:"0.6"},{n:["watermelon"],u:"1f349",a:"0.6"},{n:["tangerine"],u:"1f34a",a:"0.6"},{n:["lemon"],u:"1f34b",a:"1.0"},{n:["lime"],u:"1f34b-200d-1f7e9",a:"15.1"},{n:["banana"],u:"1f34c",a:"0.6"},{n:["pineapple"],u:"1f34d",a:"0.6"},{n:["mango"],u:"1f96d",a:"11.0"},{n:["apple","red apple"],u:"1f34e",a:"0.6"},{n:["green apple"],u:"1f34f",a:"0.6"},{n:["pear"],u:"1f350",a:"1.0"},{n:["peach"],u:"1f351",a:"0.6"},{n:["cherries"],u:"1f352",a:"0.6"},{n:["strawberry"],u:"1f353",a:"0.6"},{n:["blueberries"],u:"1fad0",a:"13.0"},{n:["kiwifruit"],u:"1f95d",a:"3.0"},{n:["tomato"],u:"1f345",a:"0.6"},{n:["olive"],u:"1fad2",a:"13.0"},{n:["coconut"],u:"1f965",a:"5.0"},{n:["avocado"],u:"1f951",a:"3.0"},{n:["eggplant","aubergine"],u:"1f346",a:"0.6"},{n:["potato"],u:"1f954",a:"3.0"},{n:["carrot"],u:"1f955",a:"3.0"},{n:["corn","ear of maize"],u:"1f33d",a:"0.6"},{n:["hot pepper"],u:"1f336-fe0f",a:"0.7"},{n:["bell pepper"],u:"1fad1",a:"13.0"},{n:["cucumber"],u:"1f952",a:"3.0"},{n:["leafy green"],u:"1f96c",a:"11.0"},{n:["broccoli"],u:"1f966",a:"5.0"},{n:["garlic"],u:"1f9c4",a:"12.0"},{n:["onion"],u:"1f9c5",a:"12.0"},{n:["peanuts"],u:"1f95c",a:"3.0"},{n:["beans"],u:"1fad8",a:"14.0"},{n:["chestnut"],u:"1f330",a:"0.6"},{n:["ginger root"],u:"1fada",a:"15.0"},{n:["pea pod"],u:"1fadb",a:"15.0"},{n:["brown mushroom"],u:"1f344-200d-1f7eb",a:"15.1"},{n:["bread"],u:"1f35e",a:"0.6"},{n:["croissant"],u:"1f950",a:"3.0"},{n:["baguette bread"],u:"1f956",a:"3.0"},{n:["flatbread"],u:"1fad3",a:"13.0"},{n:["pretzel"],u:"1f968",a:"5.0"},{n:["bagel"],u:"1f96f",a:"11.0"},{n:["pancakes"],u:"1f95e",a:"3.0"},{n:["waffle"],u:"1f9c7",a:"12.0"},{n:["cheese wedge"],u:"1f9c0",a:"1.0"},{n:["meat on bone"],u:"1f356",a:"0.6"},{n:["poultry leg"],u:"1f357",a:"0.6"},{n:["cut of meat"],u:"1f969",a:"5.0"},{n:["bacon"],u:"1f953",a:"3.0"},{n:["hamburger"],u:"1f354",a:"0.6"},{n:["fries","french fries"],u:"1f35f",a:"0.6"},{n:["pizza","slice of pizza"],u:"1f355",a:"0.6"},{n:["hotdog","hot dog"],u:"1f32d",a:"1.0"},{n:["sandwich"],u:"1f96a",a:"5.0"},{n:["taco"],u:"1f32e",a:"1.0"},{n:["burrito"],u:"1f32f",a:"1.0"},{n:["tamale"],u:"1fad4",a:"13.0"},{n:["stuffed flatbread"],u:"1f959",a:"3.0"},{n:["falafel"],u:"1f9c6",a:"12.0"},{n:["egg"],u:"1f95a",a:"3.0"},{n:["cooking","fried egg"],u:"1f373",a:"0.6"},{n:["shallow pan of food"],u:"1f958",a:"3.0"},{n:["stew","pot of food"],u:"1f372",a:"0.6"},{n:["fondue"],u:"1fad5",a:"13.0"},{n:["bowl with spoon"],u:"1f963",a:"5.0"},{n:["green salad"],u:"1f957",a:"3.0"},{n:["popcorn"],u:"1f37f",a:"1.0"},{n:["butter"],u:"1f9c8",a:"12.0"},{n:["salt","salt shaker"],u:"1f9c2",a:"11.0"},{n:["canned food"],u:"1f96b",a:"5.0"},{n:["bento","bento box"],u:"1f371",a:"0.6"},{n:["rice cracker"],u:"1f358",a:"0.6"},{n:["rice ball"],u:"1f359",a:"0.6"},{n:["rice","cooked rice"],u:"1f35a",a:"0.6"},{n:["curry","curry and rice"],u:"1f35b",a:"0.6"},{n:["ramen","steaming bowl"],u:"1f35c",a:"0.6"},{n:["spaghetti"],u:"1f35d",a:"0.6"},{n:["sweet potato","roasted sweet potato"],u:"1f360",a:"0.6"},{n:["oden"],u:"1f362",a:"0.6"},{n:["sushi"],u:"1f363",a:"0.6"},{n:["fried shrimp"],u:"1f364",a:"0.6"},{n:["fish cake","fish cake with swirl design"],u:"1f365",a:"0.6"},{n:["moon cake"],u:"1f96e",a:"11.0"},{n:["dango"],u:"1f361",a:"0.6"},{n:["dumpling"],u:"1f95f",a:"5.0"},{n:["fortune cookie"],u:"1f960",a:"5.0"},{n:["takeout box"],u:"1f961",a:"5.0"},{n:["crab"],u:"1f980",a:"1.0"},{n:["lobster"],u:"1f99e",a:"11.0"},{n:["shrimp"],u:"1f990",a:"3.0"},{n:["squid"],u:"1f991",a:"3.0"},{n:["oyster"],u:"1f9aa",a:"12.0"},{n:["icecream","soft ice cream"],u:"1f366",a:"0.6"},{n:["shaved ice"],u:"1f367",a:"0.6"},{n:["ice cream"],u:"1f368",a:"0.6"},{n:["doughnut"],u:"1f369",a:"0.6"},{n:["cookie"],u:"1f36a",a:"0.6"},{n:["birthday","birthday cake"],u:"1f382",a:"0.6"},{n:["cake","shortcake"],u:"1f370",a:"0.6"},{n:["cupcake"],u:"1f9c1",a:"11.0"},{n:["pie"],u:"1f967",a:"5.0"},{n:["chocolate bar"],u:"1f36b",a:"0.6"},{n:["candy"],u:"1f36c",a:"0.6"},{n:["lollipop"],u:"1f36d",a:"0.6"},{n:["custard"],u:"1f36e",a:"0.6"},{n:["honey pot"],u:"1f36f",a:"0.6"},{n:["baby bottle"],u:"1f37c",a:"1.0"},{n:["glass of milk"],u:"1f95b",a:"3.0"},{n:["coffee","hot beverage"],u:"2615",a:"0.6"},{n:["teapot"],u:"1fad6",a:"13.0"},{n:["tea","teacup without handle"],u:"1f375",a:"0.6"},{n:["sake","sake bottle and cup"],u:"1f376",a:"0.6"},{n:["champagne","bottle with popping cork"],u:"1f37e",a:"1.0"},{n:["wine glass"],u:"1f377",a:"0.6"},{n:["cocktail","cocktail glass"],u:"1f378",a:"0.6"},{n:["tropical drink"],u:"1f379",a:"0.6"},{n:["beer","beer mug"],u:"1f37a",a:"0.6"},{n:["beers","clinking beer mugs"],u:"1f37b",a:"0.6"},{n:["clinking glasses"],u:"1f942",a:"3.0"},{n:["tumbler glass"],u:"1f943",a:"3.0"},{n:["pouring liquid"],u:"1fad7",a:"14.0"},{n:["cup with straw"],u:"1f964",a:"5.0"},{n:["bubble tea"],u:"1f9cb",a:"13.0"},{n:["beverage box"],u:"1f9c3",a:"12.0"},{n:["mate drink"],u:"1f9c9",a:"12.0"},{n:["ice cube"],u:"1f9ca",a:"12.0"},{n:["chopsticks"],u:"1f962",a:"5.0"},{n:["knife fork plate","fork and knife with plate"],u:"1f37d-fe0f",a:"0.7"},{n:["fork and knife"],u:"1f374",a:"0.6"},{n:["spoon"],u:"1f944",a:"3.0"},{n:["hocho","knife"],u:"1f52a",a:"0.6"},{n:["jar"],u:"1fad9",a:"14.0"},{n:["amphora"],u:"1f3fa",a:"1.0"}],travel_places:[{n:["earth africa","earth globe europe-africa"],u:"1f30d",a:"0.7"},{n:["earth americas","earth globe americas"],u:"1f30e",a:"0.7"},{n:["earth asia","earth globe asia-australia"],u:"1f30f",a:"0.6"},{n:["globe with meridians"],u:"1f310",a:"1.0"},{n:["world map"],u:"1f5fa-fe0f",a:"0.7"},{n:["japan","silhouette of japan"],u:"1f5fe",a:"0.6"},{n:["compass"],u:"1f9ed",a:"11.0"},{n:["snow-capped mountain","snow capped mountain"],u:"1f3d4-fe0f",a:"0.7"},{n:["mountain"],u:"26f0-fe0f",a:"0.7"},{n:["volcano"],u:"1f30b",a:"0.6"},{n:["mount fuji"],u:"1f5fb",a:"0.6"},{n:["camping"],u:"1f3d5-fe0f",a:"0.7"},{n:["beach with umbrella"],u:"1f3d6-fe0f",a:"0.7"},{n:["desert"],u:"1f3dc-fe0f",a:"0.7"},{n:["desert island"],u:"1f3dd-fe0f",a:"0.7"},{n:["national park"],u:"1f3de-fe0f",a:"0.7"},{n:["stadium"],u:"1f3df-fe0f",a:"0.7"},{n:["classical building"],u:"1f3db-fe0f",a:"0.7"},{n:["building construction"],u:"1f3d7-fe0f",a:"0.7"},{n:["brick","bricks"],u:"1f9f1",a:"11.0"},{n:["rock"],u:"1faa8",a:"13.0"},{n:["wood"],u:"1fab5",a:"13.0"},{n:["hut"],u:"1f6d6",a:"13.0"},{n:["houses","house buildings"],u:"1f3d8-fe0f",a:"0.7"},{n:["derelict house","derelict house building"],u:"1f3da-fe0f",a:"0.7"},{n:["house","house building"],u:"1f3e0",a:"0.6"},{n:["house with garden"],u:"1f3e1",a:"0.6"},{n:["office","office building"],u:"1f3e2",a:"0.6"},{n:["post office","japanese post office"],u:"1f3e3",a:"0.6"},{n:["european post office"],u:"1f3e4",a:"1.0"},{n:["hospital"],u:"1f3e5",a:"0.6"},{n:["bank"],u:"1f3e6",a:"0.6"},{n:["hotel"],u:"1f3e8",a:"0.6"},{n:["love hotel"],u:"1f3e9",a:"0.6"},{n:["convenience store"],u:"1f3ea",a:"0.6"},{n:["school"],u:"1f3eb",a:"0.6"},{n:["department store"],u:"1f3ec",a:"0.6"},{n:["factory"],u:"1f3ed",a:"0.6"},{n:["japanese castle"],u:"1f3ef",a:"0.6"},{n:["european castle"],u:"1f3f0",a:"0.6"},{n:["wedding"],u:"1f492",a:"0.6"},{n:["tokyo tower"],u:"1f5fc",a:"0.6"},{n:["statue of liberty"],u:"1f5fd",a:"0.6"},{n:["church"],u:"26ea",a:"0.6"},{n:["mosque"],u:"1f54c",a:"1.0"},{n:["hindu temple"],u:"1f6d5",a:"12.0"},{n:["synagogue"],u:"1f54d",a:"1.0"},{n:["shinto shrine"],u:"26e9-fe0f",a:"0.7"},{n:["kaaba"],u:"1f54b",a:"1.0"},{n:["fountain"],u:"26f2",a:"0.6"},{n:["tent"],u:"26fa",a:"0.6"},{n:["foggy"],u:"1f301",a:"0.6"},{n:["night with stars"],u:"1f303",a:"0.6"},{n:["cityscape"],u:"1f3d9-fe0f",a:"0.7"},{n:["sunrise over mountains"],u:"1f304",a:"0.6"},{n:["sunrise"],u:"1f305",a:"0.6"},{n:["city sunset","cityscape at dusk"],u:"1f306",a:"0.6"},{n:["city sunrise","sunset over buildings"],u:"1f307",a:"0.6"},{n:["bridge at night"],u:"1f309",a:"0.6"},{n:["hotsprings","hot springs"],u:"2668-fe0f",a:"0.6"},{n:["carousel horse"],u:"1f3a0",a:"0.6"},{n:["playground slide"],u:"1f6dd",a:"14.0"},{n:["ferris wheel"],u:"1f3a1",a:"0.6"},{n:["roller coaster"],u:"1f3a2",a:"0.6"},{n:["barber","barber pole"],u:"1f488",a:"0.6"},{n:["circus tent"],u:"1f3aa",a:"0.6"},{n:["steam locomotive"],u:"1f682",a:"1.0"},{n:["railway car"],u:"1f683",a:"0.6"},{n:["high-speed train","bullettrain side"],u:"1f684",a:"0.6"},{n:["bullettrain front","high-speed train with bullet nose"],u:"1f685",a:"0.6"},{n:["train","train2"],u:"1f686",a:"1.0"},{n:["metro"],u:"1f687",a:"0.6"},{n:["light rail"],u:"1f688",a:"1.0"},{n:["station"],u:"1f689",a:"0.6"},{n:["tram"],u:"1f68a",a:"1.0"},{n:["monorail"],u:"1f69d",a:"1.0"},{n:["mountain railway"],u:"1f69e",a:"1.0"},{n:["train","tram car"],u:"1f68b",a:"1.0"},{n:["bus"],u:"1f68c",a:"0.6"},{n:["oncoming bus"],u:"1f68d",a:"0.7"},{n:["trolleybus"],u:"1f68e",a:"1.0"},{n:["minibus"],u:"1f690",a:"1.0"},{n:["ambulance"],u:"1f691",a:"0.6"},{n:["fire engine"],u:"1f692",a:"0.6"},{n:["police car"],u:"1f693",a:"0.6"},{n:["oncoming police car"],u:"1f694",a:"0.7"},{n:["taxi"],u:"1f695",a:"0.6"},{n:["oncoming taxi"],u:"1f696",a:"1.0"},{n:["car","red car","automobile"],u:"1f697",a:"0.6"},{n:["oncoming automobile"],u:"1f698",a:"0.7"},{n:["blue car","recreational vehicle"],u:"1f699",a:"0.6"},{n:["pickup truck"],u:"1f6fb",a:"13.0"},{n:["truck","delivery truck"],u:"1f69a",a:"0.6"},{n:["articulated lorry"],u:"1f69b",a:"1.0"},{n:["tractor"],u:"1f69c",a:"1.0"},{n:["racing car"],u:"1f3ce-fe0f",a:"0.7"},{n:["motorcycle","racing motorcycle"],u:"1f3cd-fe0f",a:"0.7"},{n:["motor scooter"],u:"1f6f5",a:"3.0"},{n:["manual wheelchair"],u:"1f9bd",a:"12.0"},{n:["motorized wheelchair"],u:"1f9bc",a:"12.0"},{n:["auto rickshaw"],u:"1f6fa",a:"12.0"},{n:["bike","bicycle"],u:"1f6b2",a:"0.6"},{n:["scooter"],u:"1f6f4",a:"3.0"},{n:["skateboard"],u:"1f6f9",a:"11.0"},{n:["roller skate"],u:"1f6fc",a:"13.0"},{n:["busstop","bus stop"],u:"1f68f",a:"0.6"},{n:["motorway"],u:"1f6e3-fe0f",a:"0.7"},{n:["railway track"],u:"1f6e4-fe0f",a:"0.7"},{n:["oil drum"],u:"1f6e2-fe0f",a:"0.7"},{n:["fuelpump","fuel pump"],u:"26fd",a:"0.6"},{n:["wheel"],u:"1f6de",a:"14.0"},{n:["rotating light","police cars revolving light"],u:"1f6a8",a:"0.6"},{n:["traffic light","horizontal traffic light"],u:"1f6a5",a:"0.6"},{n:["vertical traffic light"],u:"1f6a6",a:"1.0"},{n:["octagonal sign"],u:"1f6d1",a:"3.0"},{n:["construction","construction sign"],u:"1f6a7",a:"0.6"},{n:["anchor"],u:"2693",a:"0.6"},{n:["ring buoy"],u:"1f6df",a:"14.0"},{n:["boat","sailboat"],u:"26f5",a:"0.6"},{n:["canoe"],u:"1f6f6",a:"3.0"},{n:["speedboat"],u:"1f6a4",a:"0.6"},{n:["passenger ship"],u:"1f6f3-fe0f",a:"0.7"},{n:["ferry"],u:"26f4-fe0f",a:"0.7"},{n:["motor boat"],u:"1f6e5-fe0f",a:"0.7"},{n:["ship"],u:"1f6a2",a:"0.6"},{n:["airplane"],u:"2708-fe0f",a:"0.6"},{n:["small airplane"],u:"1f6e9-fe0f",a:"0.7"},{n:["airplane departure"],u:"1f6eb",a:"1.0"},{n:["airplane arriving"],u:"1f6ec",a:"1.0"},{n:["parachute"],u:"1fa82",a:"12.0"},{n:["seat"],u:"1f4ba",a:"0.6"},{n:["helicopter"],u:"1f681",a:"1.0"},{n:["suspension railway"],u:"1f69f",a:"1.0"},{n:["mountain cableway"],u:"1f6a0",a:"1.0"},{n:["aerial tramway"],u:"1f6a1",a:"1.0"},{n:["satellite"],u:"1f6f0-fe0f",a:"0.7"},{n:["rocket"],u:"1f680",a:"0.6"},{n:["flying saucer"],u:"1f6f8",a:"5.0"},{n:["bellhop bell"],u:"1f6ce-fe0f",a:"0.7"},{n:["luggage"],u:"1f9f3",a:"11.0"},{n:["hourglass"],u:"231b",a:"0.6"},{n:["hourglass flowing sand","hourglass with flowing sand"],u:"23f3",a:"0.6"},{n:["watch"],u:"231a",a:"0.6"},{n:["alarm clock"],u:"23f0",a:"0.6"},{n:["stopwatch"],u:"23f1-fe0f",a:"1.0"},{n:["timer clock"],u:"23f2-fe0f",a:"1.0"},{n:["mantelpiece clock"],u:"1f570-fe0f",a:"0.7"},{n:["clock12","clock face twelve oclock"],u:"1f55b",a:"0.6"},{n:["clock1230","clock face twelve-thirty"],u:"1f567",a:"0.7"},{n:["clock1","clock face one oclock"],u:"1f550",a:"0.6"},{n:["clock130","clock face one-thirty"],u:"1f55c",a:"0.7"},{n:["clock2","clock face two oclock"],u:"1f551",a:"0.6"},{n:["clock230","clock face two-thirty"],u:"1f55d",a:"0.7"},{n:["clock3","clock face three oclock"],u:"1f552",a:"0.6"},{n:["clock330","clock face three-thirty"],u:"1f55e",a:"0.7"},{n:["clock4","clock face four oclock"],u:"1f553",a:"0.6"},{n:["clock430","clock face four-thirty"],u:"1f55f",a:"0.7"},{n:["clock5","clock face five oclock"],u:"1f554",a:"0.6"},{n:["clock530","clock face five-thirty"],u:"1f560",a:"0.7"},{n:["clock6","clock face six oclock"],u:"1f555",a:"0.6"},{n:["clock630","clock face six-thirty"],u:"1f561",a:"0.7"},{n:["clock7","clock face seven oclock"],u:"1f556",a:"0.6"},{n:["clock730","clock face seven-thirty"],u:"1f562",a:"0.7"},{n:["clock8","clock face eight oclock"],u:"1f557",a:"0.6"},{n:["clock830","clock face eight-thirty"],u:"1f563",a:"0.7"},{n:["clock9","clock face nine oclock"],u:"1f558",a:"0.6"},{n:["clock930","clock face nine-thirty"],u:"1f564",a:"0.7"},{n:["clock10","clock face ten oclock"],u:"1f559",a:"0.6"},{n:["clock1030","clock face ten-thirty"],u:"1f565",a:"0.7"},{n:["clock11","clock face eleven oclock"],u:"1f55a",a:"0.6"},{n:["clock1130","clock face eleven-thirty"],u:"1f566",a:"0.7"},{n:["new moon","new moon symbol"],u:"1f311",a:"0.6"},{n:["waxing crescent moon","waxing crescent moon symbol"],u:"1f312",a:"1.0"},{n:["first quarter moon","first quarter moon symbol"],u:"1f313",a:"0.6"},{n:["moon","waxing gibbous moon","waxing gibbous moon symbol"],u:"1f314",a:"0.6"},{n:["full moon","full moon symbol"],u:"1f315",a:"0.6"},{n:["waning gibbous moon","waning gibbous moon symbol"],u:"1f316",a:"1.0"},{n:["last quarter moon","last quarter moon symbol"],u:"1f317",a:"1.0"},{n:["waning crescent moon","waning crescent moon symbol"],u:"1f318",a:"1.0"},{n:["crescent moon"],u:"1f319",a:"0.6"},{n:["new moon with face"],u:"1f31a",a:"1.0"},{n:["first quarter moon with face"],u:"1f31b",a:"0.6"},{n:["last quarter moon with face"],u:"1f31c",a:"0.7"},{n:["thermometer"],u:"1f321-fe0f",a:"0.7"},{n:["sunny","black sun with rays"],u:"2600-fe0f",a:"0.6"},{n:["full moon with face"],u:"1f31d",a:"1.0"},{n:["sun with face"],u:"1f31e",a:"1.0"},{n:["ringed planet"],u:"1fa90",a:"12.0"},{n:["star","white medium star"],u:"2b50",a:"0.6"},{n:["star2","glowing star"],u:"1f31f",a:"0.6"},{n:["stars","shooting star"],u:"1f320",a:"0.6"},{n:["milky way"],u:"1f30c",a:"0.6"},{n:["cloud"],u:"2601-fe0f",a:"0.6"},{n:["partly sunny","sun behind cloud"],u:"26c5",a:"0.6"},{n:["thunder cloud and rain","cloud with lightning and rain"],u:"26c8-fe0f",a:"0.7"},{n:["mostly sunny","sun small cloud","sun behind small cloud"],u:"1f324-fe0f",a:"0.7"},{n:["barely sunny","sun behind cloud","sun behind large cloud"],u:"1f325-fe0f",a:"0.7"},{n:["partly sunny rain","sun behind rain cloud"],u:"1f326-fe0f",a:"0.7"},{n:["rain cloud","cloud with rain"],u:"1f327-fe0f",a:"0.7"},{n:["snow cloud","cloud with snow"],u:"1f328-fe0f",a:"0.7"},{n:["lightning","lightning cloud","cloud with lightning"],u:"1f329-fe0f",a:"0.7"},{n:["tornado","tornado cloud"],u:"1f32a-fe0f",a:"0.7"},{n:["fog"],u:"1f32b-fe0f",a:"0.7"},{n:["wind face","wind blowing face"],u:"1f32c-fe0f",a:"0.7"},{n:["cyclone"],u:"1f300",a:"0.6"},{n:["rainbow"],u:"1f308",a:"0.6"},{n:["closed umbrella"],u:"1f302",a:"0.6"},{n:["umbrella"],u:"2602-fe0f",a:"0.7"},{n:["umbrella with rain drops"],u:"2614",a:"0.6"},{n:["umbrella on ground"],u:"26f1-fe0f",a:"0.7"},{n:["zap","high voltage sign"],u:"26a1",a:"0.6"},{n:["snowflake"],u:"2744-fe0f",a:"0.6"},{n:["snowman"],u:"2603-fe0f",a:"0.7"},{n:["snowman without snow"],u:"26c4",a:"0.6"},{n:["comet"],u:"2604-fe0f",a:"1.0"},{n:["fire"],u:"1f525",a:"0.6"},{n:["droplet"],u:"1f4a7",a:"0.6"},{n:["ocean","water wave"],u:"1f30a",a:"0.6"}],activities:[{n:["jack-o-lantern","jack o lantern"],u:"1f383",a:"0.6"},{n:["christmas tree"],u:"1f384",a:"0.6"},{n:["fireworks"],u:"1f386",a:"0.6"},{n:["sparkler","firework sparkler"],u:"1f387",a:"0.6"},{n:["firecracker"],u:"1f9e8",a:"11.0"},{n:["sparkles"],u:"2728",a:"0.6"},{n:["balloon"],u:"1f388",a:"0.6"},{n:["tada","party popper"],u:"1f389",a:"0.6"},{n:["confetti ball"],u:"1f38a",a:"0.6"},{n:["tanabata tree"],u:"1f38b",a:"0.6"},{n:["bamboo","pine decoration"],u:"1f38d",a:"0.6"},{n:["dolls","japanese dolls"],u:"1f38e",a:"0.6"},{n:["flags","carp streamer"],u:"1f38f",a:"0.6"},{n:["wind chime"],u:"1f390",a:"0.6"},{n:["rice scene","moon viewing ceremony"],u:"1f391",a:"0.6"},{n:["red envelope","red gift envelope"],u:"1f9e7",a:"11.0"},{n:["ribbon"],u:"1f380",a:"0.6"},{n:["gift","wrapped present"],u:"1f381",a:"0.6"},{n:["reminder ribbon"],u:"1f397-fe0f",a:"0.7"},{n:["admission tickets"],u:"1f39f-fe0f",a:"0.7"},{n:["ticket"],u:"1f3ab",a:"0.6"},{n:["medal","military medal"],u:"1f396-fe0f",a:"0.7"},{n:["trophy"],u:"1f3c6",a:"0.6"},{n:["sports medal"],u:"1f3c5",a:"1.0"},{n:["first place medal"],u:"1f947",a:"3.0"},{n:["second place medal"],u:"1f948",a:"3.0"},{n:["third place medal"],u:"1f949",a:"3.0"},{n:["soccer","soccer ball"],u:"26bd",a:"0.6"},{n:["baseball"],u:"26be",a:"0.6"},{n:["softball"],u:"1f94e",a:"11.0"},{n:["basketball","basketball and hoop"],u:"1f3c0",a:"0.6"},{n:["volleyball"],u:"1f3d0",a:"1.0"},{n:["football","american football"],u:"1f3c8",a:"0.6"},{n:["rugby football"],u:"1f3c9",a:"1.0"},{n:["tennis","tennis racquet and ball"],u:"1f3be",a:"0.6"},{n:["flying disc"],u:"1f94f",a:"11.0"},{n:["bowling"],u:"1f3b3",a:"0.6"},{n:["cricket bat and ball"],u:"1f3cf",a:"1.0"},{n:["field hockey stick and ball"],u:"1f3d1",a:"1.0"},{n:["ice hockey stick and puck"],u:"1f3d2",a:"1.0"},{n:["lacrosse","lacrosse stick and ball"],u:"1f94d",a:"11.0"},{n:["table tennis paddle and ball"],u:"1f3d3",a:"1.0"},{n:["badminton racquet and shuttlecock"],u:"1f3f8",a:"1.0"},{n:["boxing glove"],u:"1f94a",a:"3.0"},{n:["martial arts uniform"],u:"1f94b",a:"3.0"},{n:["goal net"],u:"1f945",a:"3.0"},{n:["golf","flag in hole"],u:"26f3",a:"0.6"},{n:["ice skate"],u:"26f8-fe0f",a:"0.7"},{n:["fishing pole and fish"],u:"1f3a3",a:"0.6"},{n:["diving mask"],u:"1f93f",a:"12.0"},{n:["running shirt with sash"],u:"1f3bd",a:"0.6"},{n:["ski","ski and ski boot"],u:"1f3bf",a:"0.6"},{n:["sled"],u:"1f6f7",a:"5.0"},{n:["curling stone"],u:"1f94c",a:"5.0"},{n:["dart","direct hit"],u:"1f3af",a:"0.6"},{n:["yo-yo"],u:"1fa80",a:"12.0"},{n:["kite"],u:"1fa81",a:"12.0"},{n:["gun","pistol"],u:"1f52b",a:"0.6"},{n:["8ball","billiards"],u:"1f3b1",a:"0.6"},{n:["crystal ball"],u:"1f52e",a:"0.6"},{n:["magic wand"],u:"1fa84",a:"13.0"},{n:["video game"],u:"1f3ae",a:"0.6"},{n:["joystick"],u:"1f579-fe0f",a:"0.7"},{n:["slot machine"],u:"1f3b0",a:"0.6"},{n:["game die"],u:"1f3b2",a:"0.6"},{n:["jigsaw","jigsaw puzzle piece"],u:"1f9e9",a:"11.0"},{n:["teddy bear"],u:"1f9f8",a:"11.0"},{n:["pinata"],u:"1fa85",a:"13.0"},{n:["mirror ball"],u:"1faa9",a:"14.0"},{n:["nesting dolls"],u:"1fa86",a:"13.0"},{n:["spades","black spade suit"],u:"2660-fe0f",a:"0.6"},{n:["hearts","black heart suit"],u:"2665-fe0f",a:"0.6"},{n:["diamonds","black diamond suit"],u:"2666-fe0f",a:"0.6"},{n:["clubs","black club suit"],u:"2663-fe0f",a:"0.6"},{n:["chess pawn"],u:"265f-fe0f",a:"11.0"},{n:["black joker","playing card black joker"],u:"1f0cf",a:"0.6"},{n:["mahjong","mahjong tile red dragon"],u:"1f004",a:"0.6"},{n:["flower playing cards"],u:"1f3b4",a:"0.6"},{n:["performing arts"],u:"1f3ad",a:"0.6"},{n:["framed picture","frame with picture"],u:"1f5bc-fe0f",a:"0.7"},{n:["art","artist palette"],u:"1f3a8",a:"0.6"},{n:["thread","spool of thread"],u:"1f9f5",a:"11.0"},{n:["sewing needle"],u:"1faa1",a:"13.0"},{n:["yarn","ball of yarn"],u:"1f9f6",a:"11.0"},{n:["knot"],u:"1faa2",a:"13.0"}],objects:[{n:["eyeglasses"],u:"1f453",a:"0.6"},{n:["sunglasses","dark sunglasses"],u:"1f576-fe0f",a:"0.7"},{n:["goggles"],u:"1f97d",a:"11.0"},{n:["lab coat"],u:"1f97c",a:"11.0"},{n:["safety vest"],u:"1f9ba",a:"12.0"},{n:["necktie"],u:"1f454",a:"0.6"},{n:["shirt","tshirt","t-shirt"],u:"1f455",a:"0.6"},{n:["jeans"],u:"1f456",a:"0.6"},{n:["scarf"],u:"1f9e3",a:"5.0"},{n:["gloves"],u:"1f9e4",a:"5.0"},{n:["coat"],u:"1f9e5",a:"5.0"},{n:["socks"],u:"1f9e6",a:"5.0"},{n:["dress"],u:"1f457",a:"0.6"},{n:["kimono"],u:"1f458",a:"0.6"},{n:["sari"],u:"1f97b",a:"12.0"},{n:["one-piece swimsuit"],u:"1fa71",a:"12.0"},{n:["briefs"],u:"1fa72",a:"12.0"},{n:["shorts"],u:"1fa73",a:"12.0"},{n:["bikini"],u:"1f459",a:"0.6"},{n:["womans clothes"],u:"1f45a",a:"0.6"},{n:["folding hand fan"],u:"1faad",a:"15.0"},{n:["purse"],u:"1f45b",a:"0.6"},{n:["handbag"],u:"1f45c",a:"0.6"},{n:["pouch"],u:"1f45d",a:"0.6"},{n:["shopping bags"],u:"1f6cd-fe0f",a:"0.7"},{n:["school satchel"],u:"1f392",a:"0.6"},{n:["thong sandal"],u:"1fa74",a:"13.0"},{n:["shoe","mans shoe"],u:"1f45e",a:"0.6"},{n:["athletic shoe"],u:"1f45f",a:"0.6"},{n:["hiking boot"],u:"1f97e",a:"11.0"},{n:["flat shoe","womans flat shoe"],u:"1f97f",a:"11.0"},{n:["high heel","high-heeled shoe"],u:"1f460",a:"0.6"},{n:["sandal","womans sandal"],u:"1f461",a:"0.6"},{n:["ballet shoes"],u:"1fa70",a:"12.0"},{n:["boot","womans boots"],u:"1f462",a:"0.6"},{n:["hair pick"],u:"1faae",a:"15.0"},{n:["crown"],u:"1f451",a:"0.6"},{n:["womans hat"],u:"1f452",a:"0.6"},{n:["tophat","top hat"],u:"1f3a9",a:"0.6"},{n:["mortar board","graduation cap"],u:"1f393",a:"0.6"},{n:["billed cap"],u:"1f9e2",a:"5.0"},{n:["military helmet"],u:"1fa96",a:"13.0"},{n:["rescue worker’s helmet","helmet with white cross"],u:"26d1-fe0f",a:"0.7"},{n:["prayer beads"],u:"1f4ff",a:"1.0"},{n:["lipstick"],u:"1f484",a:"0.6"},{n:["ring"],u:"1f48d",a:"0.6"},{n:["gem","gem stone"],u:"1f48e",a:"0.6"},{n:["mute","speaker with cancellation stroke"],u:"1f507",a:"1.0"},{n:["speaker"],u:"1f508",a:"0.7"},{n:["sound","speaker with one sound wave"],u:"1f509",a:"1.0"},{n:["loud sound","speaker with three sound waves"],u:"1f50a",a:"0.6"},{n:["loudspeaker","public address loudspeaker"],u:"1f4e2",a:"0.6"},{n:["mega","cheering megaphone"],u:"1f4e3",a:"0.6"},{n:["postal horn"],u:"1f4ef",a:"1.0"},{n:["bell"],u:"1f514",a:"0.6"},{n:["no bell","bell with cancellation stroke"],u:"1f515",a:"1.0"},{n:["musical score"],u:"1f3bc",a:"0.6"},{n:["musical note"],u:"1f3b5",a:"0.6"},{n:["notes","multiple musical notes"],u:"1f3b6",a:"0.6"},{n:["studio microphone"],u:"1f399-fe0f",a:"0.7"},{n:["level slider"],u:"1f39a-fe0f",a:"0.7"},{n:["control knobs"],u:"1f39b-fe0f",a:"0.7"},{n:["microphone"],u:"1f3a4",a:"0.6"},{n:["headphone","headphones"],u:"1f3a7",a:"0.6"},{n:["radio"],u:"1f4fb",a:"0.6"},{n:["saxophone"],u:"1f3b7",a:"0.6"},{n:["accordion"],u:"1fa97",a:"13.0"},{n:["guitar"],u:"1f3b8",a:"0.6"},{n:["musical keyboard"],u:"1f3b9",a:"0.6"},{n:["trumpet"],u:"1f3ba",a:"0.6"},{n:["violin"],u:"1f3bb",a:"0.6"},{n:["banjo"],u:"1fa95",a:"12.0"},{n:["drum with drumsticks"],u:"1f941",a:"3.0"},{n:["long drum"],u:"1fa98",a:"13.0"},{n:["maracas"],u:"1fa87",a:"15.0"},{n:["flute"],u:"1fa88",a:"15.0"},{n:["iphone","mobile phone"],u:"1f4f1",a:"0.6"},{n:["calling","mobile phone with rightwards arrow at left"],u:"1f4f2",a:"0.6"},{n:["phone","telephone","black telephone"],u:"260e-fe0f",a:"0.6"},{n:["telephone receiver"],u:"1f4de",a:"0.6"},{n:["pager"],u:"1f4df",a:"0.6"},{n:["fax","fax machine"],u:"1f4e0",a:"0.6"},{n:["battery"],u:"1f50b",a:"0.6"},{n:["low battery"],u:"1faab",a:"14.0"},{n:["electric plug"],u:"1f50c",a:"0.6"},{n:["computer","personal computer"],u:"1f4bb",a:"0.6"},{n:["desktop computer"],u:"1f5a5-fe0f",a:"0.7"},{n:["printer"],u:"1f5a8-fe0f",a:"0.7"},{n:["keyboard"],u:"2328-fe0f",a:"1.0"},{n:["computer mouse","three button mouse"],u:"1f5b1-fe0f",a:"0.7"},{n:["trackball"],u:"1f5b2-fe0f",a:"0.7"},{n:["minidisc"],u:"1f4bd",a:"0.6"},{n:["floppy disk"],u:"1f4be",a:"0.6"},{n:["cd","optical disc"],u:"1f4bf",a:"0.6"},{n:["dvd"],u:"1f4c0",a:"0.6"},{n:["abacus"],u:"1f9ee",a:"11.0"},{n:["movie camera"],u:"1f3a5",a:"0.6"},{n:["film frames"],u:"1f39e-fe0f",a:"0.7"},{n:["film projector"],u:"1f4fd-fe0f",a:"0.7"},{n:["clapper","clapper board"],u:"1f3ac",a:"0.6"},{n:["tv","television"],u:"1f4fa",a:"0.6"},{n:["camera"],u:"1f4f7",a:"0.6"},{n:["camera with flash"],u:"1f4f8",a:"1.0"},{n:["video camera"],u:"1f4f9",a:"0.6"},{n:["vhs","videocassette"],u:"1f4fc",a:"0.6"},{n:["mag","left-pointing magnifying glass"],u:"1f50d",a:"0.6"},{n:["mag right","right-pointing magnifying glass"],u:"1f50e",a:"0.6"},{n:["candle"],u:"1f56f-fe0f",a:"0.7"},{n:["bulb","electric light bulb"],u:"1f4a1",a:"0.6"},{n:["flashlight","electric torch"],u:"1f526",a:"0.6"},{n:["lantern","izakaya lantern"],u:"1f3ee",a:"0.6"},{n:["diya lamp"],u:"1fa94",a:"12.0"},{n:["notebook with decorative cover"],u:"1f4d4",a:"0.6"},{n:["closed book"],u:"1f4d5",a:"0.6"},{n:["book","open book"],u:"1f4d6",a:"0.6"},{n:["green book"],u:"1f4d7",a:"0.6"},{n:["blue book"],u:"1f4d8",a:"0.6"},{n:["orange book"],u:"1f4d9",a:"0.6"},{n:["books"],u:"1f4da",a:"0.6"},{n:["notebook"],u:"1f4d3",a:"0.6"},{n:["ledger"],u:"1f4d2",a:"0.6"},{n:["page with curl"],u:"1f4c3",a:"0.6"},{n:["scroll"],u:"1f4dc",a:"0.6"},{n:["page facing up"],u:"1f4c4",a:"0.6"},{n:["newspaper"],u:"1f4f0",a:"0.6"},{n:["rolled-up newspaper","rolled up newspaper"],u:"1f5de-fe0f",a:"0.7"},{n:["bookmark tabs"],u:"1f4d1",a:"0.6"},{n:["bookmark"],u:"1f516",a:"0.6"},{n:["label"],u:"1f3f7-fe0f",a:"0.7"},{n:["moneybag","money bag"],u:"1f4b0",a:"0.6"},{n:["coin"],u:"1fa99",a:"13.0"},{n:["yen","banknote with yen sign"],u:"1f4b4",a:"0.6"},{n:["dollar","banknote with dollar sign"],u:"1f4b5",a:"0.6"},{n:["euro","banknote with euro sign"],u:"1f4b6",a:"1.0"},{n:["pound","banknote with pound sign"],u:"1f4b7",a:"1.0"},{n:["money with wings"],u:"1f4b8",a:"0.6"},{n:["credit card"],u:"1f4b3",a:"0.6"},{n:["receipt"],u:"1f9fe",a:"11.0"},{n:["chart","chart with upwards trend and yen sign"],u:"1f4b9",a:"0.6"},{n:["email","envelope"],u:"2709-fe0f",a:"0.6"},{n:["e-mail","e-mail symbol"],u:"1f4e7",a:"0.6"},{n:["incoming envelope"],u:"1f4e8",a:"0.6"},{n:["envelope with arrow","envelope with downwards arrow above"],u:"1f4e9",a:"0.6"},{n:["outbox tray"],u:"1f4e4",a:"0.6"},{n:["inbox tray"],u:"1f4e5",a:"0.6"},{n:["package"],u:"1f4e6",a:"0.6"},{n:["mailbox","closed mailbox with raised flag"],u:"1f4eb",a:"0.6"},{n:["mailbox closed","closed mailbox with lowered flag"],u:"1f4ea",a:"0.6"},{n:["mailbox with mail","open mailbox with raised flag"],u:"1f4ec",a:"0.7"},{n:["mailbox with no mail","open mailbox with lowered flag"],u:"1f4ed",a:"0.7"},{n:["postbox"],u:"1f4ee",a:"0.6"},{n:["ballot box with ballot"],u:"1f5f3-fe0f",a:"0.7"},{n:["pencil","pencil2"],u:"270f-fe0f",a:"0.6"},{n:["black nib"],u:"2712-fe0f",a:"0.6"},{n:["fountain pen","lower left fountain pen"],u:"1f58b-fe0f",a:"0.7"},{n:["pen","lower left ballpoint pen"],u:"1f58a-fe0f",a:"0.7"},{n:["paintbrush","lower left paintbrush"],u:"1f58c-fe0f",a:"0.7"},{n:["crayon","lower left crayon"],u:"1f58d-fe0f",a:"0.7"},{n:["memo","pencil"],u:"1f4dd",a:"0.6"},{n:["briefcase"],u:"1f4bc",a:"0.6"},{n:["file folder"],u:"1f4c1",a:"0.6"},{n:["open file folder"],u:"1f4c2",a:"0.6"},{n:["card index dividers"],u:"1f5c2-fe0f",a:"0.7"},{n:["date","calendar"],u:"1f4c5",a:"0.6"},{n:["calendar","tear-off calendar"],u:"1f4c6",a:"0.6"},{n:["spiral notepad","spiral note pad"],u:"1f5d2-fe0f",a:"0.7"},{n:["spiral calendar","spiral calendar pad"],u:"1f5d3-fe0f",a:"0.7"},{n:["card index"],u:"1f4c7",a:"0.6"},{n:["chart with upwards trend"],u:"1f4c8",a:"0.6"},{n:["chart with downwards trend"],u:"1f4c9",a:"0.6"},{n:["bar chart"],u:"1f4ca",a:"0.6"},{n:["clipboard"],u:"1f4cb",a:"0.6"},{n:["pushpin"],u:"1f4cc",a:"0.6"},{n:["round pushpin"],u:"1f4cd",a:"0.6"},{n:["paperclip"],u:"1f4ce",a:"0.6"},{n:["linked paperclips"],u:"1f587-fe0f",a:"0.7"},{n:["straight ruler"],u:"1f4cf",a:"0.6"},{n:["triangular ruler"],u:"1f4d0",a:"0.6"},{n:["scissors","black scissors"],u:"2702-fe0f",a:"0.6"},{n:["card file box"],u:"1f5c3-fe0f",a:"0.7"},{n:["file cabinet"],u:"1f5c4-fe0f",a:"0.7"},{n:["wastebasket"],u:"1f5d1-fe0f",a:"0.7"},{n:["lock"],u:"1f512",a:"0.6"},{n:["unlock","open lock"],u:"1f513",a:"0.6"},{n:["lock with ink pen"],u:"1f50f",a:"0.6"},{n:["closed lock with key"],u:"1f510",a:"0.6"},{n:["key"],u:"1f511",a:"0.6"},{n:["old key"],u:"1f5dd-fe0f",a:"0.7"},{n:["hammer"],u:"1f528",a:"0.6"},{n:["axe"],u:"1fa93",a:"12.0"},{n:["pick"],u:"26cf-fe0f",a:"0.7"},{n:["hammer and pick"],u:"2692-fe0f",a:"1.0"},{n:["hammer and wrench"],u:"1f6e0-fe0f",a:"0.7"},{n:["dagger","dagger knife"],u:"1f5e1-fe0f",a:"0.7"},{n:["crossed swords"],u:"2694-fe0f",a:"1.0"},{n:["bomb"],u:"1f4a3",a:"0.6"},{n:["boomerang"],u:"1fa83",a:"13.0"},{n:["bow and arrow"],u:"1f3f9",a:"1.0"},{n:["shield"],u:"1f6e1-fe0f",a:"0.7"},{n:["carpentry saw"],u:"1fa9a",a:"13.0"},{n:["wrench"],u:"1f527",a:"0.6"},{n:["screwdriver"],u:"1fa9b",a:"13.0"},{n:["nut and bolt"],u:"1f529",a:"0.6"},{n:["gear"],u:"2699-fe0f",a:"1.0"},{n:["clamp","compression"],u:"1f5dc-fe0f",a:"0.7"},{n:["scales","balance scale"],u:"2696-fe0f",a:"1.0"},{n:["probing cane"],u:"1f9af",a:"12.0"},{n:["link","link symbol"],u:"1f517",a:"0.6"},{n:["broken chain"],u:"26d3-fe0f-200d-1f4a5",a:"15.1"},{n:["chains"],u:"26d3-fe0f",a:"0.7"},{n:["hook"],u:"1fa9d",a:"13.0"},{n:["toolbox"],u:"1f9f0",a:"11.0"},{n:["magnet"],u:"1f9f2",a:"11.0"},{n:["ladder"],u:"1fa9c",a:"13.0"},{n:["alembic"],u:"2697-fe0f",a:"1.0"},{n:["test tube"],u:"1f9ea",a:"11.0"},{n:["petri dish"],u:"1f9eb",a:"11.0"},{n:["dna","dna double helix"],u:"1f9ec",a:"11.0"},{n:["microscope"],u:"1f52c",a:"1.0"},{n:["telescope"],u:"1f52d",a:"1.0"},{n:["satellite antenna"],u:"1f4e1",a:"0.6"},{n:["syringe"],u:"1f489",a:"0.6"},{n:["drop of blood"],u:"1fa78",a:"12.0"},{n:["pill"],u:"1f48a",a:"0.6"},{n:["adhesive bandage"],u:"1fa79",a:"12.0"},{n:["crutch"],u:"1fa7c",a:"14.0"},{n:["stethoscope"],u:"1fa7a",a:"12.0"},{n:["x-ray"],u:"1fa7b",a:"14.0"},{n:["door"],u:"1f6aa",a:"0.6"},{n:["elevator"],u:"1f6d7",a:"13.0"},{n:["mirror"],u:"1fa9e",a:"13.0"},{n:["window"],u:"1fa9f",a:"13.0"},{n:["bed"],u:"1f6cf-fe0f",a:"0.7"},{n:["couch and lamp"],u:"1f6cb-fe0f",a:"0.7"},{n:["chair"],u:"1fa91",a:"12.0"},{n:["toilet"],u:"1f6bd",a:"0.6"},{n:["plunger"],u:"1faa0",a:"13.0"},{n:["shower"],u:"1f6bf",a:"1.0"},{n:["bathtub"],u:"1f6c1",a:"1.0"},{n:["mouse trap"],u:"1faa4",a:"13.0"},{n:["razor"],u:"1fa92",a:"12.0"},{n:["lotion bottle"],u:"1f9f4",a:"11.0"},{n:["safety pin"],u:"1f9f7",a:"11.0"},{n:["broom"],u:"1f9f9",a:"11.0"},{n:["basket"],u:"1f9fa",a:"11.0"},{n:["roll of paper"],u:"1f9fb",a:"11.0"},{n:["bucket"],u:"1faa3",a:"13.0"},{n:["soap","bar of soap"],u:"1f9fc",a:"11.0"},{n:["bubbles"],u:"1fae7",a:"14.0"},{n:["toothbrush"],u:"1faa5",a:"13.0"},{n:["sponge"],u:"1f9fd",a:"11.0"},{n:["fire extinguisher"],u:"1f9ef",a:"11.0"},{n:["shopping trolley"],u:"1f6d2",a:"3.0"},{n:["smoking","smoking symbol"],u:"1f6ac",a:"0.6"},{n:["coffin"],u:"26b0-fe0f",a:"1.0"},{n:["headstone"],u:"1faa6",a:"13.0"},{n:["funeral urn"],u:"26b1-fe0f",a:"1.0"},{n:["nazar amulet"],u:"1f9ff",a:"11.0"},{n:["hamsa"],u:"1faac",a:"14.0"},{n:["moyai"],u:"1f5ff",a:"0.6"},{n:["placard"],u:"1faa7",a:"13.0"},{n:["identification card"],u:"1faaa",a:"14.0"}],symbols:[{n:["atm","automated teller machine"],u:"1f3e7",a:"0.6"},{n:["put litter in its place","put litter in its place symbol"],u:"1f6ae",a:"1.0"},{n:["potable water","potable water symbol"],u:"1f6b0",a:"1.0"},{n:["wheelchair","wheelchair symbol"],u:"267f",a:"0.6"},{n:["mens","mens symbol"],u:"1f6b9",a:"0.6"},{n:["womens","womens symbol"],u:"1f6ba",a:"0.6"},{n:["restroom"],u:"1f6bb",a:"0.6"},{n:["baby symbol"],u:"1f6bc",a:"0.6"},{n:["wc","water closet"],u:"1f6be",a:"0.6"},{n:["passport control"],u:"1f6c2",a:"1.0"},{n:["customs"],u:"1f6c3",a:"1.0"},{n:["baggage claim"],u:"1f6c4",a:"1.0"},{n:["left luggage"],u:"1f6c5",a:"1.0"},{n:["warning","warning sign"],u:"26a0-fe0f",a:"0.6"},{n:["children crossing"],u:"1f6b8",a:"1.0"},{n:["no entry"],u:"26d4",a:"0.6"},{n:["no entry sign"],u:"1f6ab",a:"0.6"},{n:["no bicycles"],u:"1f6b3",a:"1.0"},{n:["no smoking","no smoking symbol"],u:"1f6ad",a:"0.6"},{n:["do not litter","do not litter symbol"],u:"1f6af",a:"1.0"},{n:["non-potable water","non-potable water symbol"],u:"1f6b1",a:"1.0"},{n:["no pedestrians"],u:"1f6b7",a:"1.0"},{n:["no mobile phones"],u:"1f4f5",a:"1.0"},{n:["underage","no one under eighteen symbol"],u:"1f51e",a:"0.6"},{n:["radioactive","radioactive sign"],u:"2622-fe0f",a:"1.0"},{n:["biohazard","biohazard sign"],u:"2623-fe0f",a:"1.0"},{n:["arrow up","upwards black arrow"],u:"2b06-fe0f",a:"0.6"},{n:["north east arrow","arrow upper right"],u:"2197-fe0f",a:"0.6"},{n:["arrow right","black rightwards arrow"],u:"27a1-fe0f",a:"0.6"},{n:["south east arrow","arrow lower right"],u:"2198-fe0f",a:"0.6"},{n:["arrow down","downwards black arrow"],u:"2b07-fe0f",a:"0.6"},{n:["south west arrow","arrow lower left"],u:"2199-fe0f",a:"0.6"},{n:["arrow left","leftwards black arrow"],u:"2b05-fe0f",a:"0.6"},{n:["north west arrow","arrow upper left"],u:"2196-fe0f",a:"0.6"},{n:["up down arrow","arrow up down"],u:"2195-fe0f",a:"0.6"},{n:["left right arrow"],u:"2194-fe0f",a:"0.6"},{n:["leftwards arrow with hook"],u:"21a9-fe0f",a:"0.6"},{n:["arrow right hook","rightwards arrow with hook"],u:"21aa-fe0f",a:"0.6"},{n:["arrow heading up","arrow pointing rightwards then curving upwards"],u:"2934-fe0f",a:"0.6"},{n:["arrow heading down","arrow pointing rightwards then curving downwards"],u:"2935-fe0f",a:"0.6"},{n:["arrows clockwise","clockwise downwards and upwards open circle arrows"],u:"1f503",a:"0.6"},{n:["arrows counterclockwise","anticlockwise downwards and upwards open circle arrows"],u:"1f504",a:"1.0"},{n:["back","back with leftwards arrow above"],u:"1f519",a:"0.6"},{n:["end","end with leftwards arrow above"],u:"1f51a",a:"0.6"},{n:["on","on with exclamation mark with left right arrow above"],u:"1f51b",a:"0.6"},{n:["soon","soon with rightwards arrow above"],u:"1f51c",a:"0.6"},{n:["top","top with upwards arrow above"],u:"1f51d",a:"0.6"},{n:["place of worship"],u:"1f6d0",a:"1.0"},{n:["atom symbol"],u:"269b-fe0f",a:"1.0"},{n:["om","om symbol"],u:"1f549-fe0f",a:"0.7"},{n:["star of david"],u:"2721-fe0f",a:"0.7"},{n:["wheel of dharma"],u:"2638-fe0f",a:"0.7"},{n:["yin yang"],u:"262f-fe0f",a:"0.7"},{n:["latin cross"],u:"271d-fe0f",a:"0.7"},{n:["orthodox cross"],u:"2626-fe0f",a:"1.0"},{n:["star and crescent"],u:"262a-fe0f",a:"0.7"},{n:["peace symbol"],u:"262e-fe0f",a:"1.0"},{n:["menorah with nine branches"],u:"1f54e",a:"1.0"},{n:["six pointed star","six pointed star with middle dot"],u:"1f52f",a:"0.6"},{n:["khanda"],u:"1faaf",a:"15.0"},{n:["aries"],u:"2648",a:"0.6"},{n:["taurus"],u:"2649",a:"0.6"},{n:["gemini"],u:"264a",a:"0.6"},{n:["cancer"],u:"264b",a:"0.6"},{n:["leo"],u:"264c",a:"0.6"},{n:["virgo"],u:"264d",a:"0.6"},{n:["libra"],u:"264e",a:"0.6"},{n:["scorpius"],u:"264f",a:"0.6"},{n:["sagittarius"],u:"2650",a:"0.6"},{n:["capricorn"],u:"2651",a:"0.6"},{n:["aquarius"],u:"2652",a:"0.6"},{n:["pisces"],u:"2653",a:"0.6"},{n:["ophiuchus"],u:"26ce",a:"0.6"},{n:["twisted rightwards arrows"],u:"1f500",a:"1.0"},{n:["repeat","clockwise rightwards and leftwards open circle arrows"],u:"1f501",a:"1.0"},{n:["repeat one","clockwise rightwards and leftwards open circle arrows with circled one overlay"],u:"1f502",a:"1.0"},{n:["arrow forward","black right-pointing triangle"],u:"25b6-fe0f",a:"0.6"},{n:["fast forward","black right-pointing double triangle"],u:"23e9",a:"0.6"},{n:["next track button","black right pointing double triangle with vertical bar"],u:"23ed-fe0f",a:"0.7"},{n:["play or pause button","black right pointing triangle with double vertical bar"],u:"23ef-fe0f",a:"1.0"},{n:["arrow backward","black left-pointing triangle"],u:"25c0-fe0f",a:"0.6"},{n:["rewind","black left-pointing double triangle"],u:"23ea",a:"0.6"},{n:["last track button","black left pointing double triangle with vertical bar"],u:"23ee-fe0f",a:"0.7"},{n:["arrow up small","up-pointing small red triangle"],u:"1f53c",a:"0.6"},{n:["arrow double up","black up-pointing double triangle"],u:"23eb",a:"0.6"},{n:["arrow down small","down-pointing small red triangle"],u:"1f53d",a:"0.6"},{n:["arrow double down","black down-pointing double triangle"],u:"23ec",a:"0.6"},{n:["pause button","double vertical bar"],u:"23f8-fe0f",a:"0.7"},{n:["stop button","black square for stop"],u:"23f9-fe0f",a:"0.7"},{n:["record button","black circle for record"],u:"23fa-fe0f",a:"0.7"},{n:["eject","eject button"],u:"23cf-fe0f",a:"1.0"},{n:["cinema"],u:"1f3a6",a:"0.6"},{n:["low brightness","low brightness symbol"],u:"1f505",a:"1.0"},{n:["high brightness","high brightness symbol"],u:"1f506",a:"1.0"},{n:["signal strength","antenna with bars"],u:"1f4f6",a:"0.6"},{n:["wireless"],u:"1f6dc",a:"15.0"},{n:["vibration mode"],u:"1f4f3",a:"0.6"},{n:["mobile phone off"],u:"1f4f4",a:"0.6"},{n:["female sign"],u:"2640-fe0f",a:"4.0"},{n:["male sign"],u:"2642-fe0f",a:"4.0"},{n:["transgender symbol"],u:"26a7-fe0f",a:"13.0"},{n:["heavy multiplication x"],u:"2716-fe0f",a:"0.6"},{n:["heavy plus sign"],u:"2795",a:"0.6"},{n:["heavy minus sign"],u:"2796",a:"0.6"},{n:["heavy division sign"],u:"2797",a:"0.6"},{n:["heavy equals sign"],u:"1f7f0",a:"14.0"},{n:["infinity"],u:"267e-fe0f",a:"11.0"},{n:["bangbang","double exclamation mark"],u:"203c-fe0f",a:"0.6"},{n:["interrobang","exclamation question mark"],u:"2049-fe0f",a:"0.6"},{n:["question","black question mark ornament"],u:"2753",a:"0.6"},{n:["grey question","white question mark ornament"],u:"2754",a:"0.6"},{n:["grey exclamation","white exclamation mark ornament"],u:"2755",a:"0.6"},{n:["exclamation","heavy exclamation mark","heavy exclamation mark symbol"],u:"2757",a:"0.6"},{n:["wavy dash"],u:"3030-fe0f",a:"0.6"},{n:["currency exchange"],u:"1f4b1",a:"0.6"},{n:["heavy dollar sign"],u:"1f4b2",a:"0.6"},{n:["medical symbol","staff of aesculapius"],u:"2695-fe0f",a:"4.0"},{n:["recycle","black universal recycling symbol"],u:"267b-fe0f",a:"0.6"},{n:["fleur-de-lis","fleur de lis"],u:"269c-fe0f",a:"1.0"},{n:["trident","trident emblem"],u:"1f531",a:"0.6"},{n:["name badge"],u:"1f4db",a:"0.6"},{n:["beginner","japanese symbol for beginner"],u:"1f530",a:"0.6"},{n:["o","heavy large circle"],u:"2b55",a:"0.6"},{n:["white check mark","white heavy check mark"],u:"2705",a:"0.6"},{n:["ballot box with check"],u:"2611-fe0f",a:"0.6"},{n:["heavy check mark"],u:"2714-fe0f",a:"0.6"},{n:["x","cross mark"],u:"274c",a:"0.6"},{n:["negative squared cross mark"],u:"274e",a:"0.6"},{n:["curly loop"],u:"27b0",a:"0.6"},{n:["loop","double curly loop"],u:"27bf",a:"1.0"},{n:["part alternation mark"],u:"303d-fe0f",a:"0.6"},{n:["eight spoked asterisk"],u:"2733-fe0f",a:"0.6"},{n:["eight pointed black star"],u:"2734-fe0f",a:"0.6"},{n:["sparkle"],u:"2747-fe0f",a:"0.6"},{n:["copyright","copyright sign"],u:"00a9-fe0f",a:"0.6"},{n:["registered","registered sign"],u:"00ae-fe0f",a:"0.6"},{n:["tm","trade mark sign"],u:"2122-fe0f",a:"0.6"},{n:["hash","hash key"],u:"0023-fe0f-20e3",a:"0.6"},{n:["keycap: *","keycap star"],u:"002a-fe0f-20e3",a:"2.0"},{n:["zero","keycap 0"],u:"0030-fe0f-20e3",a:"0.6"},{n:["one","keycap 1"],u:"0031-fe0f-20e3",a:"0.6"},{n:["two","keycap 2"],u:"0032-fe0f-20e3",a:"0.6"},{n:["three","keycap 3"],u:"0033-fe0f-20e3",a:"0.6"},{n:["four","keycap 4"],u:"0034-fe0f-20e3",a:"0.6"},{n:["five","keycap 5"],u:"0035-fe0f-20e3",a:"0.6"},{n:["six","keycap 6"],u:"0036-fe0f-20e3",a:"0.6"},{n:["seven","keycap 7"],u:"0037-fe0f-20e3",a:"0.6"},{n:["eight","keycap 8"],u:"0038-fe0f-20e3",a:"0.6"},{n:["nine","keycap 9"],u:"0039-fe0f-20e3",a:"0.6"},{n:["keycap ten"],u:"1f51f",a:"0.6"},{n:["capital abcd","input symbol for latin capital letters"],u:"1f520",a:"0.6"},{n:["abcd","input symbol for latin small letters"],u:"1f521",a:"0.6"},{n:["1234","input symbol for numbers"],u:"1f522",a:"0.6"},{n:["symbols","input symbol for symbols"],u:"1f523",a:"0.6"},{n:["abc","input symbol for latin letters"],u:"1f524",a:"0.6"},{n:["a","negative squared latin capital letter a"],u:"1f170-fe0f",a:"0.6"},{n:["ab","negative squared ab"],u:"1f18e",a:"0.6"},{n:["b","negative squared latin capital letter b"],u:"1f171-fe0f",a:"0.6"},{n:["cl","squared cl"],u:"1f191",a:"0.6"},{n:["cool","squared cool"],u:"1f192",a:"0.6"},{n:["free","squared free"],u:"1f193",a:"0.6"},{n:["information source"],u:"2139-fe0f",a:"0.6"},{n:["id","squared id"],u:"1f194",a:"0.6"},{n:["m","circled latin capital letter m"],u:"24c2-fe0f",a:"0.6"},{n:["new","squared new"],u:"1f195",a:"0.6"},{n:["ng","squared ng"],u:"1f196",a:"0.6"},{n:["o2","negative squared latin capital letter o"],u:"1f17e-fe0f",a:"0.6"},{n:["ok","squared ok"],u:"1f197",a:"0.6"},{n:["parking","negative squared latin capital letter p"],u:"1f17f-fe0f",a:"0.6"},{n:["sos","squared sos"],u:"1f198",a:"0.6"},{n:["up","squared up with exclamation mark"],u:"1f199",a:"0.6"},{n:["vs","squared vs"],u:"1f19a",a:"0.6"},{n:["koko","squared katakana koko"],u:"1f201",a:"0.6"},{n:["sa","squared katakana sa"],u:"1f202-fe0f",a:"0.6"},{n:["u6708","squared cjk unified ideograph-6708"],u:"1f237-fe0f",a:"0.6"},{n:["u6709","squared cjk unified ideograph-6709"],u:"1f236",a:"0.6"},{n:["u6307","squared cjk unified ideograph-6307"],u:"1f22f",a:"0.6"},{n:["ideograph advantage","circled ideograph advantage"],u:"1f250",a:"0.6"},{n:["u5272","squared cjk unified ideograph-5272"],u:"1f239",a:"0.6"},{n:["u7121","squared cjk unified ideograph-7121"],u:"1f21a",a:"0.6"},{n:["u7981","squared cjk unified ideograph-7981"],u:"1f232",a:"0.6"},{n:["accept","circled ideograph accept"],u:"1f251",a:"0.6"},{n:["u7533","squared cjk unified ideograph-7533"],u:"1f238",a:"0.6"},{n:["u5408","squared cjk unified ideograph-5408"],u:"1f234",a:"0.6"},{n:["u7a7a","squared cjk unified ideograph-7a7a"],u:"1f233",a:"0.6"},{n:["congratulations","circled ideograph congratulation"],u:"3297-fe0f",a:"0.6"},{n:["secret","circled ideograph secret"],u:"3299-fe0f",a:"0.6"},{n:["u55b6","squared cjk unified ideograph-55b6"],u:"1f23a",a:"0.6"},{n:["u6e80","squared cjk unified ideograph-6e80"],u:"1f235",a:"0.6"},{n:["red circle","large red circle"],u:"1f534",a:"0.6"},{n:["large orange circle"],u:"1f7e0",a:"12.0"},{n:["large yellow circle"],u:"1f7e1",a:"12.0"},{n:["large green circle"],u:"1f7e2",a:"12.0"},{n:["large blue circle"],u:"1f535",a:"0.6"},{n:["large purple circle"],u:"1f7e3",a:"12.0"},{n:["large brown circle"],u:"1f7e4",a:"12.0"},{n:["black circle","medium black circle"],u:"26ab",a:"0.6"},{n:["white circle","medium white circle"],u:"26aa",a:"0.6"},{n:["large red square"],u:"1f7e5",a:"12.0"},{n:["large orange square"],u:"1f7e7",a:"12.0"},{n:["large yellow square"],u:"1f7e8",a:"12.0"},{n:["large green square"],u:"1f7e9",a:"12.0"},{n:["large blue square"],u:"1f7e6",a:"12.0"},{n:["large purple square"],u:"1f7ea",a:"12.0"},{n:["large brown square"],u:"1f7eb",a:"12.0"},{n:["black large square"],u:"2b1b",a:"0.6"},{n:["white large square"],u:"2b1c",a:"0.6"},{n:["black medium square"],u:"25fc-fe0f",a:"0.6"},{n:["white medium square"],u:"25fb-fe0f",a:"0.6"},{n:["black medium small square"],u:"25fe",a:"0.6"},{n:["white medium small square"],u:"25fd",a:"0.6"},{n:["black small square"],u:"25aa-fe0f",a:"0.6"},{n:["white small square"],u:"25ab-fe0f",a:"0.6"},{n:["large orange diamond"],u:"1f536",a:"0.6"},{n:["large blue diamond"],u:"1f537",a:"0.6"},{n:["small orange diamond"],u:"1f538",a:"0.6"},{n:["small blue diamond"],u:"1f539",a:"0.6"},{n:["small red triangle","up-pointing red triangle"],u:"1f53a",a:"0.6"},{n:["small red triangle down","down-pointing red triangle"],u:"1f53b",a:"0.6"},{n:["diamond shape with a dot inside"],u:"1f4a0",a:"0.6"},{n:["radio button"],u:"1f518",a:"0.6"},{n:["white square button"],u:"1f533",a:"0.6"},{n:["black square button"],u:"1f532",a:"0.6"}],flags:[{n:["chequered flag","checkered flag"],u:"1f3c1",a:"0.6"},{n:["triangular flag on post"],u:"1f6a9",a:"0.6"},{n:["crossed flags"],u:"1f38c",a:"0.6"},{n:["waving black flag"],u:"1f3f4",a:"1.0"},{n:["white flag","waving white flag"],u:"1f3f3-fe0f",a:"0.7"},{n:["rainbow flag","rainbow-flag"],u:"1f3f3-fe0f-200d-1f308",a:"4.0"},{n:["transgender flag"],u:"1f3f3-fe0f-200d-26a7-fe0f",a:"13.0"},{n:["pirate flag"],u:"1f3f4-200d-2620-fe0f",a:"11.0"},{n:["flag-ac","ascension island flag"],u:"1f1e6-1f1e8",a:"2.0"},{n:["flag-ad","andorra flag"],u:"1f1e6-1f1e9",a:"2.0"},{n:["flag-ae","united arab emirates flag"],u:"1f1e6-1f1ea",a:"2.0"},{n:["flag-af","afghanistan flag"],u:"1f1e6-1f1eb",a:"2.0"},{n:["flag-ag","antigua & barbuda flag"],u:"1f1e6-1f1ec",a:"2.0"},{n:["flag-ai","anguilla flag"],u:"1f1e6-1f1ee",a:"2.0"},{n:["flag-al","albania flag"],u:"1f1e6-1f1f1",a:"2.0"},{n:["flag-am","armenia flag"],u:"1f1e6-1f1f2",a:"2.0"},{n:["flag-ao","angola flag"],u:"1f1e6-1f1f4",a:"2.0"},{n:["flag-aq","antarctica flag"],u:"1f1e6-1f1f6",a:"2.0"},{n:["flag-ar","argentina flag"],u:"1f1e6-1f1f7",a:"2.0"},{n:["flag-as","american samoa flag"],u:"1f1e6-1f1f8",a:"2.0"},{n:["flag-at","austria flag"],u:"1f1e6-1f1f9",a:"2.0"},{n:["flag-au","australia flag"],u:"1f1e6-1f1fa",a:"2.0"},{n:["flag-aw","aruba flag"],u:"1f1e6-1f1fc",a:"2.0"},{n:["flag-ax","åland islands flag"],u:"1f1e6-1f1fd",a:"2.0"},{n:["flag-az","azerbaijan flag"],u:"1f1e6-1f1ff",a:"2.0"},{n:["flag-ba","bosnia & herzegovina flag"],u:"1f1e7-1f1e6",a:"2.0"},{n:["flag-bb","barbados flag"],u:"1f1e7-1f1e7",a:"2.0"},{n:["flag-bd","bangladesh flag"],u:"1f1e7-1f1e9",a:"2.0"},{n:["flag-be","belgium flag"],u:"1f1e7-1f1ea",a:"2.0"},{n:["flag-bf","burkina faso flag"],u:"1f1e7-1f1eb",a:"2.0"},{n:["flag-bg","bulgaria flag"],u:"1f1e7-1f1ec",a:"2.0"},{n:["flag-bh","bahrain flag"],u:"1f1e7-1f1ed",a:"2.0"},{n:["flag-bi","burundi flag"],u:"1f1e7-1f1ee",a:"2.0"},{n:["flag-bj","benin flag"],u:"1f1e7-1f1ef",a:"2.0"},{n:["flag-bl","st. barthélemy flag"],u:"1f1e7-1f1f1",a:"2.0"},{n:["flag-bm","bermuda flag"],u:"1f1e7-1f1f2",a:"2.0"},{n:["flag-bn","brunei flag"],u:"1f1e7-1f1f3",a:"2.0"},{n:["flag-bo","bolivia flag"],u:"1f1e7-1f1f4",a:"2.0"},{n:["flag-bq","caribbean netherlands flag"],u:"1f1e7-1f1f6",a:"2.0"},{n:["flag-br","brazil flag"],u:"1f1e7-1f1f7",a:"2.0"},{n:["flag-bs","bahamas flag"],u:"1f1e7-1f1f8",a:"2.0"},{n:["flag-bt","bhutan flag"],u:"1f1e7-1f1f9",a:"2.0"},{n:["flag-bv","bouvet island flag"],u:"1f1e7-1f1fb",a:"2.0"},{n:["flag-bw","botswana flag"],u:"1f1e7-1f1fc",a:"2.0"},{n:["flag-by","belarus flag"],u:"1f1e7-1f1fe",a:"2.0"},{n:["flag-bz","belize flag"],u:"1f1e7-1f1ff",a:"2.0"},{n:["flag-ca","canada flag"],u:"1f1e8-1f1e6",a:"2.0"},{n:["flag-cc","cocos (keeling) islands flag"],u:"1f1e8-1f1e8",a:"2.0"},{n:["flag-cd","congo - kinshasa flag"],u:"1f1e8-1f1e9",a:"2.0"},{n:["flag-cf","central african republic flag"],u:"1f1e8-1f1eb",a:"2.0"},{n:["flag-cg","congo - brazzaville flag"],u:"1f1e8-1f1ec",a:"2.0"},{n:["flag-ch","switzerland flag"],u:"1f1e8-1f1ed",a:"2.0"},{n:["flag-ci","côte d’ivoire flag"],u:"1f1e8-1f1ee",a:"2.0"},{n:["flag-ck","cook islands flag"],u:"1f1e8-1f1f0",a:"2.0"},{n:["flag-cl","chile flag"],u:"1f1e8-1f1f1",a:"2.0"},{n:["flag-cm","cameroon flag"],u:"1f1e8-1f1f2",a:"2.0"},{n:["cn","flag-cn","china flag"],u:"1f1e8-1f1f3",a:"0.6"},{n:["flag-co","colombia flag"],u:"1f1e8-1f1f4",a:"2.0"},{n:["flag-cp","clipperton island flag"],u:"1f1e8-1f1f5",a:"2.0"},{n:["flag-cr","costa rica flag"],u:"1f1e8-1f1f7",a:"2.0"},{n:["flag-cu","cuba flag"],u:"1f1e8-1f1fa",a:"2.0"},{n:["flag-cv","cape verde flag"],u:"1f1e8-1f1fb",a:"2.0"},{n:["flag-cw","curaçao flag"],u:"1f1e8-1f1fc",a:"2.0"},{n:["flag-cx","christmas island flag"],u:"1f1e8-1f1fd",a:"2.0"},{n:["flag-cy","cyprus flag"],u:"1f1e8-1f1fe",a:"2.0"},{n:["flag-cz","czechia flag"],u:"1f1e8-1f1ff",a:"2.0"},{n:["de","flag-de","germany flag"],u:"1f1e9-1f1ea",a:"0.6"},{n:["flag-dg","diego garcia flag"],u:"1f1e9-1f1ec",a:"2.0"},{n:["flag-dj","djibouti flag"],u:"1f1e9-1f1ef",a:"2.0"},{n:["flag-dk","denmark flag"],u:"1f1e9-1f1f0",a:"2.0"},{n:["flag-dm","dominica flag"],u:"1f1e9-1f1f2",a:"2.0"},{n:["flag-do","dominican republic flag"],u:"1f1e9-1f1f4",a:"2.0"},{n:["flag-dz","algeria flag"],u:"1f1e9-1f1ff",a:"2.0"},{n:["flag-ea","ceuta & melilla flag"],u:"1f1ea-1f1e6",a:"2.0"},{n:["flag-ec","ecuador flag"],u:"1f1ea-1f1e8",a:"2.0"},{n:["flag-ee","estonia flag"],u:"1f1ea-1f1ea",a:"2.0"},{n:["flag-eg","egypt flag"],u:"1f1ea-1f1ec",a:"2.0"},{n:["flag-eh","western sahara flag"],u:"1f1ea-1f1ed",a:"2.0"},{n:["flag-er","eritrea flag"],u:"1f1ea-1f1f7",a:"2.0"},{n:["es","flag-es","spain flag"],u:"1f1ea-1f1f8",a:"0.6"},{n:["flag-et","ethiopia flag"],u:"1f1ea-1f1f9",a:"2.0"},{n:["flag-eu","european union flag"],u:"1f1ea-1f1fa",a:"2.0"},{n:["flag-fi","finland flag"],u:"1f1eb-1f1ee",a:"2.0"},{n:["flag-fj","fiji flag"],u:"1f1eb-1f1ef",a:"2.0"},{n:["flag-fk","falkland islands flag"],u:"1f1eb-1f1f0",a:"2.0"},{n:["flag-fm","micronesia flag"],u:"1f1eb-1f1f2",a:"2.0"},{n:["flag-fo","faroe islands flag"],u:"1f1eb-1f1f4",a:"2.0"},{n:["fr","flag-fr","france flag"],u:"1f1eb-1f1f7",a:"0.6"},{n:["flag-ga","gabon flag"],u:"1f1ec-1f1e6",a:"2.0"},{n:["gb","uk","flag-gb","united kingdom flag"],u:"1f1ec-1f1e7",a:"0.6"},{n:["flag-gd","grenada flag"],u:"1f1ec-1f1e9",a:"2.0"},{n:["flag-ge","georgia flag"],u:"1f1ec-1f1ea",a:"2.0"},{n:["flag-gf","french guiana flag"],u:"1f1ec-1f1eb",a:"2.0"},{n:["flag-gg","guernsey flag"],u:"1f1ec-1f1ec",a:"2.0"},{n:["flag-gh","ghana flag"],u:"1f1ec-1f1ed",a:"2.0"},{n:["flag-gi","gibraltar flag"],u:"1f1ec-1f1ee",a:"2.0"},{n:["flag-gl","greenland flag"],u:"1f1ec-1f1f1",a:"2.0"},{n:["flag-gm","gambia flag"],u:"1f1ec-1f1f2",a:"2.0"},{n:["flag-gn","guinea flag"],u:"1f1ec-1f1f3",a:"2.0"},{n:["flag-gp","guadeloupe flag"],u:"1f1ec-1f1f5",a:"2.0"},{n:["flag-gq","equatorial guinea flag"],u:"1f1ec-1f1f6",a:"2.0"},{n:["flag-gr","greece flag"],u:"1f1ec-1f1f7",a:"2.0"},{n:["flag-gs","south georgia & south sandwich islands flag"],u:"1f1ec-1f1f8",a:"2.0"},{n:["flag-gt","guatemala flag"],u:"1f1ec-1f1f9",a:"2.0"},{n:["flag-gu","guam flag"],u:"1f1ec-1f1fa",a:"2.0"},{n:["flag-gw","guinea-bissau flag"],u:"1f1ec-1f1fc",a:"2.0"},{n:["flag-gy","guyana flag"],u:"1f1ec-1f1fe",a:"2.0"},{n:["flag-hk","hong kong sar china flag"],u:"1f1ed-1f1f0",a:"2.0"},{n:["flag-hm","heard & mcdonald islands flag"],u:"1f1ed-1f1f2",a:"2.0"},{n:["flag-hn","honduras flag"],u:"1f1ed-1f1f3",a:"2.0"},{n:["flag-hr","croatia flag"],u:"1f1ed-1f1f7",a:"2.0"},{n:["flag-ht","haiti flag"],u:"1f1ed-1f1f9",a:"2.0"},{n:["flag-hu","hungary flag"],u:"1f1ed-1f1fa",a:"2.0"},{n:["flag-ic","canary islands flag"],u:"1f1ee-1f1e8",a:"2.0"},{n:["flag-id","indonesia flag"],u:"1f1ee-1f1e9",a:"2.0"},{n:["flag-ie","ireland flag"],u:"1f1ee-1f1ea",a:"2.0"},{n:["flag-il","israel flag"],u:"1f1ee-1f1f1",a:"2.0"},{n:["flag-im","isle of man flag"],u:"1f1ee-1f1f2",a:"2.0"},{n:["flag-in","india flag"],u:"1f1ee-1f1f3",a:"2.0"},{n:["flag-io","british indian ocean territory flag"],u:"1f1ee-1f1f4",a:"2.0"},{n:["flag-iq","iraq flag"],u:"1f1ee-1f1f6",a:"2.0"},{n:["flag-ir","iran flag"],u:"1f1ee-1f1f7",a:"2.0"},{n:["flag-is","iceland flag"],u:"1f1ee-1f1f8",a:"2.0"},{n:["it","flag-it","italy flag"],u:"1f1ee-1f1f9",a:"0.6"},{n:["flag-je","jersey flag"],u:"1f1ef-1f1ea",a:"2.0"},{n:["flag-jm","jamaica flag"],u:"1f1ef-1f1f2",a:"2.0"},{n:["flag-jo","jordan flag"],u:"1f1ef-1f1f4",a:"2.0"},{n:["jp","flag-jp","japan flag"],u:"1f1ef-1f1f5",a:"0.6"},{n:["flag-ke","kenya flag"],u:"1f1f0-1f1ea",a:"2.0"},{n:["flag-kg","kyrgyzstan flag"],u:"1f1f0-1f1ec",a:"2.0"},{n:["flag-kh","cambodia flag"],u:"1f1f0-1f1ed",a:"2.0"},{n:["flag-ki","kiribati flag"],u:"1f1f0-1f1ee",a:"2.0"},{n:["flag-km","comoros flag"],u:"1f1f0-1f1f2",a:"2.0"},{n:["flag-kn","st. kitts & nevis flag"],u:"1f1f0-1f1f3",a:"2.0"},{n:["flag-kp","north korea flag"],u:"1f1f0-1f1f5",a:"2.0"},{n:["kr","flag-kr","south korea flag"],u:"1f1f0-1f1f7",a:"0.6"},{n:["flag-kw","kuwait flag"],u:"1f1f0-1f1fc",a:"2.0"},{n:["flag-ky","cayman islands flag"],u:"1f1f0-1f1fe",a:"2.0"},{n:["flag-kz","kazakhstan flag"],u:"1f1f0-1f1ff",a:"2.0"},{n:["flag-la","laos flag"],u:"1f1f1-1f1e6",a:"2.0"},{n:["flag-lb","lebanon flag"],u:"1f1f1-1f1e7",a:"2.0"},{n:["flag-lc","st. lucia flag"],u:"1f1f1-1f1e8",a:"2.0"},{n:["flag-li","liechtenstein flag"],u:"1f1f1-1f1ee",a:"2.0"},{n:["flag-lk","sri lanka flag"],u:"1f1f1-1f1f0",a:"2.0"},{n:["flag-lr","liberia flag"],u:"1f1f1-1f1f7",a:"2.0"},{n:["flag-ls","lesotho flag"],u:"1f1f1-1f1f8",a:"2.0"},{n:["flag-lt","lithuania flag"],u:"1f1f1-1f1f9",a:"2.0"},{n:["flag-lu","luxembourg flag"],u:"1f1f1-1f1fa",a:"2.0"},{n:["flag-lv","latvia flag"],u:"1f1f1-1f1fb",a:"2.0"},{n:["flag-ly","libya flag"],u:"1f1f1-1f1fe",a:"2.0"},{n:["flag-ma","morocco flag"],u:"1f1f2-1f1e6",a:"2.0"},{n:["flag-mc","monaco flag"],u:"1f1f2-1f1e8",a:"2.0"},{n:["flag-md","moldova flag"],u:"1f1f2-1f1e9",a:"2.0"},{n:["flag-me","montenegro flag"],u:"1f1f2-1f1ea",a:"2.0"},{n:["flag-mf","st. martin flag"],u:"1f1f2-1f1eb",a:"2.0"},{n:["flag-mg","madagascar flag"],u:"1f1f2-1f1ec",a:"2.0"},{n:["flag-mh","marshall islands flag"],u:"1f1f2-1f1ed",a:"2.0"},{n:["flag-mk","north macedonia flag"],u:"1f1f2-1f1f0",a:"2.0"},{n:["flag-ml","mali flag"],u:"1f1f2-1f1f1",a:"2.0"},{n:["flag-mm","myanmar (burma) flag"],u:"1f1f2-1f1f2",a:"2.0"},{n:["flag-mn","mongolia flag"],u:"1f1f2-1f1f3",a:"2.0"},{n:["flag-mo","macao sar china flag"],u:"1f1f2-1f1f4",a:"2.0"},{n:["flag-mp","northern mariana islands flag"],u:"1f1f2-1f1f5",a:"2.0"},{n:["flag-mq","martinique flag"],u:"1f1f2-1f1f6",a:"2.0"},{n:["flag-mr","mauritania flag"],u:"1f1f2-1f1f7",a:"2.0"},{n:["flag-ms","montserrat flag"],u:"1f1f2-1f1f8",a:"2.0"},{n:["flag-mt","malta flag"],u:"1f1f2-1f1f9",a:"2.0"},{n:["flag-mu","mauritius flag"],u:"1f1f2-1f1fa",a:"2.0"},{n:["flag-mv","maldives flag"],u:"1f1f2-1f1fb",a:"2.0"},{n:["flag-mw","malawi flag"],u:"1f1f2-1f1fc",a:"2.0"},{n:["flag-mx","mexico flag"],u:"1f1f2-1f1fd",a:"2.0"},{n:["flag-my","malaysia flag"],u:"1f1f2-1f1fe",a:"2.0"},{n:["flag-mz","mozambique flag"],u:"1f1f2-1f1ff",a:"2.0"},{n:["flag-na","namibia flag"],u:"1f1f3-1f1e6",a:"2.0"},{n:["flag-nc","new caledonia flag"],u:"1f1f3-1f1e8",a:"2.0"},{n:["flag-ne","niger flag"],u:"1f1f3-1f1ea",a:"2.0"},{n:["flag-nf","norfolk island flag"],u:"1f1f3-1f1eb",a:"2.0"},{n:["flag-ng","nigeria flag"],u:"1f1f3-1f1ec",a:"2.0"},{n:["flag-ni","nicaragua flag"],u:"1f1f3-1f1ee",a:"2.0"},{n:["flag-nl","netherlands flag"],u:"1f1f3-1f1f1",a:"2.0"},{n:["flag-no","norway flag"],u:"1f1f3-1f1f4",a:"2.0"},{n:["flag-np","nepal flag"],u:"1f1f3-1f1f5",a:"2.0"},{n:["flag-nr","nauru flag"],u:"1f1f3-1f1f7",a:"2.0"},{n:["flag-nu","niue flag"],u:"1f1f3-1f1fa",a:"2.0"},{n:["flag-nz","new zealand flag"],u:"1f1f3-1f1ff",a:"2.0"},{n:["flag-om","oman flag"],u:"1f1f4-1f1f2",a:"2.0"},{n:["flag-pa","panama flag"],u:"1f1f5-1f1e6",a:"2.0"},{n:["flag-pe","peru flag"],u:"1f1f5-1f1ea",a:"2.0"},{n:["flag-pf","french polynesia flag"],u:"1f1f5-1f1eb",a:"2.0"},{n:["flag-pg","papua new guinea flag"],u:"1f1f5-1f1ec",a:"2.0"},{n:["flag-ph","philippines flag"],u:"1f1f5-1f1ed",a:"2.0"},{n:["flag-pk","pakistan flag"],u:"1f1f5-1f1f0",a:"2.0"},{n:["flag-pl","poland flag"],u:"1f1f5-1f1f1",a:"2.0"},{n:["flag-pm","st. pierre & miquelon flag"],u:"1f1f5-1f1f2",a:"2.0"},{n:["flag-pn","pitcairn islands flag"],u:"1f1f5-1f1f3",a:"2.0"},{n:["flag-pr","puerto rico flag"],u:"1f1f5-1f1f7",a:"2.0"},{n:["flag-ps","palestinian territories flag"],u:"1f1f5-1f1f8",a:"2.0"},{n:["flag-pt","portugal flag"],u:"1f1f5-1f1f9",a:"2.0"},{n:["flag-pw","palau flag"],u:"1f1f5-1f1fc",a:"2.0"},{n:["flag-py","paraguay flag"],u:"1f1f5-1f1fe",a:"2.0"},{n:["flag-qa","qatar flag"],u:"1f1f6-1f1e6",a:"2.0"},{n:["flag-re","réunion flag"],u:"1f1f7-1f1ea",a:"2.0"},{n:["flag-ro","romania flag"],u:"1f1f7-1f1f4",a:"2.0"},{n:["flag-rs","serbia flag"],u:"1f1f7-1f1f8",a:"2.0"},{n:["ru","flag-ru","russia flag"],u:"1f1f7-1f1fa",a:"0.6"},{n:["flag-rw","rwanda flag"],u:"1f1f7-1f1fc",a:"2.0"},{n:["flag-sa","saudi arabia flag"],u:"1f1f8-1f1e6",a:"2.0"},{n:["flag-sb","solomon islands flag"],u:"1f1f8-1f1e7",a:"2.0"},{n:["flag-sc","seychelles flag"],u:"1f1f8-1f1e8",a:"2.0"},{n:["flag-sd","sudan flag"],u:"1f1f8-1f1e9",a:"2.0"},{n:["flag-se","sweden flag"],u:"1f1f8-1f1ea",a:"2.0"},{n:["flag-sg","singapore flag"],u:"1f1f8-1f1ec",a:"2.0"},{n:["flag-sh","st. helena flag"],u:"1f1f8-1f1ed",a:"2.0"},{n:["flag-si","slovenia flag"],u:"1f1f8-1f1ee",a:"2.0"},{n:["flag-sj","svalbard & jan mayen flag"],u:"1f1f8-1f1ef",a:"2.0"},{n:["flag-sk","slovakia flag"],u:"1f1f8-1f1f0",a:"2.0"},{n:["flag-sl","sierra leone flag"],u:"1f1f8-1f1f1",a:"2.0"},{n:["flag-sm","san marino flag"],u:"1f1f8-1f1f2",a:"2.0"},{n:["flag-sn","senegal flag"],u:"1f1f8-1f1f3",a:"2.0"},{n:["flag-so","somalia flag"],u:"1f1f8-1f1f4",a:"2.0"},{n:["flag-sr","suriname flag"],u:"1f1f8-1f1f7",a:"2.0"},{n:["flag-ss","south sudan flag"],u:"1f1f8-1f1f8",a:"2.0"},{n:["flag-st","são tomé & príncipe flag"],u:"1f1f8-1f1f9",a:"2.0"},{n:["flag-sv","el salvador flag"],u:"1f1f8-1f1fb",a:"2.0"},{n:["flag-sx","sint maarten flag"],u:"1f1f8-1f1fd",a:"2.0"},{n:["flag-sy","syria flag"],u:"1f1f8-1f1fe",a:"2.0"},{n:["flag-sz","eswatini flag"],u:"1f1f8-1f1ff",a:"2.0"},{n:["flag-ta","tristan da cunha flag"],u:"1f1f9-1f1e6",a:"2.0"},{n:["flag-tc","turks & caicos islands flag"],u:"1f1f9-1f1e8",a:"2.0"},{n:["flag-td","chad flag"],u:"1f1f9-1f1e9",a:"2.0"},{n:["flag-tf","french southern territories flag"],u:"1f1f9-1f1eb",a:"2.0"},{n:["flag-tg","togo flag"],u:"1f1f9-1f1ec",a:"2.0"},{n:["flag-th","thailand flag"],u:"1f1f9-1f1ed",a:"2.0"},{n:["flag-tj","tajikistan flag"],u:"1f1f9-1f1ef",a:"2.0"},{n:["flag-tk","tokelau flag"],u:"1f1f9-1f1f0",a:"2.0"},{n:["flag-tl","timor-leste flag"],u:"1f1f9-1f1f1",a:"2.0"},{n:["flag-tm","turkmenistan flag"],u:"1f1f9-1f1f2",a:"2.0"},{n:["flag-tn","tunisia flag"],u:"1f1f9-1f1f3",a:"2.0"},{n:["flag-to","tonga flag"],u:"1f1f9-1f1f4",a:"2.0"},{n:["flag-tr","türkiye flag"],u:"1f1f9-1f1f7",a:"2.0"},{n:["flag-tt","trinidad & tobago flag"],u:"1f1f9-1f1f9",a:"2.0"},{n:["flag-tv","tuvalu flag"],u:"1f1f9-1f1fb",a:"2.0"},{n:["flag-tw","taiwan flag"],u:"1f1f9-1f1fc",a:"2.0"},{n:["flag-tz","tanzania flag"],u:"1f1f9-1f1ff",a:"2.0"},{n:["flag-ua","ukraine flag"],u:"1f1fa-1f1e6",a:"2.0"},{n:["flag-ug","uganda flag"],u:"1f1fa-1f1ec",a:"2.0"},{n:["flag-um","u.s. outlying islands flag"],u:"1f1fa-1f1f2",a:"2.0"},{n:["flag-un","united nations flag"],u:"1f1fa-1f1f3",a:"4.0"},{n:["us","flag-us","united states flag"],u:"1f1fa-1f1f8",a:"0.6"},{n:["flag-uy","uruguay flag"],u:"1f1fa-1f1fe",a:"2.0"},{n:["flag-uz","uzbekistan flag"],u:"1f1fa-1f1ff",a:"2.0"},{n:["flag-va","vatican city flag"],u:"1f1fb-1f1e6",a:"2.0"},{n:["flag-vc","st. vincent & grenadines flag"],u:"1f1fb-1f1e8",a:"2.0"},{n:["flag-ve","venezuela flag"],u:"1f1fb-1f1ea",a:"2.0"},{n:["flag-vg","british virgin islands flag"],u:"1f1fb-1f1ec",a:"2.0"},{n:["flag-vi","u.s. virgin islands flag"],u:"1f1fb-1f1ee",a:"2.0"},{n:["flag-vn","vietnam flag"],u:"1f1fb-1f1f3",a:"2.0"},{n:["flag-vu","vanuatu flag"],u:"1f1fb-1f1fa",a:"2.0"},{n:["flag-wf","wallis & futuna flag"],u:"1f1fc-1f1eb",a:"2.0"},{n:["flag-ws","samoa flag"],u:"1f1fc-1f1f8",a:"2.0"},{n:["flag-xk","kosovo flag"],u:"1f1fd-1f1f0",a:"2.0"},{n:["flag-ye","yemen flag"],u:"1f1fe-1f1ea",a:"2.0"},{n:["flag-yt","mayotte flag"],u:"1f1fe-1f1f9",a:"2.0"},{n:["flag-za","south africa flag"],u:"1f1ff-1f1e6",a:"2.0"},{n:["flag-zm","zambia flag"],u:"1f1ff-1f1f2",a:"2.0"},{n:["flag-zw","zimbabwe flag"],u:"1f1ff-1f1fc",a:"2.0"},{n:["england flag","flag-england"],u:"1f3f4-e0067-e0062-e0065-e006e-e0067-e007f",a:"5.0"},{n:["scotland flag","flag-scotland"],u:"1f3f4-e0067-e0062-e0073-e0063-e0074-e007f",a:"5.0"},{n:["wales flag","flag-wales"],u:"1f3f4-e0067-e0062-e0077-e006c-e0073-e007f",a:"5.0"}]},skinToneVariations=[SkinTones.NEUTRAL,SkinTones.LIGHT,SkinTones.MEDIUM_LIGHT,SkinTones.MEDIUM,SkinTones.MEDIUM_DARK,SkinTones.DARK],skinTonesNamed=Object.entries(SkinTones).reduce(function(acc,_ref){var key=_ref[0];return acc[_ref[1]]=key,acc},{}),skinTonesMapped=skinToneVariations.reduce(function(mapped,skinTone){var _Object$assign;return Object.assign(mapped,((_Object$assign={})[skinTone]=skinTone,_Object$assign))},{});!function(EmojiProperties){EmojiProperties.name="n",EmojiProperties.unified="u",EmojiProperties.variations="v",EmojiProperties.added_in="a",EmojiProperties.imgUrl="imgUrl"}(EmojiProperties||(EmojiProperties={}));var alphaNumericEmojiIndex={};function indexEmoji(emoji){emojiNames(emoji).flat().join("").toLowerCase().replace(/[^a-zA-Z\d]/g,"").split("").forEach(function(_char){var _alphaNumericEmojiInd;alphaNumericEmojiIndex[_char]=null!=(_alphaNumericEmojiInd=alphaNumericEmojiIndex[_char])?_alphaNumericEmojiInd:{},alphaNumericEmojiIndex[_char][emojiUnified(emoji)]=emoji})}function emojiNames(emoji){var _emoji$EmojiPropertie;return null!=(_emoji$EmojiPropertie=emoji[EmojiProperties.name])?_emoji$EmojiPropertie:[]}function emojiName(emoji){return emoji?emojiNames(emoji)[0]:""}function unifiedWithoutSkinTone(unified){var splat=unified.split("-"),skinTone=splat.splice(1,1)[0];return skinTonesMapped[skinTone]?splat.join("-"):unified}function emojiUnified(emoji,skinTone){var _emojiVariationUnifie,unified=emoji[EmojiProperties.unified];return skinTone&&emojiHasVariations(emoji)&&null!=(_emojiVariationUnifie=function emojiVariationUnified(emoji,skinTone){return skinTone?emojiVariations(emoji).find(function(variation){return variation.includes(skinTone)}):emojiUnified(emoji)}(emoji,skinTone))?_emojiVariationUnifie:unified}function emojisByCategory(category){var _emojis$category;return null!=(_emojis$category=null==emojis?void 0:emojis[category])?_emojis$category:[]}function emojiUrlByUnified(unified,emojiStyle){return""+function cdnUrl(emojiStyle){switch(emojiStyle){case EmojiStyle.TWITTER:return"https://cdn.jsdelivr.net/npm/emoji-datasource-twitter/img/twitter/64/";case EmojiStyle.GOOGLE:return"https://cdn.jsdelivr.net/npm/emoji-datasource-google/img/google/64/";case EmojiStyle.FACEBOOK:return"https://cdn.jsdelivr.net/npm/emoji-datasource-facebook/img/facebook/64/";case EmojiStyle.APPLE:default:return"https://cdn.jsdelivr.net/npm/emoji-datasource-apple/img/apple/64/"}}(emojiStyle)+unified+".png"}function emojiVariations(emoji){var _emoji$EmojiPropertie2;return null!=(_emoji$EmojiPropertie2=emoji[EmojiProperties.variations])?_emoji$EmojiPropertie2:[]}function emojiHasVariations(emoji){return emojiVariations(emoji).length>0}function emojiByUnified(unified){if(unified){if(allEmojisByUnified[unified])return allEmojisByUnified[unified];var withoutSkinTone=unifiedWithoutSkinTone(unified);return allEmojisByUnified[withoutSkinTone]}}setTimeout(function(){allEmojis.reduce(function(searchIndex,emoji){return indexEmoji(emoji),searchIndex},alphaNumericEmojiIndex)});var allEmojis=Object.values(emojis).flat();function setCustomEmojis(customEmojis){emojis[Categories.CUSTOM].length=0,customEmojis.forEach(function(emoji){var emojiData=function customToRegularEmoji(emoji){var _ref;return(_ref={})[EmojiProperties.name]=emoji.names.map(function(name){return name.toLowerCase()}),_ref[EmojiProperties.unified]=emoji.id.toLowerCase(),_ref[EmojiProperties.added_in]="0",_ref[EmojiProperties.imgUrl]=emoji.imgUrl,_ref}(emoji);emojis[Categories.CUSTOM].push(emojiData),allEmojisByUnified[emojiData[EmojiProperties.unified]]||(allEmojis.push(emojiData),allEmojisByUnified[emojiData[EmojiProperties.unified]]=emojiData,indexEmoji(emojiData))})}var allEmojisByUnified={};setTimeout(function(){allEmojis.reduce(function(allEmojis,Emoji){return allEmojis[emojiUnified(Emoji)]=Emoji,emojiHasVariations(Emoji)&&emojiVariations(Emoji).forEach(function(variation){allEmojis[variation]=Emoji}),allEmojis},allEmojisByUnified)});var KNOWN_FAILING_EMOJIS=["2640-fe0f","2642-fe0f","2695-fe0f"],SEARCH_RESULTS_MULTIPLE_RESULTS_FOUND="%n results found. Use up and down arrow keys to navigate.";function mergeConfig(userConfig){var _userConfig$previewCo,_config$customEmojis;void 0===userConfig&&(userConfig={});var base=basePickerConfig(),previewConfig=Object.assign(base.previewConfig,null!=(_userConfig$previewCo=userConfig.previewConfig)?_userConfig$previewCo:{}),config=Object.assign(base,userConfig),categories=function mergeCategoriesConfig(userCategoriesConfig,modifiers){var _userCategoriesConfig;void 0===userCategoriesConfig&&(userCategoriesConfig=[]),void 0===modifiers&&(modifiers={});var extra={};modifiers.suggestionMode===SuggestionMode.RECENT&&(extra[Categories.SUGGESTED]=SuggestedRecent);var base=baseCategoriesConfig(extra);return null!=(_userCategoriesConfig=userCategoriesConfig)&&_userCategoriesConfig.length?userCategoriesConfig.map(function(category){return"string"==typeof category?getBaseConfigByCategory(category,extra[category]):_extends({},getBaseConfigByCategory(category.category,extra[category.category]),category)}):base}(userConfig.categories,{suggestionMode:config.suggestedEmojisMode});config.hiddenEmojis.forEach(function(emoji){config.unicodeToHide.add(emoji)}),setCustomEmojis(null!=(_config$customEmojis=config.customEmojis)?_config$customEmojis:[]);var skinTonePickerLocation=config.searchDisabled?SkinTonePickerLocation.PREVIEW:config.skinTonePickerLocation;return _extends({},config,{categories,previewConfig,skinTonePickerLocation})}function basePickerConfig(){return{autoFocusSearch:!0,categories:baseCategoriesConfig(),className:"",customEmojis:[],defaultSkinTone:SkinTones.NEUTRAL,emojiStyle:EmojiStyle.APPLE,emojiVersion:null,getEmojiUrl:emojiUrlByUnified,height:450,lazyLoadEmojis:!1,previewConfig:_extends({},basePreviewConfig),searchDisabled:!1,searchPlaceHolder:"Search",searchPlaceholder:"Search",skinTonePickerLocation:SkinTonePickerLocation.SEARCH,skinTonesDisabled:!1,style:{},suggestedEmojisMode:SuggestionMode.FREQUENT,theme:Theme.LIGHT,unicodeToHide:new Set(KNOWN_FAILING_EMOJIS),width:350,reactionsDefaultOpen:!1,reactions:DEFAULT_REACTIONS,open:!0,allowExpandReactions:!0,hiddenEmojis:[]}}var basePreviewConfig={defaultEmoji:"1f60a",defaultCaption:"What's your mood?",showPreview:!0},_excluded=["children"],ConfigContext=(0,react.createContext)(basePickerConfig());function PickerConfigProvider(_ref){var children=_ref.children,mergedConfig=function useSetConfig(config){var _config$customEmojis,_React$useState=(0,react.useState)(function(){return mergeConfig(config)}),mergedConfig=_React$useState[0],setMergedConfig=_React$useState[1];return(0,react.useEffect)(function(){compareConfig(mergedConfig,config)||setMergedConfig(mergeConfig(config))},[null==(_config$customEmojis=config.customEmojis)?void 0:_config$customEmojis.length,config.open,config.emojiVersion,config.reactionsDefaultOpen,config.searchPlaceHolder,config.searchPlaceholder,config.defaultSkinTone,config.skinTonesDisabled,config.autoFocusSearch,config.emojiStyle,config.theme,config.suggestedEmojisMode,config.lazyLoadEmojis,config.className,config.height,config.width,config.searchDisabled,config.skinTonePickerLocation,config.allowExpandReactions]),mergedConfig}(_objectWithoutPropertiesLoose(_ref,_excluded));return(0,react.createElement)(ConfigContext.Provider,{value:mergedConfig},children)}function usePickerConfig(){return(0,react.useContext)(ConfigContext)}function useDebouncedState(initialValue,delay){void 0===delay&&(delay=0);var _useState=(0,react.useState)(initialValue),state=_useState[0],setState=_useState[1],timer=(0,react.useRef)(null);return[state,function debouncedSetState(value){return new Promise(function(resolve){var _window;timer.current&&clearTimeout(timer.current),timer.current=null==(_window=window)?void 0:_window.setTimeout(function(){setState(value),resolve(value)},delay)})}]}function useIsUnicodeHidden(){var unicodeToHide=function useUnicodeToHide(){var unicodeToHide=usePickerConfig().unicodeToHide;return unicodeToHide}();return function(emojiUnified){return unicodeToHide.has(emojiUnified)}}function useDisallowedEmojis(){var DisallowedEmojisRef=(0,react.useRef)({}),emojiVersionConfig=function useEmojiVersionConfig(){return usePickerConfig().emojiVersion}();return(0,react.useMemo)(function(){var emojiVersion=parseFloat(""+emojiVersionConfig);return!emojiVersionConfig||Number.isNaN(emojiVersion)?DisallowedEmojisRef.current:allEmojis.reduce(function(disallowedEmojis,emoji){return function addedInNewerVersion(emoji,supportedLevel){return function addedIn(emoji){return parseFloat(emoji[EmojiProperties.added_in])}(emoji)>supportedLevel}(emoji,emojiVersion)&&(disallowedEmojis[emojiUnified(emoji)]=!0),disallowedEmojis},DisallowedEmojisRef.current)},[emojiVersionConfig])}function useIsEmojiDisallowed(){var disallowedEmojis=useDisallowedEmojis(),isUnicodeHidden=useIsUnicodeHidden();return function isEmojiDisallowed(emoji){var unified=unifiedWithoutSkinTone(emojiUnified(emoji));return Boolean(disallowedEmojis[unified]||isUnicodeHidden(unified))}}function PickerContextProvider(_ref){var children=_ref.children,disallowedEmojis=useDisallowedEmojis(),defaultSkinTone=function useDefaultSkinToneConfig(){var defaultSkinTone=usePickerConfig().defaultSkinTone;return defaultSkinTone}(),reactionsDefaultOpen=function useReactionsOpenConfig(){var reactionsDefaultOpen=usePickerConfig().reactionsDefaultOpen;return reactionsDefaultOpen}(),filterRef=(0,react.useRef)(alphaNumericEmojiIndex),disallowClickRef=(0,react.useRef)(!1),disallowMouseRef=(0,react.useRef)(!1),disallowedEmojisRef=(0,react.useRef)(disallowedEmojis),suggestedUpdateState=useDebouncedState(Date.now(),200),searchTerm=useDebouncedState("",100),skinToneFanOpenState=(0,react.useState)(!1),activeSkinTone=(0,react.useState)(defaultSkinTone),activeCategoryState=(0,react.useState)(null),emojisThatFailedToLoadState=(0,react.useState)(new Set),emojiVariationPickerState=(0,react.useState)(null),reactionsModeState=(0,react.useState)(reactionsDefaultOpen),_useState=(0,react.useState)(!1),isPastInitialLoad=_useState[0];return function useMarkInitialLoad(dispatch){(0,react.useEffect)(function(){dispatch(!0)},[dispatch])}(_useState[1]),(0,react.createElement)(PickerContext.Provider,{value:{activeCategoryState,activeSkinTone,disallowClickRef,disallowMouseRef,disallowedEmojisRef,emojiVariationPickerState,emojisThatFailedToLoadState,filterRef,isPastInitialLoad,searchTerm,skinToneFanOpenState,suggestedUpdateState,reactionsModeState}},children)}var PickerContext=(0,react.createContext)({activeCategoryState:[null,function(){}],activeSkinTone:[SkinTones.NEUTRAL,function(){}],disallowClickRef:{current:!1},disallowMouseRef:{current:!1},disallowedEmojisRef:{current:{}},emojiVariationPickerState:[null,function(){}],emojisThatFailedToLoadState:[new Set,function(){}],filterRef:{current:{}},isPastInitialLoad:!0,searchTerm:["",function(){return new Promise(function(){})}],skinToneFanOpenState:[!1,function(){}],suggestedUpdateState:[Date.now(),function(){}],reactionsModeState:[!1,function(){}]});function useFilterRef(){return(0,react.useContext)(PickerContext).filterRef}function useDisallowMouseRef(){return(0,react.useContext)(PickerContext).disallowMouseRef}function useReactionsModeState(){return(0,react.useContext)(PickerContext).reactionsModeState}function useSearchTermState(){return(0,react.useContext)(PickerContext).searchTerm}function useActiveSkinToneState(){return(0,react.useContext)(PickerContext).activeSkinTone}function useEmojisThatFailedToLoadState(){return(0,react.useContext)(PickerContext).emojisThatFailedToLoadState}function useEmojiVariationPickerState(){return(0,react.useContext)(PickerContext).emojiVariationPickerState}function useSkinToneFanOpenState(){return(0,react.useContext)(PickerContext).skinToneFanOpenState}function useUpdateSuggested(){var suggestedUpdateState=(0,react.useContext)(PickerContext).suggestedUpdateState,suggestedUpdated=suggestedUpdateState[0],setsuggestedUpdate=suggestedUpdateState[1];return[suggestedUpdated,function updateSuggested(){setsuggestedUpdate(Date.now())}]}var MOUSE_EVENT_SOURCE,MutableConfigContext=react.createContext({});function useMutableConfig(){return react.useContext(MutableConfigContext)}function emptyFunc(){}function useAllowExpandReactions(){return usePickerConfig().allowExpandReactions}function useSkinTonesDisabledConfig(){return usePickerConfig().skinTonesDisabled}function useEmojiStyleConfig(){return usePickerConfig().emojiStyle}function useCategoriesConfig(){return usePickerConfig().categories}function usePreviewConfig(){return usePickerConfig().previewConfig}function useSearchDisabledConfig(){return usePickerConfig().searchDisabled}function useSkinTonePickerLocationConfig(){return usePickerConfig().skinTonePickerLocation}function useGetEmojiUrlConfig(){return usePickerConfig().getEmojiUrl}function getDimension(dimensionConfig){return"number"==typeof dimensionConfig?dimensionConfig+"px":dimensionConfig}function useIsSearchMode(){return!!useSearchTermState()[0]}function focusElement(element){element&&requestAnimationFrame(function(){element.focus()})}function focusPrevElementSibling(element){element&&focusElement(element.previousElementSibling)}function focusNextElementSibling(element){element&&focusElement(element.nextElementSibling)}function focusFirstElementChild(element){element&&focusElement(element.firstElementChild)}function getActiveElement(){return document.activeElement}function ElementRefContextProvider(_ref){var children=_ref.children,PickerMainRef=(0,react.useRef)(null),AnchoredEmojiRef=(0,react.useRef)(null),BodyRef=(0,react.useRef)(null),SearchInputRef=(0,react.useRef)(null),SkinTonePickerRef=(0,react.useRef)(null),CategoryNavigationRef=(0,react.useRef)(null),VariationPickerRef=(0,react.useRef)(null),ReactionsRef=(0,react.useRef)(null);return(0,react.createElement)(ElementRefContext.Provider,{value:{AnchoredEmojiRef,BodyRef,CategoryNavigationRef,PickerMainRef,SearchInputRef,SkinTonePickerRef,VariationPickerRef,ReactionsRef}},children)}!function(MOUSE_EVENT_SOURCE){MOUSE_EVENT_SOURCE.REACTIONS="reactions",MOUSE_EVENT_SOURCE.PICKER="picker"}(MOUSE_EVENT_SOURCE||(MOUSE_EVENT_SOURCE={}));var ElementRefContext=(0,react.createContext)({AnchoredEmojiRef:(0,react.createRef)(),BodyRef:(0,react.createRef)(),CategoryNavigationRef:(0,react.createRef)(),PickerMainRef:(0,react.createRef)(),SearchInputRef:(0,react.createRef)(),SkinTonePickerRef:(0,react.createRef)(),VariationPickerRef:(0,react.createRef)(),ReactionsRef:(0,react.createRef)()});function useElementRef(){return(0,react.useContext)(ElementRefContext)}function usePickerMainRef(){return useElementRef().PickerMainRef}function useAnchoredEmojiRef(){return useElementRef().AnchoredEmojiRef}function useSetAnchoredEmojiRef(){var AnchoredEmojiRef=useAnchoredEmojiRef();return function(target){null===target&&null!==AnchoredEmojiRef.current&&focusElement(AnchoredEmojiRef.current),AnchoredEmojiRef.current=target}}function useBodyRef(){return useElementRef().BodyRef}function useSearchInputRef(){return useElementRef().SearchInputRef}function useSkinTonePickerRef(){return useElementRef().SkinTonePickerRef}function useCategoryNavigationRef(){return useElementRef().CategoryNavigationRef}function scrollTo(root,top){void 0===top&&(top=0);var $eprBody=queryScrollBody(root);$eprBody&&requestAnimationFrame(function(){$eprBody.scrollTop=top})}function scrollEmojiAboveLabel(emoji){if(emoji&&function isEmojiBehindLabel(emoji){if(!emoji)return!1;return emojiDistanceFromScrollTop(emoji)<categoryLabelHeight(closestCategory(emoji))}(emoji)&&!emoji.closest(asSelectors(ClassNames.variationPicker))){var scrollBody=closestScrollBody(emoji),by=emojiDistanceFromScrollTop(emoji);!function scrollBy(root,by){var $eprBody=queryScrollBody(root);$eprBody&&requestAnimationFrame(function(){$eprBody.scrollTop=$eprBody.scrollTop+by})}(scrollBody,-(categoryLabelHeight(closestCategory(emoji))-by))}}function focusFirstVisibleEmoji(parent){var emoji=firstVisibleEmoji(parent);focusElement(emoji),scrollEmojiAboveLabel(emoji)}function focusNextVisibleEmoji(element){if(element){var next=nextVisibleEmoji(element);if(!next)return focusFirstVisibleEmoji(nextCategory(element));focusElement(next),scrollEmojiAboveLabel(next)}}function focusPrevVisibleEmoji(element){if(element){var prev=prevVisibleEmoji(element);if(!prev)return function focusLastVisibleEmoji(parent){focusElement(lastVisibleEmoji(parent))}(prevCategory(element));focusElement(prev),scrollEmojiAboveLabel(prev)}}function focusVisibleEmojiOneRowUp(element,exitUp){if(element){var prev=function visibleEmojiOneRowUp(element){if(!element)return null;var categoryContent=closestCategoryContent(element),category=closestCategory(categoryContent),indexInRow=elementIndexInRow(categoryContent,element),row=rowNumber(categoryContent,element),countInRow=elementCountInRow(categoryContent,element);if(0===row){var prevVisibleCategory=prevCategory(category);return prevVisibleCategory?getElementInRow(allVisibleEmojis(prevVisibleCategory),-1,countInRow,indexInRow):null}return function getElementInPrevRow(allElements,currentRow,elementsInRow,index){var prevRowElements=getRowElements(allElements,currentRow-1,elementsInRow);return prevRowElements[index]||prevRowElements[prevRowElements.length-1]||null}(allVisibleEmojis(categoryContent),row,countInRow,indexInRow)}(element);if(!prev)return exitUp();focusElement(prev),scrollEmojiAboveLabel(prev)}}function focusVisibleEmojiOneRowDown(element){if(element){var next=function visibleEmojiOneRowDown(element){if(!element)return null;var categoryContent=closestCategoryContent(element),category=closestCategory(categoryContent),indexInRow=elementIndexInRow(categoryContent,element),row=rowNumber(categoryContent,element),countInRow=elementCountInRow(categoryContent,element);if(!function hasNextRow(parent,element){if(!parent||!element)return!1;var elementHeight=element.getBoundingClientRect().height,elementTop=element.getBoundingClientRect().top,parentTop=parent.getBoundingClientRect().top,parentHeight=parent.getBoundingClientRect().height;return Math.round(elementTop-parentTop+elementHeight)<parentHeight}(categoryContent,element)){var nextVisibleCategory=nextCategory(category);return nextVisibleCategory?getElementInRow(allVisibleEmojis(nextVisibleCategory),0,countInRow,indexInRow):null}return function getElementInNextRow(allElements,currentRow,elementsInRow,index){var nextRowElements=function getNextRowElements(allElements,currentRow,elementsInRow){var nextRow=currentRow+1;if(nextRow*elementsInRow>allElements.length)return[];return getRowElements(allElements,nextRow,elementsInRow)}(allElements,currentRow,elementsInRow);return nextRowElements[index]||nextRowElements[nextRowElements.length-1]||null}(allVisibleEmojis(categoryContent),row,countInRow,indexInRow)}(element);return focusElement(next)}}function useCloseAllOpenToggles(){var _useEmojiVariationPic=useEmojiVariationPickerState(),variationPicker=_useEmojiVariationPic[0],setVariationPicker=_useEmojiVariationPic[1],_useSkinToneFanOpenSt=useSkinToneFanOpenState(),skinToneFanOpen=_useSkinToneFanOpenSt[0],setSkinToneFanOpen=_useSkinToneFanOpenSt[1];return(0,react.useCallback)(function(){variationPicker&&setVariationPicker(null),skinToneFanOpen&&setSkinToneFanOpen(!1)},[variationPicker,skinToneFanOpen,setVariationPicker,setSkinToneFanOpen])}function useHasOpenToggles(){var variationPicker=useEmojiVariationPickerState()[0],skinToneFanOpen=useSkinToneFanOpenState()[0];return function hasOpenToggles(){return!!variationPicker||skinToneFanOpen}}function useAllowMouseMove(){var DisallowMouseRef=useDisallowMouseRef();return function allowMouseMove(){DisallowMouseRef.current=!1}}function useIsMouseDisallowed(){var DisallowMouseRef=useDisallowMouseRef();return function isMouseDisallowed(){return DisallowMouseRef.current}}function doesBrowserSupportCssHas(){if("undefined"==typeof window||void 0===window.CSS)return!1;try{return CSS.supports("selector(:has(*))")}catch(e){return!1}}var KeyboardEvents,browserSupportsCssHas=doesBrowserSupportCssHas();function useFocusSearchInput(){var SearchInputRef=useSearchInputRef();return(0,react.useCallback)(function(){focusElement(SearchInputRef.current)},[SearchInputRef])}function useFocusCategoryNavigation(){var CategoryNavigationRef=useCategoryNavigationRef();return(0,react.useCallback)(function(){CategoryNavigationRef.current&&focusFirstElementChild(CategoryNavigationRef.current)},[CategoryNavigationRef])}function useClearSearch(){var applySearch=useApplySearch(),SearchInputRef=useSearchInputRef(),focusSearchInput=useFocusSearchInput();return function clearSearch(){SearchInputRef.current&&(SearchInputRef.current.value=""),applySearch(""),focusSearchInput()}}function useFilter(){var SearchInputRef=useSearchInputRef(),filterRef=useFilterRef(),setFilterRef=function useSetFilterRef(){var filterRef=useFilterRef();return function setFilter(setter){if("function"==typeof setter)return setFilter(setter(filterRef.current));filterRef.current=setter}}(),applySearch=useApplySearch(),searchTerm=useSearchTermState()[0],statusSearchResults=function getStatusSearchResults(filterState,searchTerm){var _Object$entries;if(null==filterState||!filterState[searchTerm])return"";var searchResultsCount=(null==(_Object$entries=Object.entries(null==filterState?void 0:filterState[searchTerm]))?void 0:_Object$entries.length)||0;return function useSearchResultsConfig(searchResultsCount){return searchResultsCount>0?searchResultsCount>1?SEARCH_RESULTS_MULTIPLE_RESULTS_FOUND.replace("%n",searchResultsCount.toString()):"1 result found. Use up and down arrow keys to navigate.":"No results found"}(searchResultsCount)}(filterRef.current,searchTerm);return{onChange:function onChange(inputValue){if(browserSupportsCssHas)return;setTimeout(function(){var filter=filterRef.current,nextValue=inputValue.toLowerCase();if(null!=filter&&filter[nextValue]||nextValue.length<=1)return applySearch(nextValue);var longestMatch=function findLongestMatch(keyword,dict){if(!dict)return null;if(dict[keyword])return dict[keyword];var longestMatchingKey=Object.keys(dict).sort(function(a,b){return b.length-a.length}).find(function(key){return keyword.includes(key)});if(longestMatchingKey)return dict[longestMatchingKey];return null}(nextValue,filter);if(!longestMatch)return applySearch(nextValue);setFilterRef(function(current){var _Object$assign;return Object.assign(current,((_Object$assign={})[nextValue]=function filterEmojiObjectByKeyword(emojis,keyword){var filtered={};for(var unified in emojis){var emoji=emojis[unified];hasMatch(emoji,keyword)&&(filtered[unified]=emoji)}return filtered}(longestMatch,nextValue),_Object$assign))}),applySearch(nextValue)})},searchTerm,SearchInputRef,statusSearchResults}}function useApplySearch(){var setSearchTerm=useSearchTermState()[1],PickerMainRef=usePickerMainRef();return function applySearch(searchTerm){requestAnimationFrame(function(){setSearchTerm(searchTerm?null==searchTerm?void 0:searchTerm.toLowerCase():searchTerm).then(function(){scrollTo(PickerMainRef.current,0)})})}}function hasMatch(emoji,keyword){return emojiNames(emoji).some(function(name){return name.includes(keyword)})}function getNormalizedSearchTerm(str){return str&&"string"==typeof str?str.trim().toLowerCase():""}function useSetVariationPicker(){var setAnchoredEmojiRef=useSetAnchoredEmojiRef(),setEmojiVariationPicker=useEmojiVariationPickerState()[1];return function setVariationPicker(element){var emoji=emojiFromElement(element)[0];emoji&&(setAnchoredEmojiRef(element),setEmojiVariationPicker(emoji))}}function useIsSkinToneInSearch(){return useSkinTonePickerLocationConfig()===SkinTonePickerLocation.SEARCH}function useIsSkinToneInPreview(){return useSkinTonePickerLocationConfig()===SkinTonePickerLocation.PREVIEW}function useKeyboardNavigation(){!function usePickerMainKeyboardEvents(){var PickerMainRef=usePickerMainRef(),clearSearch=useClearSearch(),scrollTo=function useScrollTo(){var BodyRef=useBodyRef();return(0,react.useCallback)(function(top){requestAnimationFrame(function(){BodyRef.current&&(BodyRef.current.scrollTop=top)})},[BodyRef])}(),SearchInputRef=useSearchInputRef(),focusSearchInput=useFocusSearchInput(),hasOpenToggles=useHasOpenToggles(),disallowMouseMove=function useDisallowMouseMove(){var DisallowMouseRef=useDisallowMouseRef();return function disallowMouseMove(){DisallowMouseRef.current=!0}}(),closeAllOpenToggles=useCloseAllOpenToggles(),onKeyDown=(0,react.useMemo)(function(){return function onKeyDown(event){var key=event.key;if(disallowMouseMove(),key===KeyboardEvents.Escape){if(event.preventDefault(),hasOpenToggles())return void closeAllOpenToggles();clearSearch(),scrollTo(0),focusSearchInput()}}},[scrollTo,clearSearch,closeAllOpenToggles,focusSearchInput,hasOpenToggles,disallowMouseMove]);(0,react.useEffect)(function(){var current=PickerMainRef.current;if(current)return current.addEventListener("keydown",onKeyDown),function(){current.removeEventListener("keydown",onKeyDown)}},[PickerMainRef,SearchInputRef,scrollTo,onKeyDown])}(),function useSearchInputKeyboardEvents(){var focusSkinTonePicker=function useFocusSkinTonePicker(){var SkinTonePickerRef=useSkinTonePickerRef();return(0,react.useCallback)(function(){SkinTonePickerRef.current&&focusFirstElementChild(SkinTonePickerRef.current)},[SkinTonePickerRef])}(),PickerMainRef=usePickerMainRef(),BodyRef=useBodyRef(),SearchInputRef=useSearchInputRef(),setSkinToneFanOpenState=useSkinToneFanOpenState()[1],goDownFromSearchInput=useGoDownFromSearchInput(),isSkinToneInSearch=useIsSkinToneInSearch(),onKeyDown=(0,react.useMemo)(function(){return function onKeyDown(event){switch(event.key){case KeyboardEvents.ArrowRight:if(!isSkinToneInSearch)return;event.preventDefault(),setSkinToneFanOpenState(!0),focusSkinTonePicker();break;case KeyboardEvents.ArrowDown:event.preventDefault(),goDownFromSearchInput();break;case KeyboardEvents.Enter:event.preventDefault(),function focusAndClickFirstVisibleEmoji(parent){var firstEmoji=firstVisibleEmoji(parent);focusElement(firstEmoji),null==firstEmoji||firstEmoji.click()}(BodyRef.current)}}},[focusSkinTonePicker,goDownFromSearchInput,setSkinToneFanOpenState,BodyRef,isSkinToneInSearch]);(0,react.useEffect)(function(){var current=SearchInputRef.current;if(current)return current.addEventListener("keydown",onKeyDown),function(){current.removeEventListener("keydown",onKeyDown)}},[PickerMainRef,SearchInputRef,onKeyDown])}(),function useSkinTonePickerKeyboardEvents(){var SkinTonePickerRef=useSkinTonePickerRef(),focusSearchInput=useFocusSearchInput(),SearchInputRef=useSearchInputRef(),goDownFromSearchInput=useGoDownFromSearchInput(),_useSkinToneFanOpenSt2=useSkinToneFanOpenState(),isOpen=_useSkinToneFanOpenSt2[0],setIsOpen=_useSkinToneFanOpenSt2[1],isSkinToneInPreview=useIsSkinToneInPreview(),isSkinToneInSearch=useIsSkinToneInSearch(),onType=useOnType(),onKeyDown=(0,react.useMemo)(function(){return function onKeyDown(event){var key=event.key;if(isSkinToneInSearch)switch(key){case KeyboardEvents.ArrowLeft:if(event.preventDefault(),!isOpen)return focusSearchInput();focusNextSkinTone(focusSearchInput);break;case KeyboardEvents.ArrowRight:if(event.preventDefault(),!isOpen)return focusSearchInput();focusPrevSkinTone();break;case KeyboardEvents.ArrowDown:event.preventDefault(),isOpen&&setIsOpen(!1),goDownFromSearchInput();break;default:onType(event)}if(isSkinToneInPreview)switch(key){case KeyboardEvents.ArrowUp:if(event.preventDefault(),!isOpen)return focusSearchInput();focusNextSkinTone(focusSearchInput);break;case KeyboardEvents.ArrowDown:if(event.preventDefault(),!isOpen)return focusSearchInput();focusPrevSkinTone();break;default:onType(event)}}},[isOpen,focusSearchInput,setIsOpen,goDownFromSearchInput,onType,isSkinToneInPreview,isSkinToneInSearch]);(0,react.useEffect)(function(){var current=SkinTonePickerRef.current;if(current)return current.addEventListener("keydown",onKeyDown),function(){current.removeEventListener("keydown",onKeyDown)}},[SkinTonePickerRef,SearchInputRef,isOpen,onKeyDown])}(),function useCategoryNavigationKeyboardEvents(){var focusSearchInput=useFocusSearchInput(),CategoryNavigationRef=useCategoryNavigationRef(),BodyRef=useBodyRef(),onType=useOnType(),onKeyDown=(0,react.useMemo)(function(){return function onKeyDown(event){switch(event.key){case KeyboardEvents.ArrowUp:event.preventDefault(),focusSearchInput();break;case KeyboardEvents.ArrowRight:event.preventDefault(),focusNextElementSibling(getActiveElement());break;case KeyboardEvents.ArrowLeft:event.preventDefault(),focusPrevElementSibling(getActiveElement());break;case KeyboardEvents.ArrowDown:event.preventDefault(),focusFirstVisibleEmoji(BodyRef.current);break;default:onType(event)}}},[BodyRef,focusSearchInput,onType]);(0,react.useEffect)(function(){var current=CategoryNavigationRef.current;if(current)return current.addEventListener("keydown",onKeyDown),function(){current.removeEventListener("keydown",onKeyDown)}},[CategoryNavigationRef,BodyRef,onKeyDown])}(),function useBodyKeyboardEvents(){var BodyRef=useBodyRef(),goUpFromBody=function useGoUpFromBody(){var focusSearchInput=useFocusSearchInput(),focusCategoryNavigation=useFocusCategoryNavigation(),isSearchMode=useIsSearchMode();return(0,react.useCallback)(function goUpFromEmoji(){return isSearchMode?focusSearchInput():focusCategoryNavigation()},[focusSearchInput,isSearchMode,focusCategoryNavigation])}(),setVariationPicker=useSetVariationPicker(),hasOpenToggles=useHasOpenToggles(),closeAllOpenToggles=useCloseAllOpenToggles(),onType=useOnType(),onKeyDown=(0,react.useMemo)(function(){return function onKeyDown(event){var key=event.key,activeElement=buttonFromTarget(getActiveElement());switch(key){case KeyboardEvents.ArrowRight:event.preventDefault(),focusNextVisibleEmoji(activeElement);break;case KeyboardEvents.ArrowLeft:event.preventDefault(),focusPrevVisibleEmoji(activeElement);break;case KeyboardEvents.ArrowDown:if(event.preventDefault(),hasOpenToggles()){closeAllOpenToggles();break}focusVisibleEmojiOneRowDown(activeElement);break;case KeyboardEvents.ArrowUp:if(event.preventDefault(),hasOpenToggles()){closeAllOpenToggles();break}focusVisibleEmojiOneRowUp(activeElement,goUpFromBody);break;case KeyboardEvents.Space:event.preventDefault(),setVariationPicker(event.target);break;default:onType(event)}}},[goUpFromBody,onType,setVariationPicker,hasOpenToggles,closeAllOpenToggles]);(0,react.useEffect)(function(){var current=BodyRef.current;if(current)return current.addEventListener("keydown",onKeyDown),function(){current.removeEventListener("keydown",onKeyDown)}},[BodyRef,onKeyDown])}()}function useGoDownFromSearchInput(){var focusCategoryNavigation=useFocusCategoryNavigation(),isSearchMode=useIsSearchMode(),BodyRef=useBodyRef();return(0,react.useCallback)(function goDownFromSearchInput(){return isSearchMode?focusFirstVisibleEmoji(BodyRef.current):focusCategoryNavigation()},[BodyRef,focusCategoryNavigation,isSearchMode])}function focusNextSkinTone(exitLeft){var currentSkinTone=getActiveElement();currentSkinTone&&(function hasNextElementSibling(element){return!!element.nextElementSibling}(currentSkinTone)||exitLeft(),focusNextElementSibling(currentSkinTone))}function focusPrevSkinTone(){var currentSkinTone=getActiveElement();currentSkinTone&&focusPrevElementSibling(currentSkinTone)}function useOnType(){var appendSearch=function useAppendSearch(){var SearchInputRef=useSearchInputRef(),applySearch=useApplySearch();return function appendSearch(str){SearchInputRef.current?(SearchInputRef.current.value=""+SearchInputRef.current.value+str,applySearch(getNormalizedSearchTerm(SearchInputRef.current.value))):applySearch(getNormalizedSearchTerm(str))}}(),focusSearchInput=useFocusSearchInput(),searchDisabled=useSearchDisabledConfig(),closeAllOpenToggles=useCloseAllOpenToggles();return function onType(event){var key=event.key;(function hasModifier(event){var metaKey=event.metaKey,ctrlKey=event.ctrlKey,altKey=event.altKey;return metaKey||ctrlKey||altKey})(event)||searchDisabled||key.match(/(^[a-zA-Z0-9]$){1}/)&&(event.preventDefault(),closeAllOpenToggles(),focusSearchInput(),appendSearch(key))}}function preloadEmoji(getEmojiUrl,emoji,emojiStyle){if(emoji&&emojiStyle!==EmojiStyle.NATIVE){var unified=emojiUnified(emoji);preloadedEmojs.has(unified)||(emojiVariations(emoji).forEach(function(variation){!function preloadImage(url){(new Image).src=url}(getEmojiUrl(variation,emojiStyle))}),preloadedEmojs.add(unified))}}!function(KeyboardEvents){KeyboardEvents.ArrowDown="ArrowDown",KeyboardEvents.ArrowUp="ArrowUp",KeyboardEvents.ArrowLeft="ArrowLeft",KeyboardEvents.ArrowRight="ArrowRight",KeyboardEvents.Escape="Escape",KeyboardEvents.Enter="Enter",KeyboardEvents.Space=" "}(KeyboardEvents||(KeyboardEvents={}));var preloadedEmojs=new Set;var _excluded$1=["width","height"],DEFAULT_LABEL_HEIGHT=40;function PickerMain(_ref){var children=_ref.children;return(0,react.createElement)(PickerContextProvider,null,(0,react.createElement)(PickerRootElement,null,children))}function PickerRootElement(_ref2){var _cx,children=_ref2.children,reactionsMode=useReactionsModeState()[0],theme=function useThemeConfig(){return usePickerConfig().theme}(),searchModeActive=useIsSearchMode(),PickerMainRef=usePickerMainRef(),className=function useClassNameConfig(){return usePickerConfig().className}(),style=function useStyleConfig(){var _usePickerConfig15=usePickerConfig(),height=_usePickerConfig15.height,width=_usePickerConfig15.width,style=_usePickerConfig15.style;return _extends({height:getDimension(height),width:getDimension(width)},style)}();useKeyboardNavigation(),function useOnFocus(){var BodyRef=useBodyRef(),emojiStyle=useEmojiStyleConfig(),getEmojiUrl=useGetEmojiUrlConfig();(0,react.useEffect)(function(){if(emojiStyle!==EmojiStyle.NATIVE){var bodyRef=BodyRef.current;return null==bodyRef||bodyRef.addEventListener("focusin",onFocus),function(){null==bodyRef||bodyRef.removeEventListener("focusin",onFocus)}}function onFocus(event){var button=buttonFromTarget(event.target);if(button){var emoji=emojiFromElement(button)[0];emoji&&emojiHasVariations(emoji)&&preloadEmoji(getEmojiUrl,emoji,emojiStyle)}}},[BodyRef,emojiStyle,getEmojiUrl])}();var _ref3=style||{},width=_ref3.width,height=_ref3.height,styleProps=_objectWithoutPropertiesLoose(_ref3,_excluded$1);return(0,react.createElement)("aside",{className:cx(styles.main,styles.baseVariables,theme===Theme.DARK&&styles.darkTheme,theme===Theme.AUTO&&styles.autoThemeDark,(_cx={},_cx[ClassNames.searchActive]=searchModeActive,_cx),reactionsMode&&styles.reactionsMenu,className),ref:PickerMainRef,style:_extends({},styleProps,!reactionsMode&&{height,width})},children)}var DarkTheme={"--epr-emoji-variation-picker-bg-color":"var(--epr-dark-emoji-variation-picker-bg-color)","--epr-hover-bg-color-reduced-opacity":"var(--epr-dark-hover-bg-color-reduced-opacity)","--epr-highlight-color":"var(--epr-dark-highlight-color)","--epr-text-color":"var(--epr-dark-text-color)","--epr-hover-bg-color":"var(--epr-dark-hover-bg-color)","--epr-focus-bg-color":"var(--epr-dark-focus-bg-color)","--epr-search-input-bg-color":"var(--epr-dark-search-input-bg-color)","--epr-category-label-bg-color":"var(--epr-dark-category-label-bg-color)","--epr-picker-border-color":"var(--epr-dark-picker-border-color)","--epr-bg-color":"var(--epr-dark-bg-color)","--epr-reactions-bg-color":"var(--epr-dark-reactions-bg-color)","--epr-search-input-bg-color-active":"var(--epr-dark-search-input-bg-color-active)","--epr-emoji-variation-indicator-color":"var(--epr-dark-emoji-variation-indicator-color)","--epr-category-icon-active-color":"var(--epr-dark-category-icon-active-color)","--epr-skin-tone-picker-menu-color":"var(--epr-dark-skin-tone-picker-menu-color)","--epr-skin-tone-outer-border-color":"var(--epr-dark-skin-tone-outer-border-color)","--epr-skin-tone-inner-border-color":"var(--epr-dark-skin-tone-inner-border-color)"},styles=stylesheet.create({main:{".":["epr-main",ClassNames.emojiPicker],position:"relative",display:"flex",flexDirection:"column",borderWidth:"1px",borderStyle:"solid",borderRadius:"var(--epr-picker-border-radius)",borderColor:"var(--epr-picker-border-color)",backgroundColor:"var(--epr-bg-color)",overflow:"hidden",transition:"all 0.3s ease-in-out, background-color 0.1s ease-in-out","*":{boxSizing:"border-box",fontFamily:"sans-serif"}},baseVariables:{"--":{"--epr-highlight-color":"#007aeb","--epr-hover-bg-color":"#e5f0fa","--epr-hover-bg-color-reduced-opacity":"#e5f0fa80","--epr-focus-bg-color":"#e0f0ff","--epr-text-color":"#858585","--epr-search-input-bg-color":"#f6f6f6","--epr-picker-border-color":"#e7e7e7","--epr-bg-color":"#fff","--epr-reactions-bg-color":"#ffffff90","--epr-category-icon-active-color":"#6aa8de","--epr-skin-tone-picker-menu-color":"#ffffff95","--epr-skin-tone-outer-border-color":"#555555","--epr-skin-tone-inner-border-color":"var(--epr-bg-color)","--epr-horizontal-padding":"10px","--epr-picker-border-radius":"8px","--epr-search-border-color":"var(--epr-highlight-color)","--epr-header-padding":"15px var(--epr-horizontal-padding)","--epr-active-skin-tone-indicator-border-color":"var(--epr-highlight-color)","--epr-active-skin-hover-color":"var(--epr-hover-bg-color)","--epr-search-input-bg-color-active":"var(--epr-search-input-bg-color)","--epr-search-input-padding":"0 30px","--epr-search-input-border-radius":"8px","--epr-search-input-height":"40px","--epr-search-input-text-color":"var(--epr-text-color)","--epr-search-input-placeholder-color":"var(--epr-text-color)","--epr-search-bar-inner-padding":"var(--epr-horizontal-padding)","--epr-category-navigation-button-size":"30px","--epr-emoji-variation-picker-height":"45px","--epr-emoji-variation-picker-bg-color":"var(--epr-bg-color)","--epr-preview-height":"70px","--epr-preview-text-size":"14px","--epr-preview-text-padding":"0 var(--epr-horizontal-padding)","--epr-preview-border-color":"var(--epr-picker-border-color)","--epr-preview-text-color":"var(--epr-text-color)","--epr-category-padding":"0 var(--epr-horizontal-padding)","--epr-category-label-bg-color":"#ffffffe6","--epr-category-label-text-color":"var(--epr-text-color)","--epr-category-label-padding":"0 var(--epr-horizontal-padding)","--epr-category-label-height":DEFAULT_LABEL_HEIGHT+"px","--epr-emoji-size":"30px","--epr-emoji-padding":"5px","--epr-emoji-fullsize":"calc(var(--epr-emoji-size) + var(--epr-emoji-padding) * 2)","--epr-emoji-hover-color":"var(--epr-hover-bg-color)","--epr-emoji-variation-indicator-color":"var(--epr-picker-border-color)","--epr-emoji-variation-indicator-color-hover":"var(--epr-text-color)","--epr-header-overlay-z-index":"3","--epr-emoji-variations-indictator-z-index":"1","--epr-category-label-z-index":"2","--epr-skin-variation-picker-z-index":"5","--epr-preview-z-index":"6","--epr-dark":"#000","--epr-dark-emoji-variation-picker-bg-color":"var(--epr-dark)","--epr-dark-highlight-color":"#c0c0c0","--epr-dark-text-color":"var(--epr-highlight-color)","--epr-dark-hover-bg-color":"#363636f6","--epr-dark-hover-bg-color-reduced-opacity":"#36363680","--epr-dark-focus-bg-color":"#474747","--epr-dark-search-input-bg-color":"#333333","--epr-dark-category-label-bg-color":"#222222e6","--epr-dark-picker-border-color":"#151617","--epr-dark-bg-color":"#222222","--epr-dark-reactions-bg-color":"#22222290","--epr-dark-search-input-bg-color-active":"var(--epr-dark)","--epr-dark-emoji-variation-indicator-color":"#444","--epr-dark-category-icon-active-color":"#3271b7","--epr-dark-skin-tone-picker-menu-color":"#22222295","--epr-dark-skin-tone-outer-border-color":"var(--epr-dark-picker-border-color)","--epr-dark-skin-tone-inner-border-color":"#00000000"}},autoThemeDark:{".":ClassNames.autoTheme,"@media (prefers-color-scheme: dark)":{"--":DarkTheme}},darkTheme:{".":ClassNames.darkTheme,"--":DarkTheme},reactionsMenu:{".":"epr-reactions",height:"50px",display:"inline-flex",backgroundColor:"var(--epr-reactions-bg-color)",backdropFilter:"blur(8px)","--":{"--epr-picker-border-radius":"50px"}}});function elementCountInRow(parent,element){if(!parent||!element)return 0;var parentWidth=parent.getBoundingClientRect().width,elementWidth=element.getBoundingClientRect().width;return Math.floor(parentWidth/elementWidth)}function elementIndexInRow(parent,element){if(!parent||!element)return 0;var elementWidth=element.getBoundingClientRect().width,elementLeft=element.getBoundingClientRect().left,parentLeft=parent.getBoundingClientRect().left;return Math.floor((elementLeft-parentLeft)/elementWidth)}function rowNumber(parent,element){if(!parent||!element)return 0;var elementHeight=element.getBoundingClientRect().height,elementTop=element.getBoundingClientRect().top,parentTop=parent.getBoundingClientRect().top;return Math.round((elementTop-parentTop)/elementHeight)}function getRowElements(elements,row,elementsInRow){if(-1===row){var firstElementIndex=Math.floor((elements.length-1)/elementsInRow)*elementsInRow,lastElementIndex=elements.length-1;return elements.slice(firstElementIndex,lastElementIndex+1)}return elements.slice(row*elementsInRow,(row+1)*elementsInRow)}function getElementInRow(elements,row,elementsInRow,indexInRow){var rowElements=getRowElements(elements,row,elementsInRow);return rowElements[indexInRow]||rowElements[rowElements.length-1]||null}function firstVisibleElementInContainer(parent,elements,maxVisibilityDiffThreshold){if(void 0===maxVisibilityDiffThreshold&&(maxVisibilityDiffThreshold=0),!parent||!elements.length)return null;var parentTop=parent.getBoundingClientRect().top,parentBottom=parent.getBoundingClientRect().bottom,parentTopWithLabel=parentTop+function getLabelHeight(parentNode){for(var labels=Array.from(parentNode.querySelectorAll(asSelectors(ClassNames.label))),_i=0,_labels=labels;_i<_labels.length;_i++){var height=_labels[_i].getBoundingClientRect().height;if(height>0)return height}return DEFAULT_LABEL_HEIGHT}(parent);return elements.find(function(element){var elementTop=element.getBoundingClientRect().top,elementBottom=element.getBoundingClientRect().bottom,maxVisibilityDiffPixels=element.clientHeight*maxVisibilityDiffThreshold,elementTopWithAllowedDiff=elementTop+maxVisibilityDiffPixels,elementBottomWithAllowedDiff=elementBottom-maxVisibilityDiffPixels;return!(elementTopWithAllowedDiff<parentTopWithLabel)&&(elementTopWithAllowedDiff>=parentTop&&elementTopWithAllowedDiff<=parentBottom||elementBottomWithAllowedDiff>=parentTop&&elementBottomWithAllowedDiff<=parentBottom)})||null}var EmojiButtonSelector="button"+asSelectors(ClassNames.emoji),VisibleEmojiSelector=[EmojiButtonSelector,asSelectors(ClassNames.visible),":not("+asSelectors(ClassNames.hidden)+")"].join("");function buttonFromTarget(emojiElement){var _emojiElement$closest;return null!=(_emojiElement$closest=null==emojiElement?void 0:emojiElement.closest(EmojiButtonSelector))?_emojiElement$closest:null}function emojiFromElement(element){var originalUnified=originalUnifiedFromEmojiElement(element),unified=unifiedFromEmojiElement(element);if(!originalUnified)return[];var emoji=emojiByUnified(null!=unified?unified:originalUnified);return emoji?[emoji,unified]:[]}function elementHeight(element){var _element$clientHeight;return null!=(_element$clientHeight=null==element?void 0:element.clientHeight)?_element$clientHeight:0}function emojiTrueOffsetTop(element){if(!element)return 0;var button=buttonFromTarget(element),category=closestCategory(button),labelHeight=categoryLabelHeight(category);return elementOffsetTop(button)+elementOffsetTop(category)+labelHeight}function categoryLabelHeight(category){var _category$clientHeigh,_categoryWithoutLabel;if(!category)return 0;var categoryWithoutLabel=category.querySelector(asSelectors(ClassNames.categoryContent));return(null!=(_category$clientHeigh=null==category?void 0:category.clientHeight)?_category$clientHeigh:0)-(null!=(_categoryWithoutLabel=null==categoryWithoutLabel?void 0:categoryWithoutLabel.clientHeight)?_categoryWithoutLabel:0)}function queryScrollBody(root){return root?root.matches(asSelectors(ClassNames.scrollBody))?root:root.querySelector(asSelectors(ClassNames.scrollBody)):null}function emojiDistanceFromScrollTop(emoji){var _closestScrollBody$sc,_closestScrollBody;return emoji?emojiTrueOffsetTop(emoji)-(null!=(_closestScrollBody$sc=null==(_closestScrollBody=closestScrollBody(emoji))?void 0:_closestScrollBody.scrollTop)?_closestScrollBody$sc:0):0}function closestScrollBody(element){var _element$closest;return element&&null!=(_element$closest=element.closest(asSelectors(ClassNames.scrollBody)))?_element$closest:null}function elementOffsetTop(element){var _element$offsetTop;return null!=(_element$offsetTop=null==element?void 0:element.offsetTop)?_element$offsetTop:0}function elementOffsetLeft(element){var _element$offsetLeft;return null!=(_element$offsetLeft=null==element?void 0:element.offsetLeft)?_element$offsetLeft:0}function unifiedFromEmojiElement(emoji){var _elementDataSetKey;return null!=(_elementDataSetKey=function elementDataSetKey(element,key){var _elementDataSet$key;return null!=(_elementDataSet$key=function elementDataSet(element){var _element$dataset;return null!=(_element$dataset=null==element?void 0:element.dataset)?_element$dataset:{}}(element)[key])?_elementDataSet$key:null}(buttonFromTarget(emoji),"unified"))?_elementDataSetKey:null}function originalUnifiedFromEmojiElement(emoji){var unified=unifiedFromEmojiElement(emoji);return unified?unifiedWithoutSkinTone(unified):null}function allUnifiedFromEmojiElement(emoji){return emoji?{unified:unifiedFromEmojiElement(emoji),originalUnified:originalUnifiedFromEmojiElement(emoji)}:{unified:null,originalUnified:null}}function isVisibleEmoji(element){return element.classList.contains(ClassNames.visible)}function isHidden(element){return!element||element.classList.contains(ClassNames.hidden)}function allVisibleEmojis(parent){return parent?Array.from(parent.querySelectorAll(VisibleEmojiSelector)):[]}function lastVisibleEmoji(element){if(!element)return null;var last=allVisibleEmojis(element).slice(-1)[0];return last?isVisibleEmoji(last)?last:prevVisibleEmoji(last):null}function nextVisibleEmoji(element){var next=element.nextElementSibling;return next?isVisibleEmoji(next)?next:nextVisibleEmoji(next):firstVisibleEmoji(nextCategory(element))}function prevVisibleEmoji(element){var prev=element.previousElementSibling;return prev?isVisibleEmoji(prev)?prev:prevVisibleEmoji(prev):lastVisibleEmoji(prevCategory(element))}function firstVisibleEmoji(parent){return parent?firstVisibleElementInContainer(parent,allVisibleEmojis(parent),.1):null}function prevCategory(element){var category=closestCategory(element);if(!category)return null;var prev=category.previousElementSibling;return prev?isHidden(prev)?prevCategory(prev):prev:null}function nextCategory(element){var category=closestCategory(element);if(!category)return null;var next=category.nextElementSibling;return next?isHidden(next)?nextCategory(next):next:null}function closestCategory(element){return element?element.closest(asSelectors(ClassNames.category)):null}function closestCategoryContent(element){return element?element.closest(asSelectors(ClassNames.categoryContent)):null}function parseNativeEmoji(unified){return unified.split("-").map(function(hex){return String.fromCodePoint(parseInt(hex,16))}).join("")}function getSuggested(mode){try{var _window,_window$localStorage$,_window2;if(null==(_window=window)||!_window.localStorage)return[];var recent=JSON.parse(null!=(_window$localStorage$=null==(_window2=window)?void 0:_window2.localStorage.getItem("epr_suggested"))?_window$localStorage$:"[]");return mode===SuggestionMode.FREQUENT?recent.sort(function(a,b){return b.count-a.count}):recent}catch(_unused){return[]}}function isCustomEmoji(emoji){return void 0!==emoji.imgUrl}function useMouseDownHandlers(ContainerRef,mouseEventSource){var mouseDownTimerRef=(0,react.useRef)(),setVariationPicker=useSetVariationPicker(),disallowClickRef=function useDisallowClickRef(){return(0,react.useContext)(PickerContext).disallowClickRef}(),setEmojiVariationPicker=useEmojiVariationPickerState()[1],closeAllOpenToggles=useCloseAllOpenToggles(),activeSkinTone=useActiveSkinToneState()[0],onEmojiClick=function useOnEmojiClickConfig(mouseEventSource){var current=useMutableConfig().current,setReactionsOpen=useReactionsModeState()[1],handler=current.onEmojiClick||function(){},onReactionClick=current.onReactionClick;return mouseEventSource===MOUSE_EVENT_SOURCE.REACTIONS&&onReactionClick?function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return onReactionClick.apply(void 0,args.concat([{collapseToReactions:function collapseToReactions(){setReactionsOpen(function(o){return o})}}]))}:function(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];handler.apply(void 0,args.concat([{collapseToReactions:function collapseToReactions(){setReactionsOpen(!0)}}]))}}(mouseEventSource),updateSuggested=useUpdateSuggested()[1],getEmojiUrl=useGetEmojiUrlConfig(),activeEmojiStyle=useEmojiStyleConfig(),onClick=(0,react.useCallback)(function onClick(event){if(!disallowClickRef.current){closeAllOpenToggles();var _emojiFromEvent=emojiFromEvent(event),emoji=_emojiFromEvent[0],unified=_emojiFromEvent[1];if(emoji&&unified){var skinToneToUse=function activeVariationFromUnified(unified){var suspectedSkinTone=unified.split("-")[1];return skinToneVariations.includes(suspectedSkinTone)?suspectedSkinTone:null}(unified)||activeSkinTone;updateSuggested(),function setSuggested(emoji,skinTone){var nextList,recent=getSuggested(),unified=emojiUnified(emoji,skinTone),originalUnified=emojiUnified(emoji),existing=recent.find(function(_ref){return _ref.unified===unified});nextList=existing?[existing].concat(recent.filter(function(i){return i!==existing})):[existing={unified,original:originalUnified,count:0}].concat(recent),existing.count++,nextList.length=Math.min(nextList.length,14);try{var _window3;null==(_window3=window)||_window3.localStorage.setItem("epr_suggested",JSON.stringify(nextList))}catch(_unused2){}}(emoji,skinToneToUse),onEmojiClick(function emojiClickOutput(emoji,activeSkinTone,activeEmojiStyle,getEmojiUrl){var names=emojiNames(emoji);if(isCustomEmoji(emoji)){var _unified=emojiUnified(emoji);return{activeSkinTone,emoji:_unified,getImageUrl:function getImageUrl(){return emoji.imgUrl},imageUrl:emoji.imgUrl,isCustom:!0,names,unified:_unified,unifiedWithoutSkinTone:_unified}}var unified=emojiUnified(emoji,activeSkinTone);return{activeSkinTone,emoji:parseNativeEmoji(unified),getImageUrl:function getImageUrl(emojiStyle){return void 0===emojiStyle&&(emojiStyle=null!=activeEmojiStyle?activeEmojiStyle:EmojiStyle.APPLE),getEmojiUrl(unified,emojiStyle)},imageUrl:getEmojiUrl(unified,null!=activeEmojiStyle?activeEmojiStyle:EmojiStyle.APPLE),isCustom:!1,names,unified,unifiedWithoutSkinTone:emojiUnified(emoji)}}(emoji,skinToneToUse,activeEmojiStyle,getEmojiUrl),event)}}},[activeSkinTone,closeAllOpenToggles,disallowClickRef,onEmojiClick,updateSuggested,getEmojiUrl,activeEmojiStyle]),onMouseDown=(0,react.useCallback)(function onMouseDown(event){var _window;mouseDownTimerRef.current&&clearTimeout(mouseDownTimerRef.current);var emoji=emojiFromEvent(event)[0];emoji&&emojiHasVariations(emoji)&&(mouseDownTimerRef.current=null==(_window=window)?void 0:_window.setTimeout(function(){disallowClickRef.current=!0,mouseDownTimerRef.current=void 0,closeAllOpenToggles(),setVariationPicker(event.target),setEmojiVariationPicker(emoji)},500))},[disallowClickRef,closeAllOpenToggles,setVariationPicker,setEmojiVariationPicker]),onMouseUp=(0,react.useCallback)(function onMouseUp(){mouseDownTimerRef.current?(clearTimeout(mouseDownTimerRef.current),mouseDownTimerRef.current=void 0):disallowClickRef.current&&requestAnimationFrame(function(){disallowClickRef.current=!1})},[disallowClickRef]);(0,react.useEffect)(function(){if(ContainerRef.current){var confainerRef=ContainerRef.current;return confainerRef.addEventListener("click",onClick,{passive:!0}),confainerRef.addEventListener("mousedown",onMouseDown,{passive:!0}),confainerRef.addEventListener("mouseup",onMouseUp,{passive:!0}),function(){null==confainerRef||confainerRef.removeEventListener("click",onClick),null==confainerRef||confainerRef.removeEventListener("mousedown",onMouseDown),null==confainerRef||confainerRef.removeEventListener("mouseup",onMouseUp)}}},[ContainerRef,onClick,onMouseDown,onMouseUp])}function emojiFromEvent(event){var target=null==event?void 0:event.target;return function isEmojiElement(element){var _element$parentElemen;return Boolean((null==element?void 0:element.matches(EmojiButtonSelector))||(null==element||null==(_element$parentElemen=element.parentElement)?void 0:_element$parentElemen.matches(EmojiButtonSelector)))}(target)?emojiFromElement(target):[]}function Button(props){return(0,react.createElement)("button",Object.assign({type:"button"},props,{className:cx(styles$1.button,props.className)}),props.children)}var styles$1=stylesheet.create({button:{".":"epr-btn",cursor:"pointer",border:"0",background:"none",outline:"none"}});function ClickableEmojiButton(_ref){var _cx,emojiNames=_ref.emojiNames,unified=_ref.unified,hidden=_ref.hidden,hiddenOnSearch=_ref.hiddenOnSearch,_ref$showVariations=_ref.showVariations,showVariations=void 0===_ref$showVariations||_ref$showVariations,hasVariations=_ref.hasVariations,children=_ref.children,className=_ref.className,_ref$noBackground=_ref.noBackground,noBackground=void 0!==_ref$noBackground&&_ref$noBackground;return(0,react.createElement)(Button,{className:cx(styles$2.emoji,hidden&&commonStyles.hidden,hiddenOnSearch&&commonInteractionStyles.hiddenOnSearch,(_cx={},_cx[ClassNames.visible]=!hidden&&!hiddenOnSearch,_cx),!(!hasVariations||!showVariations)&&styles$2.hasVariations,noBackground&&styles$2.noBackground,className),"data-unified":unified,"aria-label":getAriaLabel(emojiNames),"data-full-name":emojiNames},children)}function getAriaLabel(emojiNames){var _emojiNames$;return emojiNames[0].match("flag-")&&null!=(_emojiNames$=emojiNames[1])?_emojiNames$:emojiNames[0]}var styles$2=stylesheet.create({emoji:{".":ClassNames.emoji,position:"relative",width:"var(--epr-emoji-fullsize)",height:"var(--epr-emoji-fullsize)",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center",maxWidth:"var(--epr-emoji-fullsize)",maxHeight:"var(--epr-emoji-fullsize)",borderRadius:"8px",overflow:"hidden",transition:"background-color 0.2s",":hover":{backgroundColor:"var(--epr-emoji-hover-color)"},":focus":{backgroundColor:"var(--epr-focus-bg-color)"}},noBackground:{background:"none",":hover":{backgroundColor:"transparent",background:"none"},":focus":{backgroundColor:"transparent",background:"none"}},hasVariations:{".":ClassNames.emojiHasVariations,":after":{content:"",display:"block",width:"0",height:"0",right:"0px",bottom:"1px",position:"absolute",borderLeft:"4px solid transparent",borderRight:"4px solid transparent",transform:"rotate(135deg)",borderBottom:"4px solid var(--epr-emoji-variation-indicator-color)",zIndex:"var(--epr-emoji-variations-indictator-z-index)"},":hover:after":{borderBottom:"4px solid var(--epr-emoji-variation-indicator-color-hover)"}}}),emojiStyles=stylesheet.create({external:{".":ClassNames.external,fontSize:"0"},common:{alignSelf:"center",justifySelf:"center",display:"block"}});function EmojiImg(_ref){var emojiName=_ref.emojiName,style=_ref.style,_ref$lazyLoad=_ref.lazyLoad,lazyLoad=void 0!==_ref$lazyLoad&&_ref$lazyLoad,imgUrl=_ref.imgUrl,onError=_ref.onError,className=_ref.className;return(0,react.createElement)("img",{src:imgUrl,alt:emojiName,className:cx(styles$3.emojiImag,emojiStyles.external,emojiStyles.common,className),loading:lazyLoad?"lazy":"eager",onError,style})}var styles$3=stylesheet.create({emojiImag:{".":"epr-emoji-img",maxWidth:"var(--epr-emoji-fullsize)",maxHeight:"var(--epr-emoji-fullsize)",minWidth:"var(--epr-emoji-fullsize)",minHeight:"var(--epr-emoji-fullsize)",padding:"var(--epr-emoji-padding)"}});function NativeEmoji(_ref){var unified=_ref.unified,style=_ref.style,className=_ref.className;return(0,react.createElement)("span",{className:cx(styles$4.nativeEmoji,emojiStyles.common,emojiStyles.external,className),"data-unified":unified,style},parseNativeEmoji(unified))}var styles$4=stylesheet.create({nativeEmoji:{".":"epr-emoji-native",fontFamily:'"Segoe UI Emoji", "Segoe UI Symbol", "Segoe UI", "Apple Color Emoji", "Twemoji Mozilla", "Noto Color Emoji", "EmojiOne Color", "Android Emoji"!important',position:"relative",lineHeight:"100%",fontSize:"var(--epr-emoji-size)",textAlign:"center",alignSelf:"center",justifySelf:"center",letterSpacing:"0",padding:"var(--epr-emoji-padding)"}});function ViewOnlyEmoji(_ref){var emoji=_ref.emoji,unified=_ref.unified,emojiStyle=_ref.emojiStyle,size=_ref.size,lazyLoad=_ref.lazyLoad,_ref$getEmojiUrl=_ref.getEmojiUrl,getEmojiUrl=void 0===_ref$getEmojiUrl?emojiUrlByUnified:_ref$getEmojiUrl,className=_ref.className,setEmojisThatFailedToLoad=useEmojisThatFailedToLoadState()[1],style={};size&&(style.width=style.height=style.fontSize=size+"px");var emojiToRender=emoji||emojiByUnified(unified);return emojiToRender?isCustomEmoji(emojiToRender)?(0,react.createElement)(EmojiImg,{style,emojiName:unified,emojiStyle:EmojiStyle.NATIVE,lazyLoad,imgUrl:emojiToRender.imgUrl,onError,className}):(0,react.createElement)(react.Fragment,null,emojiStyle===EmojiStyle.NATIVE?(0,react.createElement)(NativeEmoji,{unified,style,className}):(0,react.createElement)(EmojiImg,{style,emojiName:emojiName(emojiToRender),emojiStyle,lazyLoad,imgUrl:getEmojiUrl(unified,emojiStyle),onError,className})):null;function onError(){setEmojisThatFailedToLoad(function(prev){return new Set(prev).add(unified)})}}function ClickableEmoji(_ref){var emoji=_ref.emoji,unified=_ref.unified,hidden=_ref.hidden,hiddenOnSearch=_ref.hiddenOnSearch,emojiStyle=_ref.emojiStyle,_ref$showVariations=_ref.showVariations,showVariations=void 0===_ref$showVariations||_ref$showVariations,size=_ref.size,lazyLoad=_ref.lazyLoad,getEmojiUrl=_ref.getEmojiUrl,className=_ref.className,_ref$noBackground=_ref.noBackground,noBackground=void 0!==_ref$noBackground&&_ref$noBackground,hasVariations=emojiHasVariations(emoji);return(0,react.createElement)(ClickableEmojiButton,{hasVariations,showVariations,hidden,hiddenOnSearch,emojiNames:emojiNames(emoji),unified,noBackground},(0,react.createElement)(ViewOnlyEmoji,{unified,emoji,size,emojiStyle,lazyLoad,getEmojiUrl,className}))}function BtnPlus(){var setReactionsMode=useReactionsModeState()[1];return(0,react.createElement)(Button,{"aria-label":"Show all Emojis",title:"Show all Emojis",tabIndex:0,className:cx(styles$5.plusSign),onClick:function onClick(){return setReactionsMode(!1)}})}var styles$5=stylesheet.create(_extends({plusSign:{fontSize:"20px",padding:"17px",color:"var(--epr-text-color)",borderRadius:"50%",textAlign:"center",lineHeight:"100%",width:"20px",height:"20px",display:"flex",justifyContent:"center",alignItems:"center",transition:"background-color 0.2s ease-in-out",":after":{content:"",minWidth:"20px",minHeight:"20px",backgroundImage:"url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI4LjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjgwcHgiIHZpZXdCb3g9IjAgMCAyMCA4MCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjAgODAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8cGF0aCBmaWxsPSIjODY4Njg2IiBkPSJNNS43LDEwLjRjMCwwLjEsMC4xLDAuMywwLjIsMC40QzYsMTAuOSw2LjEsMTEsNi4zLDExaDMuNHYzLjRjMCwwLjEsMC4xLDAuMywwLjIsMC40CgljMC4xLDAuMSwwLjIsMC4yLDAuNCwwLjJjMC4zLDAsMC41LTAuMiwwLjUtMC41di0zLjRoMy40YzAuMywwLDAuNS0wLjIsMC41LTAuNXMtMC4yLTAuNS0wLjUtMC41aC0zLjRWNi43YzAtMC4zLTAuMi0wLjUtMC41LTAuNQoJQzkuOCw2LDkuNiw2LjIsOS42LDYuNXYzLjRINi4yQzUuOSw5LjksNS43LDEwLjEsNS43LDEwLjRMNS43LDEwLjR6Ii8+CjxwYXRoIGZpbGw9IiMzMzcxQjciIGQ9Ik01LjcsMzAuNGMwLDAuMSwwLjEsMC4zLDAuMiwwLjRTNi4xLDMxLDYuMywzMWgzLjR2My40YzAsMC4xLDAuMSwwLjMsMC4yLDAuNGMwLjEsMC4xLDAuMiwwLjIsMC40LDAuMgoJYzAuMywwLDAuNS0wLjIsMC41LTAuNXYtMy40aDMuNGMwLjMsMCwwLjUtMC4yLDAuNS0wLjVzLTAuMi0wLjUtMC41LTAuNWgtMy40di0zLjRjMC0wLjMtMC4yLTAuNS0wLjUtMC41cy0wLjUsMC4yLTAuNSwwLjV2My40SDYuMgoJQzUuOSwyOS45LDUuNywzMC4xLDUuNywzMC40TDUuNywzMC40eiIvPgo8cGF0aCBmaWxsPSIjQzBDMEJGIiBkPSJNNS43LDUwLjRjMCwwLjEsMC4xLDAuMywwLjIsMC40QzYsNTAuOSw2LjEsNTEsNi4zLDUxaDMuNHYzLjRjMCwwLjEsMC4xLDAuMywwLjIsMC40CgljMC4xLDAuMSwwLjIsMC4yLDAuNCwwLjJjMC4zLDAsMC41LTAuMiwwLjUtMC41di0zLjRoMy40YzAuMywwLDAuNS0wLjIsMC41LTAuNXMtMC4yLTAuNS0wLjUtMC41aC0zLjR2LTMuNGMwLTAuMy0wLjItMC41LTAuNS0wLjUKCXMtMC41LDAuMi0wLjUsMC41djMuNEg2LjJDNS45LDQ5LjksNS43LDUwLjEsNS43LDUwLjRMNS43LDUwLjR6Ii8+CjxwYXRoIGZpbGw9IiM2QUE5REQiIGQ9Ik01LjcsNzAuNGMwLDAuMSwwLjEsMC4zLDAuMiwwLjRTNi4xLDcxLDYuMyw3MWgzLjR2My40YzAsMC4xLDAuMSwwLjMsMC4yLDAuNGMwLjEsMC4xLDAuMiwwLjIsMC40LDAuMgoJYzAuMywwLDAuNS0wLjIsMC41LTAuNXYtMy40aDMuNGMwLjMsMCwwLjUtMC4yLDAuNS0wLjVzLTAuMi0wLjUtMC41LTAuNWgtMy40di0zLjRjMC0wLjMtMC4yLTAuNS0wLjUtMC41cy0wLjUsMC4yLTAuNSwwLjV2My40SDYuNAoJQzUuOSw2OS45LDUuNyw3MC4xLDUuNyw3MC40TDUuNyw3MC40eiIvPgo8L3N2Zz4=)",backgroundColor:"transparent",backgroundRepeat:"no-repeat",backgroundSize:"20px",backgroundPositionY:"0"},":hover":{color:"var(--epr-highlight-color)",backgroundColor:"var(--epr-hover-bg-color-reduced-opacity)",":after":{backgroundPositionY:"-20px"}},":focus":{color:"var(--epr-highlight-color)",backgroundColor:"var(--epr-hover-bg-color-reduced-opacity)",":after":{backgroundPositionY:"-40px"}}}},darkMode("plusSign",{":after":{backgroundPositionY:"-40px"},":hover:after":{backgroundPositionY:"-60px"}})));function Reactions(){var reactionsOpen=useReactionsModeState()[0],ReactionsRef=function useReactionsRef(){return useElementRef().ReactionsRef}(),reactions=function useReactionsConfig(){return usePickerConfig().reactions}();useMouseDownHandlers(ReactionsRef,MOUSE_EVENT_SOURCE.REACTIONS);var emojiStyle=useEmojiStyleConfig(),allowExpandReactions=useAllowExpandReactions(),getEmojiUrl=useGetEmojiUrlConfig();return reactionsOpen?(0,react.createElement)("ul",{className:cx(styles$6.list,!reactionsOpen&&commonStyles.hidden),ref:ReactionsRef},reactions.map(function(reaction){return(0,react.createElement)("li",{key:reaction},(0,react.createElement)(ClickableEmoji,{emoji:emojiByUnified(reaction),emojiStyle,unified:reaction,showVariations:!1,className:cx(styles$6.emojiButton),noBackground:!0,getEmojiUrl}))}),allowExpandReactions?(0,react.createElement)("li",null,(0,react.createElement)(BtnPlus,null)):null):null}var styles$6=stylesheet.create({list:{listStyle:"none",margin:"0",padding:"0 5px",display:"flex",justifyContent:"space-between",alignItems:"center",height:"100%"},emojiButton:{":hover":{transform:"scale(1.2)"},":focus":{transform:"scale(1.2)"},":active":{transform:"scale(1.1)"},transition:"transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.5)"}});function useIsEmojiHidden(){var emojisThatFailedToLoad=useEmojisThatFailedToLoadState()[0],isEmojiFiltered=function useIsEmojiFiltered(){var filter=useFilterRef().current,searchTerm=useSearchTermState()[0];return function(unified){return function isEmojiFilteredBySearchTerm(unified,filter,searchTerm){var _filter$searchTerm;return!(!filter||!searchTerm)&&!(null!=(_filter$searchTerm=filter[searchTerm])&&_filter$searchTerm[unified])}(unified,filter,searchTerm)}}();return function(emoji){var unified=emojiUnified(emoji),failedToLoad=emojisThatFailedToLoad.has(unified),filteredOut=isEmojiFiltered(unified);return{failedToLoad,filteredOut,hidden:failedToLoad||filteredOut}}}function EmojiCategory(_ref){var categoryConfig=_ref.categoryConfig,children=_ref.children,hidden=_ref.hidden,hiddenOnSearch=_ref.hiddenOnSearch,category=categoryFromCategoryConfig(categoryConfig),categoryName=categoryNameFromCategoryConfig(categoryConfig);return(0,react.createElement)("li",{className:cx(styles$7.category,hidden&&commonStyles.hidden,hiddenOnSearch&&commonInteractionStyles.hiddenOnSearch),"data-name":category,"aria-label":categoryName},(0,react.createElement)("h2",{className:cx(styles$7.label)},categoryName),(0,react.createElement)("div",{className:cx(styles$7.categoryContent)},children))}var styles$7=stylesheet.create({category:{".":ClassNames.category,":not(:has(.epr-visible))":{display:"none"}},categoryContent:{".":ClassNames.categoryContent,display:"grid",gridGap:"0",gridTemplateColumns:"repeat(auto-fill, var(--epr-emoji-fullsize))",justifyContent:"space-between",margin:"var(--epr-category-padding)",position:"relative"},label:{".":ClassNames.label,alignItems:"center",backdropFilter:"blur(3px)",backgroundColor:"var(--epr-category-label-bg-color)",color:"var(--epr-category-label-text-color)",display:"flex",fontSize:"16px",fontWeight:"bold",height:"var(--epr-category-label-height)",margin:"0",padding:"var(--epr-category-label-padding)",position:"sticky",textTransform:"capitalize",top:"0",width:"100%",zIndex:"var(--epr-category-label-z-index)"}}),isEverMounted=!1;function Suggested(_ref){var categoryConfig=_ref.categoryConfig,suggestedUpdated=useUpdateSuggested()[0],isMounted=function useIsEverMounted(){var _React$useState=(0,react.useState)(isEverMounted),isMounted=_React$useState[0],setIsMounted=_React$useState[1];return(0,react.useEffect)(function(){setIsMounted(!0),isEverMounted=!0},[]),isMounted||isEverMounted}(),suggestedEmojisModeConfig=function useSuggestedEmojisModeConfig(){return usePickerConfig().suggestedEmojisMode}(),getEmojiUrl=useGetEmojiUrlConfig(),suggested=(0,react.useMemo)(function(){var _getSuggested;return null!=(_getSuggested=getSuggested(suggestedEmojisModeConfig))?_getSuggested:[]},[suggestedUpdated,suggestedEmojisModeConfig]),emojiStyle=useEmojiStyleConfig(),isEmojiDisallowed=useIsEmojiDisallowed();return isMounted?(0,react.createElement)(EmojiCategory,{categoryConfig,hiddenOnSearch:!0,hidden:0===suggested.length},suggested.map(function(suggestedItem){var emoji=emojiByUnified(suggestedItem.original);return emoji?isEmojiDisallowed(emoji)?null:(0,react.createElement)(ClickableEmoji,{showVariations:!1,unified:suggestedItem.unified,emojiStyle,emoji,key:suggestedItem.unified,getEmojiUrl}):null})):null}function EmojiList(){var categories=useCategoriesConfig(),renderdCategoriesCountRef=(0,react.useRef)(0);return(0,react.createElement)("ul",{className:cx(styles$8.emojiList)},categories.map(function(categoryConfig){var category=categoryFromCategoryConfig(categoryConfig);return category===Categories.SUGGESTED?(0,react.createElement)(Suggested,{key:category,categoryConfig}):(0,react.createElement)(react.Suspense,{key:category},(0,react.createElement)(RenderCategory,{category,categoryConfig,renderdCategoriesCountRef}))}))}function RenderCategory(_ref){var category=_ref.category,categoryConfig=_ref.categoryConfig,renderdCategoriesCountRef=_ref.renderdCategoriesCountRef,isEmojiHidden=useIsEmojiHidden(),lazyLoadEmojis=function useLazyLoadEmojisConfig(){return usePickerConfig().lazyLoadEmojis}(),emojiStyle=useEmojiStyleConfig(),isPastInitialLoad=function useIsPastInitialLoad(){return(0,react.useContext)(PickerContext).isPastInitialLoad}(),activeSkinTone=useActiveSkinToneState()[0],isEmojiDisallowed=useIsEmojiDisallowed(),getEmojiUrl=useGetEmojiUrlConfig(),showVariations=!useSkinTonesDisabledConfig(),emojisToPush=!isPastInitialLoad&&renderdCategoriesCountRef.current>0?[]:emojisByCategory(category);emojisToPush.length>0&&renderdCategoriesCountRef.current++;var hiddenCounter=0,emojis=emojisToPush.map(function(emoji){var unified=emojiUnified(emoji,activeSkinTone),_isEmojiHidden=isEmojiHidden(emoji),failedToLoad=_isEmojiHidden.failedToLoad,filteredOut=_isEmojiHidden.filteredOut,hidden=_isEmojiHidden.hidden,isDisallowed=isEmojiDisallowed(emoji);return(hidden||isDisallowed)&&hiddenCounter++,isDisallowed?null:(0,react.createElement)(ClickableEmoji,{showVariations,key:unified,emoji,unified,hidden:failedToLoad,hiddenOnSearch:filteredOut,emojiStyle,lazyLoad:lazyLoadEmojis,getEmojiUrl})});return(0,react.createElement)(EmojiCategory,{categoryConfig,hidden:hiddenCounter===emojis.length},emojis)}var Direction,styles$8=stylesheet.create({emojiList:{".":ClassNames.emojiList,listStyle:"none",margin:"0",padding:"0"}});function EmojiVariationPicker(){var top,pointerStyle,AnchoredEmojiRef=useAnchoredEmojiRef(),VariationPickerRef=function useVariationPickerRef(){return useElementRef().VariationPickerRef}(),emoji=useEmojiVariationPickerState()[0],emojiStyle=useEmojiStyleConfig(),_useVariationPickerTo=function useVariationPickerTop(VariationPickerRef){var AnchoredEmojiRef=useAnchoredEmojiRef(),BodyRef=useBodyRef(),direction=Direction.Up;return{getMenuDirection,getTop};function getMenuDirection(){return direction}function getTop(){direction=Direction.Up;var emojiOffsetTop=0;if(!VariationPickerRef.current)return 0;var height=elementHeight(VariationPickerRef.current);if(AnchoredEmojiRef.current){var _bodyRef$scrollTop,bodyRef=BodyRef.current,button=buttonFromTarget(AnchoredEmojiRef.current),buttonHeight=elementHeight(button);emojiOffsetTop=emojiTrueOffsetTop(button),(null!=(_bodyRef$scrollTop=null==bodyRef?void 0:bodyRef.scrollTop)?_bodyRef$scrollTop:0)>emojiOffsetTop-height&&(direction=Direction.Down,emojiOffsetTop+=buttonHeight+height)}return emojiOffsetTop-height}}(VariationPickerRef),getTop=_useVariationPickerTo.getTop,getMenuDirection=_useVariationPickerTo.getMenuDirection,setAnchoredEmojiRef=useSetAnchoredEmojiRef(),getPointerStyle=function usePointerStyle(VariationPickerRef){var AnchoredEmojiRef=useAnchoredEmojiRef();return function getPointerStyle(){var style={};if(!VariationPickerRef.current)return style;if(AnchoredEmojiRef.current){var button=buttonFromTarget(AnchoredEmojiRef.current),offsetLeft=function emojiTruOffsetLeft(element){var button=buttonFromTarget(element),category=closestCategory(button);return elementOffsetLeft(button)+elementOffsetLeft(category)}(button);if(!button)return style;style.left=offsetLeft+(null==button?void 0:button.clientWidth)/2}return style}}(VariationPickerRef),getEmojiUrl=useGetEmojiUrlConfig(),button=buttonFromTarget(AnchoredEmojiRef.current),visible=Boolean(emoji&&button&&emojiHasVariations(emoji)&&button.classList.contains(ClassNames.emojiHasVariations));return(0,react.useEffect)(function(){visible&&focusFirstVisibleEmoji(VariationPickerRef.current)},[VariationPickerRef,visible,AnchoredEmojiRef]),!visible&&AnchoredEmojiRef.current?setAnchoredEmojiRef(null):(top=getTop(),pointerStyle=getPointerStyle()),(0,react.createElement)("div",{ref:VariationPickerRef,className:cx(styles$9.variationPicker,getMenuDirection()===Direction.Down&&styles$9.pointingUp,visible&&styles$9.visible),style:{top}},visible&&emoji?[emojiUnified(emoji)].concat(emojiVariations(emoji)).slice(0,6).map(function(unified){return(0,react.createElement)(ClickableEmoji,{key:unified,emoji,unified,emojiStyle,showVariations:!1,getEmojiUrl})}):null,(0,react.createElement)("div",{className:cx(styles$9.pointer),style:pointerStyle}))}!function(Direction){Direction[Direction.Up=0]="Up",Direction[Direction.Down=1]="Down"}(Direction||(Direction={}));var styles$9=stylesheet.create(_extends({variationPicker:{".":ClassNames.variationPicker,position:"absolute",right:"15px",left:"15px",padding:"5px",boxShadow:"0px 2px 5px rgba(0, 0, 0, 0.2)",borderRadius:"3px",display:"flex",alignItems:"center",justifyContent:"space-around",opacity:"0",visibility:"hidden",pointerEvents:"none",top:"-100%",border:"1px solid var(--epr-picker-border-color)",height:"var(--epr-emoji-variation-picker-height)",zIndex:"var(--epr-skin-variation-picker-z-index)",background:"var(--epr-emoji-variation-picker-bg-color)",transform:"scale(0.9)",transition:"transform 0.1s ease-out, opacity 0.2s ease-out"},visible:{opacity:"1",visibility:"visible",pointerEvents:"all",transform:"scale(1)"},pointingUp:{".":"pointing-up",transformOrigin:"center 0%",transform:"scale(0.9)"},".pointing-up":{pointer:{top:"0",transform:"rotate(180deg) translateY(100%) translateX(18px)"}},pointer:{".":"epr-emoji-pointer",content:"",position:"absolute",width:"25px",height:"15px",backgroundRepeat:"no-repeat",backgroundPosition:"0 0",backgroundSize:"50px 15px",top:"100%",transform:"translateX(-18px)",backgroundImage:"url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI2LjMuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSI1MHB4IgoJIGhlaWdodD0iMTVweCIgdmlld0JveD0iMCAwIDUwIDE1IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA1MCAxNSIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxnIGlkPSJMYXllcl8xIj4KPC9nPgo8ZyBpZD0iTGF5ZXJfMiI+Cgk8cGF0aCBmaWxsPSIjRkZGRkZGIiBzdHJva2U9IiNFOEU3RTciIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTEuODYtMC40M2w5LjgzLDExLjUzYzAuNTksMC42OSwxLjU2LDAuNjksMi4xNCwwbDkuODMtMTEuNTMiLz4KCTxwYXRoIGZpbGw9IiMwMTAyMDIiIHN0cm9rZT0iIzE1MTYxNyIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMjYuODYtMC40M2w5LjgzLDExLjUzYzAuNTksMC42OSwxLjU2LDAuNjksMi4xNCwwbDkuODMtMTEuNTMiLz4KPC9nPgo8L3N2Zz4=)"}},darkMode("pointer",{backgroundPosition:"-25px 0"})));function Body(){var BodyRef=useBodyRef();return function useOnScroll(BodyRef){var closeAllOpenToggles=useCloseAllOpenToggles();(0,react.useEffect)(function(){var bodyRef=BodyRef.current;if(bodyRef)return bodyRef.addEventListener("scroll",onScroll,{passive:!0}),function(){null==bodyRef||bodyRef.removeEventListener("scroll",onScroll)};function onScroll(){closeAllOpenToggles()}},[BodyRef,closeAllOpenToggles])}(BodyRef),useMouseDownHandlers(BodyRef,MOUSE_EVENT_SOURCE.PICKER),function useOnMouseMove(){var BodyRef=useBodyRef(),allowMouseMove=useAllowMouseMove(),isMouseDisallowed=useIsMouseDisallowed();(0,react.useEffect)(function(){var bodyRef=BodyRef.current;function onMouseMove(){isMouseDisallowed()&&allowMouseMove()}return null==bodyRef||bodyRef.addEventListener("mousemove",onMouseMove,{passive:!0}),function(){null==bodyRef||bodyRef.removeEventListener("mousemove",onMouseMove)}},[BodyRef,allowMouseMove,isMouseDisallowed])}(),(0,react.createElement)("div",{className:cx(styles$a.body,commonInteractionStyles.hiddenOnReactions),ref:BodyRef},(0,react.createElement)(EmojiVariationPicker,null),(0,react.createElement)(EmojiList,null))}var _stylesheet$create,FlexDirection,styles$a=stylesheet.create({body:{".":ClassNames.scrollBody,flex:"1",overflowY:"scroll",overflowX:"hidden",position:"relative"}});function useEmojiPreviewEvents(allow,setPreviewEmoji){var BodyRef=useBodyRef(),isMouseDisallowed=useIsMouseDisallowed(),allowMouseMove=useAllowMouseMove();(0,react.useEffect)(function(){if(allow){var bodyRef=BodyRef.current;return null==bodyRef||bodyRef.addEventListener("keydown",onEscape,{passive:!0}),null==bodyRef||bodyRef.addEventListener("mouseover",onMouseOver,!0),null==bodyRef||bodyRef.addEventListener("focus",onEnter,!0),null==bodyRef||bodyRef.addEventListener("mouseout",onLeave,{passive:!0}),null==bodyRef||bodyRef.addEventListener("blur",onLeave,!0),function(){null==bodyRef||bodyRef.removeEventListener("mouseover",onMouseOver),null==bodyRef||bodyRef.removeEventListener("mouseout",onLeave),null==bodyRef||bodyRef.removeEventListener("focus",onEnter,!0),null==bodyRef||bodyRef.removeEventListener("blur",onLeave,!0),null==bodyRef||bodyRef.removeEventListener("keydown",onEscape)}}function onEnter(e){var button=buttonFromTarget(e.target);if(!button)return onLeave();var _allUnifiedFromEmojiE=allUnifiedFromEmojiElement(button),unified=_allUnifiedFromEmojiE.unified,originalUnified=_allUnifiedFromEmojiE.originalUnified;if(!unified||!originalUnified)return onLeave();setPreviewEmoji({unified,originalUnified})}function onLeave(e){if(e&&!buttonFromTarget(e.relatedTarget))return setPreviewEmoji(null);setPreviewEmoji(null)}function onEscape(e){"Escape"===e.key&&setPreviewEmoji(null)}function onMouseOver(e){if(!isMouseDisallowed()){var button=buttonFromTarget(e.target);if(button){var belowFoldByPx=function detectEmojyPartiallyBelowFold(button,bodyRef){if(!button||!bodyRef)return 0;var buttonRect=button.getBoundingClientRect(),bodyRect=bodyRef.getBoundingClientRect();return bodyRect.height-(buttonRect.y-bodyRect.y)}(button,bodyRef);if(belowFoldByPx<button.getBoundingClientRect().height)return function handlePartiallyVisibleElementFocus(button,setPreviewEmoji){var _document$activeEleme,_allUnifiedFromEmojiE2=allUnifiedFromEmojiElement(button),unified=_allUnifiedFromEmojiE2.unified,originalUnified=_allUnifiedFromEmojiE2.originalUnified;if(!unified||!originalUnified)return;null==(_document$activeEleme=document.activeElement)||null==_document$activeEleme.blur||_document$activeEleme.blur(),setPreviewEmoji({unified,originalUnified})}(button,setPreviewEmoji);focusElement(button)}}}},[BodyRef,allow,setPreviewEmoji,isMouseDisallowed,allowMouseMove])}function Flex(_ref){var children=_ref.children,className=_ref.className,_ref$style=_ref.style,style=void 0===_ref$style?{}:_ref$style,_ref$direction=_ref.direction,direction=void 0===_ref$direction?FlexDirection.ROW:_ref$direction;return(0,react.createElement)("div",{style:_extends({},style),className:cx(styles$b.flex,className,styles$b[direction])},children)}!function(FlexDirection){FlexDirection.ROW="FlexRow",FlexDirection.COLUMN="FlexColumn"}(FlexDirection||(FlexDirection={}));var styles$b=stylesheet.create(((_stylesheet$create={flex:{display:"flex"}})[FlexDirection.ROW]={flexDirection:"row"},_stylesheet$create[FlexDirection.COLUMN]={flexDirection:"column"},_stylesheet$create));function Space(_ref){var className=_ref.className,_ref$style=_ref.style,style=void 0===_ref$style?{}:_ref$style;return(0,react.createElement)("div",{style:_extends({flex:1},style),className:cx(className)})}function Absolute(_ref){var children=_ref.children,className=_ref.className,style=_ref.style;return(0,react.createElement)("div",{style:_extends({},style,{position:"absolute"}),className},children)}function Relative(_ref){var children=_ref.children,className=_ref.className,style=_ref.style;return(0,react.createElement)("div",{style:_extends({},style,{position:"relative"}),className},children)}function BtnSkinToneVariation(_ref){var isOpen=_ref.isOpen,onClick=_ref.onClick,isActive=_ref.isActive,skinToneVariation=_ref.skinToneVariation,style=_ref.style;return(0,react.createElement)(Button,{style,onClick,className:cx("epr-tone-"+skinToneVariation,styles$c.tone,!isOpen&&styles$c.closedTone,isActive&&styles$c.active),"aria-pressed":isActive,"aria-label":"Skin tone "+skinTonesNamed[skinToneVariation]})}var SkinTonePickerDirection,styles$c=stylesheet.create({closedTone:{opacity:"0",zIndex:"0"},active:{".":"epr-active",zIndex:"1",opacity:"1"},tone:{".":"epr-tone",width:"var(--epr-skin-tone-size)",display:"block",cursor:"pointer",borderRadius:"4px",height:"var(--epr-skin-tone-size)",position:"absolute",right:"0",transition:"transform 0.3s ease-in-out, opacity 0.35s ease-in-out",zIndex:"0",border:"1px solid var(--epr-skin-tone-outer-border-color)",boxShadow:"inset 0px 0px 0 1px var(--epr-skin-tone-inner-border-color)",":hover":{boxShadow:"0 0 0 3px var(--epr-active-skin-hover-color), inset 0px 0px 0 1px var(--epr-skin-tone-inner-border-color)"},":focus":{boxShadow:"0 0 0 3px var(--epr-focus-bg-color)"},"&.epr-tone-neutral":{backgroundColor:"#ffd225"},"&.epr-tone-1f3fb":{backgroundColor:"#ffdfbd"},"&.epr-tone-1f3fc":{backgroundColor:"#e9c197"},"&.epr-tone-1f3fd":{backgroundColor:"#c88e62"},"&.epr-tone-1f3fe":{backgroundColor:"#a86637"},"&.epr-tone-1f3ff":{backgroundColor:"#60463a"}}});function SkinTonePickerMenu(){return(0,react.createElement)(Relative,{style:{height:28}},(0,react.createElement)(Absolute,{style:{bottom:0,right:0}},(0,react.createElement)(SkinTonePicker,{direction:SkinTonePickerDirection.VERTICAL})))}function SkinTonePicker(_ref){var _ref$direction=_ref.direction,direction=void 0===_ref$direction?SkinTonePickerDirection.HORIZONTAL:_ref$direction,SkinTonePickerRef=useSkinTonePickerRef(),isDisabled=useSkinTonesDisabledConfig(),_useSkinToneFanOpenSt=useSkinToneFanOpenState(),isOpen=_useSkinToneFanOpenSt[0],setIsOpen=_useSkinToneFanOpenSt[1],_useActiveSkinToneSta=useActiveSkinToneState(),activeSkinTone=_useActiveSkinToneSta[0],setActiveSkinTone=_useActiveSkinToneSta[1],onSkinToneChange=function useOnSkinToneChangeConfig(){return useMutableConfig().current.onSkinToneChange||function(){}}(),closeAllOpenToggles=useCloseAllOpenToggles(),focusSearchInput=useFocusSearchInput();if(isDisabled)return null;var fullWidth=28*skinToneVariations.length+"px",expandedSize=isOpen?fullWidth:"28px",vertical=direction===SkinTonePickerDirection.VERTICAL;return(0,react.createElement)(Relative,{className:cx(styles$d.skinTones,vertical&&styles$d.vertical,isOpen&&styles$d.open,vertical&&isOpen&&styles$d.verticalShadow),style:vertical?{flexBasis:expandedSize,height:expandedSize}:{flexBasis:expandedSize}},(0,react.createElement)("div",{className:cx(styles$d.select),ref:SkinTonePickerRef},skinToneVariations.map(function(skinToneVariation,i){var active=skinToneVariation===activeSkinTone;return(0,react.createElement)(BtnSkinToneVariation,{key:skinToneVariation,skinToneVariation,isOpen,style:{transform:cx(vertical?"translateY(-"+i*(isOpen?28:0)+"px)":"translateX(-"+i*(isOpen?28:0)+"px)",isOpen&&active&&"scale(1.3)")},isActive:active,onClick:function onClick(){isOpen?(setActiveSkinTone(skinToneVariation),onSkinToneChange(skinToneVariation),focusSearchInput()):setIsOpen(!0),closeAllOpenToggles()}})})))}!function(SkinTonePickerDirection){SkinTonePickerDirection.VERTICAL="epr-vertical",SkinTonePickerDirection.HORIZONTAL="epr-horizontal"}(SkinTonePickerDirection||(SkinTonePickerDirection={}));var styles$d=stylesheet.create({skinTones:{".":"epr-skin-tones","--":{"--epr-skin-tone-size":"15px"},display:"flex",alignItems:"center",justifyContent:"flex-end",transition:"all 0.3s ease-in-out",padding:"10px 0"},vertical:{padding:"9px",alignItems:"flex-end",flexDirection:"column",borderRadius:"6px",border:"1px solid var(--epr-bg-color)"},verticalShadow:{boxShadow:"0px 0 7px var(--epr-picker-border-color)"},open:{backdropFilter:"blur(5px)",background:"var(--epr-skin-tone-picker-menu-color)",".epr-active":{border:"1px solid var(--epr-active-skin-tone-indicator-border-color)"}},select:{".":"epr-skin-tone-select",position:"relative",width:"var(--epr-skin-tone-size)",height:"var(--epr-skin-tone-size)"}});function Preview(){var previewConfig=usePreviewConfig(),isSkinToneInPreview=useIsSkinToneInPreview(),reactionsOpen=useReactionsModeState()[0];return previewConfig.showPreview?(0,react.createElement)(Flex,{className:cx(styles$e.preview,commonInteractionStyles.hiddenOnReactions,reactionsOpen&&styles$e.hideOnReactions)},(0,react.createElement)(PreviewBody,null),(0,react.createElement)(Space,null),isSkinToneInPreview?(0,react.createElement)(SkinTonePickerMenu,null):null):null}function PreviewBody(){var _previewEmoji$unified,previewConfig=usePreviewConfig(),_useState=(0,react.useState)(null),previewEmoji=_useState[0],setPreviewEmoji=_useState[1],emojiStyle=useEmojiStyleConfig(),variationPickerEmoji=useEmojiVariationPickerState()[0],getEmojiUrl=useGetEmojiUrlConfig();useEmojiPreviewEvents(previewConfig.showPreview,setPreviewEmoji);var emoji=emojiByUnified(null!=(_previewEmoji$unified=null==previewEmoji?void 0:previewEmoji.unified)?_previewEmoji$unified:null==previewEmoji?void 0:previewEmoji.originalUnified),show=null!=emoji&&null!=previewEmoji;return(0,react.createElement)(function PreviewContent(){var defaultEmoji=null!=variationPickerEmoji?variationPickerEmoji:emojiByUnified(previewConfig.defaultEmoji);if(!defaultEmoji)return null;var defaultText=variationPickerEmoji?emojiName(variationPickerEmoji):previewConfig.defaultCaption;return(0,react.createElement)(react.Fragment,null,(0,react.createElement)("div",null,show?(0,react.createElement)(ViewOnlyEmoji,{unified:null==previewEmoji?void 0:previewEmoji.unified,emoji,emojiStyle,size:45,getEmojiUrl,className:cx(styles$e.emoji)}):defaultEmoji?(0,react.createElement)(ViewOnlyEmoji,{unified:emojiUnified(defaultEmoji),emoji:defaultEmoji,emojiStyle,size:45,getEmojiUrl,className:cx(styles$e.emoji)}):null),(0,react.createElement)("div",{className:cx(styles$e.label)},show?emojiName(emoji):defaultText))},null)}var styles$e=stylesheet.create({preview:{alignItems:"center",borderTop:"1px solid var(--epr-preview-border-color)",height:"var(--epr-preview-height)",padding:"0 var(--epr-horizontal-padding)",position:"relative",zIndex:"var(--epr-preview-z-index)"},label:{color:"var(--epr-preview-text-color)",fontSize:"var(--epr-preview-text-size)",padding:"var(--epr-preview-text-padding)",textTransform:"capitalize"},emoji:{padding:"0"},hideOnReactions:{opacity:"0",transition:"opacity 0.5s ease-in-out"}});function categoryNameFromDom($category){var _$category$getAttribu;return null!=(_$category$getAttribu=null==$category?void 0:$category.getAttribute("data-name"))?_$category$getAttribu:null}function useShouldHideCustomEmojis(){var customCategoryConfig=function useCustomEmojisConfig(){return usePickerConfig().customEmojis}();return!!customCategoryConfig&&0===customCategoryConfig.length}function CategoryButton(_ref){var _cx,isActiveCategory=_ref.isActiveCategory,category=_ref.category,allowNavigation=_ref.allowNavigation,categoryConfig=_ref.categoryConfig,onClick=_ref.onClick;return(0,react.createElement)(Button,{tabIndex:allowNavigation?0:-1,className:cx(styles$f.catBtn,commonInteractionStyles.categoryBtn,"epr-icn-"+category,(_cx={},_cx[ClassNames.active]=isActiveCategory,_cx)),onClick,"aria-label":categoryNameFromCategoryConfig(categoryConfig),"aria-selected":isActiveCategory,role:"tab","aria-controls":"epr-category-nav-id"})}var DarkActivePositionY={backgroundPositionY:"calc(var(--epr-category-navigation-button-size) * 3)"},DarkPositionY={backgroundPositionY:"calc(var(--epr-category-navigation-button-size) * 2)"},DarkInactivePosition={":not(.epr-search-active)":{catBtn:{":hover":DarkActivePositionY,"&.epr-active":DarkActivePositionY}}},styles$f=stylesheet.create(_extends({catBtn:{".":"epr-cat-btn",display:"inline-block",transition:"opacity 0.2s ease-in-out",position:"relative",height:"var(--epr-category-navigation-button-size)",width:"var(--epr-category-navigation-button-size)",backgroundSize:"calc(var(--epr-category-navigation-button-size) * 10)",outline:"none",backgroundPosition:"0 0",backgroundImage:"url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI2LjMuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSIyMDBweCIgaGVpZ2h0PSI4MHB4IiB2aWV3Qm94PSIwIDAgMjAwIDgwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyMDAgODAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8ZyBpZD0iTGF5ZXJfMTEiPgoJPGc+CgkJPHBhdGggZmlsbD0iIzMzNzFCNyIgc3Ryb2tlPSIjMzM3MUI3IiBzdHJva2Utd2lkdGg9IjAuMSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTIuOCwyOS41YzAuNiwwLDEuMS0wLjUsMS4xLTEuMQoJCQljMC0wLjYtMC41LTEuMi0xLjEtMS4yYy0wLjYsMC0xLjIsMC41LTEuMiwxLjJDMTEuNiwyOSwxMi4yLDI5LjUsMTIuOCwyOS41eiBNMTIuOCwyOGMwLjIsMCwwLjQsMC4yLDAuNCwwLjQKCQkJYzAsMC4yLTAuMiwwLjQtMC40LDAuNGMtMC4yLDAtMC40LTAuMi0wLjQtMC40QzEyLjQsMjguMSwxMi42LDI4LDEyLjgsMjh6Ii8+CgkJPHBhdGggZmlsbD0iIzMzNzFCNyIgc3Ryb2tlPSIjMzM3MUI3IiBzdHJva2Utd2lkdGg9IjAuMSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTAsMjNjLTMuOCwwLTcsMy4xLTcsN2MwLDMuOCwzLjEsNyw3LDcKCQkJczctMy4xLDctN0MxNywyNi4yLDEzLjgsMjMsMTAsMjN6IE0xMCwzNi4yYy0zLjQsMC02LjItMi44LTYuMi02LjJjMC0zLjQsMi44LTYuMiw2LjItNi4yczYuMiwyLjgsNi4yLDYuMgoJCQlDMTYuMiwzMy40LDEzLjQsMzYuMiwxMCwzNi4yeiIvPgoJCTxwYXRoIGZpbGw9IiMzMzcxQjciIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTE0LjYsMzEuMmMtMC4xLTAuMS0wLjItMC4yLTAuMy0wLjJINS43CgkJCWMtMC4xLDAtMC4yLDAuMS0wLjMsMC4yYy0wLjEsMC4xLTAuMSwwLjIsMCwwLjRjMC43LDIsMi41LDMuMyw0LjYsMy4zczMuOS0xLjMsNC42LTMuM0MxNC43LDMxLjUsMTQuNywzMS4zLDE0LjYsMzEuMnogTTEwLDM0LjEKCQkJYy0xLjYsMC0zLTAuOS0zLjctMi4yaDcuM0MxMywzMy4yLDExLjYsMzQuMSwxMCwzNC4xeiIvPgoJCTxwYXRoIGZpbGw9IiMzMzcxQjciIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTcuMiwyOS41YzAuNiwwLDEuMi0wLjUsMS4yLTEuMQoJCQljMC0wLjYtMC41LTEuMi0xLjItMS4yYy0wLjYsMC0xLjEsMC41LTEuMSwxLjJDNi4xLDI5LDYuNiwyOS41LDcuMiwyOS41eiBNNy4yLDI4YzAuMiwwLDAuNCwwLjIsMC40LDAuNGMwLDAuMi0wLjIsMC40LTAuNCwwLjQKCQkJYy0wLjIsMC0wLjQtMC4yLTAuNC0wLjRDNi44LDI4LjEsNywyOCw3LjIsMjh6Ii8+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBkPSJNNjQuMSwzMy40bDIuMywwYzAuMiwwLDAuNCwwLjIsMC40LDAuNHYyLjFjMCwwLjItMC4yLDAuNC0wLjQsMC40aC0yLjMKCQkJCWMtMC4yLDAtMC40LTAuMi0wLjQtMC40di0yLjFDNjMuNywzMy42LDYzLjgsMzMuNCw2NC4xLDMzLjR6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgZD0iTTczLjUsMzMuNWgyLjRjMC4yLDAsMC40LDAuMiwwLjQsMC40djJjMCwwLjItMC4yLDAuNC0wLjQsMC40aC0yLjQKCQkJCWMtMC4yLDAtMC40LTAuMi0wLjQtMC40bDAtMkM3My4xLDMzLjYsNzMuMywzMy41LDczLjUsMzMuNXoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBkPSJNNjMuNywyOC40aDEyLjZ2NUg2My43VjI4LjR6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgZD0iTTY1LjUsMjMuNmg4LjljMSwwLDEuOSwwLjgsMS45LDEuOXYzLjFINjMuN3YtMy4xQzYzLjcsMjQuNSw2NC41LDIzLjYsNjUuNSwyMy42eiIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjMzM3MUI3IiBjeD0iNjYuMiIgY3k9IjMwLjkiIHJ4PSIwLjkiIHJ5PSIxIi8+CgkJCTxlbGxpcHNlIGZpbGw9IiMzMzcxQjciIGN4PSI3My44IiBjeT0iMzAuOSIgcng9IjAuOSIgcnk9IjEiLz4KCQk8L2c+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBkPSJNOTYuNCwzMGMwLDMuNi0yLjksNi41LTYuNCw2LjVzLTYuNC0yLjktNi40LTYuNXMyLjktNi41LDYuNC02LjVTOTYuNCwyNi40LDk2LjQsMzB6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgZD0iTTk2LjMsMjguNmMwLDAsMCwwLjEsMCwwLjFjLTAuOSwwLjEtMi45LDAuMS00LjYtMS4xYy0xLjEtMC44LTItMS43LTIuNi0yLjUKCQkJCWMtMC4zLTAuNC0wLjYtMC44LTAuNy0xYy0wLjEtMC4xLTAuMS0wLjEtMC4xLTAuMmMwLjUtMC4xLDEuMi0wLjIsMi0wLjFjMS4yLDAsMi41LDAuMywzLjUsMS4xYzEsMC44LDEuNywxLjgsMi4xLDIuOAoJCQkJQzk2LjEsMjcuOSw5Ni4yLDI4LjMsOTYuMywyOC42eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik04NCwzMi4yYzAsMCwwLTAuMSwwLTAuMWMwLjktMC4yLDIuOS0wLjQsNC43LDAuNmMxLjEsMC43LDEuOSwxLjUsMi40LDIuMwoJCQkJYzAuNCwwLjUsMC42LDEsMC43LDEuM2MtMC40LDAuMS0xLDAuMi0xLjcsMC4zYy0xLDAtMi4xLTAuMS0zLjItMC44cy0xLjktMS42LTIuNC0yLjVDODQuMiwzMi44LDg0LjEsMzIuNSw4NCwzMi4yeiIvPgoJCTwvZz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTExNi4zLDI2LjhsLTEuNCwybC0wLjgtMC44bC0wLjYtMC42bDAsMC45bC0wLjEsOC4yaC02LjgKCQkJCWwtMC4xLTguMmwwLTAuOWwtMC42LDAuNmwtMC44LDAuOGwtMS40LTJsMi42LTIuOWMwLjEtMC4xLDAuMi0wLjEsMC4zLTAuMWgxLjNsMC40LDAuN2MwLjcsMS4zLDIuNiwxLjMsMy4zLTAuMWwwLjMtMC42aDEuMgoJCQkJYzAuMSwwLDAuMiwwLDAuMywwLjFsMC4zLTAuM2wtMC4zLDAuM0wxMTYuMywyNi44eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik0xMTAuMSwyNy43aDJ2MC45YzAsMC40LTAuNCwwLjctMSwwLjdjLTAuNiwwLTEtMC4zLTEtMC43TDExMC4xLDI3LjdMMTEwLjEsMjcuN3oiLz4KCQk8L2c+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBkPSJNMTI2LjgsMzQuM2MwLDEuMi0xLDIuMi0yLjIsMi4ycy0yLjItMS0yLjItMi4yczEtMi4yLDIuMi0yLjJTMTI2LjgsMzMuMSwxMjYuOCwzNC4zeiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik0xMzcuNiwzNC4zYzAsMS4yLTEsMi4yLTIuMiwyLjJjLTEuMiwwLTIuMi0xLTIuMi0yLjJzMS0yLjIsMi4yLTIuMgoJCQkJQzEzNi42LDMyLjEsMTM3LjYsMzMuMSwxMzcuNiwzNC4zeiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik0xMjYuOCwyNC40djkuOSIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik0xMzcuNywyNC40djkuOSIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik0xMjYuOCwyMy41aDEwLjh2Mi43aC0xMC44QzEyNi44LDI2LjIsMTI2LjgsMjMuNSwxMjYuOCwyMy41eiIvPgoJCTwvZz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSIjMzM3MUI3IiBkPSJNMTcwLjgsMjMuMUwxNzAuOCwyMy4xYy0wLjMsMC0wLjUsMC0wLjgsMGMtMi4xLDAtNCwxLTUuMywyLjVsLTAuMSwwbC0wLjEtMC4xbC0xLTEuMmwtMC4zLDMuNGwzLjQsMC4zCgkJCQlsLTEuMS0xLjNsLTAuMS0wLjFsMC4xLTAuMWMxLjEtMS41LDMtMi4zLDUtMi4xbDAsMGMzLjIsMC4zLDUuNSwzLjEsNS4yLDYuM2MtMC4zLDMtMy4xLDUuMy02LjEsNS4xYy0zLjEtMC4yLTUuNC0yLjktNS4zLTYKCQkJCWwtMS4zLTAuMWMtMC4yLDMuOCwyLjYsNy4xLDYuMyw3LjRjMy45LDAuMyw3LjMtMi42LDcuNi02LjVDMTc3LjIsMjYuOCwxNzQuNCwyMy41LDE3MC44LDIzLjF6Ii8+CgkJCTxwYXRoIGZpbGw9IiMzMzcxQjciIGQ9Ik0xNzAuMywyNy40YzAtMC4zLTAuMy0wLjYtMC42LTAuNnMtMC42LDAuMy0wLjYsMC42djMuMmMwLDAuMiwwLjEsMC4zLDAuMiwwLjRjMC4xLDAuMSwwLjMsMC4yLDAuNCwwLjIKCQkJCWgyLjRjMC40LDAsMC42LTAuMywwLjYtMC42YzAtMC40LTAuMy0wLjYtMC42LTAuNmgtMS42aC0wLjJ2LTAuMkwxNzAuMywyNy40TDE3MC4zLDI3LjR6Ii8+CgkJPC9nPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgZD0iTTE4Ni4yLDIzLjRoNy43YzEuNSwwLDIuNywxLjIsMi43LDIuN3Y3LjdjMCwxLjUtMS4yLDIuNy0yLjcsMi43aC03LjcKCQkJCWMtMS41LDAtMi43LTEuMi0yLjctMi43di03LjdDMTgzLjQsMjQuNiwxODQuNywyMy40LDE4Ni4yLDIzLjR6Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiMzMzcxQjciIGN4PSIxODYiIGN5PSIyOC45IiByeD0iMC43IiByeT0iMC43Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiMzMzcxQjciIGN4PSIxOTQiIGN5PSIyNi43IiByeD0iMC43IiByeT0iMC43Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMTg2LDMzLjNsMC40LTAuM2MwLjQtMC4zLDEtMC4zLDEuNS0wLjFsMSwwLjQKCQkJCWMwLjUsMC4yLDEsMC4yLDEuNS0wLjFsMC44LTAuNWMwLjQtMC4zLDEtMC4zLDEuNS0wLjFsMS44LDAuOCIvPgoJCTwvZz4KCTwvZz4KCTxwYXRoIGZpbGw9IiMzMzcxQjciIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLXdpZHRoPSIwLjI1IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0xNTYsMjQuM2MtMC4yLTAuMS0wLjQtMC4xLTAuNSwwCgkJYzAsMC0wLjIsMC4xLTAuOSwwLjJjLTAuNywwLTIuNC0wLjEtMy44LTAuNmMtMC44LTAuMy0xLjctMC41LTIuNS0wLjVjLTAuMiwwLTAuNCwwLTAuNSwwYy0xLjMsMC0yLjUsMC4zLTMuNiwxCgkJYy0wLjIsMC4xLTAuMiwwLjItMC4yLDAuNHYxMS42YzAsMC4zLDAuMSwwLjUsMC4zLDAuNWMwLjYsMCwwLjUtMC40LDAuNS0wLjZ2LTUuN2MwLjctMC4zLDMuMi0xLjEsNS44LTAuMQoJCWMxLjYsMC42LDMuNSwwLjcsNC4zLDAuN2MwLjgsMCwxLjMtMC4zLDEuMy0wLjNjMC4yLTAuMSwwLjMtMC4yLDAuMy0wLjR2LTUuN0MxNTYuMiwyNC42LDE1Ni4xLDI0LjQsMTU2LDI0LjN6IE0xNTUuNiwzMC4yCgkJYy0wLjEsMC0wLjcsMC4xLTEsMC4xYy0wLjcsMC0yLjQtMC4xLTMuOC0wLjZjLTIuNS0xLTUtMC41LTYuMi0wLjF2LTQuOWMwLjktMC41LDIuMi0wLjcsMy4yLTAuN2MwLjEsMCwwLjMsMCwwLjQsMAoJCWMwLjcsMCwxLjUsMC4yLDIuMiwwLjRjMS42LDAuNiwzLjUsMC43LDQuMywwLjdjMC4yLDAsMC44LDAsMS0wLjFWMzAuMnoiLz4KCTxnPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgZD0iTTQ4LjEsMjMuNWgzLjdjMi41LDAsNC41LDIsNC41LDQuNWMwLDAuNS0wLjQsMC45LTAuOSwwLjlINDQuNWMtMC41LDAtMC45LTAuNC0wLjktMC45CgkJCUM0My42LDI1LjUsNDUuNiwyMy41LDQ4LjEsMjMuNXoiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTQzLjUsMjguOGMtMC4yLDAuMS0wLjUsMS4yLDAsMS41YzEuNCwxLDguNSwwLjgsMTEuMywwLjYKCQkJYzAuOC0wLjEsMS42LTAuNCwxLjctMS4yYzAtMC4zLTAuMS0wLjYtMC42LTAuOSIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSwzMC42TDQzLjMsMzFjLTAuMiwwLjUsMC4yLDEsMC43LDAuOWMwLjMtMC4xLDAuNSwwLDAuNywwLjMKCQkJbDAuMSwwLjJjMC4zLDAuNSwxLDAuNiwxLjUsMC4ybDAsMGMwLjMtMC4yLDAuNy0wLjMsMS0wLjJsMC44LDAuM2MwLjQsMC4yLDAuOCwwLjEsMS4yLDBsMC41LTAuMmMwLjQtMC4yLDAuOS0wLjIsMS4zLDBsMC41LDAuMgoJCQljMC40LDAuMiwwLjgsMC4yLDEuMiwwbDAuMi0wLjFjMC4zLTAuMiwwLjgtMC4yLDEuMSwwLjFsMC4yLDAuMmMwLjMsMC4zLDAuOCwwLjIsMS0wLjJsMC4xLTAuMmMwLjEtMC4yLDAtMC4zLDAuMi0wLjMKCQkJYzAuNSwwLDEuMi0wLjMsMS4xLTAuN2wtMC40LTEuMSIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSwzMi4yYy0wLjEsMC4yLTAuMywwLjgsMCwxLjFjMC4zLDAuNCwzLDEuMSw2LjQsMS4xCgkJCWMyLjIsMCw0LjYtMC4zLDYtMC42YzAuNS0wLjEsMC45LTAuNSwwLjgtMC45YzAtMC4yLTAuMi0wLjUtMC40LTAuNyIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSwzMy4zYzAsMC41LDAuNiwyLjMsMS4zLDIuN2MxLjgsMC44LDUuNywwLjcsOC4xLDAuNQoJCQljMS4zLTAuMSwyLjUtMC43LDMuMi0xLjhjMC4zLTAuNSwwLjUtMSwwLjUtMS40Ii8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjUxLjYiIGN5PSIyNi41IiByeD0iMC4zIiByeT0iMC40Ii8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjUzIiBjeT0iMjUiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjMzM3MUI3IiBjeD0iNTMiIGN5PSIyNy4yIiByeD0iMC4zIiByeT0iMC40Ii8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjU0LjMiIGN5PSIyNi41IiByeD0iMC4zIiByeT0iMC40Ii8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjUwLjkiIGN5PSIyNSIgcng9IjAuMyIgcnk9IjAuNCIvPgoJPC9nPgoJPGc+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBkPSJNMjQuMiwzMXYtNy42YzAuMSwwLjEsMC44LDAuOSwyLjgsMy4xYzIuNS0xLjYsNS42LTAuNyw2LjksMGwyLjQtMy4xdjcuMQoJCQljMCwxLjItMC4xLDIuNS0wLjksMy40Yy0xLDEuMi0yLjcsMi41LTUuMywyLjVjLTIuOSwwLTQuNS0xLjUtNS4zLTIuOUMyNC4yLDMyLjksMjQuMiwzMiwyNC4yLDMxeiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMjEuMiwzMGw1LjQsMS4yIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0yMS4yLDM0LjFsNS40LTEuMiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzguOCwzMGwtNS40LDEuMiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzguOCwzNC4xbC01LjQtMS4yIi8+CgkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiMzMzcxQjciIGQ9Ik0yOS41LDMyLjRMMjksMzEuN2MtMC4yLTAuMywwLTAuNiwwLjMtMC42aDEuNAoJCQljMC4zLDAsMC41LDAuNCwwLjMsMC42bC0wLjcsMWwwLDBjLTAuNywxLjItMi42LDEuMS0zLjEtMC4zbC0wLjEtMC4yYy0wLjEtMC4yLDAtMC40LDAuMi0wLjVzMC40LDAsMC41LDAuMmwwLjEsMC4yCgkJCUMyOC4zLDMyLjgsMjkuMSwzMi45LDI5LjUsMzIuNHoiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTMyLjQsMzIuMWwtMC4xLDAuMmMtMC40LDEtMS44LDEuMS0yLjMsMC4yIi8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjI3LjYiIGN5PSIyOS43IiByeD0iMC43IiByeT0iMC43Ii8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjMyLjQiIGN5PSIyOS43IiByeD0iMC43IiByeT0iMC43Ii8+Cgk8L2c+Cgk8Zz4KCQk8cGF0aCBmaWxsPSIjQzBDMEJGIiBzdHJva2U9IiNDMEMwQkYiIHN0cm9rZS13aWR0aD0iMC4xIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0xMi44LDQ5LjVjMC42LDAsMS4xLTAuNSwxLjEtMS4xCgkJCWMwLTAuNi0wLjUtMS4yLTEuMS0xLjJjLTAuNiwwLTEuMiwwLjUtMS4yLDEuMkMxMS42LDQ5LDEyLjIsNDkuNSwxMi44LDQ5LjV6IE0xMi44LDQ4YzAuMiwwLDAuNCwwLjIsMC40LDAuNAoJCQljMCwwLjItMC4yLDAuNC0wLjQsMC40Yy0wLjIsMC0wLjQtMC4yLTAuNC0wLjRDMTIuNCw0OC4xLDEyLjYsNDgsMTIuOCw0OHoiLz4KCQk8cGF0aCBmaWxsPSIjQzBDMEJGIiBzdHJva2U9IiNDMEMwQkYiIHN0cm9rZS13aWR0aD0iMC4xIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0xNC42LDUxLjJjLTAuMS0wLjEtMC4yLTAuMi0wLjMtMC4ySDUuNwoJCQljLTAuMSwwLTAuMiwwLjEtMC4zLDAuMmMtMC4xLDAuMS0wLjEsMC4yLDAsMC40YzAuNywyLDIuNSwzLjMsNC42LDMuM3MzLjktMS4zLDQuNi0zLjNDMTQuNyw1MS41LDE0LjcsNTEuMywxNC42LDUxLjJ6IE0xMCw1NC4xCgkJCWMtMS42LDAtMy0wLjktMy43LTIuMmg3LjNDMTMsNTMuMiwxMS42LDU0LjEsMTAsNTQuMXoiLz4KCQk8cGF0aCBmaWxsPSIjQzBDMEJGIiBzdHJva2U9IiNDMEMwQkYiIHN0cm9rZS13aWR0aD0iMC4xIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik03LjIsNDkuNWMwLjYsMCwxLjItMC41LDEuMi0xLjEKCQkJYzAtMC42LTAuNS0xLjItMS4yLTEuMmMtMC42LDAtMS4xLDAuNS0xLjEsMS4yQzYuMSw0OSw2LjYsNDkuNSw3LjIsNDkuNXogTTcuMiw0OGMwLjIsMCwwLjQsMC4yLDAuNCwwLjRjMCwwLjItMC4yLDAuNC0wLjQsMC40CgkJCWMtMC4yLDAtMC40LTAuMi0wLjQtMC40QzYuOCw0OC4xLDcsNDgsNy4yLDQ4eiIvPgoJCTxwYXRoIGZpbGw9IiNDMEMwQkYiIHN0cm9rZT0iI0MwQzBCRiIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTEwLDQzYy0zLjgsMC03LDMuMS03LDdjMCwzLjgsMy4xLDcsNyw3CgkJCXM3LTMuMSw3LTdDMTcsNDYuMiwxMy44LDQzLDEwLDQzeiBNMTAsNTYuMmMtMy40LDAtNi4yLTIuOC02LjItNi4yYzAtMy40LDIuOC02LjIsNi4yLTYuMnM2LjIsMi44LDYuMiw2LjIKCQkJQzE2LjIsNTMuNCwxMy40LDU2LjIsMTAsNTYuMnoiLz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIGQ9Ik02NC4xLDUzLjRsMi4zLDBjMC4yLDAsMC40LDAuMiwwLjQsMC40djIuMWMwLDAuMi0wLjIsMC40LTAuNCwwLjRoLTIuMwoJCQkJYy0wLjIsMC0wLjQtMC4yLTAuNC0wLjR2LTIuMUM2My43LDUzLjYsNjMuOCw1My40LDY0LjEsNTMuNHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBkPSJNNzMuNSw1My41aDIuNGMwLjIsMCwwLjQsMC4yLDAuNCwwLjR2MmMwLDAuMi0wLjIsMC40LTAuNCwwLjRoLTIuNAoJCQkJYy0wLjIsMC0wLjQtMC4yLTAuNC0wLjRsMC0yQzczLjEsNTMuNiw3My4zLDUzLjUsNzMuNSw1My41eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIGQ9Ik02My43LDQ4LjRoMTIuNnY1SDYzLjdWNDguNHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBkPSJNNjUuNSw0My42aDguOWMxLDAsMS45LDAuOCwxLjksMS45djMuMUg2My43di0zLjFDNjMuNyw0NC41LDY0LjUsNDMuNiw2NS41LDQzLjZ6Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiNDMEMwQkYiIGN4PSI2Ni4yIiBjeT0iNTAuOSIgcng9IjAuOSIgcnk9IjEiLz4KCQkJPGVsbGlwc2UgZmlsbD0iI0MwQzBCRiIgY3g9IjczLjgiIGN5PSI1MC45IiByeD0iMC45IiByeT0iMSIvPgoJCTwvZz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIGQ9Ik05Ni40LDUwYzAsMy42LTIuOSw2LjUtNi40LDYuNXMtNi40LTIuOS02LjQtNi41czIuOS02LjUsNi40LTYuNVM5Ni40LDQ2LjQsOTYuNCw1MHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBkPSJNOTYuMyw0OC42YzAsMCwwLDAuMSwwLDAuMWMtMC45LDAuMS0yLjksMC4xLTQuNi0xLjJjLTEuMS0wLjgtMi0xLjctMi42LTIuNQoJCQkJYy0wLjMtMC40LTAuNi0wLjgtMC43LTFjLTAuMS0wLjEtMC4xLTAuMi0wLjEtMC4yYzAuNS0wLjEsMS4yLTAuMiwyLTAuMmMxLjIsMCwyLjUsMC4zLDMuNSwxLjFjMSwwLjgsMS43LDEuOCwyLjEsMi44CgkJCQlDOTYuMSw0Ny45LDk2LjIsNDguMyw5Ni4zLDQ4LjZ6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTg0LDUyLjJjMCwwLDAtMC4xLDAtMC4xYzAuOS0wLjIsMi45LTAuNCw0LjcsMC42YzEuMSwwLjcsMS45LDEuNSwyLjQsMi4zCgkJCQljMC40LDAuNSwwLjYsMSwwLjcsMS4zYy0wLjQsMC4xLTEsMC4yLTEuNywwLjNjLTEsMC0yLjEtMC4xLTMuMi0wLjhzLTEuOS0xLjYtMi40LTIuNUM4NC4yLDUyLjgsODQuMSw1Mi41LDg0LDUyLjJ6Ii8+CgkJPC9nPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMTE2LjMsNDYuOGwtMS40LDJsLTAuOC0wLjhsLTAuNi0wLjdsMCwwLjlsLTAuMSw4LjJoLTYuOAoJCQkJbC0wLjEtOC4ybDAtMC45bC0wLjYsMC43bC0wLjgsMC44bC0xLjQtMmwyLjYtMi45YzAuMS0wLjEsMC4yLTAuMSwwLjMtMC4xaDEuM2wwLjQsMC43YzAuNywxLjMsMi42LDEuMywzLjMtMC4xbDAuMy0wLjZoMS4yCgkJCQljMC4xLDAsMC4yLDAsMC4zLDAuMWwwLjMtMC4zbC0wLjMsMC4zTDExNi4zLDQ2Ljh6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTExMC4xLDQ3LjdoMnYwLjljMCwwLjQtMC40LDAuNy0xLDAuN2MtMC42LDAtMS0wLjMtMS0wLjdMMTEwLjEsNDcuN0wxMTAuMSw0Ny43eiIvPgoJCTwvZz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIGQ9Ik0xMjYuOCw1NC4zYzAsMS4yLTEsMi4yLTIuMiwyLjJzLTIuMi0xLTIuMi0yLjJzMS0yLjIsMi4yLTIuMlMxMjYuOCw1My4xLDEyNi44LDU0LjN6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTEzNy42LDU0LjNjMCwxLjItMSwyLjItMi4yLDIuMmMtMS4yLDAtMi4yLTEtMi4yLTIuMnMxLTIuMiwyLjItMi4yCgkJCQlDMTM2LjYsNTIuMSwxMzcuNiw1My4xLDEzNy42LDU0LjN6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTEyNi44LDQ0LjR2OS45Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTEzNy43LDQ0LjR2OS45Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTEyNi44LDQzLjVoMTAuOHYyLjdoLTEwLjhDMTI2LjgsNDYuMiwxMjYuOCw0My41LDEyNi44LDQzLjV6Ii8+CgkJPC9nPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9IiNDMEMwQkYiIGQ9Ik0xNzAuOCw0My4xTDE3MC44LDQzLjFjLTAuMywwLTAuNSwwLTAuOCwwYy0yLjEsMC00LDEtNS4zLDIuNWwtMC4xLDBsLTAuMS0wLjFsLTEtMS4ybC0wLjMsMy40bDMuNCwwLjMKCQkJCWwtMS4xLTEuM2wtMC4xLTAuMWwwLjEtMC4xYzEuMS0xLjUsMy0yLjMsNS0yLjFsMCwwYzMuMiwwLjMsNS41LDMuMSw1LjIsNi4zYy0wLjMsMy0zLjEsNS4zLTYuMSw1LjFjLTMuMS0wLjItNS40LTIuOS01LjMtNgoJCQkJbC0xLjMtMC4xYy0wLjIsMy44LDIuNiw3LjEsNi4zLDcuNGMzLjksMC4zLDcuMy0yLjYsNy42LTYuNUMxNzcuMiw0Ni44LDE3NC40LDQzLjUsMTcwLjgsNDMuMXoiLz4KCQkJPHBhdGggZmlsbD0iI0MwQzBCRiIgZD0iTTE3MC4zLDQ3LjRjMC0wLjMtMC4zLTAuNi0wLjYtMC42cy0wLjYsMC4zLTAuNiwwLjZ2My4yYzAsMC4yLDAuMSwwLjMsMC4yLDAuNGMwLjEsMC4xLDAuMywwLjIsMC40LDAuMgoJCQkJaDIuNGMwLjQsMCwwLjYtMC4zLDAuNi0wLjZjMC0wLjMtMC4zLTAuNi0wLjYtMC42aC0xLjZoLTAuMnYtMC4yTDE3MC4zLDQ3LjRMMTcwLjMsNDcuNHoiLz4KCQk8L2c+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBkPSJNMTg2LjIsNDMuNGg3LjdjMS41LDAsMi43LDEuMiwyLjcsMi43djcuN2MwLDEuNS0xLjIsMi43LTIuNywyLjdoLTcuNwoJCQkJYy0xLjUsMC0yLjctMS4yLTIuNy0yLjd2LTcuN0MxODMuNCw0NC43LDE4NC43LDQzLjQsMTg2LjIsNDMuNHoiLz4KCQkJPGVsbGlwc2UgZmlsbD0iI0MwQzBCRiIgY3g9IjE4NiIgY3k9IjQ4LjkiIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQkJPGVsbGlwc2UgZmlsbD0iI0MwQzBCRiIgY3g9IjE5NCIgY3k9IjQ2LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0xODYsNTMuM2wwLjQtMC4zYzAuNC0wLjMsMS0wLjMsMS41LTAuMWwxLDAuNAoJCQkJYzAuNSwwLjIsMSwwLjIsMS41LTAuMWwwLjgtMC41YzAuNC0wLjMsMS0wLjMsMS41LTAuMWwxLjgsMC44Ii8+CgkJPC9nPgoJPC9nPgoJPHBhdGggZmlsbD0iI0MwQzBCRiIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2Utd2lkdGg9IjAuMjUiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTE1Niw0NC4zYy0wLjItMC4xLTAuNC0wLjEtMC41LDAKCQljMCwwLTAuMiwwLjEtMC45LDAuMmMtMC43LDAtMi40LTAuMS0zLjgtMC42Yy0wLjgtMC4zLTEuNy0wLjUtMi41LTAuNWMtMC4yLDAtMC40LDAtMC41LDBjLTEuMywwLTIuNSwwLjMtMy42LDEKCQljLTAuMiwwLjEtMC4yLDAuMi0wLjIsMC40djExLjZjMCwwLjMsMC4xLDAuNSwwLjMsMC41YzAuNiwwLDAuNS0wLjQsMC41LTAuNnYtNS43YzAuNy0wLjMsMy4yLTEuMSw1LjgtMC4xCgkJYzEuNiwwLjYsMy41LDAuNyw0LjMsMC43YzAuOCwwLDEuMy0wLjMsMS4zLTAuM2MwLjItMC4xLDAuMy0wLjIsMC4zLTAuNHYtNS43QzE1Ni4yLDQ0LjYsMTU2LjEsNDQuNCwxNTYsNDQuM3ogTTE1NS42LDUwLjIKCQljLTAuMSwwLTAuNywwLjEtMSwwLjFjLTAuNywwLTIuNC0wLjEtMy44LTAuNmMtMi41LTEtNS0wLjUtNi4yLTAuMXYtNC45YzAuOS0wLjUsMi4yLTAuNywzLjItMC43YzAuMSwwLDAuMywwLDAuNCwwCgkJYzAuNywwLDEuNSwwLjIsMi4yLDAuNGMxLjYsMC42LDMuNSwwLjcsNC4zLDAuN2MwLjIsMCwwLjgsMCwxLTAuMVY1MC4yeiIvPgoJPGc+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBkPSJNNDguMSw0My41aDMuN2MyLjUsMCw0LjUsMiw0LjUsNC41YzAsMC41LTAuNCwwLjktMC45LDAuOUg0NC41Yy0wLjUsMC0wLjktMC40LTAuOS0wLjkKCQkJQzQzLjYsNDUuNSw0NS42LDQzLjUsNDguMSw0My41eiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSw0OC44Yy0wLjIsMC4xLTAuNSwxLjIsMCwxLjVjMS40LDEsOC41LDAuOCwxMS4zLDAuNgoJCQljMC44LTAuMSwxLjYtMC40LDEuNy0xLjJjMC0wLjMtMC4xLTAuNi0wLjYtMC45Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDUwLjZMNDMuMyw1MWMtMC4yLDAuNSwwLjIsMSwwLjcsMC45YzAuMy0wLjEsMC41LDAsMC43LDAuMwoJCQlsMC4xLDAuMmMwLjMsMC41LDEsMC42LDEuNSwwLjJsMCwwYzAuMy0wLjIsMC43LTAuMywxLTAuMmwwLjgsMC4zYzAuNCwwLjIsMC44LDAuMSwxLjIsMGwwLjUtMC4yYzAuNC0wLjIsMC45LTAuMiwxLjMsMGwwLjUsMC4yCgkJCWMwLjQsMC4yLDAuOCwwLjIsMS4yLDBsMC4yLTAuMWMwLjMtMC4yLDAuOC0wLjIsMS4xLDAuMWwwLjIsMC4yYzAuMywwLjMsMC44LDAuMiwxLTAuMmwwLjEtMC4yYzAuMS0wLjIsMC0wLjMsMC4yLTAuMwoJCQljMC41LDAsMS4yLTAuMywxLjEtMC43bC0wLjQtMS4xIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDUyLjJjLTAuMSwwLjItMC4zLDAuOCwwLDEuMWMwLjMsMC40LDMsMS4xLDYuNCwxLjEKCQkJYzIuMiwwLDQuNi0wLjMsNi0wLjZjMC41LTAuMSwwLjktMC41LDAuOC0wLjljMC0wLjItMC4yLTAuNS0wLjQtMC43Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDUzLjNjMCwwLjUsMC42LDIuMywxLjMsMi43YzEuOCwwLjgsNS43LDAuNyw4LjEsMC41CgkJCWMxLjMtMC4xLDIuNS0wLjcsMy4yLTEuOGMwLjMtMC41LDAuNS0xLDAuNS0xLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iNTEuNiIgY3k9IjQ2LjUiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iNTMiIGN5PSI0NSIgcng9IjAuMyIgcnk9IjAuNCIvPgoJCTxlbGxpcHNlIGZpbGw9IiNDMEMwQkYiIGN4PSI1MyIgY3k9IjQ3LjIiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iNTQuMyIgY3k9IjQ2LjUiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iNTAuOSIgY3k9IjQ1IiByeD0iMC4zIiByeT0iMC40Ii8+Cgk8L2c+Cgk8Zz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIGQ9Ik0yNC4yLDUxdi03LjZjMC4xLDAuMSwwLjgsMC45LDIuOCwzLjFjMi41LTEuNyw1LjYtMC43LDYuOSwwbDIuNC0zLjF2Ny4xCgkJCWMwLDEuMi0wLjEsMi41LTAuOSwzLjRjLTEsMS4yLTIuNywyLjUtNS4zLDIuNWMtMi45LDAtNC41LTEuNS01LjMtMi45QzI0LjIsNTIuOSwyNC4yLDUyLDI0LjIsNTF6Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0yMS4yLDUwbDUuNCwxLjIiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTIxLjIsNTQuMWw1LjQtMS4yIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0zOC44LDUwbC01LjQsMS4yIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0zOC44LDU0LjFsLTUuNC0xLjIiLz4KCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0MwQzBCRiIgZD0iTTI5LjUsNTIuNEwyOSw1MS43Yy0wLjItMC4zLDAtMC42LDAuMy0wLjZoMS40CgkJCWMwLjMsMCwwLjUsMC40LDAuMywwLjZsLTAuNywxbDAsMGMtMC43LDEuMi0yLjYsMS4xLTMuMS0wLjNsLTAuMS0wLjJjLTAuMS0wLjIsMC0wLjQsMC4yLTAuNXMwLjQsMCwwLjUsMC4ybDAuMSwwLjIKCQkJQzI4LjMsNTIuOCwyOS4xLDUyLjksMjkuNSw1Mi40eiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzIuNCw1Mi4xbC0wLjEsMC4yYy0wLjQsMS0xLjgsMS4xLTIuMywwLjIiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iMjcuNiIgY3k9IjQ5LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iMzIuNCIgY3k9IjQ5LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCTwvZz4KCTxnPgoJCTxwYXRoIGZpbGw9IiM2QUE5REQiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTE0LjYsNzEuMmMtMC4xLTAuMS0wLjItMC4yLTAuMy0wLjJINS43CgkJCWMtMC4xLDAtMC4yLDAuMS0wLjMsMC4yYy0wLjEsMC4xLTAuMSwwLjIsMCwwLjRjMC43LDIsMi41LDMuMyw0LjYsMy4zczMuOS0xLjMsNC42LTMuM0MxNC43LDcxLjUsMTQuNyw3MS4zLDE0LjYsNzEuMnogTTEwLDc0LjEKCQkJYy0xLjYsMC0zLTAuOS0zLjctMi4yaDcuM0MxMyw3My4yLDExLjYsNzQuMSwxMCw3NC4xeiIvPgoJCTxwYXRoIGZpbGw9IiM2QUE5REQiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTEyLjgsNjkuNWMwLjYsMCwxLjEtMC41LDEuMS0xLjEKCQkJYzAtMC42LTAuNS0xLjItMS4xLTEuMmMtMC42LDAtMS4yLDAuNS0xLjIsMS4yQzExLjYsNjksMTIuMiw2OS41LDEyLjgsNjkuNXogTTEyLjgsNjhjMC4yLDAsMC40LDAuMiwwLjQsMC40CgkJCWMwLDAuMi0wLjIsMC40LTAuNCwwLjRjLTAuMiwwLTAuNC0wLjItMC40LTAuNEMxMi40LDY4LjEsMTIuNiw2OCwxMi44LDY4eiIvPgoJCTxwYXRoIGZpbGw9IiM2QUE5REQiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTcuMiw2OS41YzAuNiwwLDEuMi0wLjUsMS4yLTEuMQoJCQljMC0wLjYtMC41LTEuMi0xLjItMS4yYy0wLjYsMC0xLjEsMC41LTEuMSwxLjJDNi4xLDY5LDYuNiw2OS41LDcuMiw2OS41eiBNNy4yLDY4YzAuMiwwLDAuNCwwLjIsMC40LDAuNGMwLDAuMi0wLjIsMC40LTAuNCwwLjQKCQkJYy0wLjIsMC0wLjQtMC4yLTAuNC0wLjRDNi44LDY4LjEsNyw2OCw3LjIsNjh6Ii8+CgkJPHBhdGggZmlsbD0iIzZBQTlERCIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2Utd2lkdGg9IjAuMSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTAsNjNjLTMuOCwwLTcsMy4xLTcsN2MwLDMuOCwzLjEsNyw3LDcKCQkJczctMy4xLDctN0MxNyw2Ni4yLDEzLjgsNjMsMTAsNjN6IE0xMCw3Ni4yYy0zLjQsMC02LjItMi44LTYuMi02LjJjMC0zLjQsMi44LTYuMiw2LjItNi4yczYuMiwyLjgsNi4yLDYuMgoJCQlDMTYuMiw3My40LDEzLjQsNzYuMiwxMCw3Ni4yeiIvPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTY0LjEsNzMuNGwyLjMsMGMwLjIsMCwwLjQsMC4yLDAuNCwwLjR2Mi4xYzAsMC4yLTAuMiwwLjQtMC40LDAuNGgtMi4zCgkJCQljLTAuMiwwLTAuNC0wLjItMC40LTAuNHYtMi4xQzYzLjcsNzMuNiw2My44LDczLjQsNjQuMSw3My40eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIGQ9Ik03My41LDczLjVoMi40YzAuMiwwLDAuNCwwLjIsMC40LDAuNHYyLjFjMCwwLjItMC4yLDAuNC0wLjQsMC40aC0yLjQKCQkJCWMtMC4yLDAtMC40LTAuMi0wLjQtMC40bDAtMi4xQzczLjEsNzMuNiw3My4zLDczLjUsNzMuNSw3My41eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIGQ9Ik02My43LDY4LjRoMTIuNnY1SDYzLjdWNjguNHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBkPSJNNjUuNSw2My42aDguOWMxLDAsMS45LDAuOCwxLjksMS45djMuMUg2My43di0zLjFDNjMuNyw2NC41LDY0LjUsNjMuNiw2NS41LDYzLjZ6Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiM2QUE5REQiIGN4PSI2Ni4yIiBjeT0iNzAuOSIgcng9IjAuOSIgcnk9IjAuOSIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iNzMuOCIgY3k9IjcwLjkiIHJ4PSIwLjkiIHJ5PSIwLjkiLz4KCQk8L2c+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBkPSJNOTYuNCw3MGMwLDMuNi0yLjksNi41LTYuNCw2LjVzLTYuNC0yLjktNi40LTYuNXMyLjktNi41LDYuNC02LjVTOTYuNCw2Ni40LDk2LjQsNzB6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTk2LjMsNjguNmMwLDAsMCwwLjEsMCwwLjFjLTAuOSwwLjEtMi45LDAuMS00LjYtMS4yYy0xLjEtMC44LTItMS43LTIuNi0yLjUKCQkJCWMtMC4zLTAuNC0wLjYtMC44LTAuNy0xLjFjLTAuMS0wLjEtMC4xLTAuMi0wLjEtMC4yYzAuNS0wLjEsMS4yLTAuMiwyLTAuMmMxLjIsMCwyLjUsMC4zLDMuNSwxLjFjMSwwLjgsMS43LDEuOCwyLjEsMi44CgkJCQlDOTYuMSw2Ny45LDk2LjIsNjguMyw5Ni4zLDY4LjZ6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTg0LDcyLjJjMCwwLDAtMC4xLDAtMC4xYzAuOS0wLjIsMi45LTAuNCw0LjcsMC42YzEuMSwwLjcsMS45LDEuNSwyLjQsMi4zCgkJCQljMC40LDAuNSwwLjYsMSwwLjcsMS4zYy0wLjQsMC4xLTEsMC4yLTEuNywwLjNjLTEsMC0yLjEtMC4xLTMuMi0wLjhzLTEuOS0xLjYtMi40LTIuNUM4NC4yLDcyLjgsODQuMSw3Mi40LDg0LDcyLjJ6Ii8+CgkJPC9nPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMTE2LjMsNjYuOGwtMS40LDJsLTAuOC0wLjhsLTAuNi0wLjdsMCwwLjlsLTAuMSw4LjJoLTYuOAoJCQkJbC0wLjEtOC4ybDAtMC45bC0wLjYsMC43bC0wLjgsMC44bC0xLjQtMmwyLjYtMi45YzAuMS0wLjEsMC4yLTAuMSwwLjMtMC4xaDEuM2wwLjQsMC43YzAuNywxLjMsMi42LDEuMywzLjMtMC4xbDAuMy0wLjZoMS4yCgkJCQljMC4xLDAsMC4yLDAsMC4zLDAuMWwwLjMtMC4zbC0wLjMsMC4zTDExNi4zLDY2Ljh6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTExMC4xLDY3LjdoMnYwLjljMCwwLjQtMC40LDAuNy0xLDAuN2MtMC42LDAtMS0wLjMtMS0wLjdMMTEwLjEsNjcuN0wxMTAuMSw2Ny43eiIvPgoJCTwvZz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIGQ9Ik0xMjYuOCw3NC4zYzAsMS4yLTEsMi4yLTIuMiwyLjJzLTIuMi0xLTIuMi0yLjJzMS0yLjIsMi4yLTIuMlMxMjYuOCw3My4xLDEyNi44LDc0LjN6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTEzNy42LDc0LjNjMCwxLjItMSwyLjItMi4yLDIuMmMtMS4yLDAtMi4yLTEtMi4yLTIuMnMxLTIuMiwyLjItMi4yCgkJCQlDMTM2LjYsNzIuMSwxMzcuNiw3My4xLDEzNy42LDc0LjN6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTEyNi44LDY0LjR2OS45Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTEzNy43LDY0LjR2OS45Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTEyNi44LDYzLjVoMTAuOHYyLjdoLTEwLjhDMTI2LjgsNjYuMiwxMjYuOCw2My41LDEyNi44LDYzLjV6Ii8+CgkJPC9nPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9IiM2QUE5REQiIGQ9Ik0xNzAuOCw2My4xTDE3MC44LDYzLjFjLTAuMywwLTAuNSwwLTAuOCwwYy0yLjEsMC00LDEtNS4zLDIuNWwtMC4xLDBsLTAuMS0wLjFsLTEtMS4ybC0wLjMsMy40bDMuNCwwLjMKCQkJCWwtMS4xLTEuM2wtMC4xLTAuMWwwLjEtMC4xYzEuMS0xLjQsMy0yLjMsNS0yLjFsMCwwYzMuMiwwLjMsNS41LDMuMSw1LjIsNi4zYy0wLjMsMy0zLjEsNS4zLTYuMSw1LjFjLTMuMS0wLjItNS40LTIuOS01LjMtNgoJCQkJbC0xLjMtMC4xYy0wLjIsMy44LDIuNiw3LjEsNi4zLDcuNGMzLjksMC4zLDcuMy0yLjYsNy42LTYuNUMxNzcuMiw2Ni44LDE3NC40LDYzLjUsMTcwLjgsNjMuMXoiLz4KCQkJPHBhdGggZmlsbD0iIzZBQTlERCIgZD0iTTE3MC4zLDY3LjRjMC0wLjMtMC4zLTAuNi0wLjYtMC42cy0wLjYsMC4zLTAuNiwwLjZ2My4yYzAsMC4yLDAuMSwwLjMsMC4yLDAuNGMwLjEsMC4xLDAuMywwLjIsMC40LDAuMgoJCQkJaDIuNGMwLjQsMCwwLjYtMC4zLDAuNi0wLjZTMTcyLjQsNzAsMTcyLDcwaC0xLjZoLTAuMnYtMC4yTDE3MC4zLDY3LjRMMTcwLjMsNjcuNHoiLz4KCQk8L2c+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBkPSJNMTg2LjIsNjMuNGg3LjdjMS41LDAsMi43LDEuMiwyLjcsMi43djcuN2MwLDEuNS0xLjIsMi43LTIuNywyLjdoLTcuNwoJCQkJYy0xLjUsMC0yLjctMS4yLTIuNy0yLjd2LTcuN0MxODMuNCw2NC43LDE4NC43LDYzLjQsMTg2LjIsNjMuNHoiLz4KCQkJPGVsbGlwc2UgZmlsbD0iIzZBQTlERCIgY3g9IjE4NiIgY3k9IjY4LjkiIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQkJPGVsbGlwc2UgZmlsbD0iIzZBQTlERCIgY3g9IjE5NCIgY3k9IjY2LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0xODYsNzMuM2wwLjQtMC4zYzAuNC0wLjMsMS0wLjMsMS41LTAuMWwxLDAuNAoJCQkJYzAuNSwwLjIsMSwwLjIsMS41LTAuMWwwLjgtMC41YzAuNC0wLjMsMS0wLjMsMS41LTAuMWwxLjgsMC44Ii8+CgkJPC9nPgoJPC9nPgoJPHBhdGggZmlsbD0iIzZBQTlERCIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2Utd2lkdGg9IjAuMjUiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTE1Niw2NC4zYy0wLjItMC4xLTAuNC0wLjEtMC41LDAKCQljMCwwLTAuMiwwLjEtMC45LDAuMmMtMC43LDAtMi40LTAuMS0zLjgtMC42Yy0wLjgtMC4zLTEuNy0wLjUtMi41LTAuNWMtMC4yLDAtMC40LDAtMC41LDBjLTEuMywwLTIuNSwwLjMtMy42LDEKCQljLTAuMiwwLjEtMC4yLDAuMi0wLjIsMC40djExLjZjMCwwLjMsMC4xLDAuNSwwLjMsMC41YzAuNiwwLDAuNS0wLjQsMC41LTAuNnYtNS43YzAuNy0wLjMsMy4yLTEuMSw1LjgtMC4xCgkJYzEuNiwwLjYsMy41LDAuNyw0LjMsMC43YzAuOCwwLDEuMy0wLjMsMS4zLTAuM2MwLjItMC4xLDAuMy0wLjIsMC4zLTAuNHYtNS43QzE1Ni4yLDY0LjYsMTU2LjEsNjQuNCwxNTYsNjQuM3ogTTE1NS42LDcwLjIKCQljLTAuMSwwLTAuNywwLjEtMSwwLjFjLTAuNywwLTIuNC0wLjEtMy44LTAuNmMtMi41LTEtNS0wLjUtNi4yLTAuMXYtNC45YzAuOS0wLjUsMi4yLTAuNywzLjItMC43YzAuMSwwLDAuMywwLDAuNCwwCgkJYzAuNywwLDEuNSwwLjIsMi4yLDAuNGMxLjYsMC42LDMuNSwwLjcsNC4zLDAuN2MwLjIsMCwwLjgsMCwxLTAuMVY3MC4yeiIvPgoJPGc+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBkPSJNNDguMSw2My41aDMuN2MyLjUsMCw0LjUsMiw0LjUsNC41YzAsMC41LTAuNCwwLjktMC45LDAuOUg0NC41Yy0wLjUsMC0wLjktMC40LTAuOS0wLjkKCQkJQzQzLjYsNjUuNSw0NS42LDYzLjUsNDguMSw2My41eiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSw2OC44Yy0wLjIsMC4xLTAuNSwxLjIsMCwxLjVjMS40LDAuOSw4LjUsMC44LDExLjMsMC42CgkJCWMwLjgtMC4xLDEuNi0wLjQsMS43LTEuMmMwLTAuMy0wLjEtMC42LTAuNi0wLjkiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTQzLjUsNzAuNkw0My4zLDcxYy0wLjIsMC41LDAuMiwxLDAuNywwLjljMC4zLTAuMSwwLjUsMC4xLDAuNywwLjMKCQkJbDAuMSwwLjJjMC4zLDAuNSwxLDAuNiwxLjUsMC4ybDAsMGMwLjMtMC4yLDAuNy0wLjMsMS0wLjJsMC44LDAuM2MwLjQsMC4yLDAuOCwwLjEsMS4yLDBsMC41LTAuMmMwLjQtMC4yLDAuOS0wLjIsMS4zLDBsMC41LDAuMgoJCQljMC40LDAuMiwwLjgsMC4yLDEuMi0wLjFsMC4yLTAuMWMwLjMtMC4yLDAuOC0wLjIsMS4xLDAuMWwwLjIsMC4yYzAuMywwLjMsMC44LDAuMiwxLTAuMmwwLjEtMC4yYzAuMS0wLjIsMC0wLjMsMC4yLTAuMwoJCQljMC41LDAsMS4yLTAuMywxLjEtMC43bC0wLjQtMS4xIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDcyLjJjLTAuMSwwLjItMC4zLDAuOCwwLDEuMWMwLjMsMC40LDMsMS4xLDYuNCwxLjEKCQkJYzIuMiwwLDQuNi0wLjMsNi0wLjZjMC41LTAuMSwwLjktMC40LDAuOC0wLjljMC0wLjItMC4yLTAuNS0wLjQtMC43Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDczLjNjMCwwLjUsMC42LDIuMywxLjMsMi43YzEuOCwwLjgsNS43LDAuNyw4LjEsMC41CgkJCWMxLjMtMC4xLDIuNS0wLjcsMy4yLTEuOGMwLjMtMC41LDAuNS0xLDAuNS0xLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iNTEuNiIgY3k9IjY2LjUiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iNTMiIGN5PSI2NSIgcng9IjAuMyIgcnk9IjAuNCIvPgoJCTxlbGxpcHNlIGZpbGw9IiM2QUE5REQiIGN4PSI1MyIgY3k9IjY3LjIiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iNTQuMyIgY3k9IjY2LjUiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iNTAuOSIgY3k9IjY1IiByeD0iMC4zIiByeT0iMC40Ii8+Cgk8L2c+Cgk8Zz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIGQ9Ik0yNC4yLDcxdi03LjZjMC4xLDAuMSwwLjgsMC45LDIuOCwzLjFjMi41LTEuNyw1LjYtMC43LDYuOSwwbDIuNC0zLjF2Ny4xCgkJCWMwLDEuMi0wLjEsMi41LTAuOSwzLjRjLTEsMS4yLTIuNywyLjUtNS4zLDIuNWMtMi45LDAtNC41LTEuNS01LjMtMi45QzI0LjIsNzIuOSwyNC4yLDcyLDI0LjIsNzF6Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0yMS4yLDcwLjFsNS40LDEuMiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMjEuMiw3NC4xbDUuNC0xLjIiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTM4LjgsNzAuMWwtNS40LDEuMiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzguOCw3NC4xbC01LjQtMS4yIi8+CgkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiM2QUE5REQiIGQ9Ik0yOS41LDcyLjRMMjksNzEuN2MtMC4yLTAuMywwLTAuNiwwLjMtMC42aDEuNAoJCQljMC4zLDAsMC41LDAuNCwwLjMsMC42bC0wLjcsMWwwLDBjLTAuNywxLjItMi42LDEuMS0zLjEtMC4zbC0wLjEtMC4yYy0wLjEtMC4yLDAtMC40LDAuMi0wLjVjMC4yLTAuMSwwLjQsMCwwLjUsMC4ybDAuMSwwLjIKCQkJQzI4LjMsNzIuOCwyOS4xLDcyLjksMjkuNSw3Mi40eiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzIuNCw3Mi4xbC0wLjEsMC4yYy0wLjQsMS0xLjgsMS4xLTIuMywwLjIiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iMjcuNiIgY3k9IjY5LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iMzIuNCIgY3k9IjY5LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCTwvZz4KPC9nPgo8Zz4KCTxwYXRoIGZpbGw9IiM4Njg2ODYiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTEyLjgsOS41YzAuNiwwLDEuMS0wLjUsMS4xLTEuMgoJCWMwLTAuNi0wLjUtMS4xLTEuMS0xLjFjLTAuNiwwLTEuMiwwLjUtMS4yLDEuMVMxMi4yLDkuNSwxMi44LDkuNXogTTEyLjgsNy45YzAuMiwwLDAuNCwwLjIsMC40LDAuNGMwLDAuMi0wLjIsMC40LTAuNCwwLjQKCQljLTAuMiwwLTAuNC0wLjItMC40LTAuNEMxMi40LDguMSwxMi42LDcuOSwxMi44LDcuOXoiLz4KCTxwYXRoIGZpbGw9IiM4Njg2ODYiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTcuMiw5LjVjMC42LDAsMS4yLTAuNSwxLjItMS4yCgkJYzAtMC42LTAuNS0xLjEtMS4yLTEuMWMtMC42LDAtMS4xLDAuNS0xLjEsMS4xUzYuNiw5LjUsNy4yLDkuNXogTTcuMiw3LjljMC4yLDAsMC40LDAuMiwwLjQsMC40YzAsMC4yLTAuMiwwLjQtMC40LDAuNAoJCUM3LDguNyw2LjgsOC41LDYuOCw4LjNDNi44LDguMSw3LDcuOSw3LjIsNy45eiIvPgoJPHBhdGggZmlsbD0iIzg2ODY4NiIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2Utd2lkdGg9IjAuMSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTQuNiwxMS4yYy0wLjEtMC4xLTAuMi0wLjItMC4zLTAuMkg1LjcKCQljLTAuMSwwLTAuMiwwLjEtMC4zLDAuMmMtMC4xLDAuMS0wLjEsMC4yLDAsMC40YzAuNywyLDIuNSwzLjMsNC42LDMuM3MzLjktMS4zLDQuNi0zLjNDMTQuNywxMS40LDE0LjcsMTEuMywxNC42LDExLjJ6IE0xMCwxNC4xCgkJYy0xLjYsMC0zLTAuOS0zLjctMi4yaDcuM0MxMywxMy4yLDExLjYsMTQuMSwxMCwxNC4xeiIvPgoJPHBhdGggZmlsbD0iIzg2ODY4NiIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2Utd2lkdGg9IjAuMSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTAsM2MtMy44LDAtNywzLjEtNyw3czMuMSw3LDcsN3M3LTMuMSw3LTcKCQlTMTMuOCwzLDEwLDN6IE0xMCwxNi4yYy0zLjQsMC02LjItMi44LTYuMi02LjJTNi42LDMuOCwxMCwzLjhzNi4yLDIuOCw2LjIsNi4yUzEzLjQsMTYuMiwxMCwxNi4yeiIvPgo8L2c+CjxnIGlkPSJDYXJfMDAwMDAwMTg5MzUzOTUwODU0MTM0MTM3NTAwMDAwMDA4MjUyNzM4Nzc4NDI3NzU3MTVfIj4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik02NC4xLDEzLjRsMi4zLDBjMC4yLDAsMC40LDAuMiwwLjQsMC40djIuMWMwLDAuMi0wLjIsMC40LTAuNCwwLjRoLTIuMwoJCQkJYy0wLjIsMC0wLjQtMC4yLTAuNC0wLjR2LTIuMUM2My43LDEzLjYsNjMuOCwxMy40LDY0LjEsMTMuNHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNNzMuNSwxMy40aDIuNGMwLjIsMCwwLjQsMC4yLDAuNCwwLjR2Mi4xYzAsMC4yLTAuMiwwLjQtMC40LDAuNGgtMi40CgkJCQljLTAuMiwwLTAuNC0wLjItMC40LTAuNGwwLTIuMUM3My4xLDEzLjYsNzMuMywxMy40LDczLjUsMTMuNHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNNjMuNyw4LjRoMTIuNnY1SDYzLjdWOC40eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik02NS41LDMuNmg4LjljMSwwLDEuOSwwLjgsMS45LDEuOXYzLjFINjMuN1Y1LjVDNjMuNyw0LjQsNjQuNSwzLjYsNjUuNSwzLjZ6Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiM4Njg2ODYiIGN4PSI2Ni4yIiBjeT0iMTAuOSIgcng9IjAuOSIgcnk9IjAuOSIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjODY4Njg2IiBjeD0iNzMuOCIgY3k9IjEwLjkiIHJ4PSIwLjkiIHJ5PSIwLjkiLz4KCQk8L2c+Cgk8L2c+CjwvZz4KPGcgaWQ9IkFjdGl2aXRpZXMiPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgZD0iTTk2LjQsMTBjMCwzLjYtMi45LDYuNS02LjQsNi41cy02LjQtMi45LTYuNC02LjVzMi45LTYuNSw2LjQtNi41Uzk2LjQsNi40LDk2LjQsMTB6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgZD0iTTk2LjMsOC42YzAsMCwwLDAuMSwwLDAuMWMtMC45LDAuMS0yLjksMC4xLTQuNi0xLjJjLTEuMS0wLjgtMi0xLjctMi42LTIuNQoJCQkJYy0wLjMtMC40LTAuNi0wLjgtMC43LTEuMWMtMC4xLTAuMS0wLjEtMC4yLTAuMS0wLjJjMC41LTAuMSwxLjItMC4yLDItMC4yYzEuMiwwLDIuNSwwLjMsMy41LDEuMWMxLDAuOCwxLjcsMS44LDIuMSwyLjgKCQkJCUM5Ni4xLDcuOSw5Ni4yLDguMyw5Ni4zLDguNnoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNODQsMTIuMWMwLDAsMC0wLjEsMC0wLjFjMC45LTAuMiwyLjktMC40LDQuNywwLjZjMS4xLDAuNiwxLjksMS41LDIuNCwyLjMKCQkJCWMwLjQsMC41LDAuNiwxLDAuNywxLjNjLTAuNCwwLjEtMSwwLjItMS43LDAuM2MtMSwwLTIuMS0wLjEtMy4yLTAuOGMtMS4xLTAuNi0xLjktMS42LTIuNC0yLjVDODQuMiwxMi44LDg0LjEsMTIuNCw4NCwxMi4xeiIvPgoJCTwvZz4KCTwvZz4KPC9nPgo8ZyBpZD0iT2JqZWN0c18wMDAwMDA2NDMxMjM3MTczOTEzMDMxNTI1MDAwMDAxMDIyNTg4OTAzMjIyODYzMjk3NV8iPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMTE2LjMsNi44bC0xLjQsMkwxMTQuMSw4bC0wLjYtMC43bDAsMC45bC0wLjEsOC4yaC02LjhsLTAuMS04LjIKCQkJCWwwLTAuOUwxMDUuOSw4bC0wLjgsMC44bC0xLjQtMmwyLjYtMi45YzAuMS0wLjEsMC4yLTAuMSwwLjMtMC4xaDEuM2wwLjQsMC43YzAuNywxLjMsMi42LDEuMywzLjMtMC4xbDAuMy0wLjZoMS4yCgkJCQljMC4xLDAsMC4yLDAsMC4zLDAuMWwwLjMtMC4zbC0wLjMsMC4zTDExNi4zLDYuOHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNMTEwLjEsNy43aDJ2MC45YzAsMC40LTAuNCwwLjctMSwwLjdjLTAuNiwwLTEtMC4zLTEtMC43TDExMC4xLDcuN0wxMTAuMSw3Ljd6Ii8+CgkJPC9nPgoJPC9nPgo8L2c+CjxnIGlkPSJTeW1ib2xzXzAwMDAwMDk2NzQ2OTA3ODY5OTI5OTIxMTgwMDAwMDA2NDg0ODEyODMwMjgyNTgyNDE2XyI+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNMTI2LjgsMTQuM2MwLDEuMi0xLDIuMi0yLjIsMi4ycy0yLjItMS0yLjItMi4yczEtMi4yLDIuMi0yLjJTMTI2LjgsMTMuMSwxMjYuOCwxNC4zeiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik0xMzcuNiwxNC4zYzAsMS4yLTEsMi4yLTIuMiwyLjJjLTEuMiwwLTIuMi0xLTIuMi0yLjJzMS0yLjIsMi4yLTIuMgoJCQkJQzEzNi42LDEyLjEsMTM3LjYsMTMuMSwxMzcuNiwxNC4zeiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik0xMjYuOCw0LjR2OS45Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgZD0iTTEzNy43LDQuNHY5LjkiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNMTI2LjgsMy41aDEwLjh2Mi43aC0xMC44QzEyNi44LDYuMiwxMjYuOCwzLjUsMTI2LjgsMy41eiIvPgoJCTwvZz4KCTwvZz4KPC9nPgo8ZyBpZD0iUmVjZW50cyI+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0iIzg2ODY4NiIgZD0iTTE3MC44LDMuMUwxNzAuOCwzLjFjLTAuMywwLTAuNSwwLTAuOCwwYy0yLjEsMC00LDEtNS4zLDIuNWwtMC4xLDBsLTAuMS0wLjFsLTEtMS4ybC0wLjMsMy40bDMuNCwwLjMKCQkJCWwtMS4xLTEuM2wtMC4xLTAuMWwwLjEtMC4xYzEuMS0xLjQsMy0yLjMsNS0yLjFsMCwwYzMuMiwwLjMsNS41LDMuMSw1LjIsNi4zYy0wLjMsMy0zLjEsNS4zLTYuMSw1LjFjLTMuMS0wLjItNS40LTIuOS01LjMtNgoJCQkJTDE2Myw5LjVjLTAuMiwzLjgsMi42LDcuMSw2LjMsNy40YzMuOSwwLjQsNy4zLTIuNiw3LjYtNi41QzE3Ny4yLDYuOCwxNzQuNCwzLjUsMTcwLjgsMy4xeiIvPgoJCQk8cGF0aCBmaWxsPSIjODY4Njg2IiBkPSJNMTcwLjMsNy40YzAtMC4zLTAuMy0wLjYtMC42LTAuNlMxNjksNy4xLDE2OSw3LjR2My4yYzAsMC4yLDAuMSwwLjMsMC4yLDAuNGMwLjEsMC4xLDAuMywwLjIsMC40LDAuMgoJCQkJaDIuNGMwLjQsMCwwLjYtMC4zLDAuNi0wLjZzLTAuMy0wLjYtMC42LTAuNmgtMS42aC0wLjJWOS44TDE3MC4zLDcuNEwxNzAuMyw3LjR6Ii8+CgkJPC9nPgoJPC9nPgo8L2c+CjxnIGlkPSJDdXN0b21fMDAwMDAxODEwODcyMjk0MzQzMDIzMzY3ODAwMDAwMDUxNTIyNzc5NDU5NDA2NzQ0ODhfIj4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik0xODYuMiwzLjRoNy43YzEuNSwwLDIuNywxLjIsMi43LDIuN3Y3LjdjMCwxLjUtMS4yLDIuNy0yLjcsMi43aC03LjcKCQkJCWMtMS41LDAtMi43LTEuMi0yLjctMi43VjYuMUMxODMuNCw0LjYsMTg0LjcsMy40LDE4Ni4yLDMuNHoiLz4KCQkJPGVsbGlwc2UgZmlsbD0iIzg2ODY4NiIgY3g9IjE4NiIgY3k9IjguOSIgcng9IjAuNyIgcnk9IjAuNyIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjODY4Njg2IiBjeD0iMTk0IiBjeT0iNi43IiByeD0iMC43IiByeT0iMC43Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMTg2LDEzLjNsMC40LTAuM2MwLjQtMC4zLDEtMC4zLDEuNS0wLjFsMSwwLjQKCQkJCWMwLjUsMC4yLDEsMC4yLDEuNS0wLjFsMC44LTAuNWMwLjQtMC4zLDEtMC4zLDEuNS0wLjFsMS44LDAuOCIvPgoJCTwvZz4KCTwvZz4KPC9nPgo8cGF0aCBmaWxsPSIjODY4Njg2IiBzdHJva2U9IiM4Njg2ODYiIHN0cm9rZS13aWR0aD0iMC4yNSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTU2LDQuM2MtMC4yLTAuMS0wLjQtMC4xLTAuNSwwCgljMCwwLTAuMiwwLjEtMC45LDAuMWMtMC43LDAtMi40LTAuMS0zLjgtMC42Yy0wLjgtMC4zLTEuNy0wLjUtMi41LTAuNWMtMC4yLDAtMC40LDAtMC41LDBjLTEuMywwLTIuNSwwLjMtMy42LDEKCWMtMC4yLDAuMS0wLjIsMC4yLTAuMiwwLjR2MTEuNmMwLDAuMywwLjEsMC41LDAuMywwLjVjMC42LDAsMC41LTAuNCwwLjUtMC42di01LjdjMC43LTAuMywzLjItMS4xLDUuOC0wLjFjMS42LDAuNiwzLjUsMC43LDQuMywwLjcKCWMwLjgsMCwxLjMtMC4zLDEuMy0wLjNjMC4yLTAuMSwwLjMtMC4yLDAuMy0wLjRWNC43QzE1Ni4yLDQuNSwxNTYuMSw0LjQsMTU2LDQuM3ogTTE1NS42LDEwLjJjLTAuMSwwLTAuNywwLjEtMSwwLjEKCWMtMC43LDAtMi40LTAuMS0zLjgtMC42Yy0yLjUtMS01LTAuNS02LjItMC4xVjQuN2MwLjktMC41LDIuMi0wLjcsMy4yLTAuN2MwLjEsMCwwLjMsMCwwLjQsMGMwLjcsMCwxLjUsMC4yLDIuMiwwLjQKCWMxLjYsMC42LDMuNSwwLjcsNC4zLDAuN2MwLjIsMCwwLjgsMCwxLTAuMVYxMC4yeiIvPgo8ZyBpZD0iRm9vZCI+Cgk8ZyBpZD0iTGF5ZXJfMTIiPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik00OC4xLDMuNWgzLjdjMi41LDAsNC41LDIsNC41LDQuNWMwLDAuNS0wLjQsMC45LTAuOSwwLjlINDQuNWMtMC41LDAtMC45LTAuNC0wLjktMC45CgkJCQlDNDMuNiw1LjUsNDUuNiwzLjUsNDguMSwzLjV6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSw4LjdjLTAuMiwwLjEtMC41LDEuMiwwLDEuNWMxLjQsMC45LDguNSwwLjgsMTEuMywwLjYKCQkJCWMwLjgtMC4xLDEuNi0wLjQsMS43LTEuMmMwLTAuMy0wLjEtMC42LTAuNi0wLjkiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDEwLjZMNDMuMywxMWMtMC4yLDAuNSwwLjIsMSwwLjcsMC45CgkJCQljMC4zLTAuMSwwLjUsMC4xLDAuNywwLjNsMC4xLDAuMmMwLjMsMC41LDEsMC42LDEuNSwwLjJsMCwwYzAuMy0wLjIsMC43LTAuMywxLTAuMmwwLjgsMC4zYzAuNCwwLjEsMC44LDAuMSwxLjIsMGwwLjUtMC4yCgkJCQljMC40LTAuMiwwLjktMC4yLDEuMywwbDAuNSwwLjJjMC40LDAuMiwwLjgsMC4xLDEuMi0wLjFsMC4yLTAuMWMwLjMtMC4yLDAuOC0wLjEsMS4xLDAuMWwwLjIsMC4yYzAuMywwLjMsMC44LDAuMiwxLTAuMmwwLjEtMC4yCgkJCQljMC4xLTAuMiwwLTAuMywwLjItMC40YzAuNSwwLDEuMi0wLjMsMS4xLTAuN2wtMC40LTEuMSIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTQzLjUsMTIuMWMtMC4xLDAuMi0wLjMsMC44LDAsMS4xYzAuMywwLjQsMywxLjEsNi40LDEuMQoJCQkJYzIuMiwwLDQuNi0wLjMsNi0wLjZjMC41LTAuMSwwLjktMC40LDAuOC0wLjljMC0wLjItMC4yLTAuNS0wLjQtMC43Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSwxMy4zYzAsMC41LDAuNiwyLjQsMS4zLDIuNmMxLjgsMC44LDUuNywwLjcsOC4xLDAuNQoJCQkJYzEuMy0wLjEsMi41LTAuNywzLjItMS44YzAuMy0wLjUsMC41LTEsMC41LTEuNCIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjODY4Njg2IiBjeD0iNTEuNiIgY3k9IjYuNSIgcng9IjAuMyIgcnk9IjAuNCIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjODY4Njg2IiBjeD0iNTMiIGN5PSI0LjkiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQkJPGVsbGlwc2UgZmlsbD0iIzg2ODY4NiIgY3g9IjUzIiBjeT0iNy4yIiByeD0iMC4zIiByeT0iMC40Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiM4Njg2ODYiIGN4PSI1NC4zIiBjeT0iNi41IiByeD0iMC4zIiByeT0iMC40Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiM4Njg2ODYiIGN4PSI1MC45IiBjeT0iNC45IiByeD0iMC4zIiByeT0iMC40Ii8+CgkJPC9nPgoJPC9nPgo8L2c+CjxnIGlkPSJBbmltYWxzIj4KCTxnPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgZD0iTTI0LjIsMTFWMy41YzAuMSwwLjEsMC44LDAuOSwyLjgsMy4xYzIuNS0xLjcsNS42LTAuNyw2LjksMGwyLjQtMy4xdjcuMQoJCQljMCwxLjItMC4xLDIuNS0wLjksMy40Yy0xLDEuMi0yLjcsMi41LTUuMywyLjVjLTIuOSwwLTQuNS0xLjUtNS4zLTIuOUMyNC4yLDEyLjksMjQuMiwxMS45LDI0LjIsMTF6Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0yMS4yLDEwbDUuNCwxLjIiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTIxLjIsMTQuMWw1LjQtMS4yIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0zOC44LDEwbC01LjQsMS4yIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0zOC44LDE0LjFsLTUuNC0xLjIiLz4KCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iIzg2ODY4NiIgZD0iTTI5LjUsMTIuNEwyOSwxMS43Yy0wLjItMC4zLDAtMC42LDAuMy0wLjZoMS40CgkJCWMwLjMsMCwwLjUsMC40LDAuMywwLjZsLTAuNywxbDAsMGMtMC43LDEuMi0yLjYsMS4xLTMuMS0wLjNsLTAuMS0wLjJjLTAuMS0wLjIsMC0wLjQsMC4yLTAuNXMwLjQsMCwwLjUsMC4ybDAuMSwwLjIKCQkJQzI4LjMsMTIuNywyOS4xLDEyLjksMjkuNSwxMi40eiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzIuNCwxMi4xbC0wLjEsMC4yYy0wLjQsMS0xLjgsMS4xLTIuMywwLjIiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjODY4Njg2IiBjeD0iMjcuNiIgY3k9IjkuNyIgcng9IjAuNyIgcnk9IjAuNyIvPgoJCTxlbGxpcHNlIGZpbGw9IiM4Njg2ODYiIGN4PSIzMi40IiBjeT0iOS43IiByeD0iMC43IiByeT0iMC43Ii8+Cgk8L2c+CjwvZz4KPC9zdmc+)",":focus:before":{content:"",position:"absolute",top:"-2px",left:"-2px",right:"-2px",bottom:"-2px",border:"2px solid var(--epr-category-icon-active-color)",borderRadius:"50%"},"&.epr-icn-suggested":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -8)"},"&.epr-icn-custom":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -9)"},"&.epr-icn-activities":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -4)"},"&.epr-icn-animals_nature":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -1)"},"&.epr-icn-flags":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -7)"},"&.epr-icn-food_drink":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -2)"},"&.epr-icn-objects":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -5)"},"&.epr-icn-smileys_people":{backgroundPositionX:"0px"},"&.epr-icn-symbols":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -6)"},"&.epr-icn-travel_places":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -3)"}}},darkMode("catBtn",DarkPositionY),{".epr-dark-theme":_extends({},DarkInactivePosition),".epr-auto-theme":_extends({},DarkInactivePosition)}));function CategoryNavigation(){var _useState=(0,react.useState)(null),activeCategory=_useState[0],setActiveCategory=_useState[1],scrollCategoryIntoView=function useScrollCategoryIntoView(){var BodyRef=useBodyRef(),PickerMainRef=usePickerMainRef();return function scrollCategoryIntoView(category){var _BodyRef$current;if(BodyRef.current){var $category=null==(_BodyRef$current=BodyRef.current)?void 0:_BodyRef$current.querySelector('[data-name="'+category+'"]');if($category){var offsetTop=$category.offsetTop||0;scrollTo(PickerMainRef.current,offsetTop)}}}}();!function useActiveCategoryScrollDetection(setActiveCategory){var BodyRef=useBodyRef();(0,react.useEffect)(function(){var visibleCategories=new Map,bodyRef=BodyRef.current,observer=new IntersectionObserver(function(entries){if(bodyRef){for(var _step,_iterator=_createForOfIteratorHelperLoose(entries);!(_step=_iterator()).done;){var entry=_step.value,_id=categoryNameFromDom(entry.target);visibleCategories.set(_id,entry.intersectionRatio)}var ratios=Array.from(visibleCategories),lastCategory=ratios[ratios.length-1];if(1==lastCategory[1])return setActiveCategory(lastCategory[0]);for(var _i=0,_ratios=ratios;_i<_ratios.length;_i++){var _ratios$_i=_ratios[_i],id=_ratios$_i[0];if(_ratios$_i[1]){setActiveCategory(id);break}}}},{threshold:[0,1]});null==bodyRef||bodyRef.querySelectorAll(asSelectors(ClassNames.category)).forEach(function(el){observer.observe(el)})},[BodyRef,setActiveCategory])}(setActiveCategory);var isSearchMode=useIsSearchMode(),categoriesConfig=useCategoriesConfig(),CategoryNavigationRef=useCategoryNavigationRef(),hideCustomCategory=useShouldHideCustomEmojis();return(0,react.createElement)("div",{className:cx(styles$g.nav),role:"tablist","aria-label":"Category navigation",id:"epr-category-nav-id",ref:CategoryNavigationRef},categoriesConfig.map(function(categoryConfig){var category=categoryFromCategoryConfig(categoryConfig),isActiveCategory=category===activeCategory;if(function isCustomCategory(category){return category.category===Categories.CUSTOM}(categoryConfig)&&hideCustomCategory)return null;var allowNavigation=!isSearchMode&&!isActiveCategory;return(0,react.createElement)(CategoryButton,{key:category,category,isActiveCategory,allowNavigation,categoryConfig,onClick:function onClick(){scrollCategoryIntoView(category),setTimeout(function(){setActiveCategory(category)},10)}})}))}var styles$g=stylesheet.create({nav:{".":"epr-category-nav",display:"flex",flexDirection:"row",justifyContent:"space-around",padding:"var(--epr-header-padding)"},".epr-search-active":{nav:{opacity:"0.3",cursor:"default",pointerEvents:"none"}},".epr-main:has(input:not(:placeholder-shown))":{nav:{opacity:"0.3",cursor:"default",pointerEvents:"none"}}}),SVGTimes="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI2LjMuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjgwcHgiIHZpZXdCb3g9IjAgMCAyMCA4MCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjAgODAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8cGF0aCBmaWxsPSIjODY4Njg2IiBkPSJNNi45OCwxMy41OWMwLjEsMC4xLDAuMjQsMC4xNSwwLjM3LDAuMTVzMC4yNy0wLjA1LDAuMzctMC4xNWwyLjQyLTIuNDJsMi40MywyLjQzCgljMC4xLDAuMSwwLjI0LDAuMTUsMC4zNywwLjE1YzAuMTQsMCwwLjI3LTAuMDUsMC4zNy0wLjE1YzAuMjEtMC4yMSwwLjIxLTAuNTQsMC0wLjc1bC0yLjQzLTIuNDNMMTMuMzIsOAoJYzAuMjEtMC4yMSwwLjIxLTAuNTQsMC0wLjc1Yy0wLjIxLTAuMjEtMC41NC0wLjIxLTAuNzUsMGwtMi40MiwyLjQyTDcuNzQsNy4yN2MtMC4yMS0wLjIxLTAuNTQtMC4yMS0wLjc1LDAKCWMtMC4yMSwwLjIxLTAuMjEsMC41NCwwLDAuNzVsMi40MSwyLjQxbC0yLjQyLDIuNDJDNi43NywxMy4wNSw2Ljc3LDEzLjM5LDYuOTgsMTMuNTlMNi45OCwxMy41OXoiLz4KPHBhdGggZmlsbD0iIzg2ODY4NiIgZD0iTTEwLjE1LDE4LjQzYzQuNDEsMCw4LTMuNTksOC04YzAtNC40MS0zLjU5LTgtOC04Yy00LjQxLDAtOCwzLjU5LTgsOEMyLjE1LDE0Ljg0LDUuNzQsMTguNDMsMTAuMTUsMTguNDN6CgkgTTEwLjE1LDMuNDljMy44MywwLDYuOTQsMy4xMSw2Ljk0LDYuOTRjMCwzLjgzLTMuMTEsNi45NC02Ljk0LDYuOTRjLTMuODMsMC02Ljk0LTMuMTEtNi45NC02Ljk0QzMuMjEsNi42LDYuMzMsMy40OSwxMC4xNSwzLjQ5CglMMTAuMTUsMy40OXoiLz4KPHBhdGggZmlsbD0iIzMzNzFCNyIgZD0iTTYuOTgsMzMuNTljMC4xLDAuMSwwLjI0LDAuMTUsMC4zNywwLjE1czAuMjctMC4wNSwwLjM3LTAuMTVsMi40Mi0yLjQybDIuNDMsMi40MwoJYzAuMSwwLjEsMC4yNCwwLjE1LDAuMzcsMC4xNWMwLjE0LDAsMC4yNy0wLjA1LDAuMzctMC4xNWMwLjIxLTAuMjEsMC4yMS0wLjU0LDAtMC43NWwtMi40My0yLjQzTDEzLjMyLDI4CgljMC4yMS0wLjIxLDAuMjEtMC41NCwwLTAuNzVjLTAuMjEtMC4yMS0wLjU0LTAuMjEtMC43NSwwbC0yLjQyLDIuNDJsLTIuNDEtMi40MWMtMC4yMS0wLjIxLTAuNTQtMC4yMS0wLjc1LDAKCWMtMC4yMSwwLjIxLTAuMjEsMC41NCwwLDAuNzVsMi40MSwyLjQxbC0yLjQyLDIuNDJDNi43NywzMy4wNSw2Ljc3LDMzLjM5LDYuOTgsMzMuNTlMNi45OCwzMy41OXoiLz4KPHBhdGggZmlsbD0iIzMzNzFCNyIgZD0iTTEwLjE1LDM4LjQzYzQuNDEsMCw4LTMuNTksOC04YzAtNC40MS0zLjU5LTgtOC04Yy00LjQxLDAtOCwzLjU5LTgsOEMyLjE1LDM0Ljg0LDUuNzQsMzguNDMsMTAuMTUsMzguNDN6CgkgTTEwLjE1LDIzLjQ5YzMuODMsMCw2Ljk0LDMuMTEsNi45NCw2Ljk0YzAsMy44My0zLjExLDYuOTQtNi45NCw2Ljk0Yy0zLjgzLDAtNi45NC0zLjExLTYuOTQtNi45NAoJQzMuMjEsMjYuNiw2LjMzLDIzLjQ5LDEwLjE1LDIzLjQ5TDEwLjE1LDIzLjQ5eiIvPgo8cGF0aCBmaWxsPSIjQzBDMEJGIiBkPSJNNi45OCw1My41OWMwLjEsMC4xLDAuMjQsMC4xNSwwLjM3LDAuMTVzMC4yNy0wLjA1LDAuMzctMC4xNWwyLjQyLTIuNDJsMi40MywyLjQzCgljMC4xLDAuMSwwLjI0LDAuMTUsMC4zNywwLjE1YzAuMTQsMCwwLjI3LTAuMDUsMC4zNy0wLjE1YzAuMjEtMC4yMSwwLjIxLTAuNTQsMC0wLjc1bC0yLjQzLTIuNDNMMTMuMzIsNDgKCWMwLjIxLTAuMjEsMC4yMS0wLjU0LDAtMC43NWMtMC4yMS0wLjIxLTAuNTQtMC4yMS0wLjc1LDBsLTIuNDIsMi40MmwtMi40MS0yLjQxYy0wLjIxLTAuMjEtMC41NC0wLjIxLTAuNzUsMAoJYy0wLjIxLDAuMjEtMC4yMSwwLjU0LDAsMC43NWwyLjQxLDIuNDFsLTIuNDIsMi40MkM2Ljc3LDUzLjA1LDYuNzcsNTMuMzksNi45OCw1My41OUw2Ljk4LDUzLjU5eiIvPgo8cGF0aCBmaWxsPSIjQzBDMEJGIiBkPSJNMTAuMTUsNTguNDNjNC40MSwwLDgtMy41OSw4LThjMC00LjQxLTMuNTktOC04LThjLTQuNDEsMC04LDMuNTktOCw4QzIuMTUsNTQuODQsNS43NCw1OC40MywxMC4xNSw1OC40M3oKCSBNMTAuMTUsNDMuNDljMy44MywwLDYuOTQsMy4xMSw2Ljk0LDYuOTRjMCwzLjgzLTMuMTEsNi45NC02Ljk0LDYuOTRjLTMuODMsMC02Ljk0LTMuMTEtNi45NC02Ljk0CglDMy4yMSw0Ni42LDYuMzMsNDMuNDksMTAuMTUsNDMuNDlMMTAuMTUsNDMuNDl6Ii8+CjxwYXRoIGZpbGw9IiM2QUE5REQiIGQ9Ik02Ljk4LDczLjU5YzAuMSwwLjEsMC4yNCwwLjE1LDAuMzcsMC4xNXMwLjI3LTAuMDUsMC4zNy0wLjE1bDIuNDItMi40MmwyLjQzLDIuNDMKCWMwLjEsMC4xLDAuMjQsMC4xNSwwLjM3LDAuMTVjMC4xNCwwLDAuMjctMC4wNSwwLjM3LTAuMTVjMC4yMS0wLjIxLDAuMjEtMC41NCwwLTAuNzVsLTIuNDMtMi40M0wxMy4zMiw2OAoJYzAuMjEtMC4yMSwwLjIxLTAuNTQsMC0wLjc1Yy0wLjIxLTAuMjEtMC41NC0wLjIxLTAuNzUsMGwtMi40MiwyLjQybC0yLjQxLTIuNDFjLTAuMjEtMC4yMS0wLjU0LTAuMjEtMC43NSwwCgljLTAuMjEsMC4yMS0wLjIxLDAuNTQsMCwwLjc1bDIuNDEsMi40MWwtMi40MiwyLjQyQzYuNzcsNzMuMDUsNi43Nyw3My4zOSw2Ljk4LDczLjU5TDYuOTgsNzMuNTl6Ii8+CjxwYXRoIGZpbGw9IiM2QUE5REQiIGQ9Ik0xMC4xNSw3OC40M2M0LjQxLDAsOC0zLjU5LDgtOGMwLTQuNDEtMy41OS04LTgtOGMtNC40MSwwLTgsMy41OS04LDhDMi4xNSw3NC44NCw1Ljc0LDc4LjQzLDEwLjE1LDc4LjQzegoJIE0xMC4xNSw2My40OWMzLjgzLDAsNi45NCwzLjExLDYuOTQsNi45NGMwLDMuODMtMy4xMSw2Ljk0LTYuOTQsNi45NGMtMy44MywwLTYuOTQtMy4xMS02Ljk0LTYuOTQKCUMzLjIxLDY2LjYsNi4zMyw2My40OSwxMC4xNSw2My40OUwxMC4xNSw2My40OXoiLz4KPC9zdmc+";function BtnClearSearch(){var clearSearch=useClearSearch();return(0,react.createElement)(Button,{className:cx(styles$h.btnClearSearch,commonInteractionStyles.visibleOnSearchOnly),onClick:clearSearch,"aria-label":"Clear",title:"Clear"},(0,react.createElement)("div",{className:cx(styles$h.icnClearnSearch)}))}var HoverDark={":hover":{"> .epr-icn-clear-search":{backgroundPositionY:"-60px"}}},styles$h=stylesheet.create(_extends({btnClearSearch:{".":"epr-btn-clear-search",position:"absolute",right:"var(--epr-search-bar-inner-padding)",height:"30px",width:"30px",display:"flex",alignItems:"center",justifyContent:"center",top:"50%",transform:"translateY(-50%)",padding:"0",borderRadius:"50%",":hover":{background:"var(--epr-hover-bg-color)"},":focus":{background:"var(--epr-hover-bg-color)"}},icnClearnSearch:{".":"epr-icn-clear-search",backgroundColor:"transparent",backgroundRepeat:"no-repeat",backgroundSize:"20px",height:"20px",width:"20px",backgroundImage:"url("+SVGTimes+")",":hover":{backgroundPositionY:"-20px"},":focus":{backgroundPositionY:"-20px"}}},darkMode("icnClearnSearch",{backgroundPositionY:"-40px"}),darkMode("btnClearSearch",HoverDark))),SCOPE=asSelectors(ClassNames.emojiPicker)+" "+asSelectors(ClassNames.emojiList),EMOJI_BUTTON=["button",asSelectors(ClassNames.emoji)].join(""),CATEGORY=asSelectors(ClassNames.category);function CssSearch(_ref){var value=_ref.value;if(!value)return null;var q=function genQuery(value){return[EMOJI_BUTTON,'[data-full-name*="',getNormalizedSearchTerm(value),'"]'].join("")}(value);return(0,react.createElement)("style",null,"\n    "+SCOPE+" "+EMOJI_BUTTON+" {\n      display: none;\n    }\n\n\n    "+SCOPE+" "+q+" {\n      display: flex;\n    }\n\n    "+SCOPE+" "+CATEGORY+":not(:has("+q+")) {\n      display: none;\n    }\n  ")}function IcnSearch(){return(0,react.createElement)("div",{className:cx(styles$i.icnSearch)})}var styles$i=stylesheet.create(_extends({icnSearch:{".":"epr-icn-search",content:"",position:"absolute",top:"50%",left:"var(--epr-search-bar-inner-padding)",transform:"translateY(-50%)",width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"0 0",backgroundSize:"20px",backgroundImage:"url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI2LjMuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjQwcHgiIHZpZXdCb3g9IjAgMCAyMCA0MCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjAgNDAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iIzg2ODY4NiIgZD0iTTEyLDguODFjMCwyLjA4LTEuNjgsMy43Ni0zLjc2LDMuNzZjLTIuMDgsMC0zLjc2LTEuNjgtMy43Ni0zLjc2CgljMC0yLjA4LDEuNjgtMy43NiwzLjc2LTMuNzZDMTAuMzIsNS4wNSwxMiw2LjczLDEyLDguODF6IE0xMS4yMywxMi43MmMtMC44MywwLjY0LTEuODcsMS4wMS0yLjk5LDEuMDFjLTIuNzIsMC00LjkyLTIuMi00LjkyLTQuOTIKCWMwLTIuNzIsMi4yLTQuOTIsNC45Mi00LjkyYzIuNzIsMCw0LjkyLDIuMiw0LjkyLDQuOTJjMCwxLjEzLTAuMzgsMi4xNi0xLjAxLDIuOTlsMy45NCwzLjkzYzAuMjUsMC4yNSwwLjI1LDAuNjYsMCwwLjkyCgljLTAuMjUsMC4yNS0wLjY2LDAuMjUtMC45MiwwTDExLjIzLDEyLjcyeiIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0MwQzBCRiIgZD0iTTEyLDI4LjgxYzAsMi4wOC0xLjY4LDMuNzYtMy43NiwzLjc2Yy0yLjA4LDAtMy43Ni0xLjY4LTMuNzYtMy43NgoJYzAtMi4wOCwxLjY4LTMuNzYsMy43Ni0zLjc2QzEwLjMyLDI1LjA1LDEyLDI2LjczLDEyLDI4LjgxeiBNMTEuMjMsMzIuNzJjLTAuODMsMC42NC0xLjg3LDEuMDEtMi45OSwxLjAxCgljLTIuNzIsMC00LjkyLTIuMi00LjkyLTQuOTJjMC0yLjcyLDIuMi00LjkyLDQuOTItNC45MmMyLjcyLDAsNC45MiwyLjIsNC45Miw0LjkyYzAsMS4xMy0wLjM4LDIuMTYtMS4wMSwyLjk5bDMuOTQsMy45MwoJYzAuMjUsMC4yNSwwLjI1LDAuNjYsMCwwLjkyYy0wLjI1LDAuMjUtMC42NiwwLjI1LTAuOTIsMEwxMS4yMywzMi43MnoiLz4KPC9zdmc+)"}},darkMode("icnSearch",{backgroundPositionY:"-20px"})));function SearchContainer(){var searchDisabled=useSearchDisabledConfig(),isSkinToneInSearch=useIsSkinToneInSearch();return searchDisabled?null:(0,react.createElement)(Flex,{className:cx(styles$j.overlay)},(0,react.createElement)(Search,null),isSkinToneInSearch?(0,react.createElement)(SkinTonePicker,null):null)}function Search(){var _useState=(0,react.useState)(0),inc=_useState[0],setInc=_useState[1],closeAllOpenToggles=useCloseAllOpenToggles(),SearchInputRef=useSearchInputRef(),placeholder=function useSearchPlaceHolderConfig(){var _find,_usePickerConfig=usePickerConfig();return null!=(_find=[_usePickerConfig.searchPlaceHolder,_usePickerConfig.searchPlaceholder].find(function(p){return"Search"!==p}))?_find:"Search"}(),autoFocus=function useAutoFocusSearchConfig(){return usePickerConfig().autoFocusSearch}(),_useFilter=useFilter(),statusSearchResults=_useFilter.statusSearchResults,searchTerm=_useFilter.searchTerm,_onChange=_useFilter.onChange,input=null==SearchInputRef?void 0:SearchInputRef.current,value=null==input?void 0:input.value;return(0,react.createElement)(Relative,{className:cx(styles$j.searchContainer)},(0,react.createElement)(CssSearch,{value}),(0,react.createElement)("input",{autoFocus,"aria-label":"Type to search for an emoji",onFocus:closeAllOpenToggles,className:cx(styles$j.search),type:"text","aria-controls":"epr-search-id",placeholder,onChange:function onChange(event){var _event$target$value,_event$target;setInc(inc+1),_onChange(null!=(_event$target$value=null==event||null==(_event$target=event.target)?void 0:_event$target.value)?_event$target$value:value)},ref:SearchInputRef}),searchTerm?(0,react.createElement)("div",{role:"status",className:cx("epr-status-search-results",styles$j.visuallyHidden),"aria-live":"polite",id:"epr-search-id","aria-atomic":"true"},statusSearchResults):null,(0,react.createElement)(IcnSearch,null),(0,react.createElement)(BtnClearSearch,null))}var styles$j=stylesheet.create(_extends({overlay:{padding:"var(--epr-header-padding)",zIndex:"var(--epr-header-overlay-z-index)"},searchContainer:{".":"epr-search-container",flex:"1",display:"block",minWidth:"0"},visuallyHidden:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",width:"1px"},search:{outline:"none",transition:"all 0.2s ease-in-out",color:"var(--epr-search-input-text-color)",borderRadius:"var(--epr-search-input-border-radius)",padding:"var(--epr-search-input-padding)",height:"var(--epr-search-input-height)",backgroundColor:"var(--epr-search-input-bg-color)",border:"1px solid var(--epr-search-input-bg-color)",width:"100%",":focus":{backgroundColor:"var(--epr-search-input-bg-color-active)",border:"1px solid var(--epr-search-border-color)"},"::placeholder":{color:"var(--epr-search-input-placeholder-color)"}},btnClearSearch:{".":"epr-btn-clear-search",position:"absolute",right:"var(--epr-search-bar-inner-padding)",height:"30px",width:"30px",display:"flex",alignItems:"center",justifyContent:"center",top:"50%",transform:"translateY(-50%)",padding:"0",borderRadius:"50%",":hover":{background:"var(--epr-hover-bg-color)"},":focus":{background:"var(--epr-hover-bg-color)"}},icnClearnSearch:{".":"epr-icn-clear-search",backgroundColor:"transparent",backgroundRepeat:"no-repeat",backgroundSize:"20px",height:"20px",width:"20px",backgroundImage:"url("+SVGTimes+")",":hover":{backgroundPositionY:"-20px"},":focus":{backgroundPositionY:"-20px"}}},darkMode("icnClearnSearch",{backgroundPositionY:"-40px"}),darkMode("btnClearSearch",{":hover > .epr-icn-clear-search":{backgroundPositionY:"-60px"}})));function Header(){return(0,react.createElement)(Relative,{className:cx("epr-header",commonInteractionStyles.hiddenOnReactions)},(0,react.createElement)(SearchContainer,null),(0,react.createElement)(CategoryNavigation,null))}function EmojiPicker(props){return(0,react.createElement)(ElementRefContextProvider,null,(0,react.createElement)(PickerStyleTag,null),(0,react.createElement)(PickerConfigProvider,Object.assign({},props),(0,react.createElement)(ContentControl,null)))}function ContentControl(){var reactionsDefaultOpen=useReactionsModeState()[0],allowExpandReactions=useAllowExpandReactions(),_React$useState=(0,react.useState)(!reactionsDefaultOpen),renderAll=_React$useState[0],setRenderAll=_React$useState[1],isOpen=function useOpenConfig(){return usePickerConfig().open}();return(0,react.useEffect)(function(){reactionsDefaultOpen&&!allowExpandReactions||renderAll||setRenderAll(!0)},[renderAll,allowExpandReactions,reactionsDefaultOpen]),isOpen?(0,react.createElement)(PickerMain,null,(0,react.createElement)(Reactions,null),(0,react.createElement)(ExpandedPickerContent,{renderAll})):null}function ExpandedPickerContent(_ref){return _ref.renderAll?(0,react.createElement)(react.Fragment,null,(0,react.createElement)(Header,null),(0,react.createElement)(Body,null),(0,react.createElement)(Preview,null)):null}var EmojiPickerReact=(0,react.memo)(EmojiPicker,compareConfig),ErrorBoundary=function(_React$Component){function ErrorBoundary(props){var _this;return(_this=_React$Component.call(this,props)||this).state={hasError:!1},_this}!function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass)}(ErrorBoundary,_React$Component),ErrorBoundary.getDerivedStateFromError=function getDerivedStateFromError(){return{hasError:!0}};var _proto=ErrorBoundary.prototype;return _proto.componentDidCatch=function componentDidCatch(error,errorInfo){console.error("Emoji Picker React failed to render:",error,errorInfo)},_proto.render=function render(){return this.state.hasError?null:this.props.children},ErrorBoundary}(react.Component);const emoji_picker_react_esm=function EmojiPicker$1(props){var MutableConfigRef=function useDefineMutableConfig(config){var MutableConfigRef=react.useRef({onEmojiClick:config.onEmojiClick||emptyFunc,onReactionClick:config.onReactionClick||config.onEmojiClick,onSkinToneChange:config.onSkinToneChange||emptyFunc});return react.useEffect(function(){MutableConfigRef.current.onEmojiClick=config.onEmojiClick||emptyFunc,MutableConfigRef.current.onReactionClick=config.onReactionClick||config.onEmojiClick},[config.onEmojiClick,config.onReactionClick]),react.useEffect(function(){MutableConfigRef.current.onSkinToneChange=config.onSkinToneChange||emptyFunc},[config.onSkinToneChange]),MutableConfigRef}({onEmojiClick:props.onEmojiClick,onReactionClick:props.onReactionClick,onSkinToneChange:props.onSkinToneChange});return(0,react.createElement)(ErrorBoundary,null,(0,react.createElement)(MutableConfigContext.Provider,{value:MutableConfigRef},(0,react.createElement)(EmojiPickerReact,Object.assign({},props))))}},"./node_modules/firebase/app/dist/esm/index.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Wp:()=>_firebase_app__WEBPACK_IMPORTED_MODULE_0__.Wp});var _firebase_app__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@firebase/app/dist/esm/index.esm.js");(0,_firebase_app__WEBPACK_IMPORTED_MODULE_0__.KO)("firebase","12.3.0","app")},"./node_modules/firebase/auth/dist/esm/index.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{HF:()=>GoogleAuthProvider,xI:()=>getAuth,hg:()=>onAuthStateChanged,df:()=>signInWithPopup,CI:()=>signOut});var index_esm=__webpack_require__("./node_modules/@firebase/app/dist/esm/index.esm.js"),dist_index_esm=__webpack_require__("./node_modules/@firebase/util/dist/index.esm.js"),esm_index_esm=__webpack_require__("./node_modules/@firebase/logger/dist/esm/index.esm.js"),dist_esm_index_esm=__webpack_require__("./node_modules/@firebase/component/dist/esm/index.esm.js");function _prodErrorMap(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const prodErrorMap=_prodErrorMap,_DEFAULT_AUTH_ERROR_FACTORY=new dist_index_esm.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),logClient=new esm_index_esm.Vy("@firebase/auth");function _logError(msg,...args){logClient.logLevel<=esm_index_esm.$b.ERROR&&logClient.error(`Auth (${index_esm.MF}): ${msg}`,...args)}function _fail(authOrCode,...rest){throw createErrorInternal(authOrCode,...rest)}function _createError(authOrCode,...rest){return createErrorInternal(authOrCode,...rest)}function _errorWithCustomMessage(auth,code,message){const errorMap={...prodErrorMap(),[code]:message};return new dist_index_esm.FA("auth","Firebase",errorMap).create(code,{appName:auth.name})}function _serverAppCurrentUserOperationNotSupportedError(auth){return _errorWithCustomMessage(auth,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _assertInstanceOf(auth,object,instance){if(!(object instanceof instance))throw instance.name!==object.constructor.name&&_fail(auth,"argument-error"),_errorWithCustomMessage(auth,"argument-error",`Type of ${object.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function createErrorInternal(authOrCode,...rest){if("string"!=typeof authOrCode){const code=rest[0],fullParams=[...rest.slice(1)];return fullParams[0]&&(fullParams[0].appName=authOrCode.name),authOrCode._errorFactory.create(code,...fullParams)}return _DEFAULT_AUTH_ERROR_FACTORY.create(authOrCode,...rest)}function _assert(assertion,authOrCode,...rest){if(!assertion)throw createErrorInternal(authOrCode,...rest)}function debugFail(failure){const message="INTERNAL ASSERTION FAILED: "+failure;throw _logError(message),new Error(message)}function debugAssert(assertion,message){assertion||debugFail(message)}function _getCurrentUrl(){return"undefined"!=typeof self&&self.location?.href||""}function _isHttpOrHttps(){return"http:"===_getCurrentScheme()||"https:"===_getCurrentScheme()}function _getCurrentScheme(){return"undefined"!=typeof self&&self.location?.protocol||null}class Delay{constructor(shortDelay,longDelay){this.shortDelay=shortDelay,this.longDelay=longDelay,debugAssert(longDelay>shortDelay,"Short delay should be less than long delay!"),this.isMobile=(0,dist_index_esm.jZ)()||(0,dist_index_esm.lV)()}get(){return function _isOnline(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(_isHttpOrHttps()||(0,dist_index_esm.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function _emulatorUrl(config,path){debugAssert(config.emulator,"Emulator should always be set here");const{url}=config.emulator;return path?`${url}${path.startsWith("/")?path.slice(1):path}`:url}class FetchProvider{static initialize(fetchImpl,headersImpl,responseImpl){this.fetchImpl=fetchImpl,headersImpl&&(this.headersImpl=headersImpl),responseImpl&&(this.responseImpl=responseImpl)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void debugFail("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void debugFail("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void debugFail("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const SERVER_ERROR_MAP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},CookieAuthProxiedEndpoints=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],DEFAULT_API_TIMEOUT_MS=new Delay(3e4,6e4);function _addTidIfNecessary(auth,request){return auth.tenantId&&!request.tenantId?{...request,tenantId:auth.tenantId}:request}async function _performApiRequest(auth,method,path,request,customErrorMap={}){return _performFetchWithErrorHandling(auth,customErrorMap,async()=>{let body={},params={};request&&("GET"===method?params=request:body={body:JSON.stringify(request)});const query=(0,dist_index_esm.Am)({key:auth.config.apiKey,...params}).slice(1),headers=await auth._getAdditionalHeaders();headers["Content-Type"]="application/json",auth.languageCode&&(headers["X-Firebase-Locale"]=auth.languageCode);const fetchArgs={method,headers,...body};return(0,dist_index_esm.c1)()||(fetchArgs.referrerPolicy="no-referrer"),auth.emulatorConfig&&(0,dist_index_esm.zJ)(auth.emulatorConfig.host)&&(fetchArgs.credentials="include"),FetchProvider.fetch()(await _getFinalTarget(auth,auth.config.apiHost,path,query),fetchArgs)})}async function _performFetchWithErrorHandling(auth,customErrorMap,fetchFn){auth._canInitEmulator=!1;const errorMap={...SERVER_ERROR_MAP,...customErrorMap};try{const networkTimeout=new NetworkTimeout(auth),response=await Promise.race([fetchFn(),networkTimeout.promise]);networkTimeout.clearNetworkTimeout();const json=await response.json();if("needConfirmation"in json)throw _makeTaggedError(auth,"account-exists-with-different-credential",json);if(response.ok&&!("errorMessage"in json))return json;{const errorMessage=response.ok?json.errorMessage:json.error.message,[serverErrorCode,serverErrorMessage]=errorMessage.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===serverErrorCode)throw _makeTaggedError(auth,"credential-already-in-use",json);if("EMAIL_EXISTS"===serverErrorCode)throw _makeTaggedError(auth,"email-already-in-use",json);if("USER_DISABLED"===serverErrorCode)throw _makeTaggedError(auth,"user-disabled",json);const authError=errorMap[serverErrorCode]||serverErrorCode.toLowerCase().replace(/[_\s]+/g,"-");if(serverErrorMessage)throw _errorWithCustomMessage(auth,authError,serverErrorMessage);_fail(auth,authError)}}catch(e){if(e instanceof dist_index_esm.g)throw e;_fail(auth,"network-request-failed",{message:String(e)})}}async function _performSignInRequest(auth,method,path,request,customErrorMap={}){const serverResponse=await _performApiRequest(auth,method,path,request,customErrorMap);return"mfaPendingCredential"in serverResponse&&_fail(auth,"multi-factor-auth-required",{_serverResponse:serverResponse}),serverResponse}async function _getFinalTarget(auth,host,path,query){const base=`${host}${path}?${query}`,authInternal=auth,finalTarget=authInternal.config.emulator?_emulatorUrl(auth.config,base):`${auth.config.apiScheme}://${base}`;if(CookieAuthProxiedEndpoints.includes(path)&&(await authInternal._persistenceManagerAvailable,"COOKIE"===authInternal._getPersistenceType())){return authInternal._getPersistence()._getFinalTarget(finalTarget).toString()}return finalTarget}function _parseEnforcementState(enforcementStateStr){switch(enforcementStateStr){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class NetworkTimeout{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(auth){this.auth=auth,this.timer=null,this.promise=new Promise((_,reject)=>{this.timer=setTimeout(()=>reject(_createError(this.auth,"network-request-failed")),DEFAULT_API_TIMEOUT_MS.get())})}}function _makeTaggedError(auth,code,response){const errorParams={appName:auth.name};response.email&&(errorParams.email=response.email),response.phoneNumber&&(errorParams.phoneNumber=response.phoneNumber);const error=_createError(auth,code,errorParams);return error.customData._tokenResponse=response,error}function isEnterprise(grecaptcha){return void 0!==grecaptcha&&void 0!==grecaptcha.enterprise}class RecaptchaConfig{constructor(response){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===response.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=response.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=response.recaptchaEnforcementState}getProviderEnforcementState(providerStr){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const recaptchaEnforcementState of this.recaptchaEnforcementState)if(recaptchaEnforcementState.provider&&recaptchaEnforcementState.provider===providerStr)return _parseEnforcementState(recaptchaEnforcementState.enforcementState);return null}isProviderEnabled(providerStr){return"ENFORCE"===this.getProviderEnforcementState(providerStr)||"AUDIT"===this.getProviderEnforcementState(providerStr)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function getRecaptchaConfig(auth,request){return _performApiRequest(auth,"GET","/v2/recaptchaConfig",_addTidIfNecessary(auth,request))}async function getAccountInfo(auth,request){return _performApiRequest(auth,"POST","/v1/accounts:lookup",request)}function utcTimestampToDateString(utcTimestamp){if(utcTimestamp)try{const date=new Date(Number(utcTimestamp));if(!isNaN(date.getTime()))return date.toUTCString()}catch(e){}}function secondsStringToMilliseconds(seconds){return 1e3*Number(seconds)}function _parseToken(token){const[algorithm,payload,signature]=token.split(".");if(void 0===algorithm||void 0===payload||void 0===signature)return _logError("JWT malformed, contained fewer than 3 sections"),null;try{const decoded=(0,dist_index_esm.u)(payload);return decoded?JSON.parse(decoded):(_logError("Failed to decode base64 JWT payload"),null)}catch(e){return _logError("Caught error parsing JWT payload as JSON",e?.toString()),null}}function _tokenExpiresIn(token){const parsedToken=_parseToken(token);return _assert(parsedToken,"internal-error"),_assert(void 0!==parsedToken.exp,"internal-error"),_assert(void 0!==parsedToken.iat,"internal-error"),Number(parsedToken.exp)-Number(parsedToken.iat)}async function _logoutIfInvalidated(user,promise,bypassAuthState=!1){if(bypassAuthState)return promise;try{return await promise}catch(e){throw e instanceof dist_index_esm.g&&function isUserInvalidated({code}){return"auth/user-disabled"===code||"auth/user-token-expired"===code}(e)&&user.auth.currentUser===user&&await user.auth.signOut(),e}}class ProactiveRefresh{constructor(user){this.user=user,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(wasError){if(wasError){const interval=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),interval}{this.errorBackoff=3e4;const interval=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,interval)}}schedule(wasError=!1){if(!this.isRunning)return;const interval=this.getInterval(wasError);this.timerId=setTimeout(async()=>{await this.iteration()},interval)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===e?.code&&this.schedule(!0))}this.schedule()}}class UserMetadata{constructor(createdAt,lastLoginAt){this.createdAt=createdAt,this.lastLoginAt=lastLoginAt,this._initializeTime()}_initializeTime(){this.lastSignInTime=utcTimestampToDateString(this.lastLoginAt),this.creationTime=utcTimestampToDateString(this.createdAt)}_copy(metadata){this.createdAt=metadata.createdAt,this.lastLoginAt=metadata.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function _reloadWithoutSaving(user){const auth=user.auth,idToken=await user.getIdToken(),response=await _logoutIfInvalidated(user,getAccountInfo(auth,{idToken}));_assert(response?.users.length,auth,"internal-error");const coreAccount=response.users[0];user._notifyReloadListener(coreAccount);const newProviderData=coreAccount.providerUserInfo?.length?extractProviderData(coreAccount.providerUserInfo):[],providerData=function mergeProviderData(original,newData){return[...original.filter(o=>!newData.some(n=>n.providerId===o.providerId)),...newData]}(user.providerData,newProviderData),oldIsAnonymous=user.isAnonymous,newIsAnonymous=!(user.email&&coreAccount.passwordHash||providerData?.length),isAnonymous=!!oldIsAnonymous&&newIsAnonymous,updates={uid:coreAccount.localId,displayName:coreAccount.displayName||null,photoURL:coreAccount.photoUrl||null,email:coreAccount.email||null,emailVerified:coreAccount.emailVerified||!1,phoneNumber:coreAccount.phoneNumber||null,tenantId:coreAccount.tenantId||null,providerData,metadata:new UserMetadata(coreAccount.createdAt,coreAccount.lastLoginAt),isAnonymous};Object.assign(user,updates)}function extractProviderData(providers){return providers.map(({providerId,...provider})=>({providerId,uid:provider.rawId||"",displayName:provider.displayName||null,email:provider.email||null,phoneNumber:provider.phoneNumber||null,photoURL:provider.photoUrl||null}))}class StsTokenManager{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(response){_assert(response.idToken,"internal-error"),_assert(void 0!==response.idToken,"internal-error"),_assert(void 0!==response.refreshToken,"internal-error");const expiresIn="expiresIn"in response&&void 0!==response.expiresIn?Number(response.expiresIn):_tokenExpiresIn(response.idToken);this.updateTokensAndExpiration(response.idToken,response.refreshToken,expiresIn)}updateFromIdToken(idToken){_assert(0!==idToken.length,"internal-error");const expiresIn=_tokenExpiresIn(idToken);this.updateTokensAndExpiration(idToken,null,expiresIn)}async getToken(auth,forceRefresh=!1){return forceRefresh||!this.accessToken||this.isExpired?(_assert(this.refreshToken,auth,"user-token-expired"),this.refreshToken?(await this.refresh(auth,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(auth,oldToken){const{accessToken,refreshToken,expiresIn}=await async function requestStsToken(auth,refreshToken){const response=await _performFetchWithErrorHandling(auth,{},async()=>{const body=(0,dist_index_esm.Am)({grant_type:"refresh_token",refresh_token:refreshToken}).slice(1),{tokenApiHost,apiKey}=auth.config,url=await _getFinalTarget(auth,tokenApiHost,"/v1/token",`key=${apiKey}`),headers=await auth._getAdditionalHeaders();headers["Content-Type"]="application/x-www-form-urlencoded";const options={method:"POST",headers,body};return auth.emulatorConfig&&(0,dist_index_esm.zJ)(auth.emulatorConfig.host)&&(options.credentials="include"),FetchProvider.fetch()(url,options)});return{accessToken:response.access_token,expiresIn:response.expires_in,refreshToken:response.refresh_token}}(auth,oldToken);this.updateTokensAndExpiration(accessToken,refreshToken,Number(expiresIn))}updateTokensAndExpiration(accessToken,refreshToken,expiresInSec){this.refreshToken=refreshToken||null,this.accessToken=accessToken||null,this.expirationTime=Date.now()+1e3*expiresInSec}static fromJSON(appName,object){const{refreshToken,accessToken,expirationTime}=object,manager=new StsTokenManager;return refreshToken&&(_assert("string"==typeof refreshToken,"internal-error",{appName}),manager.refreshToken=refreshToken),accessToken&&(_assert("string"==typeof accessToken,"internal-error",{appName}),manager.accessToken=accessToken),expirationTime&&(_assert("number"==typeof expirationTime,"internal-error",{appName}),manager.expirationTime=expirationTime),manager}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(stsTokenManager){this.accessToken=stsTokenManager.accessToken,this.refreshToken=stsTokenManager.refreshToken,this.expirationTime=stsTokenManager.expirationTime}_clone(){return Object.assign(new StsTokenManager,this.toJSON())}_performRefresh(){return debugFail("not implemented")}}function assertStringOrUndefined(assertion,appName){_assert("string"==typeof assertion||void 0===assertion,"internal-error",{appName})}class UserImpl{constructor({uid,auth,stsTokenManager,...opt}){this.providerId="firebase",this.proactiveRefresh=new ProactiveRefresh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=uid,this.auth=auth,this.stsTokenManager=stsTokenManager,this.accessToken=stsTokenManager.accessToken,this.displayName=opt.displayName||null,this.email=opt.email||null,this.emailVerified=opt.emailVerified||!1,this.phoneNumber=opt.phoneNumber||null,this.photoURL=opt.photoURL||null,this.isAnonymous=opt.isAnonymous||!1,this.tenantId=opt.tenantId||null,this.providerData=opt.providerData?[...opt.providerData]:[],this.metadata=new UserMetadata(opt.createdAt||void 0,opt.lastLoginAt||void 0)}async getIdToken(forceRefresh){const accessToken=await _logoutIfInvalidated(this,this.stsTokenManager.getToken(this.auth,forceRefresh));return _assert(accessToken,this.auth,"internal-error"),this.accessToken!==accessToken&&(this.accessToken=accessToken,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),accessToken}getIdTokenResult(forceRefresh){return async function getIdTokenResult(user,forceRefresh=!1){const userInternal=(0,dist_index_esm.Ku)(user),token=await userInternal.getIdToken(forceRefresh),claims=_parseToken(token);_assert(claims&&claims.exp&&claims.auth_time&&claims.iat,userInternal.auth,"internal-error");const firebase="object"==typeof claims.firebase?claims.firebase:void 0,signInProvider=firebase?.sign_in_provider;return{claims,token,authTime:utcTimestampToDateString(secondsStringToMilliseconds(claims.auth_time)),issuedAtTime:utcTimestampToDateString(secondsStringToMilliseconds(claims.iat)),expirationTime:utcTimestampToDateString(secondsStringToMilliseconds(claims.exp)),signInProvider:signInProvider||null,signInSecondFactor:firebase?.sign_in_second_factor||null}}(this,forceRefresh)}reload(){return async function reload(user){const userInternal=(0,dist_index_esm.Ku)(user);await _reloadWithoutSaving(userInternal),await userInternal.auth._persistUserIfCurrent(userInternal),userInternal.auth._notifyListenersIfCurrent(userInternal)}(this)}_assign(user){this!==user&&(_assert(this.uid===user.uid,this.auth,"internal-error"),this.displayName=user.displayName,this.photoURL=user.photoURL,this.email=user.email,this.emailVerified=user.emailVerified,this.phoneNumber=user.phoneNumber,this.isAnonymous=user.isAnonymous,this.tenantId=user.tenantId,this.providerData=user.providerData.map(userInfo=>({...userInfo})),this.metadata._copy(user.metadata),this.stsTokenManager._assign(user.stsTokenManager))}_clone(auth){const newUser=new UserImpl({...this,auth,stsTokenManager:this.stsTokenManager._clone()});return newUser.metadata._copy(this.metadata),newUser}_onReload(callback){_assert(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=callback,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(userInfo){this.reloadListener?this.reloadListener(userInfo):this.reloadUserInfo=userInfo}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(response,reload=!1){let tokensRefreshed=!1;response.idToken&&response.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(response),tokensRefreshed=!0),reload&&await _reloadWithoutSaving(this),await this.auth._persistUserIfCurrent(this),tokensRefreshed&&this.auth._notifyListenersIfCurrent(this)}async delete(){if((0,index_esm.xZ)(this.auth.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this.auth));const idToken=await this.getIdToken();return await _logoutIfInvalidated(this,async function deleteAccount(auth,request){return _performApiRequest(auth,"POST","/v1/accounts:delete",request)}(this.auth,{idToken})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(userInfo=>({...userInfo})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(auth,object){const displayName=object.displayName??void 0,email=object.email??void 0,phoneNumber=object.phoneNumber??void 0,photoURL=object.photoURL??void 0,tenantId=object.tenantId??void 0,_redirectEventId=object._redirectEventId??void 0,createdAt=object.createdAt??void 0,lastLoginAt=object.lastLoginAt??void 0,{uid,emailVerified,isAnonymous,providerData,stsTokenManager:plainObjectTokenManager}=object;_assert(uid&&plainObjectTokenManager,auth,"internal-error");const stsTokenManager=StsTokenManager.fromJSON(this.name,plainObjectTokenManager);_assert("string"==typeof uid,auth,"internal-error"),assertStringOrUndefined(displayName,auth.name),assertStringOrUndefined(email,auth.name),_assert("boolean"==typeof emailVerified,auth,"internal-error"),_assert("boolean"==typeof isAnonymous,auth,"internal-error"),assertStringOrUndefined(phoneNumber,auth.name),assertStringOrUndefined(photoURL,auth.name),assertStringOrUndefined(tenantId,auth.name),assertStringOrUndefined(_redirectEventId,auth.name),assertStringOrUndefined(createdAt,auth.name),assertStringOrUndefined(lastLoginAt,auth.name);const user=new UserImpl({uid,auth,email,emailVerified,displayName,isAnonymous,photoURL,phoneNumber,tenantId,stsTokenManager,createdAt,lastLoginAt});return providerData&&Array.isArray(providerData)&&(user.providerData=providerData.map(userInfo=>({...userInfo}))),_redirectEventId&&(user._redirectEventId=_redirectEventId),user}static async _fromIdTokenResponse(auth,idTokenResponse,isAnonymous=!1){const stsTokenManager=new StsTokenManager;stsTokenManager.updateFromServerResponse(idTokenResponse);const user=new UserImpl({uid:idTokenResponse.localId,auth,stsTokenManager,isAnonymous});return await _reloadWithoutSaving(user),user}static async _fromGetAccountInfoResponse(auth,response,idToken){const coreAccount=response.users[0];_assert(void 0!==coreAccount.localId,"internal-error");const providerData=void 0!==coreAccount.providerUserInfo?extractProviderData(coreAccount.providerUserInfo):[],isAnonymous=!(coreAccount.email&&coreAccount.passwordHash||providerData?.length),stsTokenManager=new StsTokenManager;stsTokenManager.updateFromIdToken(idToken);const user=new UserImpl({uid:coreAccount.localId,auth,stsTokenManager,isAnonymous}),updates={uid:coreAccount.localId,displayName:coreAccount.displayName||null,photoURL:coreAccount.photoUrl||null,email:coreAccount.email||null,emailVerified:coreAccount.emailVerified||!1,phoneNumber:coreAccount.phoneNumber||null,tenantId:coreAccount.tenantId||null,providerData,metadata:new UserMetadata(coreAccount.createdAt,coreAccount.lastLoginAt),isAnonymous:!(coreAccount.email&&coreAccount.passwordHash||providerData?.length)};return Object.assign(user,updates),user}}const instanceCache=new Map;function _getInstance(cls){debugAssert(cls instanceof Function,"Expected a class definition");let instance=instanceCache.get(cls);return instance?(debugAssert(instance instanceof cls,"Instance stored in cache mismatched with class"),instance):(instance=new cls,instanceCache.set(cls,instance),instance)}class InMemoryPersistence{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(key,value){this.storage[key]=value}async _get(key){const value=this.storage[key];return void 0===value?null:value}async _remove(key){delete this.storage[key]}_addListener(_key,_listener){}_removeListener(_key,_listener){}}InMemoryPersistence.type="NONE";const inMemoryPersistence=InMemoryPersistence;function _persistenceKeyName(key,apiKey,appName){return`firebase:${key}:${apiKey}:${appName}`}class PersistenceUserManager{constructor(persistence,auth,userKey){this.persistence=persistence,this.auth=auth,this.userKey=userKey;const{config,name}=this.auth;this.fullUserKey=_persistenceKeyName(this.userKey,config.apiKey,name),this.fullPersistenceKey=_persistenceKeyName("persistence",config.apiKey,name),this.boundEventHandler=auth._onStorageEvent.bind(auth),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(user){return this.persistence._set(this.fullUserKey,user.toJSON())}async getCurrentUser(){const blob=await this.persistence._get(this.fullUserKey);if(!blob)return null;if("string"==typeof blob){const response=await getAccountInfo(this.auth,{idToken:blob}).catch(()=>{});return response?UserImpl._fromGetAccountInfoResponse(this.auth,response,blob):null}return UserImpl._fromJSON(this.auth,blob)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(newPersistence){if(this.persistence===newPersistence)return;const currentUser=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=newPersistence,currentUser?this.setCurrentUser(currentUser):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(auth,persistenceHierarchy,userKey="authUser"){if(!persistenceHierarchy.length)return new PersistenceUserManager(_getInstance(inMemoryPersistence),auth,userKey);const availablePersistences=(await Promise.all(persistenceHierarchy.map(async persistence=>{if(await persistence._isAvailable())return persistence}))).filter(persistence=>persistence);let selectedPersistence=availablePersistences[0]||_getInstance(inMemoryPersistence);const key=_persistenceKeyName(userKey,auth.config.apiKey,auth.name);let userToMigrate=null;for(const persistence of persistenceHierarchy)try{const blob=await persistence._get(key);if(blob){let user;if("string"==typeof blob){const response=await getAccountInfo(auth,{idToken:blob}).catch(()=>{});if(!response)break;user=await UserImpl._fromGetAccountInfoResponse(auth,response,blob)}else user=UserImpl._fromJSON(auth,blob);persistence!==selectedPersistence&&(userToMigrate=user),selectedPersistence=persistence;break}}catch{}const migrationHierarchy=availablePersistences.filter(p=>p._shouldAllowMigration);return selectedPersistence._shouldAllowMigration&&migrationHierarchy.length?(selectedPersistence=migrationHierarchy[0],userToMigrate&&await selectedPersistence._set(key,userToMigrate.toJSON()),await Promise.all(persistenceHierarchy.map(async persistence=>{if(persistence!==selectedPersistence)try{await persistence._remove(key)}catch{}})),new PersistenceUserManager(selectedPersistence,auth,userKey)):new PersistenceUserManager(selectedPersistence,auth,userKey)}}function _getBrowserName(userAgent){const ua=userAgent.toLowerCase();if(ua.includes("opera/")||ua.includes("opr/")||ua.includes("opios/"))return"Opera";if(_isIEMobile(ua))return"IEMobile";if(ua.includes("msie")||ua.includes("trident/"))return"IE";if(ua.includes("edge/"))return"Edge";if(_isFirefox(ua))return"Firefox";if(ua.includes("silk/"))return"Silk";if(_isBlackBerry(ua))return"Blackberry";if(_isWebOS(ua))return"Webos";if(_isSafari(ua))return"Safari";if((ua.includes("chrome/")||_isChromeIOS(ua))&&!ua.includes("edge/"))return"Chrome";if(_isAndroid(ua))return"Android";{const re=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,matches=userAgent.match(re);if(2===matches?.length)return matches[1]}return"Other"}function _isFirefox(ua=(0,dist_index_esm.ZQ)()){return/firefox\//i.test(ua)}function _isSafari(userAgent=(0,dist_index_esm.ZQ)()){const ua=userAgent.toLowerCase();return ua.includes("safari/")&&!ua.includes("chrome/")&&!ua.includes("crios/")&&!ua.includes("android")}function _isChromeIOS(ua=(0,dist_index_esm.ZQ)()){return/crios\//i.test(ua)}function _isIEMobile(ua=(0,dist_index_esm.ZQ)()){return/iemobile/i.test(ua)}function _isAndroid(ua=(0,dist_index_esm.ZQ)()){return/android/i.test(ua)}function _isBlackBerry(ua=(0,dist_index_esm.ZQ)()){return/blackberry/i.test(ua)}function _isWebOS(ua=(0,dist_index_esm.ZQ)()){return/webos/i.test(ua)}function _isIOS(ua=(0,dist_index_esm.ZQ)()){return/iphone|ipad|ipod/i.test(ua)||/macintosh/i.test(ua)&&/mobile/i.test(ua)}function _isMobileBrowser(ua=(0,dist_index_esm.ZQ)()){return _isIOS(ua)||_isAndroid(ua)||_isWebOS(ua)||_isBlackBerry(ua)||/windows phone/i.test(ua)||_isIEMobile(ua)}function _getClientVersion(clientPlatform,frameworks=[]){let reportedPlatform;switch(clientPlatform){case"Browser":reportedPlatform=_getBrowserName((0,dist_index_esm.ZQ)());break;case"Worker":reportedPlatform=`${_getBrowserName((0,dist_index_esm.ZQ)())}-${clientPlatform}`;break;default:reportedPlatform=clientPlatform}const reportedFrameworks=frameworks.length?frameworks.join(","):"FirebaseCore-web";return`${reportedPlatform}/JsCore/${index_esm.MF}/${reportedFrameworks}`}class AuthMiddlewareQueue{constructor(auth){this.auth=auth,this.queue=[]}pushCallback(callback,onAbort){const wrappedCallback=user=>new Promise((resolve,reject)=>{try{resolve(callback(user))}catch(e){reject(e)}});wrappedCallback.onAbort=onAbort,this.queue.push(wrappedCallback);const index=this.queue.length-1;return()=>{this.queue[index]=()=>Promise.resolve()}}async runMiddleware(nextUser){if(this.auth.currentUser===nextUser)return;const onAbortStack=[];try{for(const beforeStateCallback of this.queue)await beforeStateCallback(nextUser),beforeStateCallback.onAbort&&onAbortStack.push(beforeStateCallback.onAbort)}catch(e){onAbortStack.reverse();for(const onAbort of onAbortStack)try{onAbort()}catch(_){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:e?.message})}}}class PasswordPolicyImpl{constructor(response){const responseOptions=response.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=responseOptions.minPasswordLength??6,responseOptions.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=responseOptions.maxPasswordLength),void 0!==responseOptions.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=responseOptions.containsLowercaseCharacter),void 0!==responseOptions.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=responseOptions.containsUppercaseCharacter),void 0!==responseOptions.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=responseOptions.containsNumericCharacter),void 0!==responseOptions.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=responseOptions.containsNonAlphanumericCharacter),this.enforcementState=response.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=response.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=response.forceUpgradeOnSignin??!1,this.schemaVersion=response.schemaVersion}validatePassword(password){const status={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(password,status),this.validatePasswordCharacterOptions(password,status),status.isValid&&(status.isValid=status.meetsMinPasswordLength??!0),status.isValid&&(status.isValid=status.meetsMaxPasswordLength??!0),status.isValid&&(status.isValid=status.containsLowercaseLetter??!0),status.isValid&&(status.isValid=status.containsUppercaseLetter??!0),status.isValid&&(status.isValid=status.containsNumericCharacter??!0),status.isValid&&(status.isValid=status.containsNonAlphanumericCharacter??!0),status}validatePasswordLengthOptions(password,status){const minPasswordLength=this.customStrengthOptions.minPasswordLength,maxPasswordLength=this.customStrengthOptions.maxPasswordLength;minPasswordLength&&(status.meetsMinPasswordLength=password.length>=minPasswordLength),maxPasswordLength&&(status.meetsMaxPasswordLength=password.length<=maxPasswordLength)}validatePasswordCharacterOptions(password,status){let passwordChar;this.updatePasswordCharacterOptionsStatuses(status,!1,!1,!1,!1);for(let i=0;i<password.length;i++)passwordChar=password.charAt(i),this.updatePasswordCharacterOptionsStatuses(status,passwordChar>="a"&&passwordChar<="z",passwordChar>="A"&&passwordChar<="Z",passwordChar>="0"&&passwordChar<="9",this.allowedNonAlphanumericCharacters.includes(passwordChar))}updatePasswordCharacterOptionsStatuses(status,containsLowercaseCharacter,containsUppercaseCharacter,containsNumericCharacter,containsNonAlphanumericCharacter){this.customStrengthOptions.containsLowercaseLetter&&(status.containsLowercaseLetter||(status.containsLowercaseLetter=containsLowercaseCharacter)),this.customStrengthOptions.containsUppercaseLetter&&(status.containsUppercaseLetter||(status.containsUppercaseLetter=containsUppercaseCharacter)),this.customStrengthOptions.containsNumericCharacter&&(status.containsNumericCharacter||(status.containsNumericCharacter=containsNumericCharacter)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(status.containsNonAlphanumericCharacter||(status.containsNonAlphanumericCharacter=containsNonAlphanumericCharacter))}}class AuthImpl{constructor(app,heartbeatServiceProvider,appCheckServiceProvider,config){this.app=app,this.heartbeatServiceProvider=heartbeatServiceProvider,this.appCheckServiceProvider=appCheckServiceProvider,this.config=config,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Subscription(this),this.idTokenSubscription=new Subscription(this),this.beforeStateQueue=new AuthMiddlewareQueue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_DEFAULT_AUTH_ERROR_FACTORY,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=app.name,this.clientVersion=config.sdkClientVersion,this._persistenceManagerAvailable=new Promise(resolve=>this._resolvePersistenceManagerAvailable=resolve)}_initializeWithPersistence(persistenceHierarchy,popupRedirectResolver){return popupRedirectResolver&&(this._popupRedirectResolver=_getInstance(popupRedirectResolver)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await PersistenceUserManager.create(this,persistenceHierarchy),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(popupRedirectResolver),this.lastNotifiedUid=this.currentUser?.uid||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const user=await this.assertedPersistence.getCurrentUser();return this.currentUser||user?this.currentUser&&user&&this.currentUser.uid===user.uid?(this._currentUser._assign(user),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(user,!0):void 0}async initializeCurrentUserFromIdToken(idToken){try{const response=await getAccountInfo(this,{idToken}),user=await UserImpl._fromGetAccountInfoResponse(this,response,idToken);await this.directlySetCurrentUser(user)}catch(err){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",err),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(popupRedirectResolver){if((0,index_esm.xZ)(this.app)){const idToken=this.app.settings.authIdToken;return idToken?new Promise(resolve=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(idToken).then(resolve,resolve))}):this.directlySetCurrentUser(null)}const previouslyStoredUser=await this.assertedPersistence.getCurrentUser();let futureCurrentUser=previouslyStoredUser,needsTocheckMiddleware=!1;if(popupRedirectResolver&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const redirectUserEventId=this.redirectUser?._redirectEventId,storedUserEventId=futureCurrentUser?._redirectEventId,result=await this.tryRedirectSignIn(popupRedirectResolver);redirectUserEventId&&redirectUserEventId!==storedUserEventId||!result?.user||(futureCurrentUser=result.user,needsTocheckMiddleware=!0)}if(!futureCurrentUser)return this.directlySetCurrentUser(null);if(!futureCurrentUser._redirectEventId){if(needsTocheckMiddleware)try{await this.beforeStateQueue.runMiddleware(futureCurrentUser)}catch(e){futureCurrentUser=previouslyStoredUser,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return futureCurrentUser?this.reloadAndSetCurrentUserOrClear(futureCurrentUser):this.directlySetCurrentUser(null)}return _assert(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===futureCurrentUser._redirectEventId?this.directlySetCurrentUser(futureCurrentUser):this.reloadAndSetCurrentUserOrClear(futureCurrentUser)}async tryRedirectSignIn(redirectResolver){let result=null;try{result=await this._popupRedirectResolver._completeRedirectFn(this,redirectResolver,!0)}catch(e){await this._setRedirectUser(null)}return result}async reloadAndSetCurrentUserOrClear(user){try{await _reloadWithoutSaving(user)}catch(e){if("auth/network-request-failed"!==e?.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(user)}useDeviceLanguage(){this.languageCode=function _getUserLanguage(){if("undefined"==typeof navigator)return null;const navigatorLanguage=navigator;return navigatorLanguage.languages&&navigatorLanguage.languages[0]||navigatorLanguage.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(userExtern){if((0,index_esm.xZ)(this.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this));const user=userExtern?(0,dist_index_esm.Ku)(userExtern):null;return user&&_assert(user.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(user&&user._clone(this))}async _updateCurrentUser(user,skipBeforeStateCallbacks=!1){if(!this._deleted)return user&&_assert(this.tenantId===user.tenantId,this,"tenant-id-mismatch"),skipBeforeStateCallbacks||await this.beforeStateQueue.runMiddleware(user),this.queue(async()=>{await this.directlySetCurrentUser(user),this.notifyAuthListeners()})}async signOut(){return(0,index_esm.xZ)(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(persistence){return(0,index_esm.xZ)(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_getInstance(persistence))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(password){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const passwordPolicy=this._getPasswordPolicyInternal();return passwordPolicy.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):passwordPolicy.validatePassword(password)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const response=await async function _getPasswordPolicy(auth,request={}){return _performApiRequest(auth,"GET","/v2/passwordPolicy",_addTidIfNecessary(auth,request))}(this),passwordPolicy=new PasswordPolicyImpl(response);null===this.tenantId?this._projectPasswordPolicy=passwordPolicy:this._tenantPasswordPolicies[this.tenantId]=passwordPolicy}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(errorMap){this._errorFactory=new dist_index_esm.FA("auth","Firebase",errorMap())}onAuthStateChanged(nextOrObserver,error,completed){return this.registerStateListener(this.authStateSubscription,nextOrObserver,error,completed)}beforeAuthStateChanged(callback,onAbort){return this.beforeStateQueue.pushCallback(callback,onAbort)}onIdTokenChanged(nextOrObserver,error,completed){return this.registerStateListener(this.idTokenSubscription,nextOrObserver,error,completed)}authStateReady(){return new Promise((resolve,reject)=>{if(this.currentUser)resolve();else{const unsubscribe=this.onAuthStateChanged(()=>{unsubscribe(),resolve()},reject)}})}async revokeAccessToken(token){if(this.currentUser){const request={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(request.tenantId=this.tenantId),await async function revokeToken(auth,request){return _performApiRequest(auth,"POST","/v2/accounts:revokeToken",_addTidIfNecessary(auth,request))}(this,request)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(user,popupRedirectResolver){const redirectManager=await this.getOrInitRedirectPersistenceManager(popupRedirectResolver);return null===user?redirectManager.removeCurrentUser():redirectManager.setCurrentUser(user)}async getOrInitRedirectPersistenceManager(popupRedirectResolver){if(!this.redirectPersistenceManager){const resolver=popupRedirectResolver&&_getInstance(popupRedirectResolver)||this._popupRedirectResolver;_assert(resolver,this,"argument-error"),this.redirectPersistenceManager=await PersistenceUserManager.create(this,[_getInstance(resolver._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(id){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===id?this._currentUser:this.redirectUser?._redirectEventId===id?this.redirectUser:null}async _persistUserIfCurrent(user){if(user===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(user))}_notifyListenersIfCurrent(user){user===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const currentUid=this.currentUser?.uid??null;this.lastNotifiedUid!==currentUid&&(this.lastNotifiedUid=currentUid,this.authStateSubscription.next(this.currentUser))}registerStateListener(subscription,nextOrObserver,error,completed){if(this._deleted)return()=>{};const cb="function"==typeof nextOrObserver?nextOrObserver:nextOrObserver.next.bind(nextOrObserver);let isUnsubscribed=!1;const promise=this._isInitialized?Promise.resolve():this._initializationPromise;if(_assert(promise,this,"internal-error"),promise.then(()=>{isUnsubscribed||cb(this.currentUser)}),"function"==typeof nextOrObserver){const unsubscribe=subscription.addObserver(nextOrObserver,error,completed);return()=>{isUnsubscribed=!0,unsubscribe()}}{const unsubscribe=subscription.addObserver(nextOrObserver);return()=>{isUnsubscribed=!0,unsubscribe()}}}async directlySetCurrentUser(user){this.currentUser&&this.currentUser!==user&&this._currentUser._stopProactiveRefresh(),user&&this.isProactiveRefreshEnabled&&user._startProactiveRefresh(),this.currentUser=user,user?await this.assertedPersistence.setCurrentUser(user):await this.assertedPersistence.removeCurrentUser()}queue(action){return this.operations=this.operations.then(action,action),this.operations}get assertedPersistence(){return _assert(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(framework){framework&&!this.frameworks.includes(framework)&&(this.frameworks.push(framework),this.frameworks.sort(),this.clientVersion=_getClientVersion(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const headers={"X-Client-Version":this.clientVersion};this.app.options.appId&&(headers["X-Firebase-gmpid"]=this.app.options.appId);const heartbeatsHeader=await(this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader());heartbeatsHeader&&(headers["X-Firebase-Client"]=heartbeatsHeader);const appCheckToken=await this._getAppCheckToken();return appCheckToken&&(headers["X-Firebase-AppCheck"]=appCheckToken),headers}async _getAppCheckToken(){if((0,index_esm.xZ)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const appCheckTokenResult=await(this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken());return appCheckTokenResult?.error&&function _logWarn(msg,...args){logClient.logLevel<=esm_index_esm.$b.WARN&&logClient.warn(`Auth (${index_esm.MF}): ${msg}`,...args)}(`Error while retrieving App Check token: ${appCheckTokenResult.error}`),appCheckTokenResult?.token}}function _castAuth(auth){return(0,dist_index_esm.Ku)(auth)}class Subscription{constructor(auth){this.auth=auth,this.observer=null,this.addObserver=(0,dist_index_esm.tD)(observer=>this.observer=observer)}get next(){return _assert(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let externalJSProvider={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _loadJS(url){return externalJSProvider.loadJS(url)}function _generateCallbackName(prefix){return`__${prefix}${Math.floor(1e6*Math.random())}`}class MockGreCAPTCHATopLevel{constructor(){this.enterprise=new MockGreCAPTCHA}ready(callback){callback()}execute(_siteKey,_options){return Promise.resolve("token")}render(_container,_parameters){return""}}class MockGreCAPTCHA{ready(callback){callback()}execute(_siteKey,_options){return Promise.resolve("token")}render(_container,_parameters){return""}}class RecaptchaEnterpriseVerifier{constructor(authExtern){this.type="recaptcha-enterprise",this.auth=_castAuth(authExtern)}async verify(action="verify",forceRefresh=!1){function retrieveRecaptchaToken(siteKey,resolve,reject){const grecaptcha=window.grecaptcha;isEnterprise(grecaptcha)?grecaptcha.enterprise.ready(()=>{grecaptcha.enterprise.execute(siteKey,{action}).then(token=>{resolve(token)}).catch(()=>{resolve("NO_RECAPTCHA")})}):reject(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new MockGreCAPTCHATopLevel).execute("siteKey",{action:"verify"})}return new Promise((resolve,reject)=>{(async function retrieveSiteKey(auth){if(!forceRefresh){if(null==auth.tenantId&&null!=auth._agentRecaptchaConfig)return auth._agentRecaptchaConfig.siteKey;if(null!=auth.tenantId&&void 0!==auth._tenantRecaptchaConfigs[auth.tenantId])return auth._tenantRecaptchaConfigs[auth.tenantId].siteKey}return new Promise(async(resolve,reject)=>{getRecaptchaConfig(auth,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(response=>{if(void 0!==response.recaptchaKey){const config=new RecaptchaConfig(response);return null==auth.tenantId?auth._agentRecaptchaConfig=config:auth._tenantRecaptchaConfigs[auth.tenantId]=config,resolve(config.siteKey)}reject(new Error("recaptcha Enterprise site key undefined"))}).catch(error=>{reject(error)})})})(this.auth).then(siteKey=>{if(!forceRefresh&&isEnterprise(window.grecaptcha))retrieveRecaptchaToken(siteKey,resolve,reject);else{if("undefined"==typeof window)return void reject(new Error("RecaptchaVerifier is only supported in browser"));let url=function _recaptchaEnterpriseScriptUrl(){return externalJSProvider.recaptchaEnterpriseScript}();0!==url.length&&(url+=siteKey),_loadJS(url).then(()=>{retrieveRecaptchaToken(siteKey,resolve,reject)}).catch(error=>{reject(error)})}}).catch(error=>{reject(error)})})}}async function injectRecaptchaFields(auth,request,action,isCaptchaResp=!1,isFakeToken=!1){const verifier=new RecaptchaEnterpriseVerifier(auth);let captchaResponse;if(isFakeToken)captchaResponse="NO_RECAPTCHA";else try{captchaResponse=await verifier.verify(action)}catch(error){captchaResponse=await verifier.verify(action,!0)}const newRequest={...request};if("mfaSmsEnrollment"===action||"mfaSmsSignIn"===action){if("phoneEnrollmentInfo"in newRequest){const phoneNumber=newRequest.phoneEnrollmentInfo.phoneNumber,recaptchaToken=newRequest.phoneEnrollmentInfo.recaptchaToken;Object.assign(newRequest,{phoneEnrollmentInfo:{phoneNumber,recaptchaToken,captchaResponse,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in newRequest){const recaptchaToken=newRequest.phoneSignInInfo.recaptchaToken;Object.assign(newRequest,{phoneSignInInfo:{recaptchaToken,captchaResponse,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return newRequest}return isCaptchaResp?Object.assign(newRequest,{captchaResp:captchaResponse}):Object.assign(newRequest,{captchaResponse}),Object.assign(newRequest,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(newRequest,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),newRequest}async function handleRecaptchaFlow(authInstance,request,actionName,actionMethod,recaptchaAuthProvider){if("EMAIL_PASSWORD_PROVIDER"===recaptchaAuthProvider){if(authInstance._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const requestWithRecaptcha=await injectRecaptchaFields(authInstance,request,actionName,"getOobCode"===actionName);return actionMethod(authInstance,requestWithRecaptcha)}return actionMethod(authInstance,request).catch(async error=>{if("auth/missing-recaptcha-token"===error.code){console.log(`${actionName} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const requestWithRecaptcha=await injectRecaptchaFields(authInstance,request,actionName,"getOobCode"===actionName);return actionMethod(authInstance,requestWithRecaptcha)}return Promise.reject(error)})}if("PHONE_PROVIDER"===recaptchaAuthProvider){if(authInstance._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){const requestWithRecaptcha=await injectRecaptchaFields(authInstance,request,actionName);return actionMethod(authInstance,requestWithRecaptcha).catch(async error=>{if("AUDIT"===authInstance._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")&&("auth/missing-recaptcha-token"===error.code||"auth/invalid-app-credential"===error.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${actionName} flow.`);const requestWithRecaptchaFields=await injectRecaptchaFields(authInstance,request,actionName,!1,!0);return actionMethod(authInstance,requestWithRecaptchaFields)}return Promise.reject(error)})}{const requestWithRecaptchaFields=await injectRecaptchaFields(authInstance,request,actionName,!1,!0);return actionMethod(authInstance,requestWithRecaptchaFields)}}return Promise.reject(recaptchaAuthProvider+" provider is not supported.")}async function _initializeRecaptchaConfig(auth){const authInternal=_castAuth(auth),response=await getRecaptchaConfig(authInternal,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),config=new RecaptchaConfig(response);if(null==authInternal.tenantId?authInternal._agentRecaptchaConfig=config:authInternal._tenantRecaptchaConfigs[authInternal.tenantId]=config,config.isAnyProviderEnabled()){new RecaptchaEnterpriseVerifier(authInternal).verify()}}function connectAuthEmulator(auth,url,options){const authInternal=_castAuth(auth);_assert(/^https?:\/\//.test(url),authInternal,"invalid-emulator-scheme");const disableWarnings=!!options?.disableWarnings,protocol=extractProtocol(url),{host,port}=function extractHostAndPort(url){const protocol=extractProtocol(url),authority=/(\/\/)?([^?#/]+)/.exec(url.substr(protocol.length));if(!authority)return{host:"",port:null};const hostAndPort=authority[2].split("@").pop()||"",bracketedIPv6=/^(\[[^\]]+\])(:|$)/.exec(hostAndPort);if(bracketedIPv6){const host=bracketedIPv6[1];return{host,port:parsePort(hostAndPort.substr(host.length+1))}}{const[host,port]=hostAndPort.split(":");return{host,port:parsePort(port)}}}(url),portStr=null===port?"":`:${port}`,emulator={url:`${protocol}//${host}${portStr}/`},emulatorConfig=Object.freeze({host,port,protocol:protocol.replace(":",""),options:Object.freeze({disableWarnings})});if(!authInternal._canInitEmulator)return _assert(authInternal.config.emulator&&authInternal.emulatorConfig,authInternal,"emulator-config-failed"),void _assert((0,dist_index_esm.bD)(emulator,authInternal.config.emulator)&&(0,dist_index_esm.bD)(emulatorConfig,authInternal.emulatorConfig),authInternal,"emulator-config-failed");authInternal.config.emulator=emulator,authInternal.emulatorConfig=emulatorConfig,authInternal.settings.appVerificationDisabledForTesting=!0,(0,dist_index_esm.zJ)(host)?((0,dist_index_esm.gE)(`${protocol}//${host}${portStr}`),(0,dist_index_esm.P1)("Auth",!0)):disableWarnings||function emitEmulatorWarning(){function attachBanner(){const el=document.createElement("p"),sty=el.style;el.innerText="Running in emulator mode. Do not use with production credentials.",sty.position="fixed",sty.width="100%",sty.backgroundColor="#ffffff",sty.border=".1em solid #000000",sty.color="#b50000",sty.bottom="0px",sty.left="0px",sty.margin="0px",sty.zIndex="10000",sty.textAlign="center",el.classList.add("firebase-emulator-warning"),document.body.appendChild(el)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",attachBanner):attachBanner())}()}function extractProtocol(url){const protocolEnd=url.indexOf(":");return protocolEnd<0?"":url.substr(0,protocolEnd+1)}function parsePort(portStr){if(!portStr)return null;const port=Number(portStr);return isNaN(port)?null:port}class AuthCredential{constructor(providerId,signInMethod){this.providerId=providerId,this.signInMethod=signInMethod}toJSON(){return debugFail("not implemented")}_getIdTokenResponse(_auth){return debugFail("not implemented")}_linkToIdToken(_auth,_idToken){return debugFail("not implemented")}_getReauthenticationResolver(_auth){return debugFail("not implemented")}}async function linkEmailPassword(auth,request){return _performApiRequest(auth,"POST","/v1/accounts:signUp",request)}async function signInWithPassword(auth,request){return _performSignInRequest(auth,"POST","/v1/accounts:signInWithPassword",_addTidIfNecessary(auth,request))}class EmailAuthCredential extends AuthCredential{constructor(_email,_password,signInMethod,_tenantId=null){super("password",signInMethod),this._email=_email,this._password=_password,this._tenantId=_tenantId}static _fromEmailAndPassword(email,password){return new EmailAuthCredential(email,password,"password")}static _fromEmailAndCode(email,oobCode,tenantId=null){return new EmailAuthCredential(email,oobCode,"emailLink",tenantId)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(json){const obj="string"==typeof json?JSON.parse(json):json;if(obj?.email&&obj?.password){if("password"===obj.signInMethod)return this._fromEmailAndPassword(obj.email,obj.password);if("emailLink"===obj.signInMethod)return this._fromEmailAndCode(obj.email,obj.password,obj.tenantId)}return null}async _getIdTokenResponse(auth){switch(this.signInMethod){case"password":return handleRecaptchaFlow(auth,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",signInWithPassword,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function signInWithEmailLink$1(auth,request){return _performSignInRequest(auth,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(auth,request))}(auth,{email:this._email,oobCode:this._password});default:_fail(auth,"internal-error")}}async _linkToIdToken(auth,idToken){switch(this.signInMethod){case"password":return handleRecaptchaFlow(auth,{idToken,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",linkEmailPassword,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function signInWithEmailLinkForLinking(auth,request){return _performSignInRequest(auth,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(auth,request))}(auth,{idToken,email:this._email,oobCode:this._password});default:_fail(auth,"internal-error")}}_getReauthenticationResolver(auth){return this._getIdTokenResponse(auth)}}async function signInWithIdp(auth,request){return _performSignInRequest(auth,"POST","/v1/accounts:signInWithIdp",_addTidIfNecessary(auth,request))}class OAuthCredential extends AuthCredential{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(params){const cred=new OAuthCredential(params.providerId,params.signInMethod);return params.idToken||params.accessToken?(params.idToken&&(cred.idToken=params.idToken),params.accessToken&&(cred.accessToken=params.accessToken),params.nonce&&!params.pendingToken&&(cred.nonce=params.nonce),params.pendingToken&&(cred.pendingToken=params.pendingToken)):params.oauthToken&&params.oauthTokenSecret?(cred.accessToken=params.oauthToken,cred.secret=params.oauthTokenSecret):_fail("argument-error"),cred}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(json){const obj="string"==typeof json?JSON.parse(json):json,{providerId,signInMethod,...rest}=obj;if(!providerId||!signInMethod)return null;const cred=new OAuthCredential(providerId,signInMethod);return cred.idToken=rest.idToken||void 0,cred.accessToken=rest.accessToken||void 0,cred.secret=rest.secret,cred.nonce=rest.nonce,cred.pendingToken=rest.pendingToken||null,cred}_getIdTokenResponse(auth){return signInWithIdp(auth,this.buildRequest())}_linkToIdToken(auth,idToken){const request=this.buildRequest();return request.idToken=idToken,signInWithIdp(auth,request)}_getReauthenticationResolver(auth){const request=this.buildRequest();return request.autoCreate=!1,signInWithIdp(auth,request)}buildRequest(){const request={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)request.pendingToken=this.pendingToken;else{const postBody={};this.idToken&&(postBody.id_token=this.idToken),this.accessToken&&(postBody.access_token=this.accessToken),this.secret&&(postBody.oauth_token_secret=this.secret),postBody.providerId=this.providerId,this.nonce&&!this.pendingToken&&(postBody.nonce=this.nonce),request.postBody=(0,dist_index_esm.Am)(postBody)}return request}}async function sendPhoneVerificationCode(auth,request){return _performApiRequest(auth,"POST","/v1/accounts:sendVerificationCode",_addTidIfNecessary(auth,request))}const VERIFY_PHONE_NUMBER_FOR_EXISTING_ERROR_MAP_={USER_NOT_FOUND:"user-not-found"};class PhoneAuthCredential extends AuthCredential{constructor(params){super("phone","phone"),this.params=params}static _fromVerification(verificationId,verificationCode){return new PhoneAuthCredential({verificationId,verificationCode})}static _fromTokenResponse(phoneNumber,temporaryProof){return new PhoneAuthCredential({phoneNumber,temporaryProof})}_getIdTokenResponse(auth){return async function signInWithPhoneNumber$1(auth,request){return _performSignInRequest(auth,"POST","/v1/accounts:signInWithPhoneNumber",_addTidIfNecessary(auth,request))}(auth,this._makeVerificationRequest())}_linkToIdToken(auth,idToken){return async function linkWithPhoneNumber$1(auth,request){const response=await _performSignInRequest(auth,"POST","/v1/accounts:signInWithPhoneNumber",_addTidIfNecessary(auth,request));if(response.temporaryProof)throw _makeTaggedError(auth,"account-exists-with-different-credential",response);return response}(auth,{idToken,...this._makeVerificationRequest()})}_getReauthenticationResolver(auth){return async function verifyPhoneNumberForExisting(auth,request){return _performSignInRequest(auth,"POST","/v1/accounts:signInWithPhoneNumber",_addTidIfNecessary(auth,{...request,operation:"REAUTH"}),VERIFY_PHONE_NUMBER_FOR_EXISTING_ERROR_MAP_)}(auth,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof,phoneNumber,verificationId,verificationCode}=this.params;return temporaryProof&&phoneNumber?{temporaryProof,phoneNumber}:{sessionInfo:verificationId,code:verificationCode}}toJSON(){const obj={providerId:this.providerId};return this.params.phoneNumber&&(obj.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(obj.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(obj.verificationCode=this.params.verificationCode),this.params.verificationId&&(obj.verificationId=this.params.verificationId),obj}static fromJSON(json){"string"==typeof json&&(json=JSON.parse(json));const{verificationId,verificationCode,phoneNumber,temporaryProof}=json;return verificationCode||verificationId||phoneNumber||temporaryProof?new PhoneAuthCredential({verificationId,verificationCode,phoneNumber,temporaryProof}):null}}class ActionCodeURL{constructor(actionLink){const searchParams=(0,dist_index_esm.I9)((0,dist_index_esm.hp)(actionLink)),apiKey=searchParams.apiKey??null,code=searchParams.oobCode??null,operation=function parseMode(mode){switch(mode){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(searchParams.mode??null);_assert(apiKey&&code&&operation,"argument-error"),this.apiKey=apiKey,this.operation=operation,this.code=code,this.continueUrl=searchParams.continueUrl??null,this.languageCode=searchParams.lang??null,this.tenantId=searchParams.tenantId??null}static parseLink(link){const actionLink=function parseDeepLink(url){const link=(0,dist_index_esm.I9)((0,dist_index_esm.hp)(url)).link,doubleDeepLink=link?(0,dist_index_esm.I9)((0,dist_index_esm.hp)(link)).deep_link_id:null,iOSDeepLink=(0,dist_index_esm.I9)((0,dist_index_esm.hp)(url)).deep_link_id;return(iOSDeepLink?(0,dist_index_esm.I9)((0,dist_index_esm.hp)(iOSDeepLink)).link:null)||iOSDeepLink||doubleDeepLink||link||url}(link);try{return new ActionCodeURL(actionLink)}catch{return null}}}class EmailAuthProvider{constructor(){this.providerId=EmailAuthProvider.PROVIDER_ID}static credential(email,password){return EmailAuthCredential._fromEmailAndPassword(email,password)}static credentialWithLink(email,emailLink){const actionCodeUrl=ActionCodeURL.parseLink(emailLink);return _assert(actionCodeUrl,"argument-error"),EmailAuthCredential._fromEmailAndCode(email,actionCodeUrl.code,actionCodeUrl.tenantId)}}EmailAuthProvider.PROVIDER_ID="password",EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD="password",EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class FederatedAuthProvider{constructor(providerId){this.providerId=providerId,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(languageCode){this.defaultLanguageCode=languageCode}setCustomParameters(customOAuthParameters){return this.customParameters=customOAuthParameters,this}getCustomParameters(){return this.customParameters}}class BaseOAuthProvider extends FederatedAuthProvider{constructor(){super(...arguments),this.scopes=[]}addScope(scope){return this.scopes.includes(scope)||this.scopes.push(scope),this}getScopes(){return[...this.scopes]}}class FacebookAuthProvider extends BaseOAuthProvider{constructor(){super("facebook.com")}static credential(accessToken){return OAuthCredential._fromParams({providerId:FacebookAuthProvider.PROVIDER_ID,signInMethod:FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD,accessToken})}static credentialFromResult(userCredential){return FacebookAuthProvider.credentialFromTaggedObject(userCredential)}static credentialFromError(error){return FacebookAuthProvider.credentialFromTaggedObject(error.customData||{})}static credentialFromTaggedObject({_tokenResponse:tokenResponse}){if(!tokenResponse||!("oauthAccessToken"in tokenResponse))return null;if(!tokenResponse.oauthAccessToken)return null;try{return FacebookAuthProvider.credential(tokenResponse.oauthAccessToken)}catch{return null}}}FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD="facebook.com",FacebookAuthProvider.PROVIDER_ID="facebook.com";class GoogleAuthProvider extends BaseOAuthProvider{constructor(){super("google.com"),this.addScope("profile")}static credential(idToken,accessToken){return OAuthCredential._fromParams({providerId:GoogleAuthProvider.PROVIDER_ID,signInMethod:GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD,idToken,accessToken})}static credentialFromResult(userCredential){return GoogleAuthProvider.credentialFromTaggedObject(userCredential)}static credentialFromError(error){return GoogleAuthProvider.credentialFromTaggedObject(error.customData||{})}static credentialFromTaggedObject({_tokenResponse:tokenResponse}){if(!tokenResponse)return null;const{oauthIdToken,oauthAccessToken}=tokenResponse;if(!oauthIdToken&&!oauthAccessToken)return null;try{return GoogleAuthProvider.credential(oauthIdToken,oauthAccessToken)}catch{return null}}}GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD="google.com",GoogleAuthProvider.PROVIDER_ID="google.com";class GithubAuthProvider extends BaseOAuthProvider{constructor(){super("github.com")}static credential(accessToken){return OAuthCredential._fromParams({providerId:GithubAuthProvider.PROVIDER_ID,signInMethod:GithubAuthProvider.GITHUB_SIGN_IN_METHOD,accessToken})}static credentialFromResult(userCredential){return GithubAuthProvider.credentialFromTaggedObject(userCredential)}static credentialFromError(error){return GithubAuthProvider.credentialFromTaggedObject(error.customData||{})}static credentialFromTaggedObject({_tokenResponse:tokenResponse}){if(!tokenResponse||!("oauthAccessToken"in tokenResponse))return null;if(!tokenResponse.oauthAccessToken)return null;try{return GithubAuthProvider.credential(tokenResponse.oauthAccessToken)}catch{return null}}}GithubAuthProvider.GITHUB_SIGN_IN_METHOD="github.com",GithubAuthProvider.PROVIDER_ID="github.com";class TwitterAuthProvider extends BaseOAuthProvider{constructor(){super("twitter.com")}static credential(token,secret){return OAuthCredential._fromParams({providerId:TwitterAuthProvider.PROVIDER_ID,signInMethod:TwitterAuthProvider.TWITTER_SIGN_IN_METHOD,oauthToken:token,oauthTokenSecret:secret})}static credentialFromResult(userCredential){return TwitterAuthProvider.credentialFromTaggedObject(userCredential)}static credentialFromError(error){return TwitterAuthProvider.credentialFromTaggedObject(error.customData||{})}static credentialFromTaggedObject({_tokenResponse:tokenResponse}){if(!tokenResponse)return null;const{oauthAccessToken,oauthTokenSecret}=tokenResponse;if(!oauthAccessToken||!oauthTokenSecret)return null;try{return TwitterAuthProvider.credential(oauthAccessToken,oauthTokenSecret)}catch{return null}}}TwitterAuthProvider.TWITTER_SIGN_IN_METHOD="twitter.com",TwitterAuthProvider.PROVIDER_ID="twitter.com";class UserCredentialImpl{constructor(params){this.user=params.user,this.providerId=params.providerId,this._tokenResponse=params._tokenResponse,this.operationType=params.operationType}static async _fromIdTokenResponse(auth,operationType,idTokenResponse,isAnonymous=!1){const user=await UserImpl._fromIdTokenResponse(auth,idTokenResponse,isAnonymous),providerId=providerIdForResponse(idTokenResponse);return new UserCredentialImpl({user,providerId,_tokenResponse:idTokenResponse,operationType})}static async _forOperation(user,operationType,response){await user._updateTokensIfNecessary(response,!0);const providerId=providerIdForResponse(response);return new UserCredentialImpl({user,providerId,_tokenResponse:response,operationType})}}function providerIdForResponse(response){return response.providerId?response.providerId:"phoneNumber"in response?"phone":null}class MultiFactorError extends dist_index_esm.g{constructor(auth,error,operationType,user){super(error.code,error.message),this.operationType=operationType,this.user=user,Object.setPrototypeOf(this,MultiFactorError.prototype),this.customData={appName:auth.name,tenantId:auth.tenantId??void 0,_serverResponse:error.customData._serverResponse,operationType}}static _fromErrorAndOperation(auth,error,operationType,user){return new MultiFactorError(auth,error,operationType,user)}}function _processCredentialSavingMfaContextIfNecessary(auth,operationType,credential,user){return("reauthenticate"===operationType?credential._getReauthenticationResolver(auth):credential._getIdTokenResponse(auth)).catch(error=>{if("auth/multi-factor-auth-required"===error.code)throw MultiFactorError._fromErrorAndOperation(auth,error,operationType,user);throw error})}async function _link$1(user,credential,bypassAuthState=!1){const response=await _logoutIfInvalidated(user,credential._linkToIdToken(user.auth,await user.getIdToken()),bypassAuthState);return UserCredentialImpl._forOperation(user,"link",response)}async function _reauthenticate(user,credential,bypassAuthState=!1){const{auth}=user;if((0,index_esm.xZ)(auth.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(auth));try{const response=await _logoutIfInvalidated(user,_processCredentialSavingMfaContextIfNecessary(auth,"reauthenticate",credential,user),bypassAuthState);_assert(response.idToken,auth,"internal-error");const parsed=_parseToken(response.idToken);_assert(parsed,auth,"internal-error");const{sub:localId}=parsed;return _assert(user.uid===localId,auth,"user-mismatch"),UserCredentialImpl._forOperation(user,"reauthenticate",response)}catch(e){throw"auth/user-not-found"===e?.code&&_fail(auth,"user-mismatch"),e}}async function _signInWithCredential(auth,credential,bypassAuthState=!1){if((0,index_esm.xZ)(auth.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(auth));const response=await _processCredentialSavingMfaContextIfNecessary(auth,"signIn",credential),userCredential=await UserCredentialImpl._fromIdTokenResponse(auth,"signIn",response);return bypassAuthState||await auth._updateCurrentUser(userCredential.user),userCredential}function onAuthStateChanged(auth,nextOrObserver,error,completed){return(0,dist_index_esm.Ku)(auth).onAuthStateChanged(nextOrObserver,error,completed)}function signOut(auth){return(0,dist_index_esm.Ku)(auth).signOut()}function startEnrollPhoneMfa(auth,request){return _performApiRequest(auth,"POST","/v2/accounts/mfaEnrollment:start",_addTidIfNecessary(auth,request))}new WeakMap;class BrowserPersistenceClass{constructor(storageRetriever,type){this.storageRetriever=storageRetriever,this.type=type}_isAvailable(){try{return this.storage?(this.storage.setItem("__sak","1"),this.storage.removeItem("__sak"),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(key,value){return this.storage.setItem(key,JSON.stringify(value)),Promise.resolve()}_get(key){const json=this.storage.getItem(key);return Promise.resolve(json?JSON.parse(json):null)}_remove(key){return this.storage.removeItem(key),Promise.resolve()}get storage(){return this.storageRetriever()}}class BrowserLocalPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(event,poll)=>this.onStorageEvent(event,poll),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_isMobileBrowser(),this._shouldAllowMigration=!0}forAllChangedKeys(cb){for(const key of Object.keys(this.listeners)){const newValue=this.storage.getItem(key),oldValue=this.localCache[key];newValue!==oldValue&&cb(key,oldValue,newValue)}}onStorageEvent(event,poll=!1){if(!event.key)return void this.forAllChangedKeys((key,_oldValue,newValue)=>{this.notifyListeners(key,newValue)});const key=event.key;poll?this.detachListener():this.stopPolling();const triggerListeners=()=>{const storedValue=this.storage.getItem(key);(poll||this.localCache[key]!==storedValue)&&this.notifyListeners(key,storedValue)},storedValue=this.storage.getItem(key);!function _isIE10(){return(0,dist_index_esm.lT)()&&10===document.documentMode}()||storedValue===event.newValue||event.newValue===event.oldValue?triggerListeners():setTimeout(triggerListeners,10)}notifyListeners(key,value){this.localCache[key]=value;const listeners=this.listeners[key];if(listeners)for(const listener of Array.from(listeners))listener(value?JSON.parse(value):value)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((key,oldValue,newValue)=>{this.onStorageEvent(new StorageEvent("storage",{key,oldValue,newValue}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(key,listener){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[key]||(this.listeners[key]=new Set,this.localCache[key]=this.storage.getItem(key)),this.listeners[key].add(listener)}_removeListener(key,listener){this.listeners[key]&&(this.listeners[key].delete(listener),0===this.listeners[key].size&&delete this.listeners[key]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(key,value){await super._set(key,value),this.localCache[key]=JSON.stringify(value)}async _get(key){const value=await super._get(key);return this.localCache[key]=JSON.stringify(value),value}async _remove(key){await super._remove(key),delete this.localCache[key]}}BrowserLocalPersistence.type="LOCAL";const browserLocalPersistence=BrowserLocalPersistence;function getDocumentCookie(name){const escapedName=name.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),matcher=RegExp(`${escapedName}=([^;]+)`);return document.cookie.match(matcher)?.[1]??null}function getCookieName(key){return`${"http:"===window.location.protocol?"__dev_":"__HOST-"}FIREBASE_${key.split(":")[3]}`}class CookiePersistence{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(originalUrl){if(void 0===typeof window)return originalUrl;const url=new URL(`${window.location.origin}/__cookies__`);return url.searchParams.set("finalTarget",originalUrl),url}async _isAvailable(){return!("boolean"==typeof isSecureContext&&!isSecureContext)&&("undefined"!=typeof navigator&&"undefined"!=typeof document&&(navigator.cookieEnabled??!0))}async _set(_key,_value){}async _get(key){if(!this._isAvailable())return null;const name=getCookieName(key);if(window.cookieStore){const cookie=await window.cookieStore.get(name);return cookie?.value}return getDocumentCookie(name)}async _remove(key){if(!this._isAvailable())return;if(!await this._get(key))return;const name=getCookieName(key);document.cookie=`${name}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(key,listener){if(!this._isAvailable())return;const name=getCookieName(key);if(window.cookieStore){const cb=event=>{const changedCookie=event.changed.find(change=>change.name===name);changedCookie&&listener(changedCookie.value);event.deleted.find(change=>change.name===name)&&listener(null)},unsubscribe=()=>window.cookieStore.removeEventListener("change",cb);return this.listenerUnsubscribes.set(listener,unsubscribe),window.cookieStore.addEventListener("change",cb)}let lastValue=getDocumentCookie(name);const interval=setInterval(()=>{const currentValue=getDocumentCookie(name);currentValue!==lastValue&&(listener(currentValue),lastValue=currentValue)},1e3);this.listenerUnsubscribes.set(listener,()=>clearInterval(interval))}_removeListener(_key,listener){const unsubscribe=this.listenerUnsubscribes.get(listener);unsubscribe&&(unsubscribe(),this.listenerUnsubscribes.delete(listener))}}CookiePersistence.type="COOKIE";class BrowserSessionPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_key,_listener){}_removeListener(_key,_listener){}}BrowserSessionPersistence.type="SESSION";const browserSessionPersistence=BrowserSessionPersistence;class Receiver{constructor(eventTarget){this.eventTarget=eventTarget,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(eventTarget){const existingInstance=this.receivers.find(receiver=>receiver.isListeningto(eventTarget));if(existingInstance)return existingInstance;const newInstance=new Receiver(eventTarget);return this.receivers.push(newInstance),newInstance}isListeningto(eventTarget){return this.eventTarget===eventTarget}async handleEvent(event){const messageEvent=event,{eventId,eventType,data}=messageEvent.data,handlers=this.handlersMap[eventType];if(!handlers?.size)return;messageEvent.ports[0].postMessage({status:"ack",eventId,eventType});const promises=Array.from(handlers).map(async handler=>handler(messageEvent.origin,data)),response=await function _allSettled(promises){return Promise.all(promises.map(async promise=>{try{return{fulfilled:!0,value:await promise}}catch(reason){return{fulfilled:!1,reason}}}))}(promises);messageEvent.ports[0].postMessage({status:"done",eventId,eventType,response})}_subscribe(eventType,eventHandler){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[eventType]||(this.handlersMap[eventType]=new Set),this.handlersMap[eventType].add(eventHandler)}_unsubscribe(eventType,eventHandler){this.handlersMap[eventType]&&eventHandler&&this.handlersMap[eventType].delete(eventHandler),eventHandler&&0!==this.handlersMap[eventType].size||delete this.handlersMap[eventType],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function _generateEventId(prefix="",digits=10){let random="";for(let i=0;i<digits;i++)random+=Math.floor(10*Math.random());return prefix+random}Receiver.receivers=[];class Sender{constructor(target){this.target=target,this.handlers=new Set}removeMessageHandler(handler){handler.messageChannel&&(handler.messageChannel.port1.removeEventListener("message",handler.onMessage),handler.messageChannel.port1.close()),this.handlers.delete(handler)}async _send(eventType,data,timeout=50){const messageChannel="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!messageChannel)throw new Error("connection_unavailable");let completionTimer,handler;return new Promise((resolve,reject)=>{const eventId=_generateEventId("",20);messageChannel.port1.start();const ackTimer=setTimeout(()=>{reject(new Error("unsupported_event"))},timeout);handler={messageChannel,onMessage(event){const messageEvent=event;if(messageEvent.data.eventId===eventId)switch(messageEvent.data.status){case"ack":clearTimeout(ackTimer),completionTimer=setTimeout(()=>{reject(new Error("timeout"))},3e3);break;case"done":clearTimeout(completionTimer),resolve(messageEvent.data.response);break;default:clearTimeout(ackTimer),clearTimeout(completionTimer),reject(new Error("invalid_response"))}}},this.handlers.add(handler),messageChannel.port1.addEventListener("message",handler.onMessage),this.target.postMessage({eventType,eventId,data},[messageChannel.port2])}).finally(()=>{handler&&this.removeMessageHandler(handler)})}}function _window(){return window}function _isWorker(){return void 0!==_window().WorkerGlobalScope&&"function"==typeof _window().importScripts}const DB_NAME="firebaseLocalStorageDb",DB_DATA_KEYPATH="fbase_key";class DBPromise{constructor(request){this.request=request}toPromise(){return new Promise((resolve,reject)=>{this.request.addEventListener("success",()=>{resolve(this.request.result)}),this.request.addEventListener("error",()=>{reject(this.request.error)})})}}function getObjectStore(db,isReadWrite){return db.transaction(["firebaseLocalStorage"],isReadWrite?"readwrite":"readonly").objectStore("firebaseLocalStorage")}function _openDatabase(){const request=indexedDB.open(DB_NAME,1);return new Promise((resolve,reject)=>{request.addEventListener("error",()=>{reject(request.error)}),request.addEventListener("upgradeneeded",()=>{const db=request.result;try{db.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){reject(e)}}),request.addEventListener("success",async()=>{const db=request.result;db.objectStoreNames.contains("firebaseLocalStorage")?resolve(db):(db.close(),await function _deleteDatabase(){const request=indexedDB.deleteDatabase(DB_NAME);return new DBPromise(request).toPromise()}(),resolve(await _openDatabase()))})})}async function _putObject(db,key,value){const request=getObjectStore(db,!0).put({[DB_DATA_KEYPATH]:key,value});return new DBPromise(request).toPromise()}function _deleteObject(db,key){const request=getObjectStore(db,!0).delete(key);return new DBPromise(request).toPromise()}class IndexedDBLocalPersistence{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await _openDatabase()),this.db}async _withRetries(op){let numAttempts=0;for(;;)try{const db=await this._openDb();return await op(db)}catch(e){if(numAttempts++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _isWorker()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Receiver._getInstance(function _getWorkerGlobalScope(){return _isWorker()?self:null}()),this.receiver._subscribe("keyChanged",async(_origin,data)=>({keyProcessed:(await this._poll()).includes(data.key)})),this.receiver._subscribe("ping",async(_origin,_data)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await async function _getActiveServiceWorker(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}(),!this.activeServiceWorker)return;this.sender=new Sender(this.activeServiceWorker);const results=await this.sender._send("ping",{},800);results&&results[0]?.fulfilled&&results[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(key){if(this.sender&&this.activeServiceWorker&&function _getServiceWorkerController(){return navigator?.serviceWorker?.controller||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const db=await _openDatabase();return await _putObject(db,"__sak","1"),await _deleteObject(db,"__sak"),!0}catch{}return!1}async _withPendingWrite(write){this.pendingWrites++;try{await write()}finally{this.pendingWrites--}}async _set(key,value){return this._withPendingWrite(async()=>(await this._withRetries(db=>_putObject(db,key,value)),this.localCache[key]=value,this.notifyServiceWorker(key)))}async _get(key){const obj=await this._withRetries(db=>async function getObject(db,key){const request=getObjectStore(db,!1).get(key),data=await new DBPromise(request).toPromise();return void 0===data?null:data.value}(db,key));return this.localCache[key]=obj,obj}async _remove(key){return this._withPendingWrite(async()=>(await this._withRetries(db=>_deleteObject(db,key)),delete this.localCache[key],this.notifyServiceWorker(key)))}async _poll(){const result=await this._withRetries(db=>{const getAllRequest=getObjectStore(db,!1).getAll();return new DBPromise(getAllRequest).toPromise()});if(!result)return[];if(0!==this.pendingWrites)return[];const keys=[],keysInResult=new Set;if(0!==result.length)for(const{fbase_key:key,value}of result)keysInResult.add(key),JSON.stringify(this.localCache[key])!==JSON.stringify(value)&&(this.notifyListeners(key,value),keys.push(key));for(const localKey of Object.keys(this.localCache))this.localCache[localKey]&&!keysInResult.has(localKey)&&(this.notifyListeners(localKey,null),keys.push(localKey));return keys}notifyListeners(key,newValue){this.localCache[key]=newValue;const listeners=this.listeners[key];if(listeners)for(const listener of Array.from(listeners))listener(newValue)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(key,listener){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[key]||(this.listeners[key]=new Set,this._get(key)),this.listeners[key].add(listener)}_removeListener(key,listener){this.listeners[key]&&(this.listeners[key].delete(listener),0===this.listeners[key].size&&delete this.listeners[key]),0===Object.keys(this.listeners).length&&this.stopPolling()}}IndexedDBLocalPersistence.type="LOCAL";const indexedDBLocalPersistence=IndexedDBLocalPersistence;function startSignInPhoneMfa(auth,request){return _performApiRequest(auth,"POST","/v2/accounts/mfaSignIn:start",_addTidIfNecessary(auth,request))}_generateCallbackName("rcb"),new Delay(3e4,6e4);async function _verifyPhoneNumber(auth,options,verifier){if(!auth._getRecaptchaConfig())try{await _initializeRecaptchaConfig(auth)}catch(error){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let phoneInfoOptions;if(phoneInfoOptions="string"==typeof options?{phoneNumber:options}:options,"session"in phoneInfoOptions){const session=phoneInfoOptions.session;if("phoneNumber"in phoneInfoOptions){_assert("enroll"===session.type,auth,"internal-error");const startPhoneMfaEnrollmentRequest={idToken:session.credential,phoneEnrollmentInfo:{phoneNumber:phoneInfoOptions.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},startPhoneMfaEnrollmentResponse=handleRecaptchaFlow(auth,startPhoneMfaEnrollmentRequest,"mfaSmsEnrollment",async(authInstance,request)=>{if("NO_RECAPTCHA"===request.phoneEnrollmentInfo.captchaResponse){_assert("recaptcha"===verifier?.type,authInstance,"argument-error");return startEnrollPhoneMfa(authInstance,await injectRecaptchaV2Token(authInstance,request,verifier))}return startEnrollPhoneMfa(authInstance,request)},"PHONE_PROVIDER");return(await startPhoneMfaEnrollmentResponse.catch(error=>Promise.reject(error))).phoneSessionInfo.sessionInfo}{_assert("signin"===session.type,auth,"internal-error");const mfaEnrollmentId=phoneInfoOptions.multiFactorHint?.uid||phoneInfoOptions.multiFactorUid;_assert(mfaEnrollmentId,auth,"missing-multi-factor-info");const startPhoneMfaSignInRequest={mfaPendingCredential:session.credential,mfaEnrollmentId,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},startPhoneMfaSignInResponse=handleRecaptchaFlow(auth,startPhoneMfaSignInRequest,"mfaSmsSignIn",async(authInstance,request)=>{if("NO_RECAPTCHA"===request.phoneSignInInfo.captchaResponse){_assert("recaptcha"===verifier?.type,authInstance,"argument-error");return startSignInPhoneMfa(authInstance,await injectRecaptchaV2Token(authInstance,request,verifier))}return startSignInPhoneMfa(authInstance,request)},"PHONE_PROVIDER");return(await startPhoneMfaSignInResponse.catch(error=>Promise.reject(error))).phoneResponseInfo.sessionInfo}}{const sendPhoneVerificationCodeRequest={phoneNumber:phoneInfoOptions.phoneNumber,clientType:"CLIENT_TYPE_WEB"},sendPhoneVerificationCodeResponse=handleRecaptchaFlow(auth,sendPhoneVerificationCodeRequest,"sendVerificationCode",async(authInstance,request)=>{if("NO_RECAPTCHA"===request.captchaResponse){_assert("recaptcha"===verifier?.type,authInstance,"argument-error");return sendPhoneVerificationCode(authInstance,await injectRecaptchaV2Token(authInstance,request,verifier))}return sendPhoneVerificationCode(authInstance,request)},"PHONE_PROVIDER");return(await sendPhoneVerificationCodeResponse.catch(error=>Promise.reject(error))).sessionInfo}}finally{verifier?._reset()}}async function injectRecaptchaV2Token(auth,request,recaptchaV2Verifier){_assert("recaptcha"===recaptchaV2Verifier.type,auth,"argument-error");const recaptchaV2Token=await recaptchaV2Verifier.verify();_assert("string"==typeof recaptchaV2Token,auth,"argument-error");const newRequest={...request};if("phoneEnrollmentInfo"in newRequest){const phoneNumber=newRequest.phoneEnrollmentInfo.phoneNumber,captchaResponse=newRequest.phoneEnrollmentInfo.captchaResponse,clientType=newRequest.phoneEnrollmentInfo.clientType,recaptchaVersion=newRequest.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(newRequest,{phoneEnrollmentInfo:{phoneNumber,recaptchaToken:recaptchaV2Token,captchaResponse,clientType,recaptchaVersion}}),newRequest}if("phoneSignInInfo"in newRequest){const captchaResponse=newRequest.phoneSignInInfo.captchaResponse,clientType=newRequest.phoneSignInInfo.clientType,recaptchaVersion=newRequest.phoneSignInInfo.recaptchaVersion;return Object.assign(newRequest,{phoneSignInInfo:{recaptchaToken:recaptchaV2Token,captchaResponse,clientType,recaptchaVersion}}),newRequest}return Object.assign(newRequest,{recaptchaToken:recaptchaV2Token}),newRequest}class PhoneAuthProvider{constructor(auth){this.providerId=PhoneAuthProvider.PROVIDER_ID,this.auth=_castAuth(auth)}verifyPhoneNumber(phoneOptions,applicationVerifier){return _verifyPhoneNumber(this.auth,phoneOptions,(0,dist_index_esm.Ku)(applicationVerifier))}static credential(verificationId,verificationCode){return PhoneAuthCredential._fromVerification(verificationId,verificationCode)}static credentialFromResult(userCredential){const credential=userCredential;return PhoneAuthProvider.credentialFromTaggedObject(credential)}static credentialFromError(error){return PhoneAuthProvider.credentialFromTaggedObject(error.customData||{})}static credentialFromTaggedObject({_tokenResponse:tokenResponse}){if(!tokenResponse)return null;const{phoneNumber,temporaryProof}=tokenResponse;return phoneNumber&&temporaryProof?PhoneAuthCredential._fromTokenResponse(phoneNumber,temporaryProof):null}}function _withDefaultResolver(auth,resolverOverride){return resolverOverride?_getInstance(resolverOverride):(_assert(auth._popupRedirectResolver,auth,"argument-error"),auth._popupRedirectResolver)}PhoneAuthProvider.PROVIDER_ID="phone",PhoneAuthProvider.PHONE_SIGN_IN_METHOD="phone";class IdpCredential extends AuthCredential{constructor(params){super("custom","custom"),this.params=params}_getIdTokenResponse(auth){return signInWithIdp(auth,this._buildIdpRequest())}_linkToIdToken(auth,idToken){return signInWithIdp(auth,this._buildIdpRequest(idToken))}_getReauthenticationResolver(auth){return signInWithIdp(auth,this._buildIdpRequest())}_buildIdpRequest(idToken){const request={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return idToken&&(request.idToken=idToken),request}}function _signIn(params){return _signInWithCredential(params.auth,new IdpCredential(params),params.bypassAuthState)}function _reauth(params){const{auth,user}=params;return _assert(user,auth,"internal-error"),_reauthenticate(user,new IdpCredential(params),params.bypassAuthState)}async function _link(params){const{auth,user}=params;return _assert(user,auth,"internal-error"),_link$1(user,new IdpCredential(params),params.bypassAuthState)}class AbstractPopupRedirectOperation{constructor(auth,filter,resolver,user,bypassAuthState=!1){this.auth=auth,this.resolver=resolver,this.user=user,this.bypassAuthState=bypassAuthState,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(filter)?filter:[filter]}execute(){return new Promise(async(resolve,reject)=>{this.pendingPromise={resolve,reject};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(event){const{urlResponse,sessionId,postBody,tenantId,error,type}=event;if(error)return void this.reject(error);const params={auth:this.auth,requestUri:urlResponse,sessionId,tenantId:tenantId||void 0,postBody:postBody||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(type)(params))}catch(e){this.reject(e)}}onError(error){this.reject(error)}getIdpTask(type){switch(type){case"signInViaPopup":case"signInViaRedirect":return _signIn;case"linkViaPopup":case"linkViaRedirect":return _link;case"reauthViaPopup":case"reauthViaRedirect":return _reauth;default:_fail(this.auth,"internal-error")}}resolve(cred){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(cred),this.unregisterAndCleanUp()}reject(error){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(error),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const _POLL_WINDOW_CLOSE_TIMEOUT=new Delay(2e3,1e4);async function signInWithPopup(auth,provider,resolver){if((0,index_esm.xZ)(auth.app))return Promise.reject(_createError(auth,"operation-not-supported-in-this-environment"));const authInternal=_castAuth(auth);_assertInstanceOf(auth,provider,FederatedAuthProvider);const resolverInternal=_withDefaultResolver(authInternal,resolver);return new PopupOperation(authInternal,"signInViaPopup",provider,resolverInternal).executeNotNull()}class PopupOperation extends AbstractPopupRedirectOperation{constructor(auth,filter,provider,resolver,user){super(auth,filter,resolver,user),this.provider=provider,this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction&&PopupOperation.currentPopupAction.cancel(),PopupOperation.currentPopupAction=this}async executeNotNull(){const result=await this.execute();return _assert(result,this.auth,"internal-error"),result}async onExecution(){debugAssert(1===this.filter.length,"Popup operations only handle one event");const eventId=_generateEventId();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],eventId),this.authWindow.associatedEvent=eventId,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,isSupported=>{isSupported||this.reject(_createError(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(_createError(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction=null}pollUserCancellation(){const poll=()=>{this.authWindow?.window?.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_createError(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(poll,_POLL_WINDOW_CLOSE_TIMEOUT.get())};poll()}}PopupOperation.currentPopupAction=null;const redirectOutcomeMap=new Map;class RedirectAction extends AbstractPopupRedirectOperation{constructor(auth,resolver,bypassAuthState=!1){super(auth,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],resolver,void 0,bypassAuthState),this.eventId=null}async execute(){let readyOutcome=redirectOutcomeMap.get(this.auth._key());if(!readyOutcome){try{const result=await async function _getAndClearPendingRedirectStatus(resolver,auth){const key=pendingRedirectKey(auth),persistence=resolverPersistence(resolver);if(!await persistence._isAvailable())return!1;const hasPendingRedirect="true"===await persistence._get(key);return await persistence._remove(key),hasPendingRedirect}(this.resolver,this.auth)?await super.execute():null;readyOutcome=()=>Promise.resolve(result)}catch(e){readyOutcome=()=>Promise.reject(e)}redirectOutcomeMap.set(this.auth._key(),readyOutcome)}return this.bypassAuthState||redirectOutcomeMap.set(this.auth._key(),()=>Promise.resolve(null)),readyOutcome()}async onAuthEvent(event){if("signInViaRedirect"===event.type)return super.onAuthEvent(event);if("unknown"!==event.type){if(event.eventId){const user=await this.auth._redirectUserForId(event.eventId);if(user)return this.user=user,super.onAuthEvent(event);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function _overrideRedirectResult(auth,result){redirectOutcomeMap.set(auth._key(),result)}function resolverPersistence(resolver){return _getInstance(resolver._redirectPersistence)}function pendingRedirectKey(auth){return _persistenceKeyName("pendingRedirect",auth.config.apiKey,auth.name)}async function _getRedirectResult(auth,resolverExtern,bypassAuthState=!1){if((0,index_esm.xZ)(auth.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(auth));const authInternal=_castAuth(auth),resolver=_withDefaultResolver(authInternal,resolverExtern),action=new RedirectAction(authInternal,resolver,bypassAuthState),result=await action.execute();return result&&!bypassAuthState&&(delete result.user._redirectEventId,await authInternal._persistUserIfCurrent(result.user),await authInternal._setRedirectUser(null,resolverExtern)),result}class AuthEventManager{constructor(auth){this.auth=auth,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(authEventConsumer){this.consumers.add(authEventConsumer),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,authEventConsumer)&&(this.sendToConsumer(this.queuedRedirectEvent,authEventConsumer),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(authEventConsumer){this.consumers.delete(authEventConsumer)}onEvent(event){if(this.hasEventBeenHandled(event))return!1;let handled=!1;return this.consumers.forEach(consumer=>{this.isEventForConsumer(event,consumer)&&(handled=!0,this.sendToConsumer(event,consumer),this.saveEventToCache(event))}),this.hasHandledPotentialRedirect||!function isRedirectEvent(event){switch(event.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return isNullRedirectEvent(event);default:return!1}}(event)||(this.hasHandledPotentialRedirect=!0,handled||(this.queuedRedirectEvent=event,handled=!0)),handled}sendToConsumer(event,consumer){if(event.error&&!isNullRedirectEvent(event)){const code=event.error.code?.split("auth/")[1]||"internal-error";consumer.onError(_createError(this.auth,code))}else consumer.onAuthEvent(event)}isEventForConsumer(event,consumer){const eventIdMatches=null===consumer.eventId||!!event.eventId&&event.eventId===consumer.eventId;return consumer.filter.includes(event.type)&&eventIdMatches}hasEventBeenHandled(event){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(eventUid(event))}saveEventToCache(event){this.cachedEventUids.add(eventUid(event)),this.lastProcessedEventTime=Date.now()}}function eventUid(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(v=>v).join("-")}function isNullRedirectEvent({type,error}){return"unknown"===type&&"auth/no-auth-event"===error?.code}const IP_ADDRESS_REGEX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HTTP_REGEX=/^https?/;async function _validateOrigin(auth){if(auth.config.emulator)return;const{authorizedDomains}=await async function _getProjectConfig(auth,request={}){return _performApiRequest(auth,"GET","/v1/projects",request)}(auth);for(const domain of authorizedDomains)try{if(matchDomain(domain))return}catch{}_fail(auth,"unauthorized-domain")}function matchDomain(expected){const currentUrl=_getCurrentUrl(),{protocol,hostname}=new URL(currentUrl);if(expected.startsWith("chrome-extension://")){const ceUrl=new URL(expected);return""===ceUrl.hostname&&""===hostname?"chrome-extension:"===protocol&&expected.replace("chrome-extension://","")===currentUrl.replace("chrome-extension://",""):"chrome-extension:"===protocol&&ceUrl.hostname===hostname}if(!HTTP_REGEX.test(protocol))return!1;if(IP_ADDRESS_REGEX.test(expected))return hostname===expected;const escapedDomainPattern=expected.replace(/\./g,"\\.");return new RegExp("^(.+\\."+escapedDomainPattern+"|"+escapedDomainPattern+")$","i").test(hostname)}const NETWORK_TIMEOUT=new Delay(3e4,6e4);function resetUnloadedGapiModules(){const beacon=_window().___jsl;if(beacon?.H)for(const hint of Object.keys(beacon.H))if(beacon.H[hint].r=beacon.H[hint].r||[],beacon.H[hint].L=beacon.H[hint].L||[],beacon.H[hint].r=[...beacon.H[hint].L],beacon.CP)for(let i=0;i<beacon.CP.length;i++)beacon.CP[i]=null}function loadGapi(auth){return new Promise((resolve,reject)=>{function loadGapiIframe(){resetUnloadedGapiModules(),gapi.load("gapi.iframes",{callback:()=>{resolve(gapi.iframes.getContext())},ontimeout:()=>{resetUnloadedGapiModules(),reject(_createError(auth,"network-request-failed"))},timeout:NETWORK_TIMEOUT.get()})}if(_window().gapi?.iframes?.Iframe)resolve(gapi.iframes.getContext());else{if(!_window().gapi?.load){const cbName=_generateCallbackName("iframefcb");return _window()[cbName]=()=>{gapi.load?loadGapiIframe():reject(_createError(auth,"network-request-failed"))},_loadJS(`${function _gapiScriptUrl(){return externalJSProvider.gapiScript}()}?onload=${cbName}`).catch(e=>reject(e))}loadGapiIframe()}}).catch(error=>{throw cachedGApiLoader=null,error})}let cachedGApiLoader=null;const PING_TIMEOUT=new Delay(5e3,15e3),IFRAME_ATTRIBUTES={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EID_FROM_APIHOST=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function getIframeUrl(auth){const config=auth.config;_assert(config.authDomain,auth,"auth-domain-config-required");const url=config.emulator?_emulatorUrl(config,"emulator/auth/iframe"):`https://${auth.config.authDomain}/__/auth/iframe`,params={apiKey:config.apiKey,appName:auth.name,v:index_esm.MF},eid=EID_FROM_APIHOST.get(auth.config.apiHost);eid&&(params.eid=eid);const frameworks=auth._getFrameworks();return frameworks.length&&(params.fw=frameworks.join(",")),`${url}?${(0,dist_index_esm.Am)(params).slice(1)}`}async function _openIframe(auth){const context=await function _loadGapi(auth){return cachedGApiLoader=cachedGApiLoader||loadGapi(auth),cachedGApiLoader}(auth),gapi=_window().gapi;return _assert(gapi,auth,"internal-error"),context.open({where:document.body,url:getIframeUrl(auth),messageHandlersFilter:gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IFRAME_ATTRIBUTES,dontclear:!0},iframe=>new Promise(async(resolve,reject)=>{await iframe.restyle({setHideOnLeave:!1});const networkError=_createError(auth,"network-request-failed"),networkErrorTimer=_window().setTimeout(()=>{reject(networkError)},PING_TIMEOUT.get());function clearTimerAndResolve(){_window().clearTimeout(networkErrorTimer),resolve(iframe)}iframe.ping(clearTimerAndResolve).then(clearTimerAndResolve,()=>{reject(networkError)})}))}const BASE_POPUP_OPTIONS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class AuthPopup{constructor(window){this.window=window,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function _open(auth,url,name,width=500,height=600){const top=Math.max((window.screen.availHeight-height)/2,0).toString(),left=Math.max((window.screen.availWidth-width)/2,0).toString();let target="";const options={...BASE_POPUP_OPTIONS,width:width.toString(),height:height.toString(),top,left},ua=(0,dist_index_esm.ZQ)().toLowerCase();name&&(target=_isChromeIOS(ua)?"_blank":name),_isFirefox(ua)&&(url=url||"http://localhost",options.scrollbars="yes");const optionsString=Object.entries(options).reduce((accum,[key,value])=>`${accum}${key}=${value},`,"");if(function _isIOSStandalone(ua=(0,dist_index_esm.ZQ)()){return _isIOS(ua)&&!!window.navigator?.standalone}(ua)&&"_self"!==target)return function openAsNewWindowIOS(url,target){const el=document.createElement("a");el.href=url,el.target=target;const click=document.createEvent("MouseEvent");click.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),el.dispatchEvent(click)}(url||"",target),new AuthPopup(null);const newWin=window.open(url||"",target,optionsString);_assert(newWin,auth,"popup-blocked");try{newWin.focus()}catch(e){}return new AuthPopup(newWin)}const FIREBASE_APP_CHECK_FRAGMENT_ID=encodeURIComponent("fac");async function _getRedirectUrl(auth,provider,authType,redirectUrl,eventId,additionalParams){_assert(auth.config.authDomain,auth,"auth-domain-config-required"),_assert(auth.config.apiKey,auth,"invalid-api-key");const params={apiKey:auth.config.apiKey,appName:auth.name,authType,redirectUrl,v:index_esm.MF,eventId};if(provider instanceof FederatedAuthProvider){provider.setDefaultLanguage(auth.languageCode),params.providerId=provider.providerId||"",(0,dist_index_esm.Im)(provider.getCustomParameters())||(params.customParameters=JSON.stringify(provider.getCustomParameters()));for(const[key,value]of Object.entries(additionalParams||{}))params[key]=value}if(provider instanceof BaseOAuthProvider){const scopes=provider.getScopes().filter(scope=>""!==scope);scopes.length>0&&(params.scopes=scopes.join(","))}auth.tenantId&&(params.tid=auth.tenantId);const paramsDict=params;for(const key of Object.keys(paramsDict))void 0===paramsDict[key]&&delete paramsDict[key];const appCheckToken=await auth._getAppCheckToken(),appCheckTokenFragment=appCheckToken?`#${FIREBASE_APP_CHECK_FRAGMENT_ID}=${encodeURIComponent(appCheckToken)}`:"";return`${function getHandlerBase({config}){if(!config.emulator)return`https://${config.authDomain}/__/auth/handler`;return _emulatorUrl(config,"emulator/auth/handler")}(auth)}?${(0,dist_index_esm.Am)(paramsDict).slice(1)}${appCheckTokenFragment}`}const browserPopupRedirectResolver=class BrowserPopupRedirectResolver{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=browserSessionPersistence,this._completeRedirectFn=_getRedirectResult,this._overrideRedirectResult=_overrideRedirectResult}async _openPopup(auth,provider,authType,eventId){debugAssert(this.eventManagers[auth._key()]?.manager,"_initialize() not called before _openPopup()");return _open(auth,await _getRedirectUrl(auth,provider,authType,_getCurrentUrl(),eventId),_generateEventId())}async _openRedirect(auth,provider,authType,eventId){await this._originValidation(auth);return function _setWindowLocation(url){_window().location.href=url}(await _getRedirectUrl(auth,provider,authType,_getCurrentUrl(),eventId)),new Promise(()=>{})}_initialize(auth){const key=auth._key();if(this.eventManagers[key]){const{manager,promise}=this.eventManagers[key];return manager?Promise.resolve(manager):(debugAssert(promise,"If manager is not set, promise should be"),promise)}const promise=this.initAndGetManager(auth);return this.eventManagers[key]={promise},promise.catch(()=>{delete this.eventManagers[key]}),promise}async initAndGetManager(auth){const iframe=await _openIframe(auth),manager=new AuthEventManager(auth);return iframe.register("authEvent",iframeEvent=>{_assert(iframeEvent?.authEvent,auth,"invalid-auth-event");return{status:manager.onEvent(iframeEvent.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[auth._key()]={manager},this.iframes[auth._key()]=iframe,manager}_isIframeWebStorageSupported(auth,cb){this.iframes[auth._key()].send("webStorageSupport",{type:"webStorageSupport"},result=>{const isSupported=result?.[0]?.webStorageSupport;void 0!==isSupported&&cb(!!isSupported),_fail(auth,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(auth){const key=auth._key();return this.originValidationPromises[key]||(this.originValidationPromises[key]=_validateOrigin(auth)),this.originValidationPromises[key]}get _shouldInitProactively(){return _isMobileBrowser()||_isSafari()||_isIOS()}};class AuthInterop{constructor(auth){this.auth=auth,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(forceRefresh){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(forceRefresh)}}addAuthTokenListener(listener){if(this.assertAuthConfigured(),this.internalListeners.has(listener))return;const unsubscribe=this.auth.onIdTokenChanged(user=>{listener(user?.stsTokenManager.accessToken||null)});this.internalListeners.set(listener,unsubscribe),this.updateProactiveRefresh()}removeAuthTokenListener(listener){this.assertAuthConfigured();const unsubscribe=this.internalListeners.get(listener);unsubscribe&&(this.internalListeners.delete(listener),unsubscribe(),this.updateProactiveRefresh())}assertAuthConfigured(){_assert(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const authIdTokenMaxAge=(0,dist_index_esm.XA)("authIdTokenMaxAge")||300;let lastPostedIdToken=null;const mintCookieFactory=url=>async user=>{const idTokenResult=user&&await user.getIdTokenResult(),idTokenAge=idTokenResult&&((new Date).getTime()-Date.parse(idTokenResult.issuedAtTime))/1e3;if(idTokenAge&&idTokenAge>authIdTokenMaxAge)return;const idToken=idTokenResult?.token;lastPostedIdToken!==idToken&&(lastPostedIdToken=idToken,await fetch(url,{method:idToken?"POST":"DELETE",headers:idToken?{Authorization:`Bearer ${idToken}`}:{}}))};function getAuth(app=(0,index_esm.Sx)()){const provider=(0,index_esm.j6)(app,"auth");if(provider.isInitialized())return provider.getImmediate();const auth=function initializeAuth(app,deps){const provider=(0,index_esm.j6)(app,"auth");if(provider.isInitialized()){const auth=provider.getImmediate(),initialOptions=provider.getOptions();if((0,dist_index_esm.bD)(initialOptions,deps??{}))return auth;_fail(auth,"already-initialized")}return provider.initialize({options:deps})}(app,{popupRedirectResolver:browserPopupRedirectResolver,persistence:[indexedDBLocalPersistence,browserLocalPersistence,browserSessionPersistence]}),authTokenSyncPath=(0,dist_index_esm.XA)("authTokenSyncURL");if(authTokenSyncPath&&"boolean"==typeof isSecureContext&&isSecureContext){const authTokenSyncUrl=new URL(authTokenSyncPath,location.origin);if(location.origin===authTokenSyncUrl.origin){const mintCookie=mintCookieFactory(authTokenSyncUrl.toString());!function beforeAuthStateChanged(auth,callback,onAbort){return(0,dist_index_esm.Ku)(auth).beforeAuthStateChanged(callback,onAbort)}(auth,mintCookie,()=>mintCookie(auth.currentUser)),function onIdTokenChanged(auth,nextOrObserver,error,completed){return(0,dist_index_esm.Ku)(auth).onIdTokenChanged(nextOrObserver,error,completed)}(auth,user=>mintCookie(user))}}const authEmulatorHost=(0,dist_index_esm.Tj)("auth");return authEmulatorHost&&connectAuthEmulator(auth,`http://${authEmulatorHost}`),auth}!function _setExternalJSProvider(p){externalJSProvider=p}({loadJS:url=>new Promise((resolve,reject)=>{const el=document.createElement("script");el.setAttribute("src",url),el.onload=resolve,el.onerror=e=>{const error=_createError("internal-error");error.customData=e,reject(error)},el.type="text/javascript",el.charset="UTF-8",function getScriptParentElement(){return document.getElementsByTagName("head")?.[0]??document}().appendChild(el)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function registerAuth(clientPlatform){(0,index_esm.om)(new dist_esm_index_esm.uA("auth",(container,{options:deps})=>{const app=container.getProvider("app").getImmediate(),heartbeatServiceProvider=container.getProvider("heartbeat"),appCheckServiceProvider=container.getProvider("app-check-internal"),{apiKey,authDomain}=app.options;_assert(apiKey&&!apiKey.includes(":"),"invalid-api-key",{appName:app.name});const config={apiKey,authDomain,clientPlatform,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_getClientVersion(clientPlatform)},authInstance=new AuthImpl(app,heartbeatServiceProvider,appCheckServiceProvider,config);return function _initializeAuthInstance(auth,deps){const persistence=deps?.persistence||[],hierarchy=(Array.isArray(persistence)?persistence:[persistence]).map(_getInstance);deps?.errorMap&&auth._updateErrorMap(deps.errorMap),auth._initializeWithPersistence(hierarchy,deps?.popupRedirectResolver)}(authInstance,deps),authInstance},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((container,_instanceIdentifier,_instance)=>{container.getProvider("auth-internal").initialize()})),(0,index_esm.om)(new dist_esm_index_esm.uA("auth-internal",container=>(auth=>new AuthInterop(auth))(_castAuth(container.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,index_esm.KO)("@firebase/auth","1.11.0",function getVersionForPlatform(clientPlatform){switch(clientPlatform){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(clientPlatform)),(0,index_esm.KO)("@firebase/auth","1.11.0","esm2020")}("Browser")},"./node_modules/firebase/database/dist/esm/index.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{C3:()=>getDatabase,Zy:()=>onValue,KR:()=>ref});var index_esm=__webpack_require__("./node_modules/@firebase/app/dist/esm/index.esm.js"),esm_index_esm=__webpack_require__("./node_modules/@firebase/component/dist/esm/index.esm.js"),dist_index_esm=__webpack_require__("./node_modules/@firebase/util/dist/index.esm.js"),dist_esm_index_esm=__webpack_require__("./node_modules/@firebase/logger/dist/esm/index.esm.js"),process=__webpack_require__("./node_modules/process/browser.js");let SDK_VERSION="";function setSDKVersion(version){SDK_VERSION=version}class DOMStorageWrapper{constructor(domStorage_){this.domStorage_=domStorage_,this.prefix_="firebase:"}set(key,value){null==value?this.domStorage_.removeItem(this.prefixedName_(key)):this.domStorage_.setItem(this.prefixedName_(key),(0,dist_index_esm.As)(value))}get(key){const storedVal=this.domStorage_.getItem(this.prefixedName_(key));return null==storedVal?null:(0,dist_index_esm.$L)(storedVal)}remove(key){this.domStorage_.removeItem(this.prefixedName_(key))}prefixedName_(name){return this.prefix_+name}toString(){return this.domStorage_.toString()}}class MemoryStorage{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(key,value){null==value?delete this.cache_[key]:this.cache_[key]=value}get(key){return(0,dist_index_esm.gR)(this.cache_,key)?this.cache_[key]:null}remove(key){delete this.cache_[key]}}const createStoragefor=function(domStorageName){try{if("undefined"!=typeof window&&void 0!==window[domStorageName]){const domStorage=window[domStorageName];return domStorage.setItem("firebase:sentinel","cache"),domStorage.removeItem("firebase:sentinel"),new DOMStorageWrapper(domStorage)}}catch(e){}return new MemoryStorage},PersistentStorage=createStoragefor("localStorage"),SessionStorage=createStoragefor("sessionStorage"),logClient=new dist_esm_index_esm.Vy("@firebase/database"),LUIDGenerator=function(){let id=1;return function(){return id++}}(),sha1=function(str){const utf8Bytes=(0,dist_index_esm.kj)(str),sha1=new dist_index_esm.gz;sha1.update(utf8Bytes);const sha1Bytes=sha1.digest();return dist_index_esm.K3.encodeByteArray(sha1Bytes)},buildLogMessage_=function(...varArgs){let message="";for(let i=0;i<varArgs.length;i++){const arg=varArgs[i];Array.isArray(arg)||arg&&"object"==typeof arg&&"number"==typeof arg.length?message+=buildLogMessage_.apply(null,arg):message+="object"==typeof arg?(0,dist_index_esm.As)(arg):arg,message+=" "}return message};let logger=null,firstLog_=!0;const enableLogging$1=function(logger_,persistent){(0,dist_index_esm.vA)(!persistent||!0===logger_||!1===logger_,"Can't turn on custom loggers persistently."),!0===logger_?(logClient.logLevel=dist_esm_index_esm.$b.VERBOSE,logger=logClient.log.bind(logClient),persistent&&SessionStorage.set("logging_enabled",!0)):"function"==typeof logger_?logger=logger_:(logger=null,SessionStorage.remove("logging_enabled"))},log=function(...varArgs){if(!0===firstLog_&&(firstLog_=!1,null===logger&&!0===SessionStorage.get("logging_enabled")&&enableLogging$1(!0)),logger){const message=buildLogMessage_.apply(null,varArgs);logger(message)}},logWrapper=function(prefix){return function(...varArgs){log(prefix,...varArgs)}},error=function(...varArgs){const message="FIREBASE INTERNAL ERROR: "+buildLogMessage_(...varArgs);logClient.error(message)},fatal=function(...varArgs){const message=`FIREBASE FATAL ERROR: ${buildLogMessage_(...varArgs)}`;throw logClient.error(message),new Error(message)},warn=function(...varArgs){const message="FIREBASE WARNING: "+buildLogMessage_(...varArgs);logClient.warn(message)},isInvalidJSONNumber=function(data){return"number"==typeof data&&(data!=data||data===Number.POSITIVE_INFINITY||data===Number.NEGATIVE_INFINITY)},MIN_NAME="[MIN_NAME]",MAX_NAME="[MAX_NAME]",nameCompare=function(a,b){if(a===b)return 0;if(a===MIN_NAME||b===MAX_NAME)return-1;if(b===MIN_NAME||a===MAX_NAME)return 1;{const aAsInt=tryParseInt(a),bAsInt=tryParseInt(b);return null!==aAsInt?null!==bAsInt?aAsInt-bAsInt===0?a.length-b.length:aAsInt-bAsInt:-1:null!==bAsInt?1:a<b?-1:1}},stringCompare=function(a,b){return a===b?0:a<b?-1:1},requireKey=function(key,obj){if(obj&&key in obj)return obj[key];throw new Error("Missing required key ("+key+") in object: "+(0,dist_index_esm.As)(obj))},ObjectToUniqueKey=function(obj){if("object"!=typeof obj||null===obj)return(0,dist_index_esm.As)(obj);const keys=[];for(const k in obj)keys.push(k);keys.sort();let key="{";for(let i=0;i<keys.length;i++)0!==i&&(key+=","),key+=(0,dist_index_esm.As)(keys[i]),key+=":",key+=ObjectToUniqueKey(obj[keys[i]]);return key+="}",key},splitStringBySize=function(str,segsize){const len=str.length;if(len<=segsize)return[str];const dataSegs=[];for(let c=0;c<len;c+=segsize)c+segsize>len?dataSegs.push(str.substring(c,len)):dataSegs.push(str.substring(c,c+segsize));return dataSegs};function each(obj,fn){for(const key in obj)obj.hasOwnProperty(key)&&fn(key,obj[key])}const doubleToIEEE754String=function(v){(0,dist_index_esm.vA)(!isInvalidJSONNumber(v),"Invalid JSON number");let s,e,f,ln,i;0===v?(e=0,f=0,s=1/v==-1/0?1:0):(s=v<0,(v=Math.abs(v))>=Math.pow(2,-1022)?(ln=Math.min(Math.floor(Math.log(v)/Math.LN2),1023),e=ln+1023,f=Math.round(v*Math.pow(2,52-ln)-Math.pow(2,52))):(e=0,f=Math.round(v/Math.pow(2,-1074))));const bits=[];for(i=52;i;i-=1)bits.push(f%2?1:0),f=Math.floor(f/2);for(i=11;i;i-=1)bits.push(e%2?1:0),e=Math.floor(e/2);bits.push(s?1:0),bits.reverse();const str=bits.join("");let hexByteString="";for(i=0;i<64;i+=8){let hexByte=parseInt(str.substr(i,8),2).toString(16);1===hexByte.length&&(hexByte="0"+hexByte),hexByteString+=hexByte}return hexByteString.toLowerCase()};const INTEGER_REGEXP_=new RegExp("^-?(0*)\\d{1,10}$"),tryParseInt=function(str){if(INTEGER_REGEXP_.test(str)){const intVal=Number(str);if(intVal>=-2147483648&&intVal<=2147483647)return intVal}return null},exceptionGuard=function(fn){try{fn()}catch(e){setTimeout(()=>{const stack=e.stack||"";throw warn("Exception was thrown by user callback.",stack),e},Math.floor(0))}},setTimeoutNonBlocking=function(fn,time){const timeout=setTimeout(fn,time);return"number"==typeof timeout&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(timeout):"object"==typeof timeout&&timeout.unref&&timeout.unref(),timeout};class AppCheckTokenProvider{constructor(app,appCheckProvider){this.appCheckProvider=appCheckProvider,this.appName=app.name,(0,index_esm.xZ)(app)&&app.settings.appCheckToken&&(this.serverAppAppCheckToken=app.settings.appCheckToken),this.appCheck=appCheckProvider?.getImmediate({optional:!0}),this.appCheck||appCheckProvider?.get().then(appCheck=>this.appCheck=appCheck)}getToken(forceRefresh){if(this.serverAppAppCheckToken){if(forceRefresh)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(forceRefresh):new Promise((resolve,reject)=>{setTimeout(()=>{this.appCheck?this.getToken(forceRefresh).then(resolve,reject):resolve(null)},0)})}addTokenChangeListener(listener){this.appCheckProvider?.get().then(appCheck=>appCheck.addTokenListener(listener))}notifyForInvalidToken(){warn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class FirebaseAuthTokenProvider{constructor(appName_,firebaseOptions_,authProvider_){this.appName_=appName_,this.firebaseOptions_=firebaseOptions_,this.authProvider_=authProvider_,this.auth_=null,this.auth_=authProvider_.getImmediate({optional:!0}),this.auth_||authProvider_.onInit(auth=>this.auth_=auth)}getToken(forceRefresh){return this.auth_?this.auth_.getToken(forceRefresh).catch(error=>error&&"auth/token-not-initialized"===error.code?(log("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(error)):new Promise((resolve,reject)=>{setTimeout(()=>{this.auth_?this.getToken(forceRefresh).then(resolve,reject):resolve(null)},0)})}addTokenChangeListener(listener){this.auth_?this.auth_.addAuthTokenListener(listener):this.authProvider_.get().then(auth=>auth.addAuthTokenListener(listener))}removeTokenChangeListener(listener){this.authProvider_.get().then(auth=>auth.removeAuthTokenListener(listener))}notifyForInvalidToken(){let errorMessage='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?errorMessage+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?errorMessage+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':errorMessage+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',warn(errorMessage)}}class EmulatorTokenProvider{constructor(accessToken){this.accessToken=accessToken}getToken(forceRefresh){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(listener){listener(this.accessToken)}removeTokenChangeListener(listener){}notifyForInvalidToken(){}}EmulatorTokenProvider.OWNER="owner";const FORGE_DOMAIN_RE=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/;class RepoInfo{constructor(host,secure,namespace,webSocketOnly,nodeAdmin=!1,persistenceKey="",includeNamespaceInQueryParams=!1,isUsingEmulator=!1,emulatorOptions=null){this.secure=secure,this.namespace=namespace,this.webSocketOnly=webSocketOnly,this.nodeAdmin=nodeAdmin,this.persistenceKey=persistenceKey,this.includeNamespaceInQueryParams=includeNamespaceInQueryParams,this.isUsingEmulator=isUsingEmulator,this.emulatorOptions=emulatorOptions,this._host=host.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=PersistentStorage.get("host:"+host)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(newHost){newHost!==this.internalHost&&(this.internalHost=newHost,this.isCacheableHost()&&PersistentStorage.set("host:"+this._host,this.internalHost))}toString(){let str=this.toURLString();return this.persistenceKey&&(str+="<"+this.persistenceKey+">"),str}toURLString(){const protocol=this.secure?"https://":"http://",query=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${protocol}${this.host}/${query}`}}function repoInfoConnectionURL(repoInfo,type,params){let connURL;if((0,dist_index_esm.vA)("string"==typeof type,"typeof type must == string"),(0,dist_index_esm.vA)("object"==typeof params,"typeof params must == object"),"websocket"===type)connURL=(repoInfo.secure?"wss://":"ws://")+repoInfo.internalHost+"/.ws?";else{if("long_polling"!==type)throw new Error("Unknown connection type: "+type);connURL=(repoInfo.secure?"https://":"http://")+repoInfo.internalHost+"/.lp?"}(function repoInfoNeedsQueryParam(repoInfo){return repoInfo.host!==repoInfo.internalHost||repoInfo.isCustomHost()||repoInfo.includeNamespaceInQueryParams})(repoInfo)&&(params.ns=repoInfo.namespace);const pairs=[];return each(params,(key,value)=>{pairs.push(key+"="+value)}),connURL+pairs.join("&")}class StatsCollection{constructor(){this.counters_={}}incrementCounter(name,amount=1){(0,dist_index_esm.gR)(this.counters_,name)||(this.counters_[name]=0),this.counters_[name]+=amount}get(){return(0,dist_index_esm.A4)(this.counters_)}}const collections={},reporters={};function statsManagerGetCollection(repoInfo){const hashString=repoInfo.toString();return collections[hashString]||(collections[hashString]=new StatsCollection),collections[hashString]}class PacketReceiver{constructor(onMessage_){this.onMessage_=onMessage_,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(responseNum,callback){this.closeAfterResponse=responseNum,this.onClose=callback,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(requestNum,data){for(this.pendingResponses[requestNum]=data;this.pendingResponses[this.currentResponseNum];){const toProcess=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<toProcess.length;++i)toProcess[i]&&exceptionGuard(()=>{this.onMessage_(toProcess[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class BrowserPollConnection{constructor(connId,repoInfo,applicationId,appCheckToken,authToken,transportSessionId,lastSessionId){this.connId=connId,this.repoInfo=repoInfo,this.applicationId=applicationId,this.appCheckToken=appCheckToken,this.authToken=authToken,this.transportSessionId=transportSessionId,this.lastSessionId=lastSessionId,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=logWrapper(connId),this.stats_=statsManagerGetCollection(repoInfo),this.urlFn=params=>(this.appCheckToken&&(params.ac=this.appCheckToken),repoInfoConnectionURL(repoInfo,"long_polling",params))}open(onMessage,onDisconnect){this.curSegmentNum=0,this.onDisconnect_=onDisconnect,this.myPacketOrderer=new PacketReceiver(onMessage),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(fn){if((0,dist_index_esm.$g)()||"complete"===document.readyState)fn();else{let called=!1;const wrappedFn=function(){document.body?called||(called=!0,fn()):setTimeout(wrappedFn,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",wrappedFn,!1),window.addEventListener("load",wrappedFn,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&wrappedFn()}),window.attachEvent("onload",wrappedFn))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new FirebaseIFrameScriptHolder((...args)=>{const[command,arg1,arg2,arg3,arg4]=args;if(this.incrementIncomingBytes_(args),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===command)this.id=arg1,this.password=arg2;else{if("close"!==command)throw new Error("Unrecognized command received: "+command);arg1?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(arg1,()=>{this.onClosed_()})):this.onClosed_()}},(...args)=>{const[pN,data]=args;this.incrementIncomingBytes_(args),this.myPacketOrderer.handleResponse(pN,data)},()=>{this.onClosed_()},this.urlFn);const urlParams={start:"t"};urlParams.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(urlParams.cb=this.scriptTagHolder.uniqueCallbackIdentifier),urlParams.v="5",this.transportSessionId&&(urlParams.s=this.transportSessionId),this.lastSessionId&&(urlParams.ls=this.lastSessionId),this.applicationId&&(urlParams.p=this.applicationId),this.appCheckToken&&(urlParams.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&FORGE_DOMAIN_RE.test(location.hostname)&&(urlParams.r="f");const connectURL=this.urlFn(urlParams);this.log_("Connecting via long-poll to "+connectURL),this.scriptTagHolder.addTag(connectURL,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){BrowserPollConnection.forceAllow_=!0}static forceDisallow(){BrowserPollConnection.forceDisallow_=!0}static isAvailable(){return!(0,dist_index_esm.$g)()&&(!!BrowserPollConnection.forceAllow_||!(BrowserPollConnection.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(data){const dataStr=(0,dist_index_esm.As)(data);this.bytesSent+=dataStr.length,this.stats_.incrementCounter("bytes_sent",dataStr.length);const base64data=(0,dist_index_esm.KA)(dataStr),dataSegs=splitStringBySize(base64data,1840);for(let i=0;i<dataSegs.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,dataSegs.length,dataSegs[i]),this.curSegmentNum++}addDisconnectPingFrame(id,pw){if((0,dist_index_esm.$g)())return;this.myDisconnFrame=document.createElement("iframe");const urlParams={dframe:"t"};urlParams.id=id,urlParams.pw=pw,this.myDisconnFrame.src=this.urlFn(urlParams),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(args){const bytesReceived=(0,dist_index_esm.As)(args).length;this.bytesReceived+=bytesReceived,this.stats_.incrementCounter("bytes_received",bytesReceived)}}class FirebaseIFrameScriptHolder{constructor(commandCB,onMessageCB,onDisconnect,urlFn){if(this.onDisconnect=onDisconnect,this.urlFn=urlFn,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,dist_index_esm.$g)())this.commandCB=commandCB,this.onMessageCB=onMessageCB;else{this.uniqueCallbackIdentifier=LUIDGenerator(),window["pLPCommand"+this.uniqueCallbackIdentifier]=commandCB,window["pRTLPCB"+this.uniqueCallbackIdentifier]=onMessageCB,this.myIFrame=FirebaseIFrameScriptHolder.createIFrame_();let script="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){script='<script>document.domain="'+document.domain+'";<\/script>'}const iframeContents="<html><body>"+script+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(iframeContents),this.myIFrame.doc.close()}catch(e){log("frame writing exception"),e.stack&&log(e.stack),log(e)}}}static createIFrame_(){const iframe=document.createElement("iframe");if(iframe.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(iframe);try{iframe.contentWindow.document||log("No IE domain setting required")}catch(e){const domain=document.domain;iframe.src="javascript:void((function(){document.open();document.domain='"+domain+"';document.close();})())"}return iframe.contentDocument?iframe.doc=iframe.contentDocument:iframe.contentWindow?iframe.doc=iframe.contentWindow.document:iframe.document&&(iframe.doc=iframe.document),iframe}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const onDisconnect=this.onDisconnect;onDisconnect&&(this.onDisconnect=null,onDisconnect())}startLongPoll(id,pw){for(this.myID=id,this.myPW=pw,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const urlParams={};urlParams.id=this.myID,urlParams.pw=this.myPW,urlParams.ser=this.currentSerial;let theURL=this.urlFn(urlParams),curDataString="",i=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+curDataString.length<=1870))break;{const theSeg=this.pendingSegs.shift();curDataString=curDataString+"&seg"+i+"="+theSeg.seg+"&ts"+i+"="+theSeg.ts+"&d"+i+"="+theSeg.d,i++}}return theURL+=curDataString,this.addLongPollTag_(theURL,this.currentSerial),!0}return!1}enqueueSegment(segnum,totalsegs,data){this.pendingSegs.push({seg:segnum,ts:totalsegs,d:data}),this.alive&&this.newRequest_()}addLongPollTag_(url,serial){this.outstandingRequests.add(serial);const doNewRequest=()=>{this.outstandingRequests.delete(serial),this.newRequest_()},keepaliveTimeout=setTimeout(doNewRequest,Math.floor(25e3));this.addTag(url,()=>{clearTimeout(keepaliveTimeout),doNewRequest()})}addTag(url,loadCB){(0,dist_index_esm.$g)()?this.doNodeLongPoll(url,loadCB):setTimeout(()=>{try{if(!this.sendNewPolls)return;const newScript=this.myIFrame.doc.createElement("script");newScript.type="text/javascript",newScript.async=!0,newScript.src=url,newScript.onload=newScript.onreadystatechange=function(){const rstate=newScript.readyState;rstate&&"loaded"!==rstate&&"complete"!==rstate||(newScript.onload=newScript.onreadystatechange=null,newScript.parentNode&&newScript.parentNode.removeChild(newScript),loadCB())},newScript.onerror=()=>{log("Long-poll script failed to load: "+url),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(newScript)}catch(e){}},Math.floor(1))}}let WebSocketImpl=null;"undefined"!=typeof MozWebSocket?WebSocketImpl=MozWebSocket:"undefined"!=typeof WebSocket&&(WebSocketImpl=WebSocket);class WebSocketConnection{constructor(connId,repoInfo,applicationId,appCheckToken,authToken,transportSessionId,lastSessionId){this.connId=connId,this.applicationId=applicationId,this.appCheckToken=appCheckToken,this.authToken=authToken,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=logWrapper(this.connId),this.stats_=statsManagerGetCollection(repoInfo),this.connURL=WebSocketConnection.connectionURL_(repoInfo,transportSessionId,lastSessionId,appCheckToken,applicationId),this.nodeAdmin=repoInfo.nodeAdmin}static connectionURL_(repoInfo,transportSessionId,lastSessionId,appCheckToken,applicationId){const urlParams={v:"5"};return!(0,dist_index_esm.$g)()&&"undefined"!=typeof location&&location.hostname&&FORGE_DOMAIN_RE.test(location.hostname)&&(urlParams.r="f"),transportSessionId&&(urlParams.s=transportSessionId),lastSessionId&&(urlParams.ls=lastSessionId),appCheckToken&&(urlParams.ac=appCheckToken),applicationId&&(urlParams.p=applicationId),repoInfoConnectionURL(repoInfo,"websocket",urlParams)}open(onMessage,onDisconnect){this.onDisconnect=onDisconnect,this.onMessage=onMessage,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,PersistentStorage.set("previous_websocket_failure",!0);try{let options;if((0,dist_index_esm.$g)()){const device=this.nodeAdmin?"AdminNode":"Node";options={headers:{"User-Agent":`Firebase/5/${SDK_VERSION}/${process.platform}/${device}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(options.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(options.headers["X-Firebase-AppCheck"]=this.appCheckToken);const env=process.env,proxy=0===this.connURL.indexOf("wss://")?env.HTTPS_PROXY||env.https_proxy:env.HTTP_PROXY||env.http_proxy;proxy&&(options.proxy={origin:proxy})}this.mySock=new WebSocketImpl(this.connURL,[],options)}catch(e){this.log_("Error instantiating WebSocket.");const error=e.message||e.data;return error&&this.log_(error),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=m=>{this.handleIncomingFrame(m)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const error=e.message||e.data;error&&this.log_(error),this.onClosed_()}}start(){}static forceDisallow(){WebSocketConnection.forceDisallow_=!0}static isAvailable(){let isOldAndroid=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const oldAndroidRegex=/Android ([0-9]{0,}\.[0-9]{0,})/,oldAndroidMatch=navigator.userAgent.match(oldAndroidRegex);oldAndroidMatch&&oldAndroidMatch.length>1&&parseFloat(oldAndroidMatch[1])<4.4&&(isOldAndroid=!0)}return!isOldAndroid&&null!==WebSocketImpl&&!WebSocketConnection.forceDisallow_}static previouslyFailed(){return PersistentStorage.isInMemoryStorage||!0===PersistentStorage.get("previous_websocket_failure")}markConnectionHealthy(){PersistentStorage.remove("previous_websocket_failure")}appendFrame_(data){if(this.frames.push(data),this.frames.length===this.totalFrames){const fullMess=this.frames.join("");this.frames=null;const jsonMess=(0,dist_index_esm.$L)(fullMess);this.onMessage(jsonMess)}}handleNewFrameCount_(frameCount){this.totalFrames=frameCount,this.frames=[]}extractFrameCount_(data){if((0,dist_index_esm.vA)(null===this.frames,"We already have a frame buffer"),data.length<=6){const frameCount=Number(data);if(!isNaN(frameCount))return this.handleNewFrameCount_(frameCount),null}return this.handleNewFrameCount_(1),data}handleIncomingFrame(mess){if(null===this.mySock)return;const data=mess.data;if(this.bytesReceived+=data.length,this.stats_.incrementCounter("bytes_received",data.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(data);else{const remainingData=this.extractFrameCount_(data);null!==remainingData&&this.appendFrame_(remainingData)}}send(data){this.resetKeepAlive();const dataStr=(0,dist_index_esm.As)(data);this.bytesSent+=dataStr.length,this.stats_.incrementCounter("bytes_sent",dataStr.length);const dataSegs=splitStringBySize(dataStr,16384);dataSegs.length>1&&this.sendString_(String(dataSegs.length));for(let i=0;i<dataSegs.length;i++)this.sendString_(dataSegs[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(str){try{this.mySock.send(str)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}WebSocketConnection.responsesRequiredToBeHealthy=2,WebSocketConnection.healthyTimeout=3e4;class TransportManager{static get ALL_TRANSPORTS(){return[BrowserPollConnection,WebSocketConnection]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(repoInfo){this.initTransports_(repoInfo)}initTransports_(repoInfo){const isWebSocketsAvailable=WebSocketConnection&&WebSocketConnection.isAvailable();let isSkipPollConnection=isWebSocketsAvailable&&!WebSocketConnection.previouslyFailed();if(repoInfo.webSocketOnly&&(isWebSocketsAvailable||warn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),isSkipPollConnection=!0),isSkipPollConnection)this.transports_=[WebSocketConnection];else{const transports=this.transports_=[];for(const transport of TransportManager.ALL_TRANSPORTS)transport&&transport.isAvailable()&&transports.push(transport);TransportManager.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}TransportManager.globalTransportInitialized_=!1;class Connection{constructor(id,repoInfo_,applicationId_,appCheckToken_,authToken_,onMessage_,onReady_,onDisconnect_,onKill_,lastSessionId){this.id=id,this.repoInfo_=repoInfo_,this.applicationId_=applicationId_,this.appCheckToken_=appCheckToken_,this.authToken_=authToken_,this.onMessage_=onMessage_,this.onReady_=onReady_,this.onDisconnect_=onDisconnect_,this.onKill_=onKill_,this.lastSessionId=lastSessionId,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=logWrapper("c:"+this.id+":"),this.transportManager_=new TransportManager(repoInfo_),this.log_("Connection created"),this.start_()}start_(){const conn=this.transportManager_.initialTransport();this.conn_=new conn(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=conn.responsesRequiredToBeHealthy||0;const onMessageReceived=this.connReceiver_(this.conn_),onConnectionLost=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(onMessageReceived,onConnectionLost)},Math.floor(0));const healthyTimeoutMS=conn.healthyTimeout||0;healthyTimeoutMS>0&&(this.healthyTimeout_=setTimeoutNonBlocking(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(healthyTimeoutMS)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(conn){return everConnected=>{conn===this.conn_?this.onConnectionLost_(everConnected):conn===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(conn){return message=>{2!==this.state_&&(conn===this.rx_?this.onPrimaryMessageReceived_(message):conn===this.secondaryConn_?this.onSecondaryMessageReceived_(message):this.log_("message on old connection"))}}sendRequest(dataMsg){const msg={t:"d",d:dataMsg};this.sendData_(msg)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(controlData){if("t"in controlData){const cmd=controlData.t;"a"===cmd?this.upgradeIfSecondaryHealthy_():"r"===cmd?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===cmd&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(parsedData){const layer=requireKey("t",parsedData),data=requireKey("d",parsedData);if("c"===layer)this.onSecondaryControl_(data);else{if("d"!==layer)throw new Error("Unknown protocol layer: "+layer);this.pendingDataMessages.push(data)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(parsedData){const layer=requireKey("t",parsedData),data=requireKey("d",parsedData);"c"===layer?this.onControl_(data):"d"===layer&&this.onDataMessage_(data)}onDataMessage_(message){this.onPrimaryResponse_(),this.onMessage_(message)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(controlData){const cmd=requireKey("t",controlData);if("d"in controlData){const payload=controlData.d;if("h"===cmd){const handshakePayload={...payload};this.repoInfo_.isUsingEmulator&&(handshakePayload.h=this.repoInfo_.host),this.onHandshake_(handshakePayload)}else if("n"===cmd){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===cmd?this.onConnectionShutdown_(payload):"r"===cmd?this.onReset_(payload):"e"===cmd?error("Server Error: "+payload):"o"===cmd?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):error("Unknown control packet command: "+cmd)}}onHandshake_(handshake){const timestamp=handshake.ts,version=handshake.v,host=handshake.h;this.sessionId=handshake.s,this.repoInfo_.host=host,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,timestamp),"5"!==version&&warn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const conn=this.transportManager_.upgradeTransport();conn&&this.startUpgrade_(conn)}startUpgrade_(conn){this.secondaryConn_=new conn(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=conn.responsesRequiredToBeHealthy||0;const onMessage=this.connReceiver_(this.secondaryConn_),onDisconnect=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(onMessage,onDisconnect),setTimeoutNonBlocking(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(host){this.log_("Reset packet received.  New host: "+host),this.repoInfo_.host=host,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(conn,timestamp){this.log_("Realtime connection established."),this.conn_=conn,this.state_=1,this.onReady_&&(this.onReady_(timestamp,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):setTimeoutNonBlocking(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const conn=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==conn&&this.rx_!==conn||this.close()}onConnectionLost_(everConnected){this.conn_=null,everConnected||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(PersistentStorage.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(reason){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(reason),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(data){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(data)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class ServerActions{put(pathString,data,onComplete,hash){}merge(pathString,data,onComplete,hash){}refreshAuthToken(token){}refreshAppCheckToken(token){}onDisconnectPut(pathString,data,onComplete){}onDisconnectMerge(pathString,data,onComplete){}onDisconnectCancel(pathString,onComplete){}reportStats(stats){}}class EventEmitter{constructor(allowedEvents_){this.allowedEvents_=allowedEvents_,this.listeners_={},(0,dist_index_esm.vA)(Array.isArray(allowedEvents_)&&allowedEvents_.length>0,"Requires a non-empty array")}trigger(eventType,...varArgs){if(Array.isArray(this.listeners_[eventType])){const listeners=[...this.listeners_[eventType]];for(let i=0;i<listeners.length;i++)listeners[i].callback.apply(listeners[i].context,varArgs)}}on(eventType,callback,context){this.validateEventType_(eventType),this.listeners_[eventType]=this.listeners_[eventType]||[],this.listeners_[eventType].push({callback,context});const eventData=this.getInitialEvent(eventType);eventData&&callback.apply(context,eventData)}off(eventType,callback,context){this.validateEventType_(eventType);const listeners=this.listeners_[eventType]||[];for(let i=0;i<listeners.length;i++)if(listeners[i].callback===callback&&(!context||context===listeners[i].context))return void listeners.splice(i,1)}validateEventType_(eventType){(0,dist_index_esm.vA)(this.allowedEvents_.find(et=>et===eventType),"Unknown event: "+eventType)}}class OnlineMonitor extends EventEmitter{static getInstance(){return new OnlineMonitor}constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||(0,dist_index_esm.jZ)()||(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(eventType){return(0,dist_index_esm.vA)("online"===eventType,"Unknown event type: "+eventType),[this.online_]}currentlyOnline(){return this.online_}}class Path{constructor(pathOrString,pieceNum){if(void 0===pieceNum){this.pieces_=pathOrString.split("/");let copyTo=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[copyTo]=this.pieces_[i],copyTo++);this.pieces_.length=copyTo,this.pieceNum_=0}else this.pieces_=pathOrString,this.pieceNum_=pieceNum}toString(){let pathString="";for(let i=this.pieceNum_;i<this.pieces_.length;i++)""!==this.pieces_[i]&&(pathString+="/"+this.pieces_[i]);return pathString||"/"}}function newEmptyPath(){return new Path("")}function pathGetFront(path){return path.pieceNum_>=path.pieces_.length?null:path.pieces_[path.pieceNum_]}function pathGetLength(path){return path.pieces_.length-path.pieceNum_}function pathPopFront(path){let pieceNum=path.pieceNum_;return pieceNum<path.pieces_.length&&pieceNum++,new Path(path.pieces_,pieceNum)}function pathGetBack(path){return path.pieceNum_<path.pieces_.length?path.pieces_[path.pieces_.length-1]:null}function pathSlice(path,begin=0){return path.pieces_.slice(path.pieceNum_+begin)}function pathParent(path){if(path.pieceNum_>=path.pieces_.length)return null;const pieces=[];for(let i=path.pieceNum_;i<path.pieces_.length-1;i++)pieces.push(path.pieces_[i]);return new Path(pieces,0)}function pathChild(path,childPathObj){const pieces=[];for(let i=path.pieceNum_;i<path.pieces_.length;i++)pieces.push(path.pieces_[i]);if(childPathObj instanceof Path)for(let i=childPathObj.pieceNum_;i<childPathObj.pieces_.length;i++)pieces.push(childPathObj.pieces_[i]);else{const childPieces=childPathObj.split("/");for(let i=0;i<childPieces.length;i++)childPieces[i].length>0&&pieces.push(childPieces[i])}return new Path(pieces,0)}function pathIsEmpty(path){return path.pieceNum_>=path.pieces_.length}function newRelativePath(outerPath,innerPath){const outer=pathGetFront(outerPath),inner=pathGetFront(innerPath);if(null===outer)return innerPath;if(outer===inner)return newRelativePath(pathPopFront(outerPath),pathPopFront(innerPath));throw new Error("INTERNAL ERROR: innerPath ("+innerPath+") is not within outerPath ("+outerPath+")")}function pathEquals(path,other){if(pathGetLength(path)!==pathGetLength(other))return!1;for(let i=path.pieceNum_,j=other.pieceNum_;i<=path.pieces_.length;i++,j++)if(path.pieces_[i]!==other.pieces_[j])return!1;return!0}function pathContains(path,other){let i=path.pieceNum_,j=other.pieceNum_;if(pathGetLength(path)>pathGetLength(other))return!1;for(;i<path.pieces_.length;){if(path.pieces_[i]!==other.pieces_[j])return!1;++i,++j}return!0}class ValidationPath{constructor(path,errorPrefix_){this.errorPrefix_=errorPrefix_,this.parts_=pathSlice(path,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,dist_index_esm.OE)(this.parts_[i]);validationPathCheckValid(this)}}function validationPathCheckValid(validationPath){if(validationPath.byteLength_>768)throw new Error(validationPath.errorPrefix_+"has a key path longer than 768 bytes ("+validationPath.byteLength_+").");if(validationPath.parts_.length>32)throw new Error(validationPath.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+validationPathToErrorString(validationPath))}function validationPathToErrorString(validationPath){return 0===validationPath.parts_.length?"":"in property '"+validationPath.parts_.join(".")+"'"}class VisibilityMonitor extends EventEmitter{static getInstance(){return new VisibilityMonitor}constructor(){let hidden,visibilityChange;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(visibilityChange="visibilitychange",hidden="hidden"):void 0!==document.mozHidden?(visibilityChange="mozvisibilitychange",hidden="mozHidden"):void 0!==document.msHidden?(visibilityChange="msvisibilitychange",hidden="msHidden"):void 0!==document.webkitHidden&&(visibilityChange="webkitvisibilitychange",hidden="webkitHidden")),this.visible_=!0,visibilityChange&&document.addEventListener(visibilityChange,()=>{const visible=!document[hidden];visible!==this.visible_&&(this.visible_=visible,this.trigger("visible",visible))},!1)}getInitialEvent(eventType){return(0,dist_index_esm.vA)("visible"===eventType,"Unknown event type: "+eventType),[this.visible_]}}class PersistentConnection extends ServerActions{constructor(repoInfo_,applicationId_,onDataUpdate_,onConnectStatus_,onServerInfoUpdate_,authTokenProvider_,appCheckTokenProvider_,authOverride_){if(super(),this.repoInfo_=repoInfo_,this.applicationId_=applicationId_,this.onDataUpdate_=onDataUpdate_,this.onConnectStatus_=onConnectStatus_,this.onServerInfoUpdate_=onServerInfoUpdate_,this.authTokenProvider_=authTokenProvider_,this.appCheckTokenProvider_=appCheckTokenProvider_,this.authOverride_=authOverride_,this.id=PersistentConnection.nextPersistentConnectionId_++,this.log_=logWrapper("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=1e3,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,authOverride_&&!(0,dist_index_esm.$g)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");VisibilityMonitor.getInstance().on("visible",this.onVisible_,this),-1===repoInfo_.host.indexOf("fblocal")&&OnlineMonitor.getInstance().on("online",this.onOnline_,this)}sendRequest(action,body,onResponse){const curReqNum=++this.requestNumber_,msg={r:curReqNum,a:action,b:body};this.log_((0,dist_index_esm.As)(msg)),(0,dist_index_esm.vA)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(msg),onResponse&&(this.requestCBHash_[curReqNum]=onResponse)}get(query){this.initConnection_();const deferred=new dist_index_esm.cY,outstandingGet={action:"g",request:{p:query._path.toString(),q:query._queryObject},onComplete:message=>{const payload=message.d;"ok"===message.s?deferred.resolve(payload):deferred.reject(payload)}};this.outstandingGets_.push(outstandingGet),this.outstandingGetCount_++;const index=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(index),deferred.promise}listen(query,currentHashFn,tag,onComplete){this.initConnection_();const queryId=query._queryIdentifier,pathString=query._path.toString();this.log_("Listen called for "+pathString+" "+queryId),this.listens.has(pathString)||this.listens.set(pathString,new Map),(0,dist_index_esm.vA)(query._queryParams.isDefault()||!query._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,dist_index_esm.vA)(!this.listens.get(pathString).has(queryId),"listen() called twice for same path/queryId.");const listenSpec={onComplete,hashFn:currentHashFn,query,tag};this.listens.get(pathString).set(queryId,listenSpec),this.connected_&&this.sendListen_(listenSpec)}sendGet_(index){const get=this.outstandingGets_[index];this.sendRequest("g",get.request,message=>{delete this.outstandingGets_[index],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),get.onComplete&&get.onComplete(message)})}sendListen_(listenSpec){const query=listenSpec.query,pathString=query._path.toString(),queryId=query._queryIdentifier;this.log_("Listen on "+pathString+" for "+queryId);const req={p:pathString};listenSpec.tag&&(req.q=query._queryObject,req.t=listenSpec.tag),req.h=listenSpec.hashFn(),this.sendRequest("q",req,message=>{const payload=message.d,status=message.s;PersistentConnection.warnOnListenWarnings_(payload,query);(this.listens.get(pathString)&&this.listens.get(pathString).get(queryId))===listenSpec&&(this.log_("listen response",message),"ok"!==status&&this.removeListen_(pathString,queryId),listenSpec.onComplete&&listenSpec.onComplete(status,payload))})}static warnOnListenWarnings_(payload,query){if(payload&&"object"==typeof payload&&(0,dist_index_esm.gR)(payload,"w")){const warnings=(0,dist_index_esm.yw)(payload,"w");if(Array.isArray(warnings)&&~warnings.indexOf("no_index")){const indexSpec='".indexOn": "'+query._queryParams.getIndex().toString()+'"',indexPath=query._path.toString();warn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${indexSpec} at ${indexPath} to your security rules for better performance.`)}}}refreshAuthToken(token){this.authToken_=token,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(token)}reduceReconnectDelayIfAdminCredential_(credential){(credential&&40===credential.length||(0,dist_index_esm.qc)(credential))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(token){this.appCheckToken_=token,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const token=this.authToken_,authMethod=(0,dist_index_esm.Cv)(token)?"auth":"gauth",requestData={cred:token};null===this.authOverride_?requestData.noauth=!0:"object"==typeof this.authOverride_&&(requestData.authvar=this.authOverride_),this.sendRequest(authMethod,requestData,res=>{const status=res.s,data=res.d||"error";this.authToken_===token&&("ok"===status?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(status,data))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},res=>{const status=res.s,data=res.d||"error";"ok"===status?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(status,data)})}unlisten(query,tag){const pathString=query._path.toString(),queryId=query._queryIdentifier;this.log_("Unlisten called for "+pathString+" "+queryId),(0,dist_index_esm.vA)(query._queryParams.isDefault()||!query._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(pathString,queryId)&&this.connected_&&this.sendUnlisten_(pathString,queryId,query._queryObject,tag)}sendUnlisten_(pathString,queryId,queryObj,tag){this.log_("Unlisten on "+pathString+" for "+queryId);const req={p:pathString};tag&&(req.q=queryObj,req.t=tag),this.sendRequest("n",req)}onDisconnectPut(pathString,data,onComplete){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",pathString,data,onComplete):this.onDisconnectRequestQueue_.push({pathString,action:"o",data,onComplete})}onDisconnectMerge(pathString,data,onComplete){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",pathString,data,onComplete):this.onDisconnectRequestQueue_.push({pathString,action:"om",data,onComplete})}onDisconnectCancel(pathString,onComplete){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",pathString,null,onComplete):this.onDisconnectRequestQueue_.push({pathString,action:"oc",data:null,onComplete})}sendOnDisconnect_(action,pathString,data,onComplete){const request={p:pathString,d:data};this.log_("onDisconnect "+action,request),this.sendRequest(action,request,response=>{onComplete&&setTimeout(()=>{onComplete(response.s,response.d)},Math.floor(0))})}put(pathString,data,onComplete,hash){this.putInternal("p",pathString,data,onComplete,hash)}merge(pathString,data,onComplete,hash){this.putInternal("m",pathString,data,onComplete,hash)}putInternal(action,pathString,data,onComplete,hash){this.initConnection_();const request={p:pathString,d:data};void 0!==hash&&(request.h=hash),this.outstandingPuts_.push({action,request,onComplete}),this.outstandingPutCount_++;const index=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(index):this.log_("Buffering put: "+pathString)}sendPut_(index){const action=this.outstandingPuts_[index].action,request=this.outstandingPuts_[index].request,onComplete=this.outstandingPuts_[index].onComplete;this.outstandingPuts_[index].queued=this.connected_,this.sendRequest(action,request,message=>{this.log_(action+" response",message),delete this.outstandingPuts_[index],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),onComplete&&onComplete(message.s,message.d)})}reportStats(stats){if(this.connected_){const request={c:stats};this.log_("reportStats",request),this.sendRequest("s",request,result=>{if("ok"!==result.s){const errorReason=result.d;this.log_("reportStats","Error sending stats: "+errorReason)}})}}onDataMessage_(message){if("r"in message){this.log_("from server: "+(0,dist_index_esm.As)(message));const reqNum=message.r,onResponse=this.requestCBHash_[reqNum];onResponse&&(delete this.requestCBHash_[reqNum],onResponse(message.b))}else{if("error"in message)throw"A server-side error has occurred: "+message.error;"a"in message&&this.onDataPush_(message.a,message.b)}}onDataPush_(action,body){this.log_("handleServerMessage",action,body),"d"===action?this.onDataUpdate_(body.p,body.d,!1,body.t):"m"===action?this.onDataUpdate_(body.p,body.d,!0,body.t):"c"===action?this.onListenRevoked_(body.p,body.q):"ac"===action?this.onAuthRevoked_(body.s,body.d):"apc"===action?this.onAppCheckRevoked_(body.s,body.d):"sd"===action?this.onSecurityDebugPacket_(body):error("Unrecognized action received from server: "+(0,dist_index_esm.As)(action)+"\nAre you using the latest client?")}onReady_(timestamp,sessionId){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(timestamp),this.lastSessionId=sessionId,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(timeout){(0,dist_index_esm.vA)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(timeout))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(visible){visible&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=visible}onOnline_(online){online?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const timeSinceLastConnectAttempt=Math.max(0,(new Date).getTime()-this.lastConnectionAttemptTime_);let reconnectDelay=Math.max(0,this.reconnectDelay_-timeSinceLastConnectAttempt);reconnectDelay=Math.random()*reconnectDelay,this.log_("Trying to reconnect in "+reconnectDelay+"ms"),this.scheduleConnect_(reconnectDelay),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const onDataMessage=this.onDataMessage_.bind(this),onReady=this.onReady_.bind(this),onDisconnect=this.onRealtimeDisconnect_.bind(this),connId=this.id+":"+PersistentConnection.nextConnectionId_++,lastSessionId=this.lastSessionId;let canceled=!1,connection=null;const closeFn=function(){connection?connection.close():(canceled=!0,onDisconnect())},sendRequestFn=function(msg){(0,dist_index_esm.vA)(connection,"sendRequest call when we're not connected not allowed."),connection.sendRequest(msg)};this.realtime_={close:closeFn,sendRequest:sendRequestFn};const forceRefresh=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[authToken,appCheckToken]=await Promise.all([this.authTokenProvider_.getToken(forceRefresh),this.appCheckTokenProvider_.getToken(forceRefresh)]);canceled?log("getToken() completed but was canceled"):(log("getToken() completed. Creating connection."),this.authToken_=authToken&&authToken.accessToken,this.appCheckToken_=appCheckToken&&appCheckToken.token,connection=new Connection(connId,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,onDataMessage,onReady,onDisconnect,reason=>{warn(reason+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")},lastSessionId))}catch(error){this.log_("Failed to get token: "+error),canceled||(this.repoInfo_.nodeAdmin&&warn(error),closeFn())}}}interrupt(reason){log("Interrupting connection for reason: "+reason),this.interruptReasons_[reason]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(reason){log("Resuming connection for reason: "+reason),delete this.interruptReasons_[reason],(0,dist_index_esm.Im)(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(timestamp){const delta=timestamp-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:delta})}cancelSentTransactions_(){for(let i=0;i<this.outstandingPuts_.length;i++){const put=this.outstandingPuts_[i];put&&"h"in put.request&&put.queued&&(put.onComplete&&put.onComplete("disconnect"),delete this.outstandingPuts_[i],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(pathString,query){let queryId;queryId=query?query.map(q=>ObjectToUniqueKey(q)).join("$"):"default";const listen=this.removeListen_(pathString,queryId);listen&&listen.onComplete&&listen.onComplete("permission_denied")}removeListen_(pathString,queryId){const normalizedPathString=new Path(pathString).toString();let listen;if(this.listens.has(normalizedPathString)){const map=this.listens.get(normalizedPathString);listen=map.get(queryId),map.delete(queryId),0===map.size&&this.listens.delete(normalizedPathString)}else listen=void 0;return listen}onAuthRevoked_(statusCode,explanation){log("Auth token revoked: "+statusCode+"/"+explanation),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==statusCode&&"permission_denied"!==statusCode||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(statusCode,explanation){log("App check token revoked: "+statusCode+"/"+explanation),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==statusCode&&"permission_denied"!==statusCode||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(body){this.securityDebugCallback_?this.securityDebugCallback_(body):"msg"in body&&console.log("FIREBASE: "+body.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const queries of this.listens.values())for(const listenSpec of queries.values())this.sendListen_(listenSpec);for(let i=0;i<this.outstandingPuts_.length;i++)this.outstandingPuts_[i]&&this.sendPut_(i);for(;this.onDisconnectRequestQueue_.length;){const request=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(request.action,request.pathString,request.data,request.onComplete)}for(let i=0;i<this.outstandingGets_.length;i++)this.outstandingGets_[i]&&this.sendGet_(i)}sendConnectStats_(){const stats={};let clientName="js";(0,dist_index_esm.$g)()&&(clientName=this.repoInfo_.nodeAdmin?"admin_node":"node"),stats["sdk."+clientName+"."+SDK_VERSION.replace(/\./g,"-")]=1,(0,dist_index_esm.jZ)()?stats["framework.cordova"]=1:(0,dist_index_esm.lV)()&&(stats["framework.reactnative"]=1),this.reportStats(stats)}shouldReconnect_(){const online=OnlineMonitor.getInstance().currentlyOnline();return(0,dist_index_esm.Im)(this.interruptReasons_)&&online}}PersistentConnection.nextPersistentConnectionId_=0,PersistentConnection.nextConnectionId_=0;class NamedNode{constructor(name,node){this.name=name,this.node=node}static Wrap(name,node){return new NamedNode(name,node)}}class Index{getCompare(){return this.compare.bind(this)}indexedValueChanged(oldNode,newNode){const oldWrapped=new NamedNode(MIN_NAME,oldNode),newWrapped=new NamedNode(MIN_NAME,newNode);return 0!==this.compare(oldWrapped,newWrapped)}minPost(){return NamedNode.MIN}}let __EMPTY_NODE;class KeyIndex extends Index{static get __EMPTY_NODE(){return __EMPTY_NODE}static set __EMPTY_NODE(val){__EMPTY_NODE=val}compare(a,b){return nameCompare(a.name,b.name)}isDefinedOn(node){throw(0,dist_index_esm.Hk)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(oldNode,newNode){return!1}minPost(){return NamedNode.MIN}maxPost(){return new NamedNode(MAX_NAME,__EMPTY_NODE)}makePost(indexValue,name){return(0,dist_index_esm.vA)("string"==typeof indexValue,"KeyIndex indexValue must always be a string."),new NamedNode(indexValue,__EMPTY_NODE)}toString(){return".key"}}const KEY_INDEX=new KeyIndex;class SortedMapIterator{constructor(node,startKey,comparator,isReverse_,resultGenerator_=null){this.isReverse_=isReverse_,this.resultGenerator_=resultGenerator_,this.nodeStack_=[];let cmp=1;for(;!node.isEmpty();)if(cmp=startKey?comparator(node.key,startKey):1,isReverse_&&(cmp*=-1),cmp<0)node=this.isReverse_?node.left:node.right;else{if(0===cmp){this.nodeStack_.push(node);break}this.nodeStack_.push(node),node=this.isReverse_?node.right:node.left}}getNext(){if(0===this.nodeStack_.length)return null;let result,node=this.nodeStack_.pop();if(result=this.resultGenerator_?this.resultGenerator_(node.key,node.value):{key:node.key,value:node.value},this.isReverse_)for(node=node.left;!node.isEmpty();)this.nodeStack_.push(node),node=node.right;else for(node=node.right;!node.isEmpty();)this.nodeStack_.push(node),node=node.left;return result}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const node=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(node.key,node.value):{key:node.key,value:node.value}}}class LLRBNode{constructor(key,value,color,left,right){this.key=key,this.value=value,this.color=null!=color?color:LLRBNode.RED,this.left=null!=left?left:SortedMap.EMPTY_NODE,this.right=null!=right?right:SortedMap.EMPTY_NODE}copy(key,value,color,left,right){return new LLRBNode(null!=key?key:this.key,null!=value?value:this.value,null!=color?color:this.color,null!=left?left:this.left,null!=right?right:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(action){return this.left.inorderTraversal(action)||!!action(this.key,this.value)||this.right.inorderTraversal(action)}reverseTraversal(action){return this.right.reverseTraversal(action)||action(this.key,this.value)||this.left.reverseTraversal(action)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(key,value,comparator){let n=this;const cmp=comparator(key,n.key);return n=cmp<0?n.copy(null,null,null,n.left.insert(key,value,comparator),null):0===cmp?n.copy(null,value,null,null,null):n.copy(null,null,null,null,n.right.insert(key,value,comparator)),n.fixUp_()}removeMin_(){if(this.left.isEmpty())return SortedMap.EMPTY_NODE;let n=this;return n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(key,comparator){let n,smallest;if(n=this,comparator(key,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(key,comparator),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===comparator(key,n.key)){if(n.right.isEmpty())return SortedMap.EMPTY_NODE;smallest=n.right.min_(),n=n.copy(smallest.key,smallest.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(key,comparator))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){const nl=this.copy(null,null,LLRBNode.RED,null,this.right.left);return this.right.copy(null,null,this.color,nl,null)}rotateRight_(){const nr=this.copy(null,null,LLRBNode.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,nr)}colorFlip_(){const left=this.left.copy(null,null,!this.left.color,null,null),right=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,left,right)}checkMaxDepth_(){const blackDepth=this.check_();return Math.pow(2,blackDepth)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const blackDepth=this.left.check_();if(blackDepth!==this.right.check_())throw new Error("Black depths differ");return blackDepth+(this.isRed_()?0:1)}}LLRBNode.RED=!0,LLRBNode.BLACK=!1;class SortedMap{constructor(comparator_,root_=SortedMap.EMPTY_NODE){this.comparator_=comparator_,this.root_=root_}insert(key,value){return new SortedMap(this.comparator_,this.root_.insert(key,value,this.comparator_).copy(null,null,LLRBNode.BLACK,null,null))}remove(key){return new SortedMap(this.comparator_,this.root_.remove(key,this.comparator_).copy(null,null,LLRBNode.BLACK,null,null))}get(key){let cmp,node=this.root_;for(;!node.isEmpty();){if(cmp=this.comparator_(key,node.key),0===cmp)return node.value;cmp<0?node=node.left:cmp>0&&(node=node.right)}return null}getPredecessorKey(key){let cmp,node=this.root_,rightParent=null;for(;!node.isEmpty();){if(cmp=this.comparator_(key,node.key),0===cmp){if(node.left.isEmpty())return rightParent?rightParent.key:null;for(node=node.left;!node.right.isEmpty();)node=node.right;return node.key}cmp<0?node=node.left:cmp>0&&(rightParent=node,node=node.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(action){return this.root_.inorderTraversal(action)}reverseTraversal(action){return this.root_.reverseTraversal(action)}getIterator(resultGenerator){return new SortedMapIterator(this.root_,null,this.comparator_,!1,resultGenerator)}getIteratorFrom(key,resultGenerator){return new SortedMapIterator(this.root_,key,this.comparator_,!1,resultGenerator)}getReverseIteratorFrom(key,resultGenerator){return new SortedMapIterator(this.root_,key,this.comparator_,!0,resultGenerator)}getReverseIterator(resultGenerator){return new SortedMapIterator(this.root_,null,this.comparator_,!0,resultGenerator)}}function NAME_ONLY_COMPARATOR(left,right){return nameCompare(left.name,right.name)}function NAME_COMPARATOR(left,right){return nameCompare(left,right)}let MAX_NODE$2;SortedMap.EMPTY_NODE=new class LLRBEmptyNode{copy(key,value,color,left,right){return this}insert(key,value,comparator){return new LLRBNode(key,value,null)}remove(key,comparator){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(action){return!1}reverseTraversal(action){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const priorityHashText=function(priority){return"number"==typeof priority?"number:"+doubleToIEEE754String(priority):"string:"+priority},validatePriorityNode=function(priorityNode){if(priorityNode.isLeafNode()){const val=priorityNode.val();(0,dist_index_esm.vA)("string"==typeof val||"number"==typeof val||"object"==typeof val&&(0,dist_index_esm.gR)(val,".sv"),"Priority must be a string or number.")}else(0,dist_index_esm.vA)(priorityNode===MAX_NODE$2||priorityNode.isEmpty(),"priority of unexpected type.");(0,dist_index_esm.vA)(priorityNode===MAX_NODE$2||priorityNode.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let __childrenNodeConstructor,nodeFromJSON$1,MAX_NODE$1;class LeafNode{static set __childrenNodeConstructor(val){__childrenNodeConstructor=val}static get __childrenNodeConstructor(){return __childrenNodeConstructor}constructor(value_,priorityNode_=LeafNode.__childrenNodeConstructor.EMPTY_NODE){this.value_=value_,this.priorityNode_=priorityNode_,this.lazyHash_=null,(0,dist_index_esm.vA)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),validatePriorityNode(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(newPriorityNode){return new LeafNode(this.value_,newPriorityNode)}getImmediateChild(childName){return".priority"===childName?this.priorityNode_:LeafNode.__childrenNodeConstructor.EMPTY_NODE}getChild(path){return pathIsEmpty(path)?this:".priority"===pathGetFront(path)?this.priorityNode_:LeafNode.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(childName,childNode){return null}updateImmediateChild(childName,newChildNode){return".priority"===childName?this.updatePriority(newChildNode):newChildNode.isEmpty()&&".priority"!==childName?this:LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(childName,newChildNode).updatePriority(this.priorityNode_)}updateChild(path,newChildNode){const front=pathGetFront(path);return null===front?newChildNode:newChildNode.isEmpty()&&".priority"!==front?this:((0,dist_index_esm.vA)(".priority"!==front||1===pathGetLength(path),".priority must be the last token in a path"),this.updateImmediateChild(front,LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateChild(pathPopFront(path),newChildNode)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(index,action){return!1}val(exportFormat){return exportFormat&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let toHash="";this.priorityNode_.isEmpty()||(toHash+="priority:"+priorityHashText(this.priorityNode_.val())+":");const type=typeof this.value_;toHash+=type+":",toHash+="number"===type?doubleToIEEE754String(this.value_):this.value_,this.lazyHash_=sha1(toHash)}return this.lazyHash_}getValue(){return this.value_}compareTo(other){return other===LeafNode.__childrenNodeConstructor.EMPTY_NODE?1:other instanceof LeafNode.__childrenNodeConstructor?-1:((0,dist_index_esm.vA)(other.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(other))}compareToLeafNode_(otherLeaf){const otherLeafType=typeof otherLeaf.value_,thisLeafType=typeof this.value_,otherIndex=LeafNode.VALUE_TYPE_ORDER.indexOf(otherLeafType),thisIndex=LeafNode.VALUE_TYPE_ORDER.indexOf(thisLeafType);return(0,dist_index_esm.vA)(otherIndex>=0,"Unknown leaf type: "+otherLeafType),(0,dist_index_esm.vA)(thisIndex>=0,"Unknown leaf type: "+thisLeafType),otherIndex===thisIndex?"object"===thisLeafType?0:this.value_<otherLeaf.value_?-1:this.value_===otherLeaf.value_?0:1:thisIndex-otherIndex}withIndex(){return this}isIndexed(){return!0}equals(other){if(other===this)return!0;if(other.isLeafNode()){const otherLeaf=other;return this.value_===otherLeaf.value_&&this.priorityNode_.equals(otherLeaf.priorityNode_)}return!1}}LeafNode.VALUE_TYPE_ORDER=["object","boolean","number","string"];const PRIORITY_INDEX=new class PriorityIndex extends Index{compare(a,b){const aPriority=a.node.getPriority(),bPriority=b.node.getPriority(),indexCmp=aPriority.compareTo(bPriority);return 0===indexCmp?nameCompare(a.name,b.name):indexCmp}isDefinedOn(node){return!node.getPriority().isEmpty()}indexedValueChanged(oldNode,newNode){return!oldNode.getPriority().equals(newNode.getPriority())}minPost(){return NamedNode.MIN}maxPost(){return new NamedNode(MAX_NAME,new LeafNode("[PRIORITY-POST]",MAX_NODE$1))}makePost(indexValue,name){const priorityNode=nodeFromJSON$1(indexValue);return new NamedNode(name,new LeafNode("[PRIORITY-POST]",priorityNode))}toString(){return".priority"}},LOG_2=Math.log(2);class Base12Num{constructor(length){var num;this.count=(num=length+1,parseInt(Math.log(num)/LOG_2,10)),this.current_=this.count-1;const mask=(bits=this.count,parseInt(Array(bits+1).join("1"),2));var bits;this.bits_=length+1&mask}nextBitIsOne(){const result=!(this.bits_&1<<this.current_);return this.current_--,result}}const buildChildSet=function(childList,cmp,keyFn,mapSortFn){childList.sort(cmp);const buildBalancedTree=function(low,high){const length=high-low;let namedNode,key;if(0===length)return null;if(1===length)return namedNode=childList[low],key=keyFn?keyFn(namedNode):namedNode,new LLRBNode(key,namedNode.node,LLRBNode.BLACK,null,null);{const middle=parseInt(length/2,10)+low,left=buildBalancedTree(low,middle),right=buildBalancedTree(middle+1,high);return namedNode=childList[middle],key=keyFn?keyFn(namedNode):namedNode,new LLRBNode(key,namedNode.node,LLRBNode.BLACK,left,right)}},root=function(base12){let node=null,root=null,index=childList.length;const buildPennant=function(chunkSize,color){const low=index-chunkSize,high=index;index-=chunkSize;const childTree=buildBalancedTree(low+1,high),namedNode=childList[low],key=keyFn?keyFn(namedNode):namedNode;attachPennant(new LLRBNode(key,namedNode.node,color,null,childTree))},attachPennant=function(pennant){node?(node.left=pennant,node=pennant):(root=pennant,node=pennant)};for(let i=0;i<base12.count;++i){const isOne=base12.nextBitIsOne(),chunkSize=Math.pow(2,base12.count-(i+1));isOne?buildPennant(chunkSize,LLRBNode.BLACK):(buildPennant(chunkSize,LLRBNode.BLACK),buildPennant(chunkSize,LLRBNode.RED))}return root}(new Base12Num(childList.length));return new SortedMap(mapSortFn||cmp,root)};let _defaultIndexMap;const fallbackObject={};class IndexMap{static get Default(){return(0,dist_index_esm.vA)(fallbackObject&&PRIORITY_INDEX,"ChildrenNode.ts has not been loaded"),_defaultIndexMap=_defaultIndexMap||new IndexMap({".priority":fallbackObject},{".priority":PRIORITY_INDEX}),_defaultIndexMap}constructor(indexes_,indexSet_){this.indexes_=indexes_,this.indexSet_=indexSet_}get(indexKey){const sortedMap=(0,dist_index_esm.yw)(this.indexes_,indexKey);if(!sortedMap)throw new Error("No index defined for "+indexKey);return sortedMap instanceof SortedMap?sortedMap:null}hasIndex(indexDefinition){return(0,dist_index_esm.gR)(this.indexSet_,indexDefinition.toString())}addIndex(indexDefinition,existingChildren){(0,dist_index_esm.vA)(indexDefinition!==KEY_INDEX,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const childList=[];let sawIndexedValue=!1;const iter=existingChildren.getIterator(NamedNode.Wrap);let newIndex,next=iter.getNext();for(;next;)sawIndexedValue=sawIndexedValue||indexDefinition.isDefinedOn(next.node),childList.push(next),next=iter.getNext();newIndex=sawIndexedValue?buildChildSet(childList,indexDefinition.getCompare()):fallbackObject;const indexName=indexDefinition.toString(),newIndexSet={...this.indexSet_};newIndexSet[indexName]=indexDefinition;const newIndexes={...this.indexes_};return newIndexes[indexName]=newIndex,new IndexMap(newIndexes,newIndexSet)}addToIndexes(namedNode,existingChildren){const newIndexes=(0,dist_index_esm.kH)(this.indexes_,(indexedChildren,indexName)=>{const index=(0,dist_index_esm.yw)(this.indexSet_,indexName);if((0,dist_index_esm.vA)(index,"Missing index implementation for "+indexName),indexedChildren===fallbackObject){if(index.isDefinedOn(namedNode.node)){const childList=[],iter=existingChildren.getIterator(NamedNode.Wrap);let next=iter.getNext();for(;next;)next.name!==namedNode.name&&childList.push(next),next=iter.getNext();return childList.push(namedNode),buildChildSet(childList,index.getCompare())}return fallbackObject}{const existingSnap=existingChildren.get(namedNode.name);let newChildren=indexedChildren;return existingSnap&&(newChildren=newChildren.remove(new NamedNode(namedNode.name,existingSnap))),newChildren.insert(namedNode,namedNode.node)}});return new IndexMap(newIndexes,this.indexSet_)}removeFromIndexes(namedNode,existingChildren){const newIndexes=(0,dist_index_esm.kH)(this.indexes_,indexedChildren=>{if(indexedChildren===fallbackObject)return indexedChildren;{const existingSnap=existingChildren.get(namedNode.name);return existingSnap?indexedChildren.remove(new NamedNode(namedNode.name,existingSnap)):indexedChildren}});return new IndexMap(newIndexes,this.indexSet_)}}let EMPTY_NODE;class ChildrenNode{static get EMPTY_NODE(){return EMPTY_NODE||(EMPTY_NODE=new ChildrenNode(new SortedMap(NAME_COMPARATOR),null,IndexMap.Default))}constructor(children_,priorityNode_,indexMap_){this.children_=children_,this.priorityNode_=priorityNode_,this.indexMap_=indexMap_,this.lazyHash_=null,this.priorityNode_&&validatePriorityNode(this.priorityNode_),this.children_.isEmpty()&&(0,dist_index_esm.vA)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||EMPTY_NODE}updatePriority(newPriorityNode){return this.children_.isEmpty()?this:new ChildrenNode(this.children_,newPriorityNode,this.indexMap_)}getImmediateChild(childName){if(".priority"===childName)return this.getPriority();{const child=this.children_.get(childName);return null===child?EMPTY_NODE:child}}getChild(path){const front=pathGetFront(path);return null===front?this:this.getImmediateChild(front).getChild(pathPopFront(path))}hasChild(childName){return null!==this.children_.get(childName)}updateImmediateChild(childName,newChildNode){if((0,dist_index_esm.vA)(newChildNode,"We should always be passing snapshot nodes"),".priority"===childName)return this.updatePriority(newChildNode);{const namedNode=new NamedNode(childName,newChildNode);let newChildren,newIndexMap;newChildNode.isEmpty()?(newChildren=this.children_.remove(childName),newIndexMap=this.indexMap_.removeFromIndexes(namedNode,this.children_)):(newChildren=this.children_.insert(childName,newChildNode),newIndexMap=this.indexMap_.addToIndexes(namedNode,this.children_));const newPriority=newChildren.isEmpty()?EMPTY_NODE:this.priorityNode_;return new ChildrenNode(newChildren,newPriority,newIndexMap)}}updateChild(path,newChildNode){const front=pathGetFront(path);if(null===front)return newChildNode;{(0,dist_index_esm.vA)(".priority"!==pathGetFront(path)||1===pathGetLength(path),".priority must be the last token in a path");const newImmediateChild=this.getImmediateChild(front).updateChild(pathPopFront(path),newChildNode);return this.updateImmediateChild(front,newImmediateChild)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(exportFormat){if(this.isEmpty())return null;const obj={};let numKeys=0,maxKey=0,allIntegerKeys=!0;if(this.forEachChild(PRIORITY_INDEX,(key,childNode)=>{obj[key]=childNode.val(exportFormat),numKeys++,allIntegerKeys&&ChildrenNode.INTEGER_REGEXP_.test(key)?maxKey=Math.max(maxKey,Number(key)):allIntegerKeys=!1}),!exportFormat&&allIntegerKeys&&maxKey<2*numKeys){const array=[];for(const key in obj)array[key]=obj[key];return array}return exportFormat&&!this.getPriority().isEmpty()&&(obj[".priority"]=this.getPriority().val()),obj}hash(){if(null===this.lazyHash_){let toHash="";this.getPriority().isEmpty()||(toHash+="priority:"+priorityHashText(this.getPriority().val())+":"),this.forEachChild(PRIORITY_INDEX,(key,childNode)=>{const childHash=childNode.hash();""!==childHash&&(toHash+=":"+key+":"+childHash)}),this.lazyHash_=""===toHash?"":sha1(toHash)}return this.lazyHash_}getPredecessorChildName(childName,childNode,index){const idx=this.resolveIndex_(index);if(idx){const predecessor=idx.getPredecessorKey(new NamedNode(childName,childNode));return predecessor?predecessor.name:null}return this.children_.getPredecessorKey(childName)}getFirstChildName(indexDefinition){const idx=this.resolveIndex_(indexDefinition);if(idx){const minKey=idx.minKey();return minKey&&minKey.name}return this.children_.minKey()}getFirstChild(indexDefinition){const minKey=this.getFirstChildName(indexDefinition);return minKey?new NamedNode(minKey,this.children_.get(minKey)):null}getLastChildName(indexDefinition){const idx=this.resolveIndex_(indexDefinition);if(idx){const maxKey=idx.maxKey();return maxKey&&maxKey.name}return this.children_.maxKey()}getLastChild(indexDefinition){const maxKey=this.getLastChildName(indexDefinition);return maxKey?new NamedNode(maxKey,this.children_.get(maxKey)):null}forEachChild(index,action){const idx=this.resolveIndex_(index);return idx?idx.inorderTraversal(wrappedNode=>action(wrappedNode.name,wrappedNode.node)):this.children_.inorderTraversal(action)}getIterator(indexDefinition){return this.getIteratorFrom(indexDefinition.minPost(),indexDefinition)}getIteratorFrom(startPost,indexDefinition){const idx=this.resolveIndex_(indexDefinition);if(idx)return idx.getIteratorFrom(startPost,key=>key);{const iterator=this.children_.getIteratorFrom(startPost.name,NamedNode.Wrap);let next=iterator.peek();for(;null!=next&&indexDefinition.compare(next,startPost)<0;)iterator.getNext(),next=iterator.peek();return iterator}}getReverseIterator(indexDefinition){return this.getReverseIteratorFrom(indexDefinition.maxPost(),indexDefinition)}getReverseIteratorFrom(endPost,indexDefinition){const idx=this.resolveIndex_(indexDefinition);if(idx)return idx.getReverseIteratorFrom(endPost,key=>key);{const iterator=this.children_.getReverseIteratorFrom(endPost.name,NamedNode.Wrap);let next=iterator.peek();for(;null!=next&&indexDefinition.compare(next,endPost)>0;)iterator.getNext(),next=iterator.peek();return iterator}}compareTo(other){return this.isEmpty()?other.isEmpty()?0:-1:other.isLeafNode()||other.isEmpty()?1:other===MAX_NODE?-1:0}withIndex(indexDefinition){if(indexDefinition===KEY_INDEX||this.indexMap_.hasIndex(indexDefinition))return this;{const newIndexMap=this.indexMap_.addIndex(indexDefinition,this.children_);return new ChildrenNode(this.children_,this.priorityNode_,newIndexMap)}}isIndexed(index){return index===KEY_INDEX||this.indexMap_.hasIndex(index)}equals(other){if(other===this)return!0;if(other.isLeafNode())return!1;{const otherChildrenNode=other;if(this.getPriority().equals(otherChildrenNode.getPriority())){if(this.children_.count()===otherChildrenNode.children_.count()){const thisIter=this.getIterator(PRIORITY_INDEX),otherIter=otherChildrenNode.getIterator(PRIORITY_INDEX);let thisCurrent=thisIter.getNext(),otherCurrent=otherIter.getNext();for(;thisCurrent&&otherCurrent;){if(thisCurrent.name!==otherCurrent.name||!thisCurrent.node.equals(otherCurrent.node))return!1;thisCurrent=thisIter.getNext(),otherCurrent=otherIter.getNext()}return null===thisCurrent&&null===otherCurrent}return!1}return!1}}resolveIndex_(indexDefinition){return indexDefinition===KEY_INDEX?null:this.indexMap_.get(indexDefinition.toString())}}ChildrenNode.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const MAX_NODE=new class MaxNode extends ChildrenNode{constructor(){super(new SortedMap(NAME_COMPARATOR),ChildrenNode.EMPTY_NODE,IndexMap.Default)}compareTo(other){return other===this?0:1}equals(other){return other===this}getPriority(){return this}getImmediateChild(childName){return ChildrenNode.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(NamedNode,{MIN:{value:new NamedNode(MIN_NAME,ChildrenNode.EMPTY_NODE)},MAX:{value:new NamedNode(MAX_NAME,MAX_NODE)}}),KeyIndex.__EMPTY_NODE=ChildrenNode.EMPTY_NODE,LeafNode.__childrenNodeConstructor=ChildrenNode,function setMaxNode$1(val){MAX_NODE$2=val}(MAX_NODE),function setMaxNode(val){MAX_NODE$1=val}(MAX_NODE);function nodeFromJSON(json,priority=null){if(null===json)return ChildrenNode.EMPTY_NODE;if("object"==typeof json&&".priority"in json&&(priority=json[".priority"]),(0,dist_index_esm.vA)(null===priority||"string"==typeof priority||"number"==typeof priority||"object"==typeof priority&&".sv"in priority,"Invalid priority type found: "+typeof priority),"object"==typeof json&&".value"in json&&null!==json[".value"]&&(json=json[".value"]),"object"!=typeof json||".sv"in json){return new LeafNode(json,nodeFromJSON(priority))}if(json instanceof Array){let node=ChildrenNode.EMPTY_NODE;return each(json,(key,childData)=>{if((0,dist_index_esm.gR)(json,key)&&"."!==key.substring(0,1)){const childNode=nodeFromJSON(childData);!childNode.isLeafNode()&&childNode.isEmpty()||(node=node.updateImmediateChild(key,childNode))}}),node.updatePriority(nodeFromJSON(priority))}{const children=[];let childrenHavePriority=!1;if(each(json,(key,child)=>{if("."!==key.substring(0,1)){const childNode=nodeFromJSON(child);childNode.isEmpty()||(childrenHavePriority=childrenHavePriority||!childNode.getPriority().isEmpty(),children.push(new NamedNode(key,childNode)))}}),0===children.length)return ChildrenNode.EMPTY_NODE;const childSet=buildChildSet(children,NAME_ONLY_COMPARATOR,namedNode=>namedNode.name,NAME_COMPARATOR);if(childrenHavePriority){const sortedChildSet=buildChildSet(children,PRIORITY_INDEX.getCompare());return new ChildrenNode(childSet,nodeFromJSON(priority),new IndexMap({".priority":sortedChildSet},{".priority":PRIORITY_INDEX}))}return new ChildrenNode(childSet,nodeFromJSON(priority),IndexMap.Default)}}!function setNodeFromJSON(val){nodeFromJSON$1=val}(nodeFromJSON);class PathIndex extends Index{constructor(indexPath_){super(),this.indexPath_=indexPath_,(0,dist_index_esm.vA)(!pathIsEmpty(indexPath_)&&".priority"!==pathGetFront(indexPath_),"Can't create PathIndex with empty path or .priority key")}extractChild(snap){return snap.getChild(this.indexPath_)}isDefinedOn(node){return!node.getChild(this.indexPath_).isEmpty()}compare(a,b){const aChild=this.extractChild(a.node),bChild=this.extractChild(b.node),indexCmp=aChild.compareTo(bChild);return 0===indexCmp?nameCompare(a.name,b.name):indexCmp}makePost(indexValue,name){const valueNode=nodeFromJSON(indexValue),node=ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,valueNode);return new NamedNode(name,node)}maxPost(){const node=ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,MAX_NODE);return new NamedNode(MAX_NAME,node)}toString(){return pathSlice(this.indexPath_,0).join("/")}}const VALUE_INDEX=new class ValueIndex extends Index{compare(a,b){const indexCmp=a.node.compareTo(b.node);return 0===indexCmp?nameCompare(a.name,b.name):indexCmp}isDefinedOn(node){return!0}indexedValueChanged(oldNode,newNode){return!oldNode.equals(newNode)}minPost(){return NamedNode.MIN}maxPost(){return NamedNode.MAX}makePost(indexValue,name){const valueNode=nodeFromJSON(indexValue);return new NamedNode(name,valueNode)}toString(){return".value"}};function changeValue(snapshotNode){return{type:"value",snapshotNode}}function changeChildAdded(childName,snapshotNode){return{type:"child_added",snapshotNode,childName}}function changeChildRemoved(childName,snapshotNode){return{type:"child_removed",snapshotNode,childName}}function changeChildChanged(childName,snapshotNode,oldSnap){return{type:"child_changed",snapshotNode,childName,oldSnap}}class IndexedFilter{constructor(index_){this.index_=index_}updateChild(snap,key,newChild,affectedPath,source,optChangeAccumulator){(0,dist_index_esm.vA)(snap.isIndexed(this.index_),"A node must be indexed if only a child is updated");const oldChild=snap.getImmediateChild(key);return oldChild.getChild(affectedPath).equals(newChild.getChild(affectedPath))&&oldChild.isEmpty()===newChild.isEmpty()?snap:(null!=optChangeAccumulator&&(newChild.isEmpty()?snap.hasChild(key)?optChangeAccumulator.trackChildChange(changeChildRemoved(key,oldChild)):(0,dist_index_esm.vA)(snap.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):oldChild.isEmpty()?optChangeAccumulator.trackChildChange(changeChildAdded(key,newChild)):optChangeAccumulator.trackChildChange(changeChildChanged(key,newChild,oldChild))),snap.isLeafNode()&&newChild.isEmpty()?snap:snap.updateImmediateChild(key,newChild).withIndex(this.index_))}updateFullNode(oldSnap,newSnap,optChangeAccumulator){return null!=optChangeAccumulator&&(oldSnap.isLeafNode()||oldSnap.forEachChild(PRIORITY_INDEX,(key,childNode)=>{newSnap.hasChild(key)||optChangeAccumulator.trackChildChange(changeChildRemoved(key,childNode))}),newSnap.isLeafNode()||newSnap.forEachChild(PRIORITY_INDEX,(key,childNode)=>{if(oldSnap.hasChild(key)){const oldChild=oldSnap.getImmediateChild(key);oldChild.equals(childNode)||optChangeAccumulator.trackChildChange(changeChildChanged(key,childNode,oldChild))}else optChangeAccumulator.trackChildChange(changeChildAdded(key,childNode))})),newSnap.withIndex(this.index_)}updatePriority(oldSnap,newPriority){return oldSnap.isEmpty()?ChildrenNode.EMPTY_NODE:oldSnap.updatePriority(newPriority)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class RangedFilter{constructor(params){this.indexedFilter_=new IndexedFilter(params.getIndex()),this.index_=params.getIndex(),this.startPost_=RangedFilter.getStartPost_(params),this.endPost_=RangedFilter.getEndPost_(params),this.startIsInclusive_=!params.startAfterSet_,this.endIsInclusive_=!params.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(node){const isWithinStart=this.startIsInclusive_?this.index_.compare(this.getStartPost(),node)<=0:this.index_.compare(this.getStartPost(),node)<0,isWithinEnd=this.endIsInclusive_?this.index_.compare(node,this.getEndPost())<=0:this.index_.compare(node,this.getEndPost())<0;return isWithinStart&&isWithinEnd}updateChild(snap,key,newChild,affectedPath,source,optChangeAccumulator){return this.matches(new NamedNode(key,newChild))||(newChild=ChildrenNode.EMPTY_NODE),this.indexedFilter_.updateChild(snap,key,newChild,affectedPath,source,optChangeAccumulator)}updateFullNode(oldSnap,newSnap,optChangeAccumulator){newSnap.isLeafNode()&&(newSnap=ChildrenNode.EMPTY_NODE);let filtered=newSnap.withIndex(this.index_);filtered=filtered.updatePriority(ChildrenNode.EMPTY_NODE);const self=this;return newSnap.forEachChild(PRIORITY_INDEX,(key,childNode)=>{self.matches(new NamedNode(key,childNode))||(filtered=filtered.updateImmediateChild(key,ChildrenNode.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(oldSnap,filtered,optChangeAccumulator)}updatePriority(oldSnap,newPriority){return oldSnap}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(params){if(params.hasStart()){const startName=params.getIndexStartName();return params.getIndex().makePost(params.getIndexStartValue(),startName)}return params.getIndex().minPost()}static getEndPost_(params){if(params.hasEnd()){const endName=params.getIndexEndName();return params.getIndex().makePost(params.getIndexEndValue(),endName)}return params.getIndex().maxPost()}}class LimitedFilter{constructor(params){this.withinDirectionalStart=node=>this.reverse_?this.withinEndPost(node):this.withinStartPost(node),this.withinDirectionalEnd=node=>this.reverse_?this.withinStartPost(node):this.withinEndPost(node),this.withinStartPost=node=>{const compareRes=this.index_.compare(this.rangedFilter_.getStartPost(),node);return this.startIsInclusive_?compareRes<=0:compareRes<0},this.withinEndPost=node=>{const compareRes=this.index_.compare(node,this.rangedFilter_.getEndPost());return this.endIsInclusive_?compareRes<=0:compareRes<0},this.rangedFilter_=new RangedFilter(params),this.index_=params.getIndex(),this.limit_=params.getLimit(),this.reverse_=!params.isViewFromLeft(),this.startIsInclusive_=!params.startAfterSet_,this.endIsInclusive_=!params.endBeforeSet_}updateChild(snap,key,newChild,affectedPath,source,optChangeAccumulator){return this.rangedFilter_.matches(new NamedNode(key,newChild))||(newChild=ChildrenNode.EMPTY_NODE),snap.getImmediateChild(key).equals(newChild)?snap:snap.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(snap,key,newChild,affectedPath,source,optChangeAccumulator):this.fullLimitUpdateChild_(snap,key,newChild,source,optChangeAccumulator)}updateFullNode(oldSnap,newSnap,optChangeAccumulator){let filtered;if(newSnap.isLeafNode()||newSnap.isEmpty())filtered=ChildrenNode.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<newSnap.numChildren()&&newSnap.isIndexed(this.index_)){let iterator;filtered=ChildrenNode.EMPTY_NODE.withIndex(this.index_),iterator=this.reverse_?newSnap.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):newSnap.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let count=0;for(;iterator.hasNext()&&count<this.limit_;){const next=iterator.getNext();if(this.withinDirectionalStart(next)){if(!this.withinDirectionalEnd(next))break;filtered=filtered.updateImmediateChild(next.name,next.node),count++}}}else{let iterator;filtered=newSnap.withIndex(this.index_),filtered=filtered.updatePriority(ChildrenNode.EMPTY_NODE),iterator=this.reverse_?filtered.getReverseIterator(this.index_):filtered.getIterator(this.index_);let count=0;for(;iterator.hasNext();){const next=iterator.getNext();count<this.limit_&&this.withinDirectionalStart(next)&&this.withinDirectionalEnd(next)?count++:filtered=filtered.updateImmediateChild(next.name,ChildrenNode.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(oldSnap,filtered,optChangeAccumulator)}updatePriority(oldSnap,newPriority){return oldSnap}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(snap,childKey,childSnap,source,changeAccumulator){let cmp;if(this.reverse_){const indexCmp=this.index_.getCompare();cmp=(a,b)=>indexCmp(b,a)}else cmp=this.index_.getCompare();const oldEventCache=snap;(0,dist_index_esm.vA)(oldEventCache.numChildren()===this.limit_,"");const newChildNamedNode=new NamedNode(childKey,childSnap),windowBoundary=this.reverse_?oldEventCache.getFirstChild(this.index_):oldEventCache.getLastChild(this.index_),inRange=this.rangedFilter_.matches(newChildNamedNode);if(oldEventCache.hasChild(childKey)){const oldChildSnap=oldEventCache.getImmediateChild(childKey);let nextChild=source.getChildAfterChild(this.index_,windowBoundary,this.reverse_);for(;null!=nextChild&&(nextChild.name===childKey||oldEventCache.hasChild(nextChild.name));)nextChild=source.getChildAfterChild(this.index_,nextChild,this.reverse_);const compareNext=null==nextChild?1:cmp(nextChild,newChildNamedNode);if(inRange&&!childSnap.isEmpty()&&compareNext>=0)return null!=changeAccumulator&&changeAccumulator.trackChildChange(changeChildChanged(childKey,childSnap,oldChildSnap)),oldEventCache.updateImmediateChild(childKey,childSnap);{null!=changeAccumulator&&changeAccumulator.trackChildChange(changeChildRemoved(childKey,oldChildSnap));const newEventCache=oldEventCache.updateImmediateChild(childKey,ChildrenNode.EMPTY_NODE);return null!=nextChild&&this.rangedFilter_.matches(nextChild)?(null!=changeAccumulator&&changeAccumulator.trackChildChange(changeChildAdded(nextChild.name,nextChild.node)),newEventCache.updateImmediateChild(nextChild.name,nextChild.node)):newEventCache}}return childSnap.isEmpty()?snap:inRange&&cmp(windowBoundary,newChildNamedNode)>=0?(null!=changeAccumulator&&(changeAccumulator.trackChildChange(changeChildRemoved(windowBoundary.name,windowBoundary.node)),changeAccumulator.trackChildChange(changeChildAdded(childKey,childSnap))),oldEventCache.updateImmediateChild(childKey,childSnap).updateImmediateChild(windowBoundary.name,ChildrenNode.EMPTY_NODE)):snap}}class QueryParams{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=PRIORITY_INDEX}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,dist_index_esm.vA)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,dist_index_esm.vA)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:MIN_NAME}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,dist_index_esm.vA)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,dist_index_esm.vA)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:MAX_NAME}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,dist_index_esm.vA)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===PRIORITY_INDEX}copy(){const copy=new QueryParams;return copy.limitSet_=this.limitSet_,copy.limit_=this.limit_,copy.startSet_=this.startSet_,copy.startAfterSet_=this.startAfterSet_,copy.indexStartValue_=this.indexStartValue_,copy.startNameSet_=this.startNameSet_,copy.indexStartName_=this.indexStartName_,copy.endSet_=this.endSet_,copy.endBeforeSet_=this.endBeforeSet_,copy.indexEndValue_=this.indexEndValue_,copy.endNameSet_=this.endNameSet_,copy.indexEndName_=this.indexEndName_,copy.index_=this.index_,copy.viewFrom_=this.viewFrom_,copy}}function queryParamsToRestQueryStringParameters(queryParams){const qs={};if(queryParams.isDefault())return qs;let orderBy;if(queryParams.index_===PRIORITY_INDEX?orderBy="$priority":queryParams.index_===VALUE_INDEX?orderBy="$value":queryParams.index_===KEY_INDEX?orderBy="$key":((0,dist_index_esm.vA)(queryParams.index_ instanceof PathIndex,"Unrecognized index type!"),orderBy=queryParams.index_.toString()),qs.orderBy=(0,dist_index_esm.As)(orderBy),queryParams.startSet_){const startParam=queryParams.startAfterSet_?"startAfter":"startAt";qs[startParam]=(0,dist_index_esm.As)(queryParams.indexStartValue_),queryParams.startNameSet_&&(qs[startParam]+=","+(0,dist_index_esm.As)(queryParams.indexStartName_))}if(queryParams.endSet_){const endParam=queryParams.endBeforeSet_?"endBefore":"endAt";qs[endParam]=(0,dist_index_esm.As)(queryParams.indexEndValue_),queryParams.endNameSet_&&(qs[endParam]+=","+(0,dist_index_esm.As)(queryParams.indexEndName_))}return queryParams.limitSet_&&(queryParams.isViewFromLeft()?qs.limitToFirst=queryParams.limit_:qs.limitToLast=queryParams.limit_),qs}function queryParamsGetQueryObject(queryParams){const obj={};if(queryParams.startSet_&&(obj.sp=queryParams.indexStartValue_,queryParams.startNameSet_&&(obj.sn=queryParams.indexStartName_),obj.sin=!queryParams.startAfterSet_),queryParams.endSet_&&(obj.ep=queryParams.indexEndValue_,queryParams.endNameSet_&&(obj.en=queryParams.indexEndName_),obj.ein=!queryParams.endBeforeSet_),queryParams.limitSet_){obj.l=queryParams.limit_;let viewFrom=queryParams.viewFrom_;""===viewFrom&&(viewFrom=queryParams.isViewFromLeft()?"l":"r"),obj.vf=viewFrom}return queryParams.index_!==PRIORITY_INDEX&&(obj.i=queryParams.index_.toString()),obj}class ReadonlyRestClient extends ServerActions{reportStats(stats){throw new Error("Method not implemented.")}static getListenId_(query,tag){return void 0!==tag?"tag$"+tag:((0,dist_index_esm.vA)(query._queryParams.isDefault(),"should have a tag if it's not a default query."),query._path.toString())}constructor(repoInfo_,onDataUpdate_,authTokenProvider_,appCheckTokenProvider_){super(),this.repoInfo_=repoInfo_,this.onDataUpdate_=onDataUpdate_,this.authTokenProvider_=authTokenProvider_,this.appCheckTokenProvider_=appCheckTokenProvider_,this.log_=logWrapper("p:rest:"),this.listens_={}}listen(query,currentHashFn,tag,onComplete){const pathString=query._path.toString();this.log_("Listen called for "+pathString+" "+query._queryIdentifier);const listenId=ReadonlyRestClient.getListenId_(query,tag),thisListen={};this.listens_[listenId]=thisListen;const queryStringParameters=queryParamsToRestQueryStringParameters(query._queryParams);this.restRequest_(pathString+".json",queryStringParameters,(error,result)=>{let data=result;if(404===error&&(data=null,error=null),null===error&&this.onDataUpdate_(pathString,data,!1,tag),(0,dist_index_esm.yw)(this.listens_,listenId)===thisListen){let status;status=error?401===error?"permission_denied":"rest_error:"+error:"ok",onComplete(status,null)}})}unlisten(query,tag){const listenId=ReadonlyRestClient.getListenId_(query,tag);delete this.listens_[listenId]}get(query){const queryStringParameters=queryParamsToRestQueryStringParameters(query._queryParams),pathString=query._path.toString(),deferred=new dist_index_esm.cY;return this.restRequest_(pathString+".json",queryStringParameters,(error,result)=>{let data=result;404===error&&(data=null,error=null),null===error?(this.onDataUpdate_(pathString,data,!1,null),deferred.resolve(data)):deferred.reject(new Error(data))}),deferred.promise}refreshAuthToken(token){}restRequest_(pathString,queryStringParameters={},callback){return queryStringParameters.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([authToken,appCheckToken])=>{authToken&&authToken.accessToken&&(queryStringParameters.auth=authToken.accessToken),appCheckToken&&appCheckToken.token&&(queryStringParameters.ac=appCheckToken.token);const url=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+pathString+"?ns="+this.repoInfo_.namespace+(0,dist_index_esm.Am)(queryStringParameters);this.log_("Sending REST request for "+url);const xhr=new XMLHttpRequest;xhr.onreadystatechange=()=>{if(callback&&4===xhr.readyState){this.log_("REST Response for "+url+" received. status:",xhr.status,"response:",xhr.responseText);let res=null;if(xhr.status>=200&&xhr.status<300){try{res=(0,dist_index_esm.$L)(xhr.responseText)}catch(e){warn("Failed to parse JSON response for "+url+": "+xhr.responseText)}callback(null,res)}else 401!==xhr.status&&404!==xhr.status&&warn("Got unsuccessful REST response for "+url+" Status: "+xhr.status),callback(xhr.status);callback=null}},xhr.open("GET",url,!0),xhr.send()})}}class SnapshotHolder{constructor(){this.rootNode_=ChildrenNode.EMPTY_NODE}getNode(path){return this.rootNode_.getChild(path)}updateSnapshot(path,newSnapshotNode){this.rootNode_=this.rootNode_.updateChild(path,newSnapshotNode)}}function newSparseSnapshotTree(){return{value:null,children:new Map}}function sparseSnapshotTreeRemember(sparseSnapshotTree,path,data){if(pathIsEmpty(path))sparseSnapshotTree.value=data,sparseSnapshotTree.children.clear();else if(null!==sparseSnapshotTree.value)sparseSnapshotTree.value=sparseSnapshotTree.value.updateChild(path,data);else{const childKey=pathGetFront(path);sparseSnapshotTree.children.has(childKey)||sparseSnapshotTree.children.set(childKey,newSparseSnapshotTree());sparseSnapshotTreeRemember(sparseSnapshotTree.children.get(childKey),path=pathPopFront(path),data)}}function sparseSnapshotTreeForEachTree(sparseSnapshotTree,prefixPath,func){null!==sparseSnapshotTree.value?func(prefixPath,sparseSnapshotTree.value):function sparseSnapshotTreeForEachChild(sparseSnapshotTree,func){sparseSnapshotTree.children.forEach((tree,key)=>{func(key,tree)})}(sparseSnapshotTree,(key,tree)=>{sparseSnapshotTreeForEachTree(tree,new Path(prefixPath.toString()+"/"+key),func)})}class StatsListener{constructor(collection_){this.collection_=collection_,this.last_=null}get(){const newStats=this.collection_.get(),delta={...newStats};return this.last_&&each(this.last_,(stat,value)=>{delta[stat]=delta[stat]-value}),this.last_=newStats,delta}}class StatsReporter{constructor(collection,server_){this.server_=server_,this.statsToReport_={},this.statsListener_=new StatsListener(collection);const timeout=1e4+2e4*Math.random();setTimeoutNonBlocking(this.reportStats_.bind(this),Math.floor(timeout))}reportStats_(){const stats=this.statsListener_.get(),reportedStats={};let haveStatsToReport=!1;each(stats,(stat,value)=>{value>0&&(0,dist_index_esm.gR)(this.statsToReport_,stat)&&(reportedStats[stat]=value,haveStatsToReport=!0)}),haveStatsToReport&&this.server_.reportStats(reportedStats),setTimeoutNonBlocking(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var OperationType;function newOperationSourceServerTaggedQuery(queryId){return{fromUser:!1,fromServer:!0,queryId,tagged:!0}}!function(OperationType){OperationType[OperationType.OVERWRITE=0]="OVERWRITE",OperationType[OperationType.MERGE=1]="MERGE",OperationType[OperationType.ACK_USER_WRITE=2]="ACK_USER_WRITE",OperationType[OperationType.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(OperationType||(OperationType={}));class AckUserWrite{constructor(path,affectedTree,revert){this.path=path,this.affectedTree=affectedTree,this.revert=revert,this.type=OperationType.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(childName){if(pathIsEmpty(this.path)){if(null!=this.affectedTree.value)return(0,dist_index_esm.vA)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const childTree=this.affectedTree.subtree(new Path(childName));return new AckUserWrite(newEmptyPath(),childTree,this.revert)}}return(0,dist_index_esm.vA)(pathGetFront(this.path)===childName,"operationForChild called for unrelated child."),new AckUserWrite(pathPopFront(this.path),this.affectedTree,this.revert)}}class ListenComplete{constructor(source,path){this.source=source,this.path=path,this.type=OperationType.LISTEN_COMPLETE}operationForChild(childName){return pathIsEmpty(this.path)?new ListenComplete(this.source,newEmptyPath()):new ListenComplete(this.source,pathPopFront(this.path))}}class Overwrite{constructor(source,path,snap){this.source=source,this.path=path,this.snap=snap,this.type=OperationType.OVERWRITE}operationForChild(childName){return pathIsEmpty(this.path)?new Overwrite(this.source,newEmptyPath(),this.snap.getImmediateChild(childName)):new Overwrite(this.source,pathPopFront(this.path),this.snap)}}class Merge{constructor(source,path,children){this.source=source,this.path=path,this.children=children,this.type=OperationType.MERGE}operationForChild(childName){if(pathIsEmpty(this.path)){const childTree=this.children.subtree(new Path(childName));return childTree.isEmpty()?null:childTree.value?new Overwrite(this.source,newEmptyPath(),childTree.value):new Merge(this.source,newEmptyPath(),childTree)}return(0,dist_index_esm.vA)(pathGetFront(this.path)===childName,"Can't get a merge for a child not on the path of the operation"),new Merge(this.source,pathPopFront(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class CacheNode{constructor(node_,fullyInitialized_,filtered_){this.node_=node_,this.fullyInitialized_=fullyInitialized_,this.filtered_=filtered_}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(path){if(pathIsEmpty(path))return this.isFullyInitialized()&&!this.filtered_;const childKey=pathGetFront(path);return this.isCompleteForChild(childKey)}isCompleteForChild(key){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(key)}getNode(){return this.node_}}class EventGenerator{constructor(query_){this.query_=query_,this.index_=this.query_._queryParams.getIndex()}}function eventGeneratorGenerateEventsForType(eventGenerator,events,eventType,changes,registrations,eventCache){const filteredChanges=changes.filter(change=>change.type===eventType);filteredChanges.sort((a,b)=>function eventGeneratorCompareChanges(eventGenerator,a,b){if(null==a.childName||null==b.childName)throw(0,dist_index_esm.Hk)("Should only compare child_ events.");const aWrapped=new NamedNode(a.childName,a.snapshotNode),bWrapped=new NamedNode(b.childName,b.snapshotNode);return eventGenerator.index_.compare(aWrapped,bWrapped)}(eventGenerator,a,b)),filteredChanges.forEach(change=>{const materializedChange=function eventGeneratorMaterializeSingleChange(eventGenerator,change,eventCache){return"value"===change.type||"child_removed"===change.type||(change.prevName=eventCache.getPredecessorChildName(change.childName,change.snapshotNode,eventGenerator.index_)),change}(eventGenerator,change,eventCache);registrations.forEach(registration=>{registration.respondsTo(change.type)&&events.push(registration.createEvent(materializedChange,eventGenerator.query_))})})}function newViewCache(eventCache,serverCache){return{eventCache,serverCache}}function viewCacheUpdateEventSnap(viewCache,eventSnap,complete,filtered){return newViewCache(new CacheNode(eventSnap,complete,filtered),viewCache.serverCache)}function viewCacheUpdateServerSnap(viewCache,serverSnap,complete,filtered){return newViewCache(viewCache.eventCache,new CacheNode(serverSnap,complete,filtered))}function viewCacheGetCompleteEventSnap(viewCache){return viewCache.eventCache.isFullyInitialized()?viewCache.eventCache.getNode():null}function viewCacheGetCompleteServerSnap(viewCache){return viewCache.serverCache.isFullyInitialized()?viewCache.serverCache.getNode():null}let emptyChildrenSingleton;class ImmutableTree{static fromObject(obj){let tree=new ImmutableTree(null);return each(obj,(childPath,childSnap)=>{tree=tree.set(new Path(childPath),childSnap)}),tree}constructor(value,children=(()=>(emptyChildrenSingleton||(emptyChildrenSingleton=new SortedMap(stringCompare)),emptyChildrenSingleton))()){this.value=value,this.children=children}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(relativePath,predicate){if(null!=this.value&&predicate(this.value))return{path:newEmptyPath(),value:this.value};if(pathIsEmpty(relativePath))return null;{const front=pathGetFront(relativePath),child=this.children.get(front);if(null!==child){const childExistingPathAndValue=child.findRootMostMatchingPathAndValue(pathPopFront(relativePath),predicate);if(null!=childExistingPathAndValue){return{path:pathChild(new Path(front),childExistingPathAndValue.path),value:childExistingPathAndValue.value}}return null}return null}}findRootMostValueAndPath(relativePath){return this.findRootMostMatchingPathAndValue(relativePath,()=>!0)}subtree(relativePath){if(pathIsEmpty(relativePath))return this;{const front=pathGetFront(relativePath),childTree=this.children.get(front);return null!==childTree?childTree.subtree(pathPopFront(relativePath)):new ImmutableTree(null)}}set(relativePath,toSet){if(pathIsEmpty(relativePath))return new ImmutableTree(toSet,this.children);{const front=pathGetFront(relativePath),newChild=(this.children.get(front)||new ImmutableTree(null)).set(pathPopFront(relativePath),toSet),newChildren=this.children.insert(front,newChild);return new ImmutableTree(this.value,newChildren)}}remove(relativePath){if(pathIsEmpty(relativePath))return this.children.isEmpty()?new ImmutableTree(null):new ImmutableTree(null,this.children);{const front=pathGetFront(relativePath),child=this.children.get(front);if(child){const newChild=child.remove(pathPopFront(relativePath));let newChildren;return newChildren=newChild.isEmpty()?this.children.remove(front):this.children.insert(front,newChild),null===this.value&&newChildren.isEmpty()?new ImmutableTree(null):new ImmutableTree(this.value,newChildren)}return this}}get(relativePath){if(pathIsEmpty(relativePath))return this.value;{const front=pathGetFront(relativePath),child=this.children.get(front);return child?child.get(pathPopFront(relativePath)):null}}setTree(relativePath,newTree){if(pathIsEmpty(relativePath))return newTree;{const front=pathGetFront(relativePath),newChild=(this.children.get(front)||new ImmutableTree(null)).setTree(pathPopFront(relativePath),newTree);let newChildren;return newChildren=newChild.isEmpty()?this.children.remove(front):this.children.insert(front,newChild),new ImmutableTree(this.value,newChildren)}}fold(fn){return this.fold_(newEmptyPath(),fn)}fold_(pathSoFar,fn){const accum={};return this.children.inorderTraversal((childKey,childTree)=>{accum[childKey]=childTree.fold_(pathChild(pathSoFar,childKey),fn)}),fn(pathSoFar,this.value,accum)}findOnPath(path,f){return this.findOnPath_(path,newEmptyPath(),f)}findOnPath_(pathToFollow,pathSoFar,f){const result=!!this.value&&f(pathSoFar,this.value);if(result)return result;if(pathIsEmpty(pathToFollow))return null;{const front=pathGetFront(pathToFollow),nextChild=this.children.get(front);return nextChild?nextChild.findOnPath_(pathPopFront(pathToFollow),pathChild(pathSoFar,front),f):null}}foreachOnPath(path,f){return this.foreachOnPath_(path,newEmptyPath(),f)}foreachOnPath_(pathToFollow,currentRelativePath,f){if(pathIsEmpty(pathToFollow))return this;{this.value&&f(currentRelativePath,this.value);const front=pathGetFront(pathToFollow),nextChild=this.children.get(front);return nextChild?nextChild.foreachOnPath_(pathPopFront(pathToFollow),pathChild(currentRelativePath,front),f):new ImmutableTree(null)}}foreach(f){this.foreach_(newEmptyPath(),f)}foreach_(currentRelativePath,f){this.children.inorderTraversal((childName,childTree)=>{childTree.foreach_(pathChild(currentRelativePath,childName),f)}),this.value&&f(currentRelativePath,this.value)}foreachChild(f){this.children.inorderTraversal((childName,childTree)=>{childTree.value&&f(childName,childTree.value)})}}class CompoundWrite{constructor(writeTree_){this.writeTree_=writeTree_}static empty(){return new CompoundWrite(new ImmutableTree(null))}}function compoundWriteAddWrite(compoundWrite,path,node){if(pathIsEmpty(path))return new CompoundWrite(new ImmutableTree(node));{const rootmost=compoundWrite.writeTree_.findRootMostValueAndPath(path);if(null!=rootmost){const rootMostPath=rootmost.path;let value=rootmost.value;const relativePath=newRelativePath(rootMostPath,path);return value=value.updateChild(relativePath,node),new CompoundWrite(compoundWrite.writeTree_.set(rootMostPath,value))}{const subtree=new ImmutableTree(node),newWriteTree=compoundWrite.writeTree_.setTree(path,subtree);return new CompoundWrite(newWriteTree)}}}function compoundWriteAddWrites(compoundWrite,path,updates){let newWrite=compoundWrite;return each(updates,(childKey,node)=>{newWrite=compoundWriteAddWrite(newWrite,pathChild(path,childKey),node)}),newWrite}function compoundWriteRemoveWrite(compoundWrite,path){if(pathIsEmpty(path))return CompoundWrite.empty();{const newWriteTree=compoundWrite.writeTree_.setTree(path,new ImmutableTree(null));return new CompoundWrite(newWriteTree)}}function compoundWriteHasCompleteWrite(compoundWrite,path){return null!=compoundWriteGetCompleteNode(compoundWrite,path)}function compoundWriteGetCompleteNode(compoundWrite,path){const rootmost=compoundWrite.writeTree_.findRootMostValueAndPath(path);return null!=rootmost?compoundWrite.writeTree_.get(rootmost.path).getChild(newRelativePath(rootmost.path,path)):null}function compoundWriteGetCompleteChildren(compoundWrite){const children=[],node=compoundWrite.writeTree_.value;return null!=node?node.isLeafNode()||node.forEachChild(PRIORITY_INDEX,(childName,childNode)=>{children.push(new NamedNode(childName,childNode))}):compoundWrite.writeTree_.children.inorderTraversal((childName,childTree)=>{null!=childTree.value&&children.push(new NamedNode(childName,childTree.value))}),children}function compoundWriteChildCompoundWrite(compoundWrite,path){if(pathIsEmpty(path))return compoundWrite;{const shadowingNode=compoundWriteGetCompleteNode(compoundWrite,path);return new CompoundWrite(null!=shadowingNode?new ImmutableTree(shadowingNode):compoundWrite.writeTree_.subtree(path))}}function compoundWriteIsEmpty(compoundWrite){return compoundWrite.writeTree_.isEmpty()}function compoundWriteApply(compoundWrite,node){return applySubtreeWrite(newEmptyPath(),compoundWrite.writeTree_,node)}function applySubtreeWrite(relativePath,writeTree,node){if(null!=writeTree.value)return node.updateChild(relativePath,writeTree.value);{let priorityWrite=null;return writeTree.children.inorderTraversal((childKey,childTree)=>{".priority"===childKey?((0,dist_index_esm.vA)(null!==childTree.value,"Priority writes must always be leaf nodes"),priorityWrite=childTree.value):node=applySubtreeWrite(pathChild(relativePath,childKey),childTree,node)}),node.getChild(relativePath).isEmpty()||null===priorityWrite||(node=node.updateChild(pathChild(relativePath,".priority"),priorityWrite)),node}}function writeTreeChildWrites(writeTree,path){return newWriteTreeRef(path,writeTree)}function writeTreeRemoveWrite(writeTree,writeId){const idx=writeTree.allWrites.findIndex(s=>s.writeId===writeId);(0,dist_index_esm.vA)(idx>=0,"removeWrite called with nonexistent writeId.");const writeToRemove=writeTree.allWrites[idx];writeTree.allWrites.splice(idx,1);let removedWriteWasVisible=writeToRemove.visible,removedWriteOverlapsWithOtherWrites=!1,i=writeTree.allWrites.length-1;for(;removedWriteWasVisible&&i>=0;){const currentWrite=writeTree.allWrites[i];currentWrite.visible&&(i>=idx&&writeTreeRecordContainsPath_(currentWrite,writeToRemove.path)?removedWriteWasVisible=!1:pathContains(writeToRemove.path,currentWrite.path)&&(removedWriteOverlapsWithOtherWrites=!0)),i--}if(removedWriteWasVisible){if(removedWriteOverlapsWithOtherWrites)return function writeTreeResetTree_(writeTree){writeTree.visibleWrites=writeTreeLayerTree_(writeTree.allWrites,writeTreeDefaultFilter_,newEmptyPath()),writeTree.allWrites.length>0?writeTree.lastWriteId=writeTree.allWrites[writeTree.allWrites.length-1].writeId:writeTree.lastWriteId=-1}(writeTree),!0;if(writeToRemove.snap)writeTree.visibleWrites=compoundWriteRemoveWrite(writeTree.visibleWrites,writeToRemove.path);else{each(writeToRemove.children,childName=>{writeTree.visibleWrites=compoundWriteRemoveWrite(writeTree.visibleWrites,pathChild(writeToRemove.path,childName))})}return!0}return!1}function writeTreeRecordContainsPath_(writeRecord,path){if(writeRecord.snap)return pathContains(writeRecord.path,path);for(const childName in writeRecord.children)if(writeRecord.children.hasOwnProperty(childName)&&pathContains(pathChild(writeRecord.path,childName),path))return!0;return!1}function writeTreeDefaultFilter_(write){return write.visible}function writeTreeLayerTree_(writes,filter,treeRoot){let compoundWrite=CompoundWrite.empty();for(let i=0;i<writes.length;++i){const write=writes[i];if(filter(write)){const writePath=write.path;let relativePath;if(write.snap)pathContains(treeRoot,writePath)?(relativePath=newRelativePath(treeRoot,writePath),compoundWrite=compoundWriteAddWrite(compoundWrite,relativePath,write.snap)):pathContains(writePath,treeRoot)&&(relativePath=newRelativePath(writePath,treeRoot),compoundWrite=compoundWriteAddWrite(compoundWrite,newEmptyPath(),write.snap.getChild(relativePath)));else{if(!write.children)throw(0,dist_index_esm.Hk)("WriteRecord should have .snap or .children");if(pathContains(treeRoot,writePath))relativePath=newRelativePath(treeRoot,writePath),compoundWrite=compoundWriteAddWrites(compoundWrite,relativePath,write.children);else if(pathContains(writePath,treeRoot))if(relativePath=newRelativePath(writePath,treeRoot),pathIsEmpty(relativePath))compoundWrite=compoundWriteAddWrites(compoundWrite,newEmptyPath(),write.children);else{const child=(0,dist_index_esm.yw)(write.children,pathGetFront(relativePath));if(child){const deepNode=child.getChild(pathPopFront(relativePath));compoundWrite=compoundWriteAddWrite(compoundWrite,newEmptyPath(),deepNode)}}}}}return compoundWrite}function writeTreeCalcCompleteEventCache(writeTree,treePath,completeServerCache,writeIdsToExclude,includeHiddenWrites){if(writeIdsToExclude||includeHiddenWrites){const merge=compoundWriteChildCompoundWrite(writeTree.visibleWrites,treePath);if(!includeHiddenWrites&&compoundWriteIsEmpty(merge))return completeServerCache;if(includeHiddenWrites||null!=completeServerCache||compoundWriteHasCompleteWrite(merge,newEmptyPath())){const filter=function(write){return(write.visible||includeHiddenWrites)&&(!writeIdsToExclude||!~writeIdsToExclude.indexOf(write.writeId))&&(pathContains(write.path,treePath)||pathContains(treePath,write.path))};return compoundWriteApply(writeTreeLayerTree_(writeTree.allWrites,filter,treePath),completeServerCache||ChildrenNode.EMPTY_NODE)}return null}{const shadowingNode=compoundWriteGetCompleteNode(writeTree.visibleWrites,treePath);if(null!=shadowingNode)return shadowingNode;{const subMerge=compoundWriteChildCompoundWrite(writeTree.visibleWrites,treePath);if(compoundWriteIsEmpty(subMerge))return completeServerCache;if(null!=completeServerCache||compoundWriteHasCompleteWrite(subMerge,newEmptyPath())){return compoundWriteApply(subMerge,completeServerCache||ChildrenNode.EMPTY_NODE)}return null}}}function writeTreeRefCalcCompleteEventCache(writeTreeRef,completeServerCache,writeIdsToExclude,includeHiddenWrites){return writeTreeCalcCompleteEventCache(writeTreeRef.writeTree,writeTreeRef.treePath,completeServerCache,writeIdsToExclude,includeHiddenWrites)}function writeTreeRefCalcCompleteEventChildren(writeTreeRef,completeServerChildren){return function writeTreeCalcCompleteEventChildren(writeTree,treePath,completeServerChildren){let completeChildren=ChildrenNode.EMPTY_NODE;const topLevelSet=compoundWriteGetCompleteNode(writeTree.visibleWrites,treePath);if(topLevelSet)return topLevelSet.isLeafNode()||topLevelSet.forEachChild(PRIORITY_INDEX,(childName,childSnap)=>{completeChildren=completeChildren.updateImmediateChild(childName,childSnap)}),completeChildren;if(completeServerChildren){const merge=compoundWriteChildCompoundWrite(writeTree.visibleWrites,treePath);return completeServerChildren.forEachChild(PRIORITY_INDEX,(childName,childNode)=>{const node=compoundWriteApply(compoundWriteChildCompoundWrite(merge,new Path(childName)),childNode);completeChildren=completeChildren.updateImmediateChild(childName,node)}),compoundWriteGetCompleteChildren(merge).forEach(namedNode=>{completeChildren=completeChildren.updateImmediateChild(namedNode.name,namedNode.node)}),completeChildren}return compoundWriteGetCompleteChildren(compoundWriteChildCompoundWrite(writeTree.visibleWrites,treePath)).forEach(namedNode=>{completeChildren=completeChildren.updateImmediateChild(namedNode.name,namedNode.node)}),completeChildren}(writeTreeRef.writeTree,writeTreeRef.treePath,completeServerChildren)}function writeTreeRefCalcEventCacheAfterServerOverwrite(writeTreeRef,path,existingEventSnap,existingServerSnap){return function writeTreeCalcEventCacheAfterServerOverwrite(writeTree,treePath,childPath,existingEventSnap,existingServerSnap){(0,dist_index_esm.vA)(existingEventSnap||existingServerSnap,"Either existingEventSnap or existingServerSnap must exist");const path=pathChild(treePath,childPath);if(compoundWriteHasCompleteWrite(writeTree.visibleWrites,path))return null;{const childMerge=compoundWriteChildCompoundWrite(writeTree.visibleWrites,path);return compoundWriteIsEmpty(childMerge)?existingServerSnap.getChild(childPath):compoundWriteApply(childMerge,existingServerSnap.getChild(childPath))}}(writeTreeRef.writeTree,writeTreeRef.treePath,path,existingEventSnap,existingServerSnap)}function writeTreeRefShadowingWrite(writeTreeRef,path){return function writeTreeShadowingWrite(writeTree,path){return compoundWriteGetCompleteNode(writeTree.visibleWrites,path)}(writeTreeRef.writeTree,pathChild(writeTreeRef.treePath,path))}function writeTreeRefCalcIndexedSlice(writeTreeRef,completeServerData,startPost,count,reverse,index){return function writeTreeCalcIndexedSlice(writeTree,treePath,completeServerData,startPost,count,reverse,index){let toIterate;const merge=compoundWriteChildCompoundWrite(writeTree.visibleWrites,treePath),shadowingNode=compoundWriteGetCompleteNode(merge,newEmptyPath());if(null!=shadowingNode)toIterate=shadowingNode;else{if(null==completeServerData)return[];toIterate=compoundWriteApply(merge,completeServerData)}if(toIterate=toIterate.withIndex(index),toIterate.isEmpty()||toIterate.isLeafNode())return[];{const nodes=[],cmp=index.getCompare(),iter=reverse?toIterate.getReverseIteratorFrom(startPost,index):toIterate.getIteratorFrom(startPost,index);let next=iter.getNext();for(;next&&nodes.length<count;)0!==cmp(next,startPost)&&nodes.push(next),next=iter.getNext();return nodes}}(writeTreeRef.writeTree,writeTreeRef.treePath,completeServerData,startPost,count,reverse,index)}function writeTreeRefCalcCompleteChild(writeTreeRef,childKey,existingServerCache){return function writeTreeCalcCompleteChild(writeTree,treePath,childKey,existingServerSnap){const path=pathChild(treePath,childKey),shadowingNode=compoundWriteGetCompleteNode(writeTree.visibleWrites,path);if(null!=shadowingNode)return shadowingNode;if(existingServerSnap.isCompleteForChild(childKey))return compoundWriteApply(compoundWriteChildCompoundWrite(writeTree.visibleWrites,path),existingServerSnap.getNode().getImmediateChild(childKey));return null}(writeTreeRef.writeTree,writeTreeRef.treePath,childKey,existingServerCache)}function writeTreeRefChild(writeTreeRef,childName){return newWriteTreeRef(pathChild(writeTreeRef.treePath,childName),writeTreeRef.writeTree)}function newWriteTreeRef(path,writeTree){return{treePath:path,writeTree}}class ChildChangeAccumulator{constructor(){this.changeMap=new Map}trackChildChange(change){const type=change.type,childKey=change.childName;(0,dist_index_esm.vA)("child_added"===type||"child_changed"===type||"child_removed"===type,"Only child changes supported for tracking"),(0,dist_index_esm.vA)(".priority"!==childKey,"Only non-priority child changes can be tracked.");const oldChange=this.changeMap.get(childKey);if(oldChange){const oldType=oldChange.type;if("child_added"===type&&"child_removed"===oldType)this.changeMap.set(childKey,changeChildChanged(childKey,change.snapshotNode,oldChange.snapshotNode));else if("child_removed"===type&&"child_added"===oldType)this.changeMap.delete(childKey);else if("child_removed"===type&&"child_changed"===oldType)this.changeMap.set(childKey,changeChildRemoved(childKey,oldChange.oldSnap));else if("child_changed"===type&&"child_added"===oldType)this.changeMap.set(childKey,changeChildAdded(childKey,change.snapshotNode));else{if("child_changed"!==type||"child_changed"!==oldType)throw(0,dist_index_esm.Hk)("Illegal combination of changes: "+change+" occurred after "+oldChange);this.changeMap.set(childKey,changeChildChanged(childKey,change.snapshotNode,oldChange.oldSnap))}}else this.changeMap.set(childKey,change)}getChanges(){return Array.from(this.changeMap.values())}}const NO_COMPLETE_CHILD_SOURCE=new class NoCompleteChildSource_{getCompleteChild(childKey){return null}getChildAfterChild(index,child,reverse){return null}};class WriteTreeCompleteChildSource{constructor(writes_,viewCache_,optCompleteServerCache_=null){this.writes_=writes_,this.viewCache_=viewCache_,this.optCompleteServerCache_=optCompleteServerCache_}getCompleteChild(childKey){const node=this.viewCache_.eventCache;if(node.isCompleteForChild(childKey))return node.getNode().getImmediateChild(childKey);{const serverNode=null!=this.optCompleteServerCache_?new CacheNode(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return writeTreeRefCalcCompleteChild(this.writes_,childKey,serverNode)}}getChildAfterChild(index,child,reverse){const completeServerData=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:viewCacheGetCompleteServerSnap(this.viewCache_),nodes=writeTreeRefCalcIndexedSlice(this.writes_,completeServerData,child,1,reverse,index);return 0===nodes.length?null:nodes[0]}}function viewProcessorApplyOperation(viewProcessor,oldViewCache,operation,writesCache,completeCache){const accumulator=new ChildChangeAccumulator;let newViewCache,filterServerNode;if(operation.type===OperationType.OVERWRITE){const overwrite=operation;overwrite.source.fromUser?newViewCache=viewProcessorApplyUserOverwrite(viewProcessor,oldViewCache,overwrite.path,overwrite.snap,writesCache,completeCache,accumulator):((0,dist_index_esm.vA)(overwrite.source.fromServer,"Unknown source."),filterServerNode=overwrite.source.tagged||oldViewCache.serverCache.isFiltered()&&!pathIsEmpty(overwrite.path),newViewCache=viewProcessorApplyServerOverwrite(viewProcessor,oldViewCache,overwrite.path,overwrite.snap,writesCache,completeCache,filterServerNode,accumulator))}else if(operation.type===OperationType.MERGE){const merge=operation;merge.source.fromUser?newViewCache=function viewProcessorApplyUserMerge(viewProcessor,viewCache,path,changedChildren,writesCache,serverCache,accumulator){let curViewCache=viewCache;return changedChildren.foreach((relativePath,childNode)=>{const writePath=pathChild(path,relativePath);viewProcessorCacheHasChild(viewCache,pathGetFront(writePath))&&(curViewCache=viewProcessorApplyUserOverwrite(viewProcessor,curViewCache,writePath,childNode,writesCache,serverCache,accumulator))}),changedChildren.foreach((relativePath,childNode)=>{const writePath=pathChild(path,relativePath);viewProcessorCacheHasChild(viewCache,pathGetFront(writePath))||(curViewCache=viewProcessorApplyUserOverwrite(viewProcessor,curViewCache,writePath,childNode,writesCache,serverCache,accumulator))}),curViewCache}(viewProcessor,oldViewCache,merge.path,merge.children,writesCache,completeCache,accumulator):((0,dist_index_esm.vA)(merge.source.fromServer,"Unknown source."),filterServerNode=merge.source.tagged||oldViewCache.serverCache.isFiltered(),newViewCache=viewProcessorApplyServerMerge(viewProcessor,oldViewCache,merge.path,merge.children,writesCache,completeCache,filterServerNode,accumulator))}else if(operation.type===OperationType.ACK_USER_WRITE){const ackUserWrite=operation;newViewCache=ackUserWrite.revert?function viewProcessorRevertUserWrite(viewProcessor,viewCache,path,writesCache,completeServerCache,accumulator){let complete;if(null!=writeTreeRefShadowingWrite(writesCache,path))return viewCache;{const source=new WriteTreeCompleteChildSource(writesCache,viewCache,completeServerCache),oldEventCache=viewCache.eventCache.getNode();let newEventCache;if(pathIsEmpty(path)||".priority"===pathGetFront(path)){let newNode;if(viewCache.serverCache.isFullyInitialized())newNode=writeTreeRefCalcCompleteEventCache(writesCache,viewCacheGetCompleteServerSnap(viewCache));else{const serverChildren=viewCache.serverCache.getNode();(0,dist_index_esm.vA)(serverChildren instanceof ChildrenNode,"serverChildren would be complete if leaf node"),newNode=writeTreeRefCalcCompleteEventChildren(writesCache,serverChildren)}newEventCache=viewProcessor.filter.updateFullNode(oldEventCache,newNode,accumulator)}else{const childKey=pathGetFront(path);let newChild=writeTreeRefCalcCompleteChild(writesCache,childKey,viewCache.serverCache);null==newChild&&viewCache.serverCache.isCompleteForChild(childKey)&&(newChild=oldEventCache.getImmediateChild(childKey)),newEventCache=null!=newChild?viewProcessor.filter.updateChild(oldEventCache,childKey,newChild,pathPopFront(path),source,accumulator):viewCache.eventCache.getNode().hasChild(childKey)?viewProcessor.filter.updateChild(oldEventCache,childKey,ChildrenNode.EMPTY_NODE,pathPopFront(path),source,accumulator):oldEventCache,newEventCache.isEmpty()&&viewCache.serverCache.isFullyInitialized()&&(complete=writeTreeRefCalcCompleteEventCache(writesCache,viewCacheGetCompleteServerSnap(viewCache)),complete.isLeafNode()&&(newEventCache=viewProcessor.filter.updateFullNode(newEventCache,complete,accumulator)))}return complete=viewCache.serverCache.isFullyInitialized()||null!=writeTreeRefShadowingWrite(writesCache,newEmptyPath()),viewCacheUpdateEventSnap(viewCache,newEventCache,complete,viewProcessor.filter.filtersNodes())}}(viewProcessor,oldViewCache,ackUserWrite.path,writesCache,completeCache,accumulator):function viewProcessorAckUserWrite(viewProcessor,viewCache,ackPath,affectedTree,writesCache,completeCache,accumulator){if(null!=writeTreeRefShadowingWrite(writesCache,ackPath))return viewCache;const filterServerNode=viewCache.serverCache.isFiltered(),serverCache=viewCache.serverCache;if(null!=affectedTree.value){if(pathIsEmpty(ackPath)&&serverCache.isFullyInitialized()||serverCache.isCompleteForPath(ackPath))return viewProcessorApplyServerOverwrite(viewProcessor,viewCache,ackPath,serverCache.getNode().getChild(ackPath),writesCache,completeCache,filterServerNode,accumulator);if(pathIsEmpty(ackPath)){let changedChildren=new ImmutableTree(null);return serverCache.getNode().forEachChild(KEY_INDEX,(name,node)=>{changedChildren=changedChildren.set(new Path(name),node)}),viewProcessorApplyServerMerge(viewProcessor,viewCache,ackPath,changedChildren,writesCache,completeCache,filterServerNode,accumulator)}return viewCache}{let changedChildren=new ImmutableTree(null);return affectedTree.foreach((mergePath,value)=>{const serverCachePath=pathChild(ackPath,mergePath);serverCache.isCompleteForPath(serverCachePath)&&(changedChildren=changedChildren.set(mergePath,serverCache.getNode().getChild(serverCachePath)))}),viewProcessorApplyServerMerge(viewProcessor,viewCache,ackPath,changedChildren,writesCache,completeCache,filterServerNode,accumulator)}}(viewProcessor,oldViewCache,ackUserWrite.path,ackUserWrite.affectedTree,writesCache,completeCache,accumulator)}else{if(operation.type!==OperationType.LISTEN_COMPLETE)throw(0,dist_index_esm.Hk)("Unknown operation type: "+operation.type);newViewCache=function viewProcessorListenComplete(viewProcessor,viewCache,path,writesCache,accumulator){const oldServerNode=viewCache.serverCache,newViewCache=viewCacheUpdateServerSnap(viewCache,oldServerNode.getNode(),oldServerNode.isFullyInitialized()||pathIsEmpty(path),oldServerNode.isFiltered());return viewProcessorGenerateEventCacheAfterServerEvent(viewProcessor,newViewCache,path,writesCache,NO_COMPLETE_CHILD_SOURCE,accumulator)}(viewProcessor,oldViewCache,operation.path,writesCache,accumulator)}const changes=accumulator.getChanges();return function viewProcessorMaybeAddValueEvent(oldViewCache,newViewCache,accumulator){const eventSnap=newViewCache.eventCache;if(eventSnap.isFullyInitialized()){const isLeafOrEmpty=eventSnap.getNode().isLeafNode()||eventSnap.getNode().isEmpty(),oldCompleteSnap=viewCacheGetCompleteEventSnap(oldViewCache);(accumulator.length>0||!oldViewCache.eventCache.isFullyInitialized()||isLeafOrEmpty&&!eventSnap.getNode().equals(oldCompleteSnap)||!eventSnap.getNode().getPriority().equals(oldCompleteSnap.getPriority()))&&accumulator.push(changeValue(viewCacheGetCompleteEventSnap(newViewCache)))}}(oldViewCache,newViewCache,changes),{viewCache:newViewCache,changes}}function viewProcessorGenerateEventCacheAfterServerEvent(viewProcessor,viewCache,changePath,writesCache,source,accumulator){const oldEventSnap=viewCache.eventCache;if(null!=writeTreeRefShadowingWrite(writesCache,changePath))return viewCache;{let newEventCache,serverNode;if(pathIsEmpty(changePath))if((0,dist_index_esm.vA)(viewCache.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),viewCache.serverCache.isFiltered()){const serverCache=viewCacheGetCompleteServerSnap(viewCache),completeEventChildren=writeTreeRefCalcCompleteEventChildren(writesCache,serverCache instanceof ChildrenNode?serverCache:ChildrenNode.EMPTY_NODE);newEventCache=viewProcessor.filter.updateFullNode(viewCache.eventCache.getNode(),completeEventChildren,accumulator)}else{const completeNode=writeTreeRefCalcCompleteEventCache(writesCache,viewCacheGetCompleteServerSnap(viewCache));newEventCache=viewProcessor.filter.updateFullNode(viewCache.eventCache.getNode(),completeNode,accumulator)}else{const childKey=pathGetFront(changePath);if(".priority"===childKey){(0,dist_index_esm.vA)(1===pathGetLength(changePath),"Can't have a priority with additional path components");const oldEventNode=oldEventSnap.getNode();serverNode=viewCache.serverCache.getNode();const updatedPriority=writeTreeRefCalcEventCacheAfterServerOverwrite(writesCache,changePath,oldEventNode,serverNode);newEventCache=null!=updatedPriority?viewProcessor.filter.updatePriority(oldEventNode,updatedPriority):oldEventSnap.getNode()}else{const childChangePath=pathPopFront(changePath);let newEventChild;if(oldEventSnap.isCompleteForChild(childKey)){serverNode=viewCache.serverCache.getNode();const eventChildUpdate=writeTreeRefCalcEventCacheAfterServerOverwrite(writesCache,changePath,oldEventSnap.getNode(),serverNode);newEventChild=null!=eventChildUpdate?oldEventSnap.getNode().getImmediateChild(childKey).updateChild(childChangePath,eventChildUpdate):oldEventSnap.getNode().getImmediateChild(childKey)}else newEventChild=writeTreeRefCalcCompleteChild(writesCache,childKey,viewCache.serverCache);newEventCache=null!=newEventChild?viewProcessor.filter.updateChild(oldEventSnap.getNode(),childKey,newEventChild,childChangePath,source,accumulator):oldEventSnap.getNode()}}return viewCacheUpdateEventSnap(viewCache,newEventCache,oldEventSnap.isFullyInitialized()||pathIsEmpty(changePath),viewProcessor.filter.filtersNodes())}}function viewProcessorApplyServerOverwrite(viewProcessor,oldViewCache,changePath,changedSnap,writesCache,completeCache,filterServerNode,accumulator){const oldServerSnap=oldViewCache.serverCache;let newServerCache;const serverFilter=filterServerNode?viewProcessor.filter:viewProcessor.filter.getIndexedFilter();if(pathIsEmpty(changePath))newServerCache=serverFilter.updateFullNode(oldServerSnap.getNode(),changedSnap,null);else if(serverFilter.filtersNodes()&&!oldServerSnap.isFiltered()){const newServerNode=oldServerSnap.getNode().updateChild(changePath,changedSnap);newServerCache=serverFilter.updateFullNode(oldServerSnap.getNode(),newServerNode,null)}else{const childKey=pathGetFront(changePath);if(!oldServerSnap.isCompleteForPath(changePath)&&pathGetLength(changePath)>1)return oldViewCache;const childChangePath=pathPopFront(changePath),newChildNode=oldServerSnap.getNode().getImmediateChild(childKey).updateChild(childChangePath,changedSnap);newServerCache=".priority"===childKey?serverFilter.updatePriority(oldServerSnap.getNode(),newChildNode):serverFilter.updateChild(oldServerSnap.getNode(),childKey,newChildNode,childChangePath,NO_COMPLETE_CHILD_SOURCE,null)}const newViewCache=viewCacheUpdateServerSnap(oldViewCache,newServerCache,oldServerSnap.isFullyInitialized()||pathIsEmpty(changePath),serverFilter.filtersNodes());return viewProcessorGenerateEventCacheAfterServerEvent(viewProcessor,newViewCache,changePath,writesCache,new WriteTreeCompleteChildSource(writesCache,newViewCache,completeCache),accumulator)}function viewProcessorApplyUserOverwrite(viewProcessor,oldViewCache,changePath,changedSnap,writesCache,completeCache,accumulator){const oldEventSnap=oldViewCache.eventCache;let newViewCache,newEventCache;const source=new WriteTreeCompleteChildSource(writesCache,oldViewCache,completeCache);if(pathIsEmpty(changePath))newEventCache=viewProcessor.filter.updateFullNode(oldViewCache.eventCache.getNode(),changedSnap,accumulator),newViewCache=viewCacheUpdateEventSnap(oldViewCache,newEventCache,!0,viewProcessor.filter.filtersNodes());else{const childKey=pathGetFront(changePath);if(".priority"===childKey)newEventCache=viewProcessor.filter.updatePriority(oldViewCache.eventCache.getNode(),changedSnap),newViewCache=viewCacheUpdateEventSnap(oldViewCache,newEventCache,oldEventSnap.isFullyInitialized(),oldEventSnap.isFiltered());else{const childChangePath=pathPopFront(changePath),oldChild=oldEventSnap.getNode().getImmediateChild(childKey);let newChild;if(pathIsEmpty(childChangePath))newChild=changedSnap;else{const childNode=source.getCompleteChild(childKey);newChild=null!=childNode?".priority"===pathGetBack(childChangePath)&&childNode.getChild(pathParent(childChangePath)).isEmpty()?childNode:childNode.updateChild(childChangePath,changedSnap):ChildrenNode.EMPTY_NODE}if(oldChild.equals(newChild))newViewCache=oldViewCache;else{newViewCache=viewCacheUpdateEventSnap(oldViewCache,viewProcessor.filter.updateChild(oldEventSnap.getNode(),childKey,newChild,childChangePath,source,accumulator),oldEventSnap.isFullyInitialized(),viewProcessor.filter.filtersNodes())}}}return newViewCache}function viewProcessorCacheHasChild(viewCache,childKey){return viewCache.eventCache.isCompleteForChild(childKey)}function viewProcessorApplyMerge(viewProcessor,node,merge){return merge.foreach((relativePath,childNode)=>{node=node.updateChild(relativePath,childNode)}),node}function viewProcessorApplyServerMerge(viewProcessor,viewCache,path,changedChildren,writesCache,serverCache,filterServerNode,accumulator){if(viewCache.serverCache.getNode().isEmpty()&&!viewCache.serverCache.isFullyInitialized())return viewCache;let viewMergeTree,curViewCache=viewCache;viewMergeTree=pathIsEmpty(path)?changedChildren:new ImmutableTree(null).setTree(path,changedChildren);const serverNode=viewCache.serverCache.getNode();return viewMergeTree.children.inorderTraversal((childKey,childTree)=>{if(serverNode.hasChild(childKey)){const newChild=viewProcessorApplyMerge(0,viewCache.serverCache.getNode().getImmediateChild(childKey),childTree);curViewCache=viewProcessorApplyServerOverwrite(viewProcessor,curViewCache,new Path(childKey),newChild,writesCache,serverCache,filterServerNode,accumulator)}}),viewMergeTree.children.inorderTraversal((childKey,childMergeTree)=>{const isUnknownDeepMerge=!viewCache.serverCache.isCompleteForChild(childKey)&&null===childMergeTree.value;if(!serverNode.hasChild(childKey)&&!isUnknownDeepMerge){const newChild=viewProcessorApplyMerge(0,viewCache.serverCache.getNode().getImmediateChild(childKey),childMergeTree);curViewCache=viewProcessorApplyServerOverwrite(viewProcessor,curViewCache,new Path(childKey),newChild,writesCache,serverCache,filterServerNode,accumulator)}}),curViewCache}class View{constructor(query_,initialViewCache){this.query_=query_,this.eventRegistrations_=[];const params=this.query_._queryParams,indexFilter=new IndexedFilter(params.getIndex()),filter=function queryParamsGetNodeFilter(queryParams){return queryParams.loadsAllData()?new IndexedFilter(queryParams.getIndex()):queryParams.hasLimit()?new LimitedFilter(queryParams):new RangedFilter(queryParams)}(params);this.processor_=function newViewProcessor(filter){return{filter}}(filter);const initialServerCache=initialViewCache.serverCache,initialEventCache=initialViewCache.eventCache,serverSnap=indexFilter.updateFullNode(ChildrenNode.EMPTY_NODE,initialServerCache.getNode(),null),eventSnap=filter.updateFullNode(ChildrenNode.EMPTY_NODE,initialEventCache.getNode(),null),newServerCache=new CacheNode(serverSnap,initialServerCache.isFullyInitialized(),indexFilter.filtersNodes()),newEventCache=new CacheNode(eventSnap,initialEventCache.isFullyInitialized(),filter.filtersNodes());this.viewCache_=newViewCache(newEventCache,newServerCache),this.eventGenerator_=new EventGenerator(this.query_)}get query(){return this.query_}}function viewGetCompleteServerCache(view,path){const cache=viewCacheGetCompleteServerSnap(view.viewCache_);return cache&&(view.query._queryParams.loadsAllData()||!pathIsEmpty(path)&&!cache.getImmediateChild(pathGetFront(path)).isEmpty())?cache.getChild(path):null}function viewIsEmpty(view){return 0===view.eventRegistrations_.length}function viewRemoveEventRegistration(view,eventRegistration,cancelError){const cancelEvents=[];if(cancelError){(0,dist_index_esm.vA)(null==eventRegistration,"A cancel should cancel all event registrations.");const path=view.query._path;view.eventRegistrations_.forEach(registration=>{const maybeEvent=registration.createCancelEvent(cancelError,path);maybeEvent&&cancelEvents.push(maybeEvent)})}if(eventRegistration){let remaining=[];for(let i=0;i<view.eventRegistrations_.length;++i){const existing=view.eventRegistrations_[i];if(existing.matches(eventRegistration)){if(eventRegistration.hasAnyCallback()){remaining=remaining.concat(view.eventRegistrations_.slice(i+1));break}}else remaining.push(existing)}view.eventRegistrations_=remaining}else view.eventRegistrations_=[];return cancelEvents}function viewApplyOperation(view,operation,writesCache,completeServerCache){operation.type===OperationType.MERGE&&null!==operation.source.queryId&&((0,dist_index_esm.vA)(viewCacheGetCompleteServerSnap(view.viewCache_),"We should always have a full cache before handling merges"),(0,dist_index_esm.vA)(viewCacheGetCompleteEventSnap(view.viewCache_),"Missing event cache, even though we have a server cache"));const oldViewCache=view.viewCache_,result=viewProcessorApplyOperation(view.processor_,oldViewCache,operation,writesCache,completeServerCache);return function viewProcessorAssertIndexed(viewProcessor,viewCache){(0,dist_index_esm.vA)(viewCache.eventCache.getNode().isIndexed(viewProcessor.filter.getIndex()),"Event snap not indexed"),(0,dist_index_esm.vA)(viewCache.serverCache.getNode().isIndexed(viewProcessor.filter.getIndex()),"Server snap not indexed")}(view.processor_,result.viewCache),(0,dist_index_esm.vA)(result.viewCache.serverCache.isFullyInitialized()||!oldViewCache.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),view.viewCache_=result.viewCache,viewGenerateEventsForChanges_(view,result.changes,result.viewCache.eventCache.getNode(),null)}function viewGenerateEventsForChanges_(view,changes,eventCache,eventRegistration){const registrations=eventRegistration?[eventRegistration]:view.eventRegistrations_;return function eventGeneratorGenerateEventsForChanges(eventGenerator,changes,eventCache,eventRegistrations){const events=[],moves=[];return changes.forEach(change=>{"child_changed"===change.type&&eventGenerator.index_.indexedValueChanged(change.oldSnap,change.snapshotNode)&&moves.push(function changeChildMoved(childName,snapshotNode){return{type:"child_moved",snapshotNode,childName}}(change.childName,change.snapshotNode))}),eventGeneratorGenerateEventsForType(eventGenerator,events,"child_removed",changes,eventRegistrations,eventCache),eventGeneratorGenerateEventsForType(eventGenerator,events,"child_added",changes,eventRegistrations,eventCache),eventGeneratorGenerateEventsForType(eventGenerator,events,"child_moved",moves,eventRegistrations,eventCache),eventGeneratorGenerateEventsForType(eventGenerator,events,"child_changed",changes,eventRegistrations,eventCache),eventGeneratorGenerateEventsForType(eventGenerator,events,"value",changes,eventRegistrations,eventCache),events}(view.eventGenerator_,changes,eventCache,registrations)}let referenceConstructor$1,referenceConstructor;class SyncPoint{constructor(){this.views=new Map}}function syncPointApplyOperation(syncPoint,operation,writesCache,optCompleteServerCache){const queryId=operation.source.queryId;if(null!==queryId){const view=syncPoint.views.get(queryId);return(0,dist_index_esm.vA)(null!=view,"SyncTree gave us an op for an invalid query."),viewApplyOperation(view,operation,writesCache,optCompleteServerCache)}{let events=[];for(const view of syncPoint.views.values())events=events.concat(viewApplyOperation(view,operation,writesCache,optCompleteServerCache));return events}}function syncPointGetView(syncPoint,query,writesCache,serverCache,serverCacheComplete){const queryId=query._queryIdentifier,view=syncPoint.views.get(queryId);if(!view){let eventCache=writeTreeRefCalcCompleteEventCache(writesCache,serverCacheComplete?serverCache:null),eventCacheComplete=!1;eventCache?eventCacheComplete=!0:serverCache instanceof ChildrenNode?(eventCache=writeTreeRefCalcCompleteEventChildren(writesCache,serverCache),eventCacheComplete=!1):(eventCache=ChildrenNode.EMPTY_NODE,eventCacheComplete=!1);const viewCache=newViewCache(new CacheNode(eventCache,eventCacheComplete,!1),new CacheNode(serverCache,serverCacheComplete,!1));return new View(query,viewCache)}return view}function syncPointAddEventRegistration(syncPoint,query,eventRegistration,writesCache,serverCache,serverCacheComplete){const view=syncPointGetView(syncPoint,query,writesCache,serverCache,serverCacheComplete);return syncPoint.views.has(query._queryIdentifier)||syncPoint.views.set(query._queryIdentifier,view),function viewAddEventRegistration(view,eventRegistration){view.eventRegistrations_.push(eventRegistration)}(view,eventRegistration),function viewGetInitialEvents(view,registration){const eventSnap=view.viewCache_.eventCache,initialChanges=[];eventSnap.getNode().isLeafNode()||eventSnap.getNode().forEachChild(PRIORITY_INDEX,(key,childNode)=>{initialChanges.push(changeChildAdded(key,childNode))});return eventSnap.isFullyInitialized()&&initialChanges.push(changeValue(eventSnap.getNode())),viewGenerateEventsForChanges_(view,initialChanges,eventSnap.getNode(),registration)}(view,eventRegistration)}function syncPointRemoveEventRegistration(syncPoint,query,eventRegistration,cancelError){const queryId=query._queryIdentifier,removed=[];let cancelEvents=[];const hadCompleteView=syncPointHasCompleteView(syncPoint);if("default"===queryId)for(const[viewQueryId,view]of syncPoint.views.entries())cancelEvents=cancelEvents.concat(viewRemoveEventRegistration(view,eventRegistration,cancelError)),viewIsEmpty(view)&&(syncPoint.views.delete(viewQueryId),view.query._queryParams.loadsAllData()||removed.push(view.query));else{const view=syncPoint.views.get(queryId);view&&(cancelEvents=cancelEvents.concat(viewRemoveEventRegistration(view,eventRegistration,cancelError)),viewIsEmpty(view)&&(syncPoint.views.delete(queryId),view.query._queryParams.loadsAllData()||removed.push(view.query)))}return hadCompleteView&&!syncPointHasCompleteView(syncPoint)&&removed.push(new(function syncPointGetReferenceConstructor(){return(0,dist_index_esm.vA)(referenceConstructor$1,"Reference.ts has not been loaded"),referenceConstructor$1}())(query._repo,query._path)),{removed,events:cancelEvents}}function syncPointGetQueryViews(syncPoint){const result=[];for(const view of syncPoint.views.values())view.query._queryParams.loadsAllData()||result.push(view);return result}function syncPointGetCompleteServerCache(syncPoint,path){let serverCache=null;for(const view of syncPoint.views.values())serverCache=serverCache||viewGetCompleteServerCache(view,path);return serverCache}function syncPointViewForQuery(syncPoint,query){if(query._queryParams.loadsAllData())return syncPointGetCompleteView(syncPoint);{const queryId=query._queryIdentifier;return syncPoint.views.get(queryId)}}function syncPointViewExistsForQuery(syncPoint,query){return null!=syncPointViewForQuery(syncPoint,query)}function syncPointHasCompleteView(syncPoint){return null!=syncPointGetCompleteView(syncPoint)}function syncPointGetCompleteView(syncPoint){for(const view of syncPoint.views.values())if(view.query._queryParams.loadsAllData())return view;return null}let syncTreeNextQueryTag_=1;class SyncTree{constructor(listenProvider_){this.listenProvider_=listenProvider_,this.syncPointTree_=new ImmutableTree(null),this.pendingWriteTree_=function newWriteTree(){return{visibleWrites:CompoundWrite.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function syncTreeApplyUserOverwrite(syncTree,path,newData,writeId,visible){return function writeTreeAddOverwrite(writeTree,path,snap,writeId,visible){(0,dist_index_esm.vA)(writeId>writeTree.lastWriteId,"Stacking an older write on top of newer ones"),void 0===visible&&(visible=!0),writeTree.allWrites.push({path,snap,writeId,visible}),visible&&(writeTree.visibleWrites=compoundWriteAddWrite(writeTree.visibleWrites,path,snap)),writeTree.lastWriteId=writeId}(syncTree.pendingWriteTree_,path,newData,writeId,visible),visible?syncTreeApplyOperationToSyncPoints_(syncTree,new Overwrite({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},path,newData)):[]}function syncTreeAckUserWrite(syncTree,writeId,revert=!1){const write=function writeTreeGetWrite(writeTree,writeId){for(let i=0;i<writeTree.allWrites.length;i++){const record=writeTree.allWrites[i];if(record.writeId===writeId)return record}return null}(syncTree.pendingWriteTree_,writeId);if(writeTreeRemoveWrite(syncTree.pendingWriteTree_,writeId)){let affectedTree=new ImmutableTree(null);return null!=write.snap?affectedTree=affectedTree.set(newEmptyPath(),!0):each(write.children,pathString=>{affectedTree=affectedTree.set(new Path(pathString),!0)}),syncTreeApplyOperationToSyncPoints_(syncTree,new AckUserWrite(write.path,affectedTree,revert))}return[]}function syncTreeApplyServerOverwrite(syncTree,path,newData){return syncTreeApplyOperationToSyncPoints_(syncTree,new Overwrite({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},path,newData))}function syncTreeRemoveEventRegistration(syncTree,query,eventRegistration,cancelError,skipListenerDedup=!1){const path=query._path,maybeSyncPoint=syncTree.syncPointTree_.get(path);let cancelEvents=[];if(maybeSyncPoint&&("default"===query._queryIdentifier||syncPointViewExistsForQuery(maybeSyncPoint,query))){const removedAndEvents=syncPointRemoveEventRegistration(maybeSyncPoint,query,eventRegistration,cancelError);(function syncPointIsEmpty(syncPoint){return 0===syncPoint.views.size})(maybeSyncPoint)&&(syncTree.syncPointTree_=syncTree.syncPointTree_.remove(path));const removed=removedAndEvents.removed;if(cancelEvents=removedAndEvents.events,!skipListenerDedup){const removingDefault=-1!==removed.findIndex(query=>query._queryParams.loadsAllData()),covered=syncTree.syncPointTree_.findOnPath(path,(relativePath,parentSyncPoint)=>syncPointHasCompleteView(parentSyncPoint));if(removingDefault&&!covered){const subtree=syncTree.syncPointTree_.subtree(path);if(!subtree.isEmpty()){const newViews=function syncTreeCollectDistinctViewsForSubTree_(subtree){return subtree.fold((relativePath,maybeChildSyncPoint,childMap)=>{if(maybeChildSyncPoint&&syncPointHasCompleteView(maybeChildSyncPoint)){return[syncPointGetCompleteView(maybeChildSyncPoint)]}{let views=[];return maybeChildSyncPoint&&(views=syncPointGetQueryViews(maybeChildSyncPoint)),each(childMap,(_key,childViews)=>{views=views.concat(childViews)}),views}})}(subtree);for(let i=0;i<newViews.length;++i){const view=newViews[i],newQuery=view.query,listener=syncTreeCreateListenerForView_(syncTree,view);syncTree.listenProvider_.startListening(syncTreeQueryForListening_(newQuery),syncTreeTagForQuery(syncTree,newQuery),listener.hashFn,listener.onComplete)}}}if(!covered&&removed.length>0&&!cancelError)if(removingDefault){const defaultTag=null;syncTree.listenProvider_.stopListening(syncTreeQueryForListening_(query),defaultTag)}else removed.forEach(queryToRemove=>{const tagToRemove=syncTree.queryToTagMap.get(syncTreeMakeQueryKey_(queryToRemove));syncTree.listenProvider_.stopListening(syncTreeQueryForListening_(queryToRemove),tagToRemove)})}!function syncTreeRemoveTags_(syncTree,queries){for(let j=0;j<queries.length;++j){const removedQuery=queries[j];if(!removedQuery._queryParams.loadsAllData()){const removedQueryKey=syncTreeMakeQueryKey_(removedQuery),removedQueryTag=syncTree.queryToTagMap.get(removedQueryKey);syncTree.queryToTagMap.delete(removedQueryKey),syncTree.tagToQueryMap.delete(removedQueryTag)}}}(syncTree,removed)}return cancelEvents}function syncTreeApplyTaggedQueryOverwrite(syncTree,path,snap,tag){const queryKey=syncTreeQueryKeyForTag_(syncTree,tag);if(null!=queryKey){const r=syncTreeParseQueryKey_(queryKey),queryPath=r.path,queryId=r.queryId,relativePath=newRelativePath(queryPath,path);return syncTreeApplyTaggedOperation_(syncTree,queryPath,new Overwrite(newOperationSourceServerTaggedQuery(queryId),relativePath,snap))}return[]}function syncTreeAddEventRegistration(syncTree,query,eventRegistration,skipSetupListener=!1){const path=query._path;let serverCache=null,foundAncestorDefaultView=!1;syncTree.syncPointTree_.foreachOnPath(path,(pathToSyncPoint,sp)=>{const relativePath=newRelativePath(pathToSyncPoint,path);serverCache=serverCache||syncPointGetCompleteServerCache(sp,relativePath),foundAncestorDefaultView=foundAncestorDefaultView||syncPointHasCompleteView(sp)});let serverCacheComplete,syncPoint=syncTree.syncPointTree_.get(path);if(syncPoint?(foundAncestorDefaultView=foundAncestorDefaultView||syncPointHasCompleteView(syncPoint),serverCache=serverCache||syncPointGetCompleteServerCache(syncPoint,newEmptyPath())):(syncPoint=new SyncPoint,syncTree.syncPointTree_=syncTree.syncPointTree_.set(path,syncPoint)),null!=serverCache)serverCacheComplete=!0;else{serverCacheComplete=!1,serverCache=ChildrenNode.EMPTY_NODE;syncTree.syncPointTree_.subtree(path).foreachChild((childName,childSyncPoint)=>{const completeCache=syncPointGetCompleteServerCache(childSyncPoint,newEmptyPath());completeCache&&(serverCache=serverCache.updateImmediateChild(childName,completeCache))})}const viewAlreadyExists=syncPointViewExistsForQuery(syncPoint,query);if(!viewAlreadyExists&&!query._queryParams.loadsAllData()){const queryKey=syncTreeMakeQueryKey_(query);(0,dist_index_esm.vA)(!syncTree.queryToTagMap.has(queryKey),"View does not exist, but we have a tag");const tag=function syncTreeGetNextQueryTag_(){return syncTreeNextQueryTag_++}();syncTree.queryToTagMap.set(queryKey,tag),syncTree.tagToQueryMap.set(tag,queryKey)}let events=syncPointAddEventRegistration(syncPoint,query,eventRegistration,writeTreeChildWrites(syncTree.pendingWriteTree_,path),serverCache,serverCacheComplete);if(!viewAlreadyExists&&!foundAncestorDefaultView&&!skipSetupListener){const view=syncPointViewForQuery(syncPoint,query);events=events.concat(function syncTreeSetupListener_(syncTree,query,view){const path=query._path,tag=syncTreeTagForQuery(syncTree,query),listener=syncTreeCreateListenerForView_(syncTree,view),events=syncTree.listenProvider_.startListening(syncTreeQueryForListening_(query),tag,listener.hashFn,listener.onComplete),subtree=syncTree.syncPointTree_.subtree(path);if(tag)(0,dist_index_esm.vA)(!syncPointHasCompleteView(subtree.value),"If we're adding a query, it shouldn't be shadowed");else{const queriesToStop=subtree.fold((relativePath,maybeChildSyncPoint,childMap)=>{if(!pathIsEmpty(relativePath)&&maybeChildSyncPoint&&syncPointHasCompleteView(maybeChildSyncPoint))return[syncPointGetCompleteView(maybeChildSyncPoint).query];{let queries=[];return maybeChildSyncPoint&&(queries=queries.concat(syncPointGetQueryViews(maybeChildSyncPoint).map(view=>view.query))),each(childMap,(_key,childQueries)=>{queries=queries.concat(childQueries)}),queries}});for(let i=0;i<queriesToStop.length;++i){const queryToStop=queriesToStop[i];syncTree.listenProvider_.stopListening(syncTreeQueryForListening_(queryToStop),syncTreeTagForQuery(syncTree,queryToStop))}}return events}(syncTree,query,view))}return events}function syncTreeCalcCompleteEventCache(syncTree,path,writeIdsToExclude){const writeTree=syncTree.pendingWriteTree_,serverCache=syncTree.syncPointTree_.findOnPath(path,(pathSoFar,syncPoint)=>{const serverCache=syncPointGetCompleteServerCache(syncPoint,newRelativePath(pathSoFar,path));if(serverCache)return serverCache});return writeTreeCalcCompleteEventCache(writeTree,path,serverCache,writeIdsToExclude,!0)}function syncTreeApplyOperationToSyncPoints_(syncTree,operation){return syncTreeApplyOperationHelper_(operation,syncTree.syncPointTree_,null,writeTreeChildWrites(syncTree.pendingWriteTree_,newEmptyPath()))}function syncTreeApplyOperationHelper_(operation,syncPointTree,serverCache,writesCache){if(pathIsEmpty(operation.path))return syncTreeApplyOperationDescendantsHelper_(operation,syncPointTree,serverCache,writesCache);{const syncPoint=syncPointTree.get(newEmptyPath());null==serverCache&&null!=syncPoint&&(serverCache=syncPointGetCompleteServerCache(syncPoint,newEmptyPath()));let events=[];const childName=pathGetFront(operation.path),childOperation=operation.operationForChild(childName),childTree=syncPointTree.children.get(childName);if(childTree&&childOperation){const childServerCache=serverCache?serverCache.getImmediateChild(childName):null,childWritesCache=writeTreeRefChild(writesCache,childName);events=events.concat(syncTreeApplyOperationHelper_(childOperation,childTree,childServerCache,childWritesCache))}return syncPoint&&(events=events.concat(syncPointApplyOperation(syncPoint,operation,writesCache,serverCache))),events}}function syncTreeApplyOperationDescendantsHelper_(operation,syncPointTree,serverCache,writesCache){const syncPoint=syncPointTree.get(newEmptyPath());null==serverCache&&null!=syncPoint&&(serverCache=syncPointGetCompleteServerCache(syncPoint,newEmptyPath()));let events=[];return syncPointTree.children.inorderTraversal((childName,childTree)=>{const childServerCache=serverCache?serverCache.getImmediateChild(childName):null,childWritesCache=writeTreeRefChild(writesCache,childName),childOperation=operation.operationForChild(childName);childOperation&&(events=events.concat(syncTreeApplyOperationDescendantsHelper_(childOperation,childTree,childServerCache,childWritesCache)))}),syncPoint&&(events=events.concat(syncPointApplyOperation(syncPoint,operation,writesCache,serverCache))),events}function syncTreeCreateListenerForView_(syncTree,view){const query=view.query,tag=syncTreeTagForQuery(syncTree,query);return{hashFn:()=>{const cache=function viewGetServerCache(view){return view.viewCache_.serverCache.getNode()}(view)||ChildrenNode.EMPTY_NODE;return cache.hash()},onComplete:status=>{if("ok"===status)return tag?function syncTreeApplyTaggedListenComplete(syncTree,path,tag){const queryKey=syncTreeQueryKeyForTag_(syncTree,tag);if(queryKey){const r=syncTreeParseQueryKey_(queryKey),queryPath=r.path,queryId=r.queryId,relativePath=newRelativePath(queryPath,path);return syncTreeApplyTaggedOperation_(syncTree,queryPath,new ListenComplete(newOperationSourceServerTaggedQuery(queryId),relativePath))}return[]}(syncTree,query._path,tag):function syncTreeApplyListenComplete(syncTree,path){return syncTreeApplyOperationToSyncPoints_(syncTree,new ListenComplete({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},path))}(syncTree,query._path);{const error=function errorForServerCode(code,query){let reason="Unknown Error";"too_big"===code?reason="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===code?reason="Client doesn't have permission to access the desired data.":"unavailable"===code&&(reason="The service is unavailable");const error=new Error(code+" at "+query._path.toString()+": "+reason);return error.code=code.toUpperCase(),error}(status,query);return syncTreeRemoveEventRegistration(syncTree,query,null,error)}}}}function syncTreeTagForQuery(syncTree,query){const queryKey=syncTreeMakeQueryKey_(query);return syncTree.queryToTagMap.get(queryKey)}function syncTreeMakeQueryKey_(query){return query._path.toString()+"$"+query._queryIdentifier}function syncTreeQueryKeyForTag_(syncTree,tag){return syncTree.tagToQueryMap.get(tag)}function syncTreeParseQueryKey_(queryKey){const splitIndex=queryKey.indexOf("$");return(0,dist_index_esm.vA)(-1!==splitIndex&&splitIndex<queryKey.length-1,"Bad queryKey."),{queryId:queryKey.substr(splitIndex+1),path:new Path(queryKey.substr(0,splitIndex))}}function syncTreeApplyTaggedOperation_(syncTree,queryPath,operation){const syncPoint=syncTree.syncPointTree_.get(queryPath);(0,dist_index_esm.vA)(syncPoint,"Missing sync point for query tag that we're tracking");return syncPointApplyOperation(syncPoint,operation,writeTreeChildWrites(syncTree.pendingWriteTree_,queryPath),null)}function syncTreeQueryForListening_(query){return query._queryParams.loadsAllData()&&!query._queryParams.isDefault()?new(function syncTreeGetReferenceConstructor(){return(0,dist_index_esm.vA)(referenceConstructor,"Reference.ts has not been loaded"),referenceConstructor}())(query._repo,query._path):query}class ExistingValueProvider{constructor(node_){this.node_=node_}getImmediateChild(childName){const child=this.node_.getImmediateChild(childName);return new ExistingValueProvider(child)}node(){return this.node_}}class DeferredValueProvider{constructor(syncTree,path){this.syncTree_=syncTree,this.path_=path}getImmediateChild(childName){const childPath=pathChild(this.path_,childName);return new DeferredValueProvider(this.syncTree_,childPath)}node(){return syncTreeCalcCompleteEventCache(this.syncTree_,this.path_)}}const resolveDeferredLeafValue=function(value,existingVal,serverValues){return value&&"object"==typeof value?((0,dist_index_esm.vA)(".sv"in value,"Unexpected leaf node or priority contents"),"string"==typeof value[".sv"]?resolveScalarDeferredValue(value[".sv"],existingVal,serverValues):"object"==typeof value[".sv"]?resolveComplexDeferredValue(value[".sv"],existingVal):void(0,dist_index_esm.vA)(!1,"Unexpected server value: "+JSON.stringify(value,null,2))):value},resolveScalarDeferredValue=function(op,existing,serverValues){if("timestamp"===op)return serverValues.timestamp;(0,dist_index_esm.vA)(!1,"Unexpected server value: "+op)},resolveComplexDeferredValue=function(op,existing,unused){op.hasOwnProperty("increment")||(0,dist_index_esm.vA)(!1,"Unexpected server value: "+JSON.stringify(op,null,2));const delta=op.increment;"number"!=typeof delta&&(0,dist_index_esm.vA)(!1,"Unexpected increment value: "+delta);const existingNode=existing.node();if((0,dist_index_esm.vA)(null!=existingNode,"Expected ChildrenNode.EMPTY_NODE for nulls"),!existingNode.isLeafNode())return delta;const existingVal=existingNode.getValue();return"number"!=typeof existingVal?delta:existingVal+delta},resolveDeferredValueTree=function(path,node,syncTree,serverValues){return resolveDeferredValue(node,new DeferredValueProvider(syncTree,path),serverValues)},resolveDeferredValueSnapshot=function(node,existing,serverValues){return resolveDeferredValue(node,new ExistingValueProvider(existing),serverValues)};function resolveDeferredValue(node,existingVal,serverValues){const rawPri=node.getPriority().val(),priority=resolveDeferredLeafValue(rawPri,existingVal.getImmediateChild(".priority"),serverValues);let newNode;if(node.isLeafNode()){const leafNode=node,value=resolveDeferredLeafValue(leafNode.getValue(),existingVal,serverValues);return value!==leafNode.getValue()||priority!==leafNode.getPriority().val()?new LeafNode(value,nodeFromJSON(priority)):node}{const childrenNode=node;return newNode=childrenNode,priority!==childrenNode.getPriority().val()&&(newNode=newNode.updatePriority(new LeafNode(priority))),childrenNode.forEachChild(PRIORITY_INDEX,(childName,childNode)=>{const newChildNode=resolveDeferredValue(childNode,existingVal.getImmediateChild(childName),serverValues);newChildNode!==childNode&&(newNode=newNode.updateImmediateChild(childName,newChildNode))}),newNode}}class Tree{constructor(name="",parent=null,node={children:{},childCount:0}){this.name=name,this.parent=parent,this.node=node}}function treeSubTree(tree,pathObj){let path=pathObj instanceof Path?pathObj:new Path(pathObj),child=tree,next=pathGetFront(path);for(;null!==next;){const childNode=(0,dist_index_esm.yw)(child.node.children,next)||{children:{},childCount:0};child=new Tree(next,child,childNode),path=pathPopFront(path),next=pathGetFront(path)}return child}function treeGetValue(tree){return tree.node.value}function treeSetValue(tree,value){tree.node.value=value,treeUpdateParents(tree)}function treeHasChildren(tree){return tree.node.childCount>0}function treeForEachChild(tree,action){each(tree.node.children,(child,childTree)=>{action(new Tree(child,tree,childTree))})}function treeForEachDescendant(tree,action,includeSelf,childrenFirst){includeSelf&&!childrenFirst&&action(tree),treeForEachChild(tree,child=>{treeForEachDescendant(child,action,!0,childrenFirst)}),includeSelf&&childrenFirst&&action(tree)}function treeGetPath(tree){return new Path(null===tree.parent?tree.name:treeGetPath(tree.parent)+"/"+tree.name)}function treeUpdateParents(tree){null!==tree.parent&&function treeUpdateChild(tree,childName,child){const childEmpty=function treeIsEmpty(tree){return void 0===treeGetValue(tree)&&!treeHasChildren(tree)}(child),childExists=(0,dist_index_esm.gR)(tree.node.children,childName);childEmpty&&childExists?(delete tree.node.children[childName],tree.node.childCount--,treeUpdateParents(tree)):childEmpty||childExists||(tree.node.children[childName]=child.node,tree.node.childCount++,treeUpdateParents(tree))}(tree.parent,tree.name,tree)}const INVALID_KEY_REGEX_=/[\[\].#$\/\u0000-\u001F\u007F]/,INVALID_PATH_REGEX_=/[\[\].#$\u0000-\u001F\u007F]/,isValidKey=function(key){return"string"==typeof key&&0!==key.length&&!INVALID_KEY_REGEX_.test(key)},isValidPathString=function(pathString){return"string"==typeof pathString&&0!==pathString.length&&!INVALID_PATH_REGEX_.test(pathString)},validateFirebaseData=function(errorPrefix,data,path_){const path=path_ instanceof Path?new ValidationPath(path_,errorPrefix):path_;if(void 0===data)throw new Error(errorPrefix+"contains undefined "+validationPathToErrorString(path));if("function"==typeof data)throw new Error(errorPrefix+"contains a function "+validationPathToErrorString(path)+" with contents = "+data.toString());if(isInvalidJSONNumber(data))throw new Error(errorPrefix+"contains "+data.toString()+" "+validationPathToErrorString(path));if("string"==typeof data&&data.length>10485760/3&&(0,dist_index_esm.OE)(data)>10485760)throw new Error(errorPrefix+"contains a string greater than 10485760 utf8 bytes "+validationPathToErrorString(path)+" ('"+data.substring(0,50)+"...')");if(data&&"object"==typeof data){let hasDotValue=!1,hasActualChild=!1;if(each(data,(key,value)=>{if(".value"===key)hasDotValue=!0;else if(".priority"!==key&&".sv"!==key&&(hasActualChild=!0,!isValidKey(key)))throw new Error(errorPrefix+" contains an invalid key ("+key+") "+validationPathToErrorString(path)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function validationPathPush(validationPath,child){validationPath.parts_.length>0&&(validationPath.byteLength_+=1),validationPath.parts_.push(child),validationPath.byteLength_+=(0,dist_index_esm.OE)(child),validationPathCheckValid(validationPath)}(path,key),validateFirebaseData(errorPrefix,value,path),function validationPathPop(validationPath){const last=validationPath.parts_.pop();validationPath.byteLength_-=(0,dist_index_esm.OE)(last),validationPath.parts_.length>0&&(validationPath.byteLength_-=1)}(path)}),hasDotValue&&hasActualChild)throw new Error(errorPrefix+' contains ".value" child '+validationPathToErrorString(path)+" in addition to actual children.")}},validatePathString=function(fnName,argumentName,pathString,optional){if(!(optional&&void 0===pathString||isValidPathString(pathString)))throw new Error((0,dist_index_esm.dI)(fnName,argumentName)+'was an invalid path = "'+pathString+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},validateRootPathString=function(fnName,argumentName,pathString,optional){pathString&&(pathString=pathString.replace(/^\/*\.info(\/|$)/,"/")),validatePathString(fnName,argumentName,pathString,optional)},validateUrl=function(fnName,parsedUrl){const pathString=parsedUrl.path.toString();if("string"!=typeof parsedUrl.repoInfo.host||0===parsedUrl.repoInfo.host.length||!isValidKey(parsedUrl.repoInfo.namespace)&&"localhost"!==parsedUrl.repoInfo.host.split(":")[0]||0!==pathString.length&&!function(pathString){return pathString&&(pathString=pathString.replace(/^\/*\.info(\/|$)/,"/")),isValidPathString(pathString)}(pathString))throw new Error((0,dist_index_esm.dI)(fnName,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class EventQueue{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function eventQueueQueueEvents(eventQueue,eventDataList){let currList=null;for(let i=0;i<eventDataList.length;i++){const data=eventDataList[i],path=data.getPath();null===currList||pathEquals(path,currList.path)||(eventQueue.eventLists_.push(currList),currList=null),null===currList&&(currList={events:[],path}),currList.events.push(data)}currList&&eventQueue.eventLists_.push(currList)}function eventQueueRaiseEventsAtPath(eventQueue,path,eventDataList){eventQueueQueueEvents(eventQueue,eventDataList),eventQueueRaiseQueuedEventsMatchingPredicate(eventQueue,eventPath=>pathEquals(eventPath,path))}function eventQueueRaiseEventsForChangedPath(eventQueue,changedPath,eventDataList){eventQueueQueueEvents(eventQueue,eventDataList),eventQueueRaiseQueuedEventsMatchingPredicate(eventQueue,eventPath=>pathContains(eventPath,changedPath)||pathContains(changedPath,eventPath))}function eventQueueRaiseQueuedEventsMatchingPredicate(eventQueue,predicate){eventQueue.recursionDepth_++;let sentAll=!0;for(let i=0;i<eventQueue.eventLists_.length;i++){const eventList=eventQueue.eventLists_[i];if(eventList){predicate(eventList.path)?(eventListRaise(eventQueue.eventLists_[i]),eventQueue.eventLists_[i]=null):sentAll=!1}}sentAll&&(eventQueue.eventLists_=[]),eventQueue.recursionDepth_--}function eventListRaise(eventList){for(let i=0;i<eventList.events.length;i++){const eventData=eventList.events[i];if(null!==eventData){eventList.events[i]=null;const eventFn=eventData.getEventRunner();logger&&log("event: "+eventData.toString()),exceptionGuard(eventFn)}}}class Repo{constructor(repoInfo_,forceRestClient_,authTokenProvider_,appCheckProvider_){this.repoInfo_=repoInfo_,this.forceRestClient_=forceRestClient_,this.authTokenProvider_=authTokenProvider_,this.appCheckProvider_=appCheckProvider_,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new EventQueue,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=newSparseSnapshotTree(),this.transactionQueueTree_=new Tree,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function repoStart(repo,appId,authOverride){if(repo.stats_=statsManagerGetCollection(repo.repoInfo_),repo.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)repo.server_=new ReadonlyRestClient(repo.repoInfo_,(pathString,data,isMerge,tag)=>{repoOnDataUpdate(repo,pathString,data,isMerge,tag)},repo.authTokenProvider_,repo.appCheckProvider_),setTimeout(()=>repoOnConnectStatus(repo,!0),0);else{if(null!=authOverride){if("object"!=typeof authOverride)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,dist_index_esm.As)(authOverride)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}repo.persistentConnection_=new PersistentConnection(repo.repoInfo_,appId,(pathString,data,isMerge,tag)=>{repoOnDataUpdate(repo,pathString,data,isMerge,tag)},connectStatus=>{repoOnConnectStatus(repo,connectStatus)},updates=>{!function repoOnServerInfoUpdate(repo,updates){each(updates,(key,value)=>{repoUpdateInfo(repo,key,value)})}(repo,updates)},repo.authTokenProvider_,repo.appCheckProvider_,authOverride),repo.server_=repo.persistentConnection_}repo.authTokenProvider_.addTokenChangeListener(token=>{repo.server_.refreshAuthToken(token)}),repo.appCheckProvider_.addTokenChangeListener(result=>{repo.server_.refreshAppCheckToken(result.token)}),repo.statsReporter_=function statsManagerGetOrCreateReporter(repoInfo,creatorFunction){const hashString=repoInfo.toString();return reporters[hashString]||(reporters[hashString]=creatorFunction()),reporters[hashString]}(repo.repoInfo_,()=>new StatsReporter(repo.stats_,repo.server_)),repo.infoData_=new SnapshotHolder,repo.infoSyncTree_=new SyncTree({startListening:(query,tag,currentHashFn,onComplete)=>{let infoEvents=[];const node=repo.infoData_.getNode(query._path);return node.isEmpty()||(infoEvents=syncTreeApplyServerOverwrite(repo.infoSyncTree_,query._path,node),setTimeout(()=>{onComplete("ok")},0)),infoEvents},stopListening:()=>{}}),repoUpdateInfo(repo,"connected",!1),repo.serverSyncTree_=new SyncTree({startListening:(query,tag,currentHashFn,onComplete)=>(repo.server_.listen(query,currentHashFn,tag,(status,data)=>{const events=onComplete(status,data);eventQueueRaiseEventsForChangedPath(repo.eventQueue_,query._path,events)}),[]),stopListening:(query,tag)=>{repo.server_.unlisten(query,tag)}})}function repoServerTime(repo){const offset=repo.infoData_.getNode(new Path(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+offset}function repoGenerateServerValues(repo){return(values=(values={timestamp:repoServerTime(repo)})||{}).timestamp=values.timestamp||(new Date).getTime(),values;var values}function repoOnDataUpdate(repo,pathString,data,isMerge,tag){repo.dataUpdateCount++;const path=new Path(pathString);data=repo.interceptServerDataCallback_?repo.interceptServerDataCallback_(pathString,data):data;let events=[];if(tag)if(isMerge){const taggedChildren=(0,dist_index_esm.kH)(data,raw=>nodeFromJSON(raw));events=function syncTreeApplyTaggedQueryMerge(syncTree,path,changedChildren,tag){const queryKey=syncTreeQueryKeyForTag_(syncTree,tag);if(queryKey){const r=syncTreeParseQueryKey_(queryKey),queryPath=r.path,queryId=r.queryId,relativePath=newRelativePath(queryPath,path),changeTree=ImmutableTree.fromObject(changedChildren);return syncTreeApplyTaggedOperation_(syncTree,queryPath,new Merge(newOperationSourceServerTaggedQuery(queryId),relativePath,changeTree))}return[]}(repo.serverSyncTree_,path,taggedChildren,tag)}else{const taggedSnap=nodeFromJSON(data);events=syncTreeApplyTaggedQueryOverwrite(repo.serverSyncTree_,path,taggedSnap,tag)}else if(isMerge){const changedChildren=(0,dist_index_esm.kH)(data,raw=>nodeFromJSON(raw));events=function syncTreeApplyServerMerge(syncTree,path,changedChildren){const changeTree=ImmutableTree.fromObject(changedChildren);return syncTreeApplyOperationToSyncPoints_(syncTree,new Merge({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},path,changeTree))}(repo.serverSyncTree_,path,changedChildren)}else{const snap=nodeFromJSON(data);events=syncTreeApplyServerOverwrite(repo.serverSyncTree_,path,snap)}let affectedPath=path;events.length>0&&(affectedPath=repoRerunTransactions(repo,path)),eventQueueRaiseEventsForChangedPath(repo.eventQueue_,affectedPath,events)}function repoOnConnectStatus(repo,connectStatus){repoUpdateInfo(repo,"connected",connectStatus),!1===connectStatus&&function repoRunOnDisconnectEvents(repo){repoLog(repo,"onDisconnectEvents");const serverValues=repoGenerateServerValues(repo),resolvedOnDisconnectTree=newSparseSnapshotTree();sparseSnapshotTreeForEachTree(repo.onDisconnect_,newEmptyPath(),(path,node)=>{const resolved=resolveDeferredValueTree(path,node,repo.serverSyncTree_,serverValues);sparseSnapshotTreeRemember(resolvedOnDisconnectTree,path,resolved)});let events=[];sparseSnapshotTreeForEachTree(resolvedOnDisconnectTree,newEmptyPath(),(path,snap)=>{events=events.concat(syncTreeApplyServerOverwrite(repo.serverSyncTree_,path,snap));const affectedPath=repoAbortTransactions(repo,path);repoRerunTransactions(repo,affectedPath)}),repo.onDisconnect_=newSparseSnapshotTree(),eventQueueRaiseEventsForChangedPath(repo.eventQueue_,newEmptyPath(),events)}(repo)}function repoUpdateInfo(repo,pathString,value){const path=new Path("/.info/"+pathString),newNode=nodeFromJSON(value);repo.infoData_.updateSnapshot(path,newNode);const events=syncTreeApplyServerOverwrite(repo.infoSyncTree_,path,newNode);eventQueueRaiseEventsForChangedPath(repo.eventQueue_,path,events)}function repoGetNextWriteId(repo){return repo.nextWriteId_++}function repoRemoveEventCallbackForQuery(repo,query,eventRegistration){let events;events=".info"===pathGetFront(query._path)?syncTreeRemoveEventRegistration(repo.infoSyncTree_,query,eventRegistration):syncTreeRemoveEventRegistration(repo.serverSyncTree_,query,eventRegistration),eventQueueRaiseEventsAtPath(repo.eventQueue_,query._path,events)}function repoInterrupt(repo){repo.persistentConnection_&&repo.persistentConnection_.interrupt("repo_interrupt")}function repoLog(repo,...varArgs){let prefix="";repo.persistentConnection_&&(prefix=repo.persistentConnection_.id+":"),log(prefix,...varArgs)}function repoGetLatestState(repo,path,excludeSets){return syncTreeCalcCompleteEventCache(repo.serverSyncTree_,path,excludeSets)||ChildrenNode.EMPTY_NODE}function repoSendReadyTransactions(repo,node=repo.transactionQueueTree_){if(node||repoPruneCompletedTransactionsBelowNode(repo,node),treeGetValue(node)){const queue=repoBuildTransactionQueue(repo,node);(0,dist_index_esm.vA)(queue.length>0,"Sending zero length transaction queue");queue.every(transaction=>0===transaction.status)&&function repoSendTransactionQueue(repo,path,queue){const setsToIgnore=queue.map(txn=>txn.currentWriteId),latestState=repoGetLatestState(repo,path,setsToIgnore);let snapToSend=latestState;const latestHash=latestState.hash();for(let i=0;i<queue.length;i++){const txn=queue[i];(0,dist_index_esm.vA)(0===txn.status,"tryToSendTransactionQueue_: items in queue should all be run."),txn.status=1,txn.retryCount++;const relativePath=newRelativePath(path,txn.path);snapToSend=snapToSend.updateChild(relativePath,txn.currentOutputSnapshotRaw)}const dataToSend=snapToSend.val(!0),pathToSend=path;repo.server_.put(pathToSend.toString(),dataToSend,status=>{repoLog(repo,"transaction put response",{path:pathToSend.toString(),status});let events=[];if("ok"===status){const callbacks=[];for(let i=0;i<queue.length;i++)queue[i].status=2,events=events.concat(syncTreeAckUserWrite(repo.serverSyncTree_,queue[i].currentWriteId)),queue[i].onComplete&&callbacks.push(()=>queue[i].onComplete(null,!0,queue[i].currentOutputSnapshotResolved)),queue[i].unwatcher();repoPruneCompletedTransactionsBelowNode(repo,treeSubTree(repo.transactionQueueTree_,path)),repoSendReadyTransactions(repo,repo.transactionQueueTree_),eventQueueRaiseEventsForChangedPath(repo.eventQueue_,path,events);for(let i=0;i<callbacks.length;i++)exceptionGuard(callbacks[i])}else{if("datastale"===status)for(let i=0;i<queue.length;i++)3===queue[i].status?queue[i].status=4:queue[i].status=0;else{warn("transaction at "+pathToSend.toString()+" failed: "+status);for(let i=0;i<queue.length;i++)queue[i].status=4,queue[i].abortReason=status}repoRerunTransactions(repo,path)}},latestHash)}(repo,treeGetPath(node),queue)}else treeHasChildren(node)&&treeForEachChild(node,childNode=>{repoSendReadyTransactions(repo,childNode)})}function repoRerunTransactions(repo,changedPath){const rootMostTransactionNode=repoGetAncestorTransactionNode(repo,changedPath),path=treeGetPath(rootMostTransactionNode);return function repoRerunTransactionQueue(repo,queue,path){if(0===queue.length)return;const callbacks=[];let events=[];const txnsToRerun=queue.filter(q=>0===q.status),setsToIgnore=txnsToRerun.map(q=>q.currentWriteId);for(let i=0;i<queue.length;i++){const transaction=queue[i],relativePath=newRelativePath(path,transaction.path);let abortReason,abortTransaction=!1;if((0,dist_index_esm.vA)(null!==relativePath,"rerunTransactionsUnderNode_: relativePath should not be null."),4===transaction.status)abortTransaction=!0,abortReason=transaction.abortReason,events=events.concat(syncTreeAckUserWrite(repo.serverSyncTree_,transaction.currentWriteId,!0));else if(0===transaction.status)if(transaction.retryCount>=25)abortTransaction=!0,abortReason="maxretry",events=events.concat(syncTreeAckUserWrite(repo.serverSyncTree_,transaction.currentWriteId,!0));else{const currentNode=repoGetLatestState(repo,transaction.path,setsToIgnore);transaction.currentInputSnapshot=currentNode;const newData=queue[i].update(currentNode.val());if(void 0!==newData){validateFirebaseData("transaction failed: Data returned ",newData,transaction.path);let newDataNode=nodeFromJSON(newData);"object"==typeof newData&&null!=newData&&(0,dist_index_esm.gR)(newData,".priority")||(newDataNode=newDataNode.updatePriority(currentNode.getPriority()));const oldWriteId=transaction.currentWriteId,serverValues=repoGenerateServerValues(repo),newNodeResolved=resolveDeferredValueSnapshot(newDataNode,currentNode,serverValues);transaction.currentOutputSnapshotRaw=newDataNode,transaction.currentOutputSnapshotResolved=newNodeResolved,transaction.currentWriteId=repoGetNextWriteId(repo),setsToIgnore.splice(setsToIgnore.indexOf(oldWriteId),1),events=events.concat(syncTreeApplyUserOverwrite(repo.serverSyncTree_,transaction.path,newNodeResolved,transaction.currentWriteId,transaction.applyLocally)),events=events.concat(syncTreeAckUserWrite(repo.serverSyncTree_,oldWriteId,!0))}else abortTransaction=!0,abortReason="nodata",events=events.concat(syncTreeAckUserWrite(repo.serverSyncTree_,transaction.currentWriteId,!0))}eventQueueRaiseEventsForChangedPath(repo.eventQueue_,path,events),events=[],abortTransaction&&(queue[i].status=2,function(unwatcher){setTimeout(unwatcher,Math.floor(0))}(queue[i].unwatcher),queue[i].onComplete&&("nodata"===abortReason?callbacks.push(()=>queue[i].onComplete(null,!1,queue[i].currentInputSnapshot)):callbacks.push(()=>queue[i].onComplete(new Error(abortReason),!1,null))))}repoPruneCompletedTransactionsBelowNode(repo,repo.transactionQueueTree_);for(let i=0;i<callbacks.length;i++)exceptionGuard(callbacks[i]);repoSendReadyTransactions(repo,repo.transactionQueueTree_)}(repo,repoBuildTransactionQueue(repo,rootMostTransactionNode),path),path}function repoGetAncestorTransactionNode(repo,path){let front,transactionNode=repo.transactionQueueTree_;for(front=pathGetFront(path);null!==front&&void 0===treeGetValue(transactionNode);)transactionNode=treeSubTree(transactionNode,front),front=pathGetFront(path=pathPopFront(path));return transactionNode}function repoBuildTransactionQueue(repo,transactionNode){const transactionQueue=[];return repoAggregateTransactionQueuesForNode(repo,transactionNode,transactionQueue),transactionQueue.sort((a,b)=>a.order-b.order),transactionQueue}function repoAggregateTransactionQueuesForNode(repo,node,queue){const nodeQueue=treeGetValue(node);if(nodeQueue)for(let i=0;i<nodeQueue.length;i++)queue.push(nodeQueue[i]);treeForEachChild(node,child=>{repoAggregateTransactionQueuesForNode(repo,child,queue)})}function repoPruneCompletedTransactionsBelowNode(repo,node){const queue=treeGetValue(node);if(queue){let to=0;for(let from=0;from<queue.length;from++)2!==queue[from].status&&(queue[to]=queue[from],to++);queue.length=to,treeSetValue(node,queue.length>0?queue:void 0)}treeForEachChild(node,childNode=>{repoPruneCompletedTransactionsBelowNode(repo,childNode)})}function repoAbortTransactions(repo,path){const affectedPath=treeGetPath(repoGetAncestorTransactionNode(repo,path)),transactionNode=treeSubTree(repo.transactionQueueTree_,path);return function treeForEachAncestor(tree,action,includeSelf){let node=includeSelf?tree:tree.parent;for(;null!==node;){if(action(node))return!0;node=node.parent}return!1}(transactionNode,node=>{repoAbortTransactionsOnNode(repo,node)}),repoAbortTransactionsOnNode(repo,transactionNode),treeForEachDescendant(transactionNode,node=>{repoAbortTransactionsOnNode(repo,node)}),affectedPath}function repoAbortTransactionsOnNode(repo,node){const queue=treeGetValue(node);if(queue){const callbacks=[];let events=[],lastSent=-1;for(let i=0;i<queue.length;i++)3===queue[i].status||(1===queue[i].status?((0,dist_index_esm.vA)(lastSent===i-1,"All SENT items should be at beginning of queue."),lastSent=i,queue[i].status=3,queue[i].abortReason="set"):((0,dist_index_esm.vA)(0===queue[i].status,"Unexpected transaction status in abort"),queue[i].unwatcher(),events=events.concat(syncTreeAckUserWrite(repo.serverSyncTree_,queue[i].currentWriteId,!0)),queue[i].onComplete&&callbacks.push(queue[i].onComplete.bind(null,new Error("set"),!1,null))));-1===lastSent?treeSetValue(node,void 0):queue.length=lastSent+1,eventQueueRaiseEventsForChangedPath(repo.eventQueue_,treeGetPath(node),events);for(let i=0;i<callbacks.length;i++)exceptionGuard(callbacks[i])}}const parseRepoInfo=function(dataURL,nodeAdmin){const parsedUrl=parseDatabaseURL(dataURL),namespace=parsedUrl.namespace;"firebase.com"===parsedUrl.domain&&fatal(parsedUrl.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),namespace&&"undefined"!==namespace||"localhost"===parsedUrl.domain||fatal("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),parsedUrl.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&warn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const webSocketOnly="ws"===parsedUrl.scheme||"wss"===parsedUrl.scheme;return{repoInfo:new RepoInfo(parsedUrl.host,parsedUrl.secure,namespace,webSocketOnly,nodeAdmin,"",namespace!==parsedUrl.subdomain),path:new Path(parsedUrl.pathString)}},parseDatabaseURL=function(dataURL){let host="",domain="",subdomain="",pathString="",namespace="",secure=!0,scheme="https",port=443;if("string"==typeof dataURL){let colonInd=dataURL.indexOf("//");colonInd>=0&&(scheme=dataURL.substring(0,colonInd-1),dataURL=dataURL.substring(colonInd+2));let slashInd=dataURL.indexOf("/");-1===slashInd&&(slashInd=dataURL.length);let questionMarkInd=dataURL.indexOf("?");-1===questionMarkInd&&(questionMarkInd=dataURL.length),host=dataURL.substring(0,Math.min(slashInd,questionMarkInd)),slashInd<questionMarkInd&&(pathString=function decodePath(pathString){let pathStringDecoded="";const pieces=pathString.split("/");for(let i=0;i<pieces.length;i++)if(pieces[i].length>0){let piece=pieces[i];try{piece=decodeURIComponent(piece.replace(/\+/g," "))}catch(e){}pathStringDecoded+="/"+piece}return pathStringDecoded}(dataURL.substring(slashInd,questionMarkInd)));const queryParams=function decodeQuery(queryString){const results={};"?"===queryString.charAt(0)&&(queryString=queryString.substring(1));for(const segment of queryString.split("&")){if(0===segment.length)continue;const kv=segment.split("=");2===kv.length?results[decodeURIComponent(kv[0])]=decodeURIComponent(kv[1]):warn(`Invalid query segment '${segment}' in query '${queryString}'`)}return results}(dataURL.substring(Math.min(dataURL.length,questionMarkInd)));colonInd=host.indexOf(":"),colonInd>=0?(secure="https"===scheme||"wss"===scheme,port=parseInt(host.substring(colonInd+1),10)):colonInd=host.length;const hostWithoutPort=host.slice(0,colonInd);if("localhost"===hostWithoutPort.toLowerCase())domain="localhost";else if(hostWithoutPort.split(".").length<=2)domain=hostWithoutPort;else{const dotInd=host.indexOf(".");subdomain=host.substring(0,dotInd).toLowerCase(),domain=host.substring(dotInd+1),namespace=subdomain}"ns"in queryParams&&(namespace=queryParams.ns)}return{host,port,domain,subdomain,secure,scheme,pathString,namespace}},PUSH_CHARS="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){let lastPushTime=0;const lastRandChars=[]}();class DataEvent{constructor(eventType,eventRegistration,snapshot,prevName){this.eventType=eventType,this.eventRegistration=eventRegistration,this.snapshot=snapshot,this.prevName=prevName}getPath(){const ref=this.snapshot.ref;return"value"===this.eventType?ref._path:ref.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,dist_index_esm.As)(this.snapshot.exportVal())}}class CancelEvent{constructor(eventRegistration,error,path){this.eventRegistration=eventRegistration,this.error=error,this.path=path}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class CallbackContext{constructor(snapshotCallback,cancelCallback){this.snapshotCallback=snapshotCallback,this.cancelCallback=cancelCallback}onValue(expDataSnapshot,previousChildName){this.snapshotCallback.call(null,expDataSnapshot,previousChildName)}onCancel(error){return(0,dist_index_esm.vA)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,error)}get hasCancelCallback(){return!!this.cancelCallback}matches(other){return this.snapshotCallback===other.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===other.snapshotCallback.userCallback&&this.snapshotCallback.context===other.snapshotCallback.context}}class QueryImpl{constructor(_repo,_path,_queryParams,_orderByCalled){this._repo=_repo,this._path=_path,this._queryParams=_queryParams,this._orderByCalled=_orderByCalled}get key(){return pathIsEmpty(this._path)?null:pathGetBack(this._path)}get ref(){return new ReferenceImpl(this._repo,this._path)}get _queryIdentifier(){const obj=queryParamsGetQueryObject(this._queryParams),id=ObjectToUniqueKey(obj);return"{}"===id?"default":id}get _queryObject(){return queryParamsGetQueryObject(this._queryParams)}isEqual(other){if(!((other=(0,dist_index_esm.Ku)(other))instanceof QueryImpl))return!1;const sameRepo=this._repo===other._repo,samePath=pathEquals(this._path,other._path),sameQueryIdentifier=this._queryIdentifier===other._queryIdentifier;return sameRepo&&samePath&&sameQueryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function pathToUrlEncodedString(path){let pathString="";for(let i=path.pieceNum_;i<path.pieces_.length;i++)""!==path.pieces_[i]&&(pathString+="/"+encodeURIComponent(String(path.pieces_[i])));return pathString||"/"}(this._path)}}class ReferenceImpl extends QueryImpl{constructor(repo,path){super(repo,path,new QueryParams,!1)}get parent(){const parentPath=pathParent(this._path);return null===parentPath?null:new ReferenceImpl(this._repo,parentPath)}get root(){let ref=this;for(;null!==ref.parent;)ref=ref.parent;return ref}}class DataSnapshot{constructor(_node,ref,_index){this._node=_node,this.ref=ref,this._index=_index}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(path){const childPath=new Path(path),childRef=child(this.ref,path);return new DataSnapshot(this._node.getChild(childPath),childRef,PRIORITY_INDEX)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(action){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,(key,node)=>action(new DataSnapshot(node,child(this.ref,key),PRIORITY_INDEX)))}hasChild(path){const childPath=new Path(path);return!this._node.getChild(childPath).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ref(db,path){return(db=(0,dist_index_esm.Ku)(db))._checkNotDeleted("ref"),void 0!==path?child(db._root,path):db._root}function child(parent,path){return null===pathGetFront((parent=(0,dist_index_esm.Ku)(parent))._path)?validateRootPathString("child","path",path,!1):validatePathString("child","path",path,!1),new ReferenceImpl(parent._repo,pathChild(parent._path,path))}class ValueEventRegistration{constructor(callbackContext){this.callbackContext=callbackContext}respondsTo(eventType){return"value"===eventType}createEvent(change,query){const index=query._queryParams.getIndex();return new DataEvent("value",this,new DataSnapshot(change.snapshotNode,new ReferenceImpl(query._repo,query._path),index))}getEventRunner(eventData){return"cancel"===eventData.getEventType()?()=>this.callbackContext.onCancel(eventData.error):()=>this.callbackContext.onValue(eventData.snapshot,null)}createCancelEvent(error,path){return this.callbackContext.hasCancelCallback?new CancelEvent(this,error,path):null}matches(other){return other instanceof ValueEventRegistration&&(!other.callbackContext||!this.callbackContext||other.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class ChildEventRegistration{constructor(eventType,callbackContext){this.eventType=eventType,this.callbackContext=callbackContext}respondsTo(eventType){let eventToCheck="children_added"===eventType?"child_added":eventType;return eventToCheck="children_removed"===eventToCheck?"child_removed":eventToCheck,this.eventType===eventToCheck}createCancelEvent(error,path){return this.callbackContext.hasCancelCallback?new CancelEvent(this,error,path):null}createEvent(change,query){(0,dist_index_esm.vA)(null!=change.childName,"Child events should have a childName.");const childRef=child(new ReferenceImpl(query._repo,query._path),change.childName),index=query._queryParams.getIndex();return new DataEvent(change.type,this,new DataSnapshot(change.snapshotNode,childRef,index),change.prevName)}getEventRunner(eventData){return"cancel"===eventData.getEventType()?()=>this.callbackContext.onCancel(eventData.error):()=>this.callbackContext.onValue(eventData.snapshot,eventData.prevName)}matches(other){return other instanceof ChildEventRegistration&&(this.eventType===other.eventType&&(!this.callbackContext||!other.callbackContext||this.callbackContext.matches(other.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function addEventListener(query,eventType,callback,cancelCallbackOrListenOptions,options){let cancelCallback;if("object"==typeof cancelCallbackOrListenOptions&&(cancelCallback=void 0,options=cancelCallbackOrListenOptions),"function"==typeof cancelCallbackOrListenOptions&&(cancelCallback=cancelCallbackOrListenOptions),options&&options.onlyOnce){const userCallback=callback,onceCallback=(dataSnapshot,previousChildName)=>{repoRemoveEventCallbackForQuery(query._repo,query,container),userCallback(dataSnapshot,previousChildName)};onceCallback.userCallback=callback.userCallback,onceCallback.context=callback.context,callback=onceCallback}const callbackContext=new CallbackContext(callback,cancelCallback||void 0),container="value"===eventType?new ValueEventRegistration(callbackContext):new ChildEventRegistration(eventType,callbackContext);return function repoAddEventCallbackForQuery(repo,query,eventRegistration){let events;events=".info"===pathGetFront(query._path)?syncTreeAddEventRegistration(repo.infoSyncTree_,query,eventRegistration):syncTreeAddEventRegistration(repo.serverSyncTree_,query,eventRegistration),eventQueueRaiseEventsAtPath(repo.eventQueue_,query._path,events)}(query._repo,query,container),()=>repoRemoveEventCallbackForQuery(query._repo,query,container)}function onValue(query,callback,cancelCallbackOrListenOptions,options){return addEventListener(query,"value",callback,cancelCallbackOrListenOptions,options)}!function syncPointSetReferenceConstructor(val){(0,dist_index_esm.vA)(!referenceConstructor$1,"__referenceConstructor has already been defined"),referenceConstructor$1=val}(ReferenceImpl),function syncTreeSetReferenceConstructor(val){(0,dist_index_esm.vA)(!referenceConstructor,"__referenceConstructor has already been defined"),referenceConstructor=val}(ReferenceImpl);const repos={};let useRestClient=!1;function repoManagerDatabaseFromApp(app,authProvider,appCheckProvider,url,nodeAdmin){let dbUrl=url||app.options.databaseURL;void 0===dbUrl&&(app.options.projectId||fatal("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),log("Using default host for project ",app.options.projectId),dbUrl=`${app.options.projectId}-default-rtdb.firebaseio.com`);let isEmulator,dbEmulatorHost,parsedUrl=parseRepoInfo(dbUrl,nodeAdmin),repoInfo=parsedUrl.repoInfo;void 0!==process&&process.env&&(dbEmulatorHost=process.env.FIREBASE_DATABASE_EMULATOR_HOST),dbEmulatorHost?(isEmulator=!0,dbUrl=`http://${dbEmulatorHost}?ns=${repoInfo.namespace}`,parsedUrl=parseRepoInfo(dbUrl,nodeAdmin),repoInfo=parsedUrl.repoInfo):isEmulator=!parsedUrl.repoInfo.secure;const authTokenProvider=nodeAdmin&&isEmulator?new EmulatorTokenProvider(EmulatorTokenProvider.OWNER):new FirebaseAuthTokenProvider(app.name,app.options,authProvider);validateUrl("Invalid Firebase Database URL",parsedUrl),pathIsEmpty(parsedUrl.path)||fatal("Database URL must point to the root of a Firebase Database (not including a child path).");const repo=function repoManagerCreateRepo(repoInfo,app,authTokenProvider,appCheckProvider){let appRepos=repos[app.name];appRepos||(appRepos={},repos[app.name]=appRepos);let repo=appRepos[repoInfo.toURLString()];repo&&fatal("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return repo=new Repo(repoInfo,useRestClient,authTokenProvider,appCheckProvider),appRepos[repoInfo.toURLString()]=repo,repo}(repoInfo,app,authTokenProvider,new AppCheckTokenProvider(app,appCheckProvider));return new Database(repo,app)}class Database{constructor(_repoInternal,app){this._repoInternal=_repoInternal,this.app=app,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(repoStart(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ReferenceImpl(this._repo,newEmptyPath())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function repoManagerDeleteRepo(repo,appName){const appRepos=repos[appName];appRepos&&appRepos[repo.key]===repo||fatal(`Database ${appName}(${repo.repoInfo_}) has already been deleted.`),repoInterrupt(repo),delete appRepos[repo.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(apiName){null===this._rootInternal&&fatal("Cannot call "+apiName+" on a deleted database.")}}function getDatabase(app=(0,index_esm.Sx)(),url){const db=(0,index_esm.j6)(app,"database").getImmediate({identifier:url});if(!db._instanceStarted){const emulator=(0,dist_index_esm.yU)("database");emulator&&function connectDatabaseEmulator(db,host,port,options={}){db=(0,dist_index_esm.Ku)(db),db._checkNotDeleted("useEmulator");const hostAndPort=`${host}:${port}`,repo=db._repoInternal;if(db._instanceStarted){if(hostAndPort===db._repoInternal.repoInfo_.host&&(0,dist_index_esm.bD)(options,repo.repoInfo_.emulatorOptions))return;fatal("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let tokenProvider;if(repo.repoInfo_.nodeAdmin)options.mockUserToken&&fatal('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),tokenProvider=new EmulatorTokenProvider(EmulatorTokenProvider.OWNER);else if(options.mockUserToken){const token="string"==typeof options.mockUserToken?options.mockUserToken:(0,dist_index_esm.Fy)(options.mockUserToken,db.app.options.projectId);tokenProvider=new EmulatorTokenProvider(token)}(0,dist_index_esm.zJ)(host)&&((0,dist_index_esm.gE)(host),(0,dist_index_esm.P1)("Database",!0));!function repoManagerApplyEmulatorSettings(repo,hostAndPort,emulatorOptions,tokenProvider){const portIndex=hostAndPort.lastIndexOf(":"),host=hostAndPort.substring(0,portIndex),useSsl=(0,dist_index_esm.zJ)(host);repo.repoInfo_=new RepoInfo(hostAndPort,useSsl,repo.repoInfo_.namespace,repo.repoInfo_.webSocketOnly,repo.repoInfo_.nodeAdmin,repo.repoInfo_.persistenceKey,repo.repoInfo_.includeNamespaceInQueryParams,!0,emulatorOptions),tokenProvider&&(repo.authTokenProvider_=tokenProvider)}(repo,hostAndPort,options,tokenProvider)}(db,...emulator)}return db}PersistentConnection.prototype.simpleListen=function(pathString,onComplete){this.sendRequest("q",{p:pathString},onComplete)},PersistentConnection.prototype.echo=function(data,onEcho){this.sendRequest("echo",{d:data},onEcho)};!function registerDatabase(variant){setSDKVersion(index_esm.MF),(0,index_esm.om)(new esm_index_esm.uA("database",(container,{instanceIdentifier:url})=>repoManagerDatabaseFromApp(container.getProvider("app").getImmediate(),container.getProvider("auth-internal"),container.getProvider("app-check-internal"),url),"PUBLIC").setMultipleInstances(!0)),(0,index_esm.KO)("@firebase/database","1.1.0",variant),(0,index_esm.KO)("@firebase/database","1.1.0","esm2020")}()},"./node_modules/firebase/firestore/dist/esm/index.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H9:()=>doc,aU:()=>getFirestore,O5:()=>serverTimestamp,mZ:()=>updateDoc});var Integer,index_esm=__webpack_require__("./node_modules/@firebase/app/dist/esm/index.esm.js"),esm_index_esm=__webpack_require__("./node_modules/@firebase/component/dist/esm/index.esm.js"),dist_esm_index_esm=__webpack_require__("./node_modules/@firebase/logger/dist/esm/index.esm.js"),dist_index_esm=__webpack_require__("./node_modules/@firebase/util/dist/index.esm.js"),commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:{},bloom_blob_es2018={};(function(){var h;function m(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(d,a,c){c||(c=0);const f=Array(16);if("string"==typeof a)for(var e=0;e<16;++e)f[e]=a.charCodeAt(c++)|a.charCodeAt(c++)<<8|a.charCodeAt(c++)<<16|a.charCodeAt(c++)<<24;else for(e=0;e<16;++e)f[e]=a[c++]|a[c++]<<8|a[c++]<<16|a[c++]<<24;a=d.g[0],c=d.g[1],e=d.g[2];let b,g=d.g[3];b=a+(g^c&(e^g))+f[0]+3614090360&4294967295,b=g+(e^(a=c+(b<<7&4294967295|b>>>25))&(c^e))+f[1]+3905402710&4294967295,g=a+(b<<12&4294967295|b>>>20),b=e+(c^g&(a^c))+f[2]+606105819&4294967295,b=c+(a^(e=g+(b<<17&4294967295|b>>>15))&(g^a))+f[3]+3250441966&4294967295,b=a+(g^(c=e+(b<<22&4294967295|b>>>10))&(e^g))+f[4]+4118548399&4294967295,b=g+(e^(a=c+(b<<7&4294967295|b>>>25))&(c^e))+f[5]+1200080426&4294967295,g=a+(b<<12&4294967295|b>>>20),b=e+(c^g&(a^c))+f[6]+2821735955&4294967295,b=c+(a^(e=g+(b<<17&4294967295|b>>>15))&(g^a))+f[7]+4249261313&4294967295,b=a+(g^(c=e+(b<<22&4294967295|b>>>10))&(e^g))+f[8]+1770035416&4294967295,b=g+(e^(a=c+(b<<7&4294967295|b>>>25))&(c^e))+f[9]+2336552879&4294967295,g=a+(b<<12&4294967295|b>>>20),b=e+(c^g&(a^c))+f[10]+4294925233&4294967295,b=c+(a^(e=g+(b<<17&4294967295|b>>>15))&(g^a))+f[11]+2304563134&4294967295,b=a+(g^(c=e+(b<<22&4294967295|b>>>10))&(e^g))+f[12]+1804603682&4294967295,b=g+(e^(a=c+(b<<7&4294967295|b>>>25))&(c^e))+f[13]+4254626195&4294967295,g=a+(b<<12&4294967295|b>>>20),b=e+(c^g&(a^c))+f[14]+2792965006&4294967295,b=c+(a^(e=g+(b<<17&4294967295|b>>>15))&(g^a))+f[15]+1236535329&4294967295,b=a+(e^g&((c=e+(b<<22&4294967295|b>>>10))^e))+f[1]+4129170786&4294967295,b=g+(c^e&((a=c+(b<<5&4294967295|b>>>27))^c))+f[6]+3225465664&4294967295,g=a+(b<<9&4294967295|b>>>23),b=e+(a^c&(g^a))+f[11]+643717713&4294967295,b=c+(g^a&((e=g+(b<<14&4294967295|b>>>18))^g))+f[0]+3921069994&4294967295,b=a+(e^g&((c=e+(b<<20&4294967295|b>>>12))^e))+f[5]+3593408605&4294967295,b=g+(c^e&((a=c+(b<<5&4294967295|b>>>27))^c))+f[10]+38016083&4294967295,g=a+(b<<9&4294967295|b>>>23),b=e+(a^c&(g^a))+f[15]+3634488961&4294967295,b=c+(g^a&((e=g+(b<<14&4294967295|b>>>18))^g))+f[4]+3889429448&4294967295,b=a+(e^g&((c=e+(b<<20&4294967295|b>>>12))^e))+f[9]+568446438&4294967295,b=g+(c^e&((a=c+(b<<5&4294967295|b>>>27))^c))+f[14]+3275163606&4294967295,g=a+(b<<9&4294967295|b>>>23),b=e+(a^c&(g^a))+f[3]+4107603335&4294967295,b=c+(g^a&((e=g+(b<<14&4294967295|b>>>18))^g))+f[8]+1163531501&4294967295,b=a+(e^g&((c=e+(b<<20&4294967295|b>>>12))^e))+f[13]+2850285829&4294967295,b=g+(c^e&((a=c+(b<<5&4294967295|b>>>27))^c))+f[2]+4243563512&4294967295,g=a+(b<<9&4294967295|b>>>23),b=e+(a^c&(g^a))+f[7]+1735328473&4294967295,b=c+(g^a&((e=g+(b<<14&4294967295|b>>>18))^g))+f[12]+2368359562&4294967295,b=a+((c=e+(b<<20&4294967295|b>>>12))^e^g)+f[5]+4294588738&4294967295,b=g+((a=c+(b<<4&4294967295|b>>>28))^c^e)+f[8]+2272392833&4294967295,g=a+(b<<11&4294967295|b>>>21),b=e+(g^a^c)+f[11]+1839030562&4294967295,b=c+((e=g+(b<<16&4294967295|b>>>16))^g^a)+f[14]+4259657740&4294967295,b=a+((c=e+(b<<23&4294967295|b>>>9))^e^g)+f[1]+2763975236&4294967295,b=g+((a=c+(b<<4&4294967295|b>>>28))^c^e)+f[4]+1272893353&4294967295,g=a+(b<<11&4294967295|b>>>21),b=e+(g^a^c)+f[7]+4139469664&4294967295,b=c+((e=g+(b<<16&4294967295|b>>>16))^g^a)+f[10]+3200236656&4294967295,b=a+((c=e+(b<<23&4294967295|b>>>9))^e^g)+f[13]+681279174&4294967295,b=g+((a=c+(b<<4&4294967295|b>>>28))^c^e)+f[0]+3936430074&4294967295,g=a+(b<<11&4294967295|b>>>21),b=e+(g^a^c)+f[3]+3572445317&4294967295,b=c+((e=g+(b<<16&4294967295|b>>>16))^g^a)+f[6]+76029189&4294967295,b=a+((c=e+(b<<23&4294967295|b>>>9))^e^g)+f[9]+3654602809&4294967295,b=g+((a=c+(b<<4&4294967295|b>>>28))^c^e)+f[12]+3873151461&4294967295,g=a+(b<<11&4294967295|b>>>21),b=e+(g^a^c)+f[15]+530742520&4294967295,b=c+((e=g+(b<<16&4294967295|b>>>16))^g^a)+f[2]+3299628645&4294967295,b=a+(e^((c=e+(b<<23&4294967295|b>>>9))|~g))+f[0]+4096336452&4294967295,b=g+(c^((a=c+(b<<6&4294967295|b>>>26))|~e))+f[7]+1126891415&4294967295,g=a+(b<<10&4294967295|b>>>22),b=e+(a^(g|~c))+f[14]+2878612391&4294967295,b=c+(g^((e=g+(b<<15&4294967295|b>>>17))|~a))+f[5]+4237533241&4294967295,b=a+(e^((c=e+(b<<21&4294967295|b>>>11))|~g))+f[12]+1700485571&4294967295,b=g+(c^((a=c+(b<<6&4294967295|b>>>26))|~e))+f[3]+2399980690&4294967295,g=a+(b<<10&4294967295|b>>>22),b=e+(a^(g|~c))+f[10]+4293915773&4294967295,b=c+(g^((e=g+(b<<15&4294967295|b>>>17))|~a))+f[1]+2240044497&4294967295,b=a+(e^((c=e+(b<<21&4294967295|b>>>11))|~g))+f[8]+1873313359&4294967295,b=g+(c^((a=c+(b<<6&4294967295|b>>>26))|~e))+f[15]+4264355552&4294967295,g=a+(b<<10&4294967295|b>>>22),b=e+(a^(g|~c))+f[6]+2734768916&4294967295,b=c+(g^((e=g+(b<<15&4294967295|b>>>17))|~a))+f[13]+1309151649&4294967295,b=a+(e^((c=e+(b<<21&4294967295|b>>>11))|~g))+f[4]+4149444226&4294967295,b=g+(c^((a=c+(b<<6&4294967295|b>>>26))|~e))+f[11]+3174756917&4294967295,g=a+(b<<10&4294967295|b>>>22),b=e+(a^(g|~c))+f[2]+718787259&4294967295,b=c+(g^((e=g+(b<<15&4294967295|b>>>17))|~a))+f[9]+3951481745&4294967295,d.g[0]=d.g[0]+a&4294967295,d.g[1]=d.g[1]+(e+(b<<21&4294967295|b>>>11))&4294967295,d.g[2]=d.g[2]+e&4294967295,d.g[3]=d.g[3]+g&4294967295}function t(d,a){this.h=a;const c=[];let f=!0;for(let e=d.length-1;e>=0;e--){const g=0|d[e];f&&g==a||(c[e]=g,f=!1)}this.g=c}!function k(d,a){function c(){}c.prototype=a.prototype,d.F=a.prototype,d.prototype=new c,d.prototype.constructor=d,d.D=function(f,e,g){for(var b=Array(arguments.length-2),r=2;r<arguments.length;r++)b[r-2]=arguments[r];return a.prototype[e].apply(f,b)}}(m,function l(){this.blockSize=-1}),m.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},m.prototype.v=function(d,a){void 0===a&&(a=d.length);const c=a-this.blockSize,f=this.C;let e=this.h,g=0;for(;g<a;){if(0==e)for(;g<=c;)n(this,d,g),g+=this.blockSize;if("string"==typeof d){for(;g<a;)if(f[e++]=d.charCodeAt(g++),e==this.blockSize){n(this,f),e=0;break}}else for(;g<a;)if(f[e++]=d[g++],e==this.blockSize){n(this,f),e=0;break}}this.h=e,this.o+=a},m.prototype.A=function(){var d=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);d[0]=128;for(var a=1;a<d.length-8;++a)d[a]=0;a=8*this.o;for(var c=d.length-8;c<d.length;++c)d[c]=255&a,a/=256;for(this.v(d),d=Array(16),a=0,c=0;c<4;++c)for(let f=0;f<32;f+=8)d[a++]=this.g[c]>>>f&255;return d};var q={};function u(d){return-128<=d&&d<128?function p(d,a){var c=q;return Object.prototype.hasOwnProperty.call(c,d)?c[d]:c[d]=a(d)}(d,function(a){return new t([0|a],a<0?-1:0)}):new t([0|d],d<0?-1:0)}function v(d){if(isNaN(d)||!isFinite(d))return w;if(d<0)return x(v(-d));const a=[];let c=1;for(let f=0;d>=c;f++)a[f]=d/c|0,c*=4294967296;return new t(a,0)}var w=u(0),z=u(1),A=u(16777216);function C(d){if(0!=d.h)return!1;for(let a=0;a<d.g.length;a++)if(0!=d.g[a])return!1;return!0}function B(d){return-1==d.h}function x(d){const a=d.g.length,c=[];for(let f=0;f<a;f++)c[f]=~d.g[f];return new t(c,~d.h).add(z)}function F(d,a){return d.add(x(a))}function G(d,a){for(;(65535&d[a])!=d[a];)d[a+1]+=d[a]>>>16,d[a]&=65535,a++}function H(d,a){this.g=d,this.h=a}function D(d,a){if(C(a))throw Error("division by zero");if(C(d))return new H(w,w);if(B(d))return a=D(x(d),a),new H(x(a.g),x(a.h));if(B(a))return a=D(d,x(a)),new H(x(a.g),a.h);if(d.g.length>30){if(B(d)||B(a))throw Error("slowDivide_ only works with positive integers.");for(var c=z,f=a;f.l(d)<=0;)c=I(c),f=I(f);var e=J(c,1),g=J(f,1);for(f=J(f,2),c=J(c,2);!C(f);){var b=g.add(f);b.l(d)<=0&&(e=e.add(c),g=b),f=J(f,1),c=J(c,1)}return a=F(d,e.j(a)),new H(e,a)}for(e=w;d.l(a)>=0;){for(c=Math.max(1,Math.floor(d.m()/a.m())),f=(f=Math.ceil(Math.log(c)/Math.LN2))<=48?1:Math.pow(2,f-48),b=(g=v(c)).j(a);B(b)||b.l(d)>0;)b=(g=v(c-=f)).j(a);C(g)&&(g=z),e=e.add(g),d=F(d,b)}return new H(e,d)}function I(d){const a=d.g.length+1,c=[];for(let f=0;f<a;f++)c[f]=d.i(f)<<1|d.i(f-1)>>>31;return new t(c,d.h)}function J(d,a){const c=a>>5;a%=32;const f=d.g.length-c,e=[];for(let g=0;g<f;g++)e[g]=a>0?d.i(g+c)>>>a|d.i(g+c+1)<<32-a:d.i(g+c);return new t(e,d.h)}(h=t.prototype).m=function(){if(B(this))return-x(this).m();let d=0,a=1;for(let c=0;c<this.g.length;c++){const f=this.i(c);d+=(f>=0?f:4294967296+f)*a,a*=4294967296}return d},h.toString=function(d){if((d=d||10)<2||36<d)throw Error("radix out of range: "+d);if(C(this))return"0";if(B(this))return"-"+x(this).toString(d);const a=v(Math.pow(d,6));var c=this;let f="";for(;;){const e=D(c,a).g;let g=(((c=F(c,e.j(a))).g.length>0?c.g[0]:c.h)>>>0).toString(d);if(C(c=e))return g+f;for(;g.length<6;)g="0"+g;f=g+f}},h.i=function(d){return d<0?0:d<this.g.length?this.g[d]:this.h},h.l=function(d){return B(d=F(this,d))?-1:C(d)?0:1},h.abs=function(){return B(this)?x(this):this},h.add=function(d){const a=Math.max(this.g.length,d.g.length),c=[];let f=0;for(let e=0;e<=a;e++){let g=f+(65535&this.i(e))+(65535&d.i(e)),b=(g>>>16)+(this.i(e)>>>16)+(d.i(e)>>>16);f=b>>>16,g&=65535,b&=65535,c[e]=b<<16|g}return new t(c,-2147483648&c[c.length-1]?-1:0)},h.j=function(d){if(C(this)||C(d))return w;if(B(this))return B(d)?x(this).j(x(d)):x(x(this).j(d));if(B(d))return x(this.j(x(d)));if(this.l(A)<0&&d.l(A)<0)return v(this.m()*d.m());const a=this.g.length+d.g.length,c=[];for(var f=0;f<2*a;f++)c[f]=0;for(f=0;f<this.g.length;f++)for(let e=0;e<d.g.length;e++){const g=this.i(f)>>>16,b=65535&this.i(f),r=d.i(e)>>>16,E=65535&d.i(e);c[2*f+2*e]+=b*E,G(c,2*f+2*e),c[2*f+2*e+1]+=g*E,G(c,2*f+2*e+1),c[2*f+2*e+1]+=b*r,G(c,2*f+2*e+1),c[2*f+2*e+2]+=g*r,G(c,2*f+2*e+2)}for(d=0;d<a;d++)c[d]=c[2*d+1]<<16|c[2*d];for(d=a;d<2*a;d++)c[d]=0;return new t(c,0)},h.B=function(d){return D(this,d).h},h.and=function(d){const a=Math.max(this.g.length,d.g.length),c=[];for(let f=0;f<a;f++)c[f]=this.i(f)&d.i(f);return new t(c,this.h&d.h)},h.or=function(d){const a=Math.max(this.g.length,d.g.length),c=[];for(let f=0;f<a;f++)c[f]=this.i(f)|d.i(f);return new t(c,this.h|d.h)},h.xor=function(d){const a=Math.max(this.g.length,d.g.length),c=[];for(let f=0;f<a;f++)c[f]=this.i(f)^d.i(f);return new t(c,this.h^d.h)},m.prototype.digest=m.prototype.A,m.prototype.reset=m.prototype.u,m.prototype.update=m.prototype.v,bloom_blob_es2018.Md5=m,t.prototype.add=t.prototype.add,t.prototype.multiply=t.prototype.j,t.prototype.modulo=t.prototype.B,t.prototype.compare=t.prototype.l,t.prototype.toNumber=t.prototype.m,t.prototype.toString=t.prototype.toString,t.prototype.getBits=t.prototype.i,t.fromNumber=v,t.fromString=function y(d,a){if(0==d.length)throw Error("number format error: empty string");if((a=a||10)<2||36<a)throw Error("radix out of range: "+a);if("-"==d.charAt(0))return x(y(d.substring(1),a));if(d.indexOf("-")>=0)throw Error('number format error: interior "-" character');const c=v(Math.pow(a,8));let f=w;for(let g=0;g<d.length;g+=8){var e=Math.min(8,d.length-g);const b=parseInt(d.substring(g,g+e),a);e<8?(e=v(Math.pow(a,e)),f=f.j(e).add(v(b))):(f=f.j(c),f=f.add(v(b)))}return f},Integer=bloom_blob_es2018.Integer=t}).apply(void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var XhrIo,WebChannel,EventType,ErrorCode,Stat,Event,getStatEventTarget,createWebChannelTransport,webchannel_blob_es2018_commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:{},webchannel_blob_es2018={};(function(){var h,aa=Object.defineProperty;var ca=function ba(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof webchannel_blob_es2018_commonjsGlobal&&webchannel_blob_es2018_commonjsGlobal];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object")}(this);function da(a,b){if(b)a:{var c=ca;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))break a;c=c[e]}(b=b(d=c[a=a[a.length-1]]))!=d&&null!=b&&aa(c,a,{configurable:!0,writable:!0,value:b})}}da("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),da("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),da("Object.entries",function(a){return a||function(b){var d,c=[];for(d in b)Object.prototype.hasOwnProperty.call(b,d)&&c.push([d,b[d]]);return c}});var ea=ea||{},l=this||self;function n(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function fa(a,b,c){return a.call.apply(a.bind,arguments)}function p(a,b,c){return(p=fa).apply(null,arguments)}function ha(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var d=c.slice();return d.push.apply(d,arguments),a.apply(this,d)}}function t(a,b){function c(){}c.prototype=b.prototype,a.Z=b.prototype,a.prototype=new c,a.prototype.constructor=a,a.Ob=function(d,e,f){for(var g=Array(arguments.length-2),k=2;k<arguments.length;k++)g[k-2]=arguments[k];return b.prototype[e].apply(d,g)}}var ia="undefined"!=typeof AsyncContext&&"function"==typeof AsyncContext.Snapshot?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function ja(a){const b=a.length;if(b>0){const c=Array(b);for(let d=0;d<b;d++)c[d]=a[d];return c}return[]}function ka(a,b){for(let d=1;d<arguments.length;d++){const e=arguments[d];var c=typeof e;if("array"==(c="object"!=c?c:e?Array.isArray(e)?"array":c:"null")||"object"==c&&"number"==typeof e.length){c=a.length||0;const f=e.length||0;a.length=c+f;for(let g=0;g<f;g++)a[c+g]=e[g]}else a.push(e)}}function ma(a){l.setTimeout(()=>{throw a},0)}function na(){var a=oa;let b=null;return a.g&&(b=a.g,a.g=a.g.next,a.g||(a.h=null),b.next=null),b}var qa=new class la{constructor(a,b){this.i=a,this.j=b,this.h=0,this.g=null}get(){let a;return this.h>0?(this.h--,a=this.g,this.g=a.next,a.next=null):a=this.i(),a}}(()=>new ra,a=>a.reset());class ra{constructor(){this.next=this.g=this.h=null}set(a,b){this.h=a,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let u,v=!1,oa=new class pa{constructor(){this.h=this.g=null}add(a,b){const c=qa.get();c.set(a,b),this.h?this.h.next=c:this.g=c,this.h=c}},ta=()=>{const a=Promise.resolve(void 0);u=()=>{a.then(sa)}};function sa(){for(var a;a=na();){try{a.h.call(a.g)}catch(c){ma(c)}var b=qa;b.j(a),b.h<100&&(b.h++,a.next=b.g,b.g=a)}v=!1}function w(){this.u=this.u,this.C=this.C}function x(a,b){this.type=a,this.g=this.target=b,this.defaultPrevented=!1}w.prototype.u=!1,w.prototype.dispose=function(){this.u||(this.u=!0,this.N())},w.prototype[Symbol.dispose]=function(){this.dispose()},w.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},x.prototype.h=function(){this.defaultPrevented=!0};var ua=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const c=()=>{};l.addEventListener("test",c,b),l.removeEventListener("test",c,b)}catch(c){}return a}();function y(a){return/^[\s\xa0]*$/.test(a)}function z(a,b){x.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,b)}t(z,x),z.prototype.init=function(a,b){const c=this.type=a.type,d=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=b,(b=a.relatedTarget)||("mouseover"==c?b=a.fromElement:"mouseout"==c&&(b=a.toElement)),this.relatedTarget=b,d?(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&z.Z.h.call(this)},z.prototype.h=function(){z.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var B="closure_listenable_"+(1e6*Math.random()|0),va=0;function wa(a,b,c,d,e){this.listener=a,this.proxy=null,this.src=b,this.type=c,this.capture=!!d,this.ha=e,this.key=++va,this.da=this.fa=!1}function xa(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function ya(a,b,c){for(const d in a)b.call(c,a[d],d,a)}function Ba(a){const b={};for(const c in a)b[c]=a[c];return b}const Ca="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Da(a,b){let c,d;for(let e=1;e<arguments.length;e++){for(c in d=arguments[e],d)a[c]=d[c];for(let f=0;f<Ca.length;f++)c=Ca[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}function Ea(a){this.src=a,this.g={},this.h=0}function Ga(a,b){const c=b.type;if(c in a.g){var f,d=a.g[c],e=Array.prototype.indexOf.call(d,b,void 0);(f=e>=0)&&Array.prototype.splice.call(d,e,1),f&&(xa(b),0==a.g[c].length&&(delete a.g[c],a.h--))}}function Fa(a,b,c,d){for(let e=0;e<a.length;++e){const f=a[e];if(!f.da&&f.listener==b&&f.capture==!!c&&f.ha==d)return e}return-1}Ea.prototype.add=function(a,b,c,d,e){const f=a.toString();(a=this.g[f])||(a=this.g[f]=[],this.h++);const g=Fa(a,b,d,e);return g>-1?(b=a[g],c||(b.fa=!1)):((b=new wa(b,this.src,f,!!d,e)).fa=c,a.push(b)),b};var Ha="closure_lm_"+(1e6*Math.random()|0),Ia={};function Ka(a,b,c,d,e){if(d&&d.once)return La(a,b,c,d,e);if(Array.isArray(b)){for(let f=0;f<b.length;f++)Ka(a,b[f],c,d,e);return null}return c=Ma(c),a&&a[B]?a.J(b,c,n(d)?!!d.capture:!!d,e):Na(a,b,c,!1,d,e)}function Na(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");const g=n(e)?!!e.capture:!!e;let k=Oa(a);if(k||(a[Ha]=k=new Ea(a)),(c=k.add(b,c,d,g,f)).proxy)return c;if(d=function Pa(){function a(c){return b.call(a.src,a.listener,c)}const b=Ra;return a}(),c.proxy=d,d.src=a,d.listener=c,a.addEventListener)ua||(e=g),void 0===e&&(e=!1),a.addEventListener(b.toString(),d,e);else if(a.attachEvent)a.attachEvent(Qa(b.toString()),d);else{if(!a.addListener||!a.removeListener)throw Error("addEventListener and attachEvent are unavailable.");a.addListener(d)}return c}function La(a,b,c,d,e){if(Array.isArray(b)){for(let f=0;f<b.length;f++)La(a,b[f],c,d,e);return null}return c=Ma(c),a&&a[B]?a.K(b,c,n(d)?!!d.capture:!!d,e):Na(a,b,c,!0,d,e)}function Sa(a,b,c,d,e){if(Array.isArray(b))for(var f=0;f<b.length;f++)Sa(a,b[f],c,d,e);else d=n(d)?!!d.capture:!!d,c=Ma(c),a&&a[B]?(a=a.i,(f=String(b).toString())in a.g&&((c=Fa(b=a.g[f],c,d,e))>-1&&(xa(b[c]),Array.prototype.splice.call(b,c,1),0==b.length&&(delete a.g[f],a.h--)))):a&&(a=Oa(a))&&(b=a.g[b.toString()],a=-1,b&&(a=Fa(b,c,d,e)),(c=a>-1?b[a]:null)&&Ta(c))}function Ta(a){if("number"!=typeof a&&a&&!a.da){var b=a.src;if(b&&b[B])Ga(b.i,a);else{var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent?b.detachEvent(Qa(c),d):b.addListener&&b.removeListener&&b.removeListener(d),(c=Oa(b))?(Ga(c,a),0==c.h&&(c.src=null,b[Ha]=null)):xa(a)}}}function Qa(a){return a in Ia?Ia[a]:Ia[a]="on"+a}function Ra(a,b){if(a.da)a=!0;else{b=new z(b,this);const c=a.listener,d=a.ha||a.src;a.fa&&Ta(a),a=c.call(d,b)}return a}function Oa(a){return(a=a[Ha])instanceof Ea?a:null}var Ua="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ma(a){return"function"==typeof a?a:(a[Ua]||(a[Ua]=function(b){return a.handleEvent(b)}),a[Ua])}function C(){w.call(this),this.i=new Ea(this),this.M=this,this.G=null}function D(a,b){var c,d=a.G;if(d)for(c=[];d;d=d.G)c.push(d);if(a=a.M,d=b.type||b,"string"==typeof b)b=new x(b,a);else if(b instanceof x)b.target=b.target||a;else{var e=b;Da(b=new x(d,a),e)}let f,g;if(e=!0,c)for(g=c.length-1;g>=0;g--)f=b.g=c[g],e=Va(f,d,!0,b)&&e;if(f=b.g=a,e=Va(f,d,!0,b)&&e,e=Va(f,d,!1,b)&&e,c)for(g=0;g<c.length;g++)f=b.g=c[g],e=Va(f,d,!1,b)&&e}function Va(a,b,c,d){if(!(b=a.i.g[String(b)]))return!0;b=b.concat();let e=!0;for(let f=0;f<b.length;++f){const g=b[f];if(g&&!g.da&&g.capture==c){const k=g.listener,q=g.ha||g.src;g.fa&&Ga(a.i,g),e=!1!==k.call(q,d)&&e}}return e&&!d.defaultPrevented}function Xa(a){a.g=function Wa(a,b){if("function"!=typeof a){if(!a||"function"!=typeof a.handleEvent)throw Error("Invalid listener argument");a=p(a.handleEvent,a)}return Number(b)>2147483647?-1:l.setTimeout(a,b||0)}(()=>{a.g=null,a.i&&(a.i=!1,Xa(a))},a.l);const b=a.h;a.h=null,a.m.apply(null,b)}t(C,w),C.prototype[B]=!0,C.prototype.removeEventListener=function(a,b,c,d){Sa(this,a,b,c,d)},C.prototype.N=function(){if(C.Z.N.call(this),this.i){var a=this.i;for(const c in a.g){const d=a.g[c];for(let e=0;e<d.length;e++)xa(d[e]);delete a.g[c],a.h--}}this.G=null},C.prototype.J=function(a,b,c,d){return this.i.add(String(a),b,!1,c,d)},C.prototype.K=function(a,b,c,d){return this.i.add(String(a),b,!0,c,d)};class Ya extends w{constructor(a,b){super(),this.m=a,this.l=b,this.h=null,this.i=!1,this.g=null}j(a){this.h=arguments,this.g?this.i=!0:Xa(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function E(a){w.call(this),this.h=a,this.g={}}t(E,w);var Za=[];function $a(a){ya(a.g,function(b,c){this.g.hasOwnProperty(c)&&Ta(b)},a),a.g={}}E.prototype.N=function(){E.Z.N.call(this),$a(this)},E.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ab=l.JSON.stringify,cb=l.JSON.parse,db=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function eb(){}function fb(){}var H={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function gb(){x.call(this,"d")}function hb(){x.call(this,"c")}t(gb,x),t(hb,x);var I={},ib=null;function jb(){return ib=ib||new C}function kb(a){x.call(this,I.Ia,a)}function lb(a){const b=jb();D(b,new kb(b))}function mb(a,b){x.call(this,I.STAT_EVENT,a),this.stat=b}function J(a){const b=jb();D(b,new mb(b,a))}function nb(a,b){x.call(this,I.Ja,a),this.size=b}function ob(a,b){if("function"!=typeof a)throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},b)}function pb(){this.g=!0}function K(a,b,c,d){a.info(function(){return"XMLHTTP TEXT ("+b+"): "+function sb(a,b){if(!a.g)return b;if(!b)return null;try{const f=JSON.parse(b);if(f)for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var c=f[a];if(!(c.length<2)){var d=c[1];if(Array.isArray(d)&&!(d.length<1)){var e=d[0];if("noop"!=e&&"stop"!=e&&"close"!=e)for(let g=1;g<d.length;g++)d[g]=""}}}return ab(f)}catch(f){return b}}(a,c)+(d?" "+d:"")})}I.Ia="serverreachability",t(kb,x),I.STAT_EVENT="statevent",t(mb,x),I.Ja="timingevent",t(nb,x),pb.prototype.ua=function(){this.g=!1},pb.prototype.info=function(){};var wb,ub={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},vb={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function xb(){}function L(a){return encodeURIComponent(String(a))}function yb(a){var b=1;a=a.split(":");const c=[];for(;b>0&&a.length;)c.push(a.shift()),b--;return a.length&&c.push(a.join(":")),c}function N(a,b,c,d){this.j=a,this.i=b,this.l=c,this.S=d||1,this.V=new E(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new zb}function zb(){this.i=null,this.g="",this.h=!1}t(xb,eb),xb.prototype.g=function(){return new XMLHttpRequest},wb=new xb;var Ab={},Bb={};function Cb(a,b,c){a.M=1,a.A=Db(O(b)),a.u=c,a.R=!0,Eb(a,null)}function Eb(a,b){a.F=Date.now(),Fb(a),a.B=O(a.A);var c=a.B,d=a.S;Array.isArray(d)||(d=[String(d)]),Gb(c.i,"t",d),a.C=0,c=a.j.L,a.h=new zb,a.g=Hb(a.j,c?b:null,!a.u),a.P>0&&(a.O=new Ya(p(a.Y,a,a.g),a.P)),b=a.V,c=a.g,d=a.ba;var e="readystatechange";Array.isArray(e)||(e&&(Za[0]=e.toString()),e=Za);for(let f=0;f<e.length;f++){const g=Ka(c,e[f],d||b.handleEvent,!1,b.h||b);if(!g)break;b.g[g.key]=g}b=a.J?Ba(a.J):{},a.u?(a.v||(a.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,b)):(a.v="GET",a.g.ea(a.B,a.v,null,b)),lb(),function qb(a,b,c,d,e,f){a.info(function(){if(a.g)if(f){var g="",k=f.split("&");for(let m=0;m<k.length;m++){var q=k[m].split("=");if(q.length>1){const r=q[0];q=q[1];const A=r.split("_");g=A.length>=2&&"type"==A[1]?g+(r+"=")+q+"&":g+(r+"=redacted&")}}}else g=null;else g=f;return"XMLHTTP REQ ("+d+") [attempt "+e+"]: "+b+"\n"+c+"\n"+g})}(a.i,a.v,a.B,a.l,a.S,a.u)}function Ob(a){return!!a.g&&("GET"==a.v&&2!=a.M&&a.j.Aa)}function Nb(a,b){var c=a.C,d=b.indexOf("\n",c);return-1==d?Bb:(c=Number(b.substring(c,d)),isNaN(c)?Ab:(d+=1)+c>b.length?Bb:(b=b.slice(d,d+c),a.C=d+c,b))}function Fb(a){a.T=Date.now()+a.H,Sb(a,a.H)}function Sb(a,b){if(null!=a.D)throw Error("WatchDog timer not null");a.D=ob(p(a.aa,a),b)}function Jb(a){a.D&&(l.clearTimeout(a.D),a.D=null)}function Mb(a){0==a.j.I||a.K||Qb(a.j,a)}function Q(a){Jb(a);var b=a.O;b&&"function"==typeof b.dispose&&b.dispose(),a.O=null,$a(a.V),a.g&&(b=a.g,a.g=null,b.abort(),b.dispose())}function Lb(a,b){try{var c=a.j;if(0!=c.I&&(c.g==a||Tb(c.h,a)))if(!a.L&&Tb(c.h,a)&&3==c.I){try{var d=c.Ba.g.parse(b)}catch(m){d=null}if(Array.isArray(d)&&3==d.length){var e=d;if(0==e[0]){a:if(!c.v){if(c.g){if(!(c.g.F+3e3<a.F))break a;Ub(c),Vb(c)}Wb(c),J(18)}}else c.xa=e[1],0<c.xa-c.K&&e[2]<37500&&c.F&&0==c.A&&!c.C&&(c.C=ob(p(c.Va,c),6e3));Xb(c.h)<=1&&c.ta&&(c.ta=void 0)}else R(c,11)}else if((a.L||c.g==a)&&Ub(c),!y(b))for(e=c.Ba.g.parse(b),b=0;b<e.length;b++){let m=e[b];const r=m[0];if(!(r<=c.K))if(c.K=r,m=m[1],2==c.I)if("c"==m[0]){c.M=m[1],c.ba=m[2];const A=m[3];null!=A&&(c.ka=A,c.j.info("VER="+c.ka));const M=m[4];null!=M&&(c.za=M,c.j.info("SVER="+c.za));const F=m[5];null!=F&&"number"==typeof F&&F>0&&(d=1.5*F,c.O=d,c.j.info("backChannelRequestTimeoutMs_="+d)),d=c;const G=a.g;if(G){const za=G.g?G.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(za){var f=d.h;f.g||-1==za.indexOf("spdy")&&-1==za.indexOf("quic")&&-1==za.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(Yb(f,f.h),f.h=null))}if(d.G){const bb=G.g?G.g.getResponseHeader("X-HTTP-Session-Id"):null;bb&&(d.wa=bb,S(d.J,d.G,bb))}}c.I=3,c.l&&c.l.ra(),c.aa&&(c.T=Date.now()-a.F,c.j.info("Handshake RTT: "+c.T+"ms"));var g=a;if((d=c).na=Zb(d,d.L?d.ba:null,d.W),g.L){$b(d.h,g);var k=g,q=d.O;q&&(k.H=q),k.D&&(Jb(k),Fb(k)),d.g=g}else ac(d);c.i.length>0&&bc(c)}else"stop"!=m[0]&&"close"!=m[0]||R(c,7);else 3==c.I&&("stop"==m[0]||"close"==m[0]?"stop"==m[0]?R(c,7):cc(c):"noop"!=m[0]&&c.l&&c.l.qa(m),c.A=0)}lb()}catch(m){}}N.prototype.ba=function(a){a=a.target;const b=this.O;b&&3==P(a)?b.j():this.Y(a)},N.prototype.Y=function(a){try{if(a==this.g)a:{const k=P(this.g),q=this.g.ya();this.g.ca();if(!(k<3)&&(3!=k||this.g&&(this.h.h||this.g.la()||Ib(this.g)))){this.K||4!=k||7==q||lb(),Jb(this);var b=this.g.ca();this.X=b;var c=function Kb(a){if(!Ob(a))return a.g.la();const b=Ib(a.g);if(""===b)return"";let c="";const d=b.length,e=4==P(a.g);if(!a.h.i){if("undefined"==typeof TextDecoder)return Q(a),Mb(a),"";a.h.i=new l.TextDecoder}for(let f=0;f<d;f++)a.h.h=!0,c+=a.h.i.decode(b[f],{stream:!(e&&f==d-1)});return b.length=0,a.h.g+=c,a.C=0,a.h.g}(this);if(this.o=200==b,function rb(a,b,c,d,e,f,g){a.info(function(){return"XMLHTTP RESP ("+d+") [ attempt "+e+"]: "+b+"\n"+c+"\n"+f+" "+g})}(this.i,this.v,this.B,this.l,this.S,k,b),this.o){if(this.U&&!this.L){b:{if(this.g){var d,e=this.g;if((d=e.g?e.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(d)){var f=d;break b}}f=null}if(!(a=f)){this.o=!1,this.m=3,J(12),Q(this),Mb(this);break a}K(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Lb(this,a)}if(this.R){let r;for(a=!0;!this.K&&this.C<c.length;){if(r=Nb(this,c),r==Bb){4==k&&(this.m=4,J(14),a=!1),K(this.i,this.l,null,"[Incomplete Response]");break}if(r==Ab){this.m=4,J(15),K(this.i,this.l,c,"[Invalid Chunk]"),a=!1;break}K(this.i,this.l,r,null),Lb(this,r)}if(Ob(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=k||0!=c.length||this.h.h||(this.m=1,J(16),a=!1),this.o=this.o&&a,a){if(c.length>0&&!this.W){this.W=!0;var g=this.j;g.g==this&&g.aa&&!g.P&&(g.j.info("Great, no buffering proxy detected. Bytes received: "+c.length),Pb(g),g.P=!0,J(11))}}else K(this.i,this.l,c,"[Invalid Chunked Response]"),Q(this),Mb(this)}else K(this.i,this.l,c,null),Lb(this,c);4==k&&Q(this),this.o&&!this.K&&(4==k?Qb(this.j,this):(this.o=!1,Fb(this)))}else(function Rb(a){const b={};a=(a.g&&P(a)>=2&&a.g.getAllResponseHeaders()||"").split("\r\n");for(let d=0;d<a.length;d++){if(y(a[d]))continue;var c=yb(a[d]);const e=c[0];if("string"!=typeof(c=c[1]))continue;c=c.trim();const f=b[e]||[];b[e]=f,f.push(c)}!function Aa(a,b){for(const c in a)b.call(void 0,a[c],c,a)}(b,function(d){return d.join(", ")})})(this.g),400==b&&c.indexOf("Unknown SID")>0?(this.m=3,J(12)):(this.m=0,J(13)),Q(this),Mb(this)}}}catch(k){}},N.prototype.cancel=function(){this.K=!0,Q(this)},N.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(function tb(a,b){a.info(function(){return"TIMEOUT: "+b})}(this.i,this.B),2!=this.M&&(lb(),J(17)),Q(this),this.m=2,Mb(this)):Sb(this,this.T-a)};var dc=class{constructor(a,b){this.g=a,this.map=b}};function ec(a){this.l=a||10,l.PerformanceNavigationTiming?a=(a=l.performance.getEntriesByType("navigation")).length>0&&("hq"==a[0].nextHopProtocol||"h2"==a[0].nextHopProtocol):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function fc(a){return!!a.h||!!a.g&&a.g.size>=a.j}function Xb(a){return a.h?1:a.g?a.g.size:0}function Tb(a,b){return a.h?a.h==b:!!a.g&&a.g.has(b)}function Yb(a,b){a.g?a.g.add(b):a.h=b}function $b(a,b){a.h&&a.h==b?a.h=null:a.g&&a.g.has(b)&&a.g.delete(b)}function hc(a){if(null!=a.h)return a.i.concat(a.h.G);if(null!=a.g&&0!==a.g.size){let b=a.i;for(const c of a.g.values())b=b.concat(c.G);return b}return ja(a.i)}ec.prototype.cancel=function(){if(this.i=hc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const a of this.g.values())a.cancel();this.g.clear()}};var ic=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function T(a){let b;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,a instanceof T?(this.l=a.l,kc(this,a.j),this.o=a.o,this.g=a.g,lc(this,a.u),this.h=a.h,mc(this,nc(a.i)),this.m=a.m):a&&(b=String(a).match(ic))?(this.l=!1,kc(this,b[1]||"",!0),this.o=oc(b[2]||""),this.g=oc(b[3]||"",!0),lc(this,b[4]),this.h=oc(b[5]||"",!0),mc(this,b[6]||"",!0),this.m=oc(b[7]||"")):(this.l=!1,this.i=new pc(null,this.l))}function O(a){return new T(a)}function kc(a,b,c){a.j=c?oc(b,!0):b,a.j&&(a.j=a.j.replace(/:$/,""))}function lc(a,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);a.u=b}else a.u=null}function mc(a,b,c){b instanceof pc?(a.i=b,function vc(a,b){b&&!a.j&&(U(a),a.i=null,a.g.forEach(function(c,d){const e=d.toLowerCase();d!=e&&(yc(this,d),Gb(this,e,c))},a)),a.j=b}(a.i,a.l)):(c||(b=qc(b,wc)),a.i=new pc(b,a.l))}function S(a,b,c){a.i.set(b,c)}function Db(a){return S(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function oc(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function qc(a,b,c){return"string"==typeof a?(a=encodeURI(a).replace(b,xc),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function xc(a){return"%"+((a=a.charCodeAt(0))>>4&15).toString(16)+(15&a).toString(16)}T.prototype.toString=function(){const a=[];var b=this.j;b&&a.push(qc(b,rc,!0),":");var c=this.g;return(c||"file"==b)&&(a.push("//"),(b=this.o)&&a.push(qc(b,rc,!0),"@"),a.push(L(c).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(c=this.u)&&a.push(":",String(c))),(c=this.h)&&(this.g&&"/"!=c.charAt(0)&&a.push("/"),a.push(qc(c,"/"==c.charAt(0)?sc:tc,!0))),(c=this.i.toString())&&a.push("?",c),(c=this.m)&&a.push("#",qc(c,uc)),a.join("")},T.prototype.resolve=function(a){const b=O(this);let c=!!a.j;c?kc(b,a.j):c=!!a.o,c?b.o=a.o:c=!!a.g,c?b.g=a.g:c=null!=a.u;var d=a.h;if(c)lc(b,a.u);else if(c=!!a.h){if("/"!=d.charAt(0))if(this.g&&!this.h)d="/"+d;else{var e=b.h.lastIndexOf("/");-1!=e&&(d=b.h.slice(0,e+1)+d)}if(".."==(e=d)||"."==e)d="";else if(-1!=e.indexOf("./")||-1!=e.indexOf("/.")){d=0==e.lastIndexOf("/",0),e=e.split("/");const f=[];for(let g=0;g<e.length;){const k=e[g++];"."==k?d&&g==e.length&&f.push(""):".."==k?((f.length>1||1==f.length&&""!=f[0])&&f.pop(),d&&g==e.length&&f.push("")):(f.push(k),d=!0)}d=f.join("/")}else d=e}return c?b.h=d:c=""!==a.i.toString(),c?mc(b,nc(a.i)):c=!!a.m,c&&(b.m=a.m),b};var rc=/[#\/\?@]/g,tc=/[#\?:]/g,sc=/[#\?]/g,wc=/[#\?@]/g,uc=/#/g;function pc(a,b){this.h=this.g=null,this.i=a||null,this.j=!!b}function U(a){a.g||(a.g=new Map,a.h=0,a.i&&function jc(a,b){if(a){a=a.split("&");for(let c=0;c<a.length;c++){const d=a[c].indexOf("=");let e,f=null;d>=0?(e=a[c].substring(0,d),f=a[c].substring(d+1)):e=a[c],b(e,f?decodeURIComponent(f.replace(/\+/g," ")):"")}}}(a.i,function(b,c){a.add(decodeURIComponent(b.replace(/\+/g," ")),c)}))}function yc(a,b){U(a),b=V(a,b),a.g.has(b)&&(a.i=null,a.h-=a.g.get(b).length,a.g.delete(b))}function zc(a,b){return U(a),b=V(a,b),a.g.has(b)}function Ac(a,b){U(a);let c=[];if("string"==typeof b)zc(a,b)&&(c=c.concat(a.g.get(V(a,b))));else for(a=Array.from(a.g.values()),b=0;b<a.length;b++)c=c.concat(a[b]);return c}function Gb(a,b,c){yc(a,b),c.length>0&&(a.i=null,a.g.set(V(a,b),ja(c)),a.h+=c.length)}function nc(a){const b=new pc;return b.i=a.i,a.g&&(b.g=new Map(a.g),b.h=a.h),b}function V(a,b){return b=String(b),a.j&&(b=b.toLowerCase()),b}function W(a,b,c,d,e){try{e&&(e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null),d(c)}catch(f){}}function Dc(){this.g=new db}function Ec(a){this.i=a.Sb||null,this.h=a.ab||!1}function Fc(a,b){C.call(this),this.H=a,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function Ic(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}function Hc(a){a.readyState=4,a.l=null,a.j=null,a.B=null,Gc(a)}function Gc(a){a.onreadystatechange&&a.onreadystatechange.call(a)}function Jc(a){let b="";return ya(a,function(c,d){b+=d,b+=":",b+=c,b+="\r\n"}),b}function Kc(a,b,c){a:{for(d in c){var d=!1;break a}d=!0}d||(c=Jc(c),"string"==typeof a?null!=c&&L(c):S(a,b,c))}function X(a){C.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(h=pc.prototype).add=function(a,b){U(this),this.i=null,a=V(this,a);let c=this.g.get(a);return c||this.g.set(a,c=[]),c.push(b),this.h+=1,this},h.forEach=function(a,b){U(this),this.g.forEach(function(c,d){c.forEach(function(e){a.call(b,e,d,this)},this)},this)},h.set=function(a,b){return U(this),this.i=null,zc(this,a=V(this,a))&&(this.h-=this.g.get(a).length),this.g.set(a,[b]),this.h+=1,this},h.get=function(a,b){return a&&(a=Ac(this,a)).length>0?String(a[0]):b},h.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],b=Array.from(this.g.keys());for(let d=0;d<b.length;d++){var c=b[d];const e=L(c);c=Ac(this,c);for(let f=0;f<c.length;f++){let g=e;""!==c[f]&&(g+="="+L(c[f])),a.push(g)}}return this.i=a.join("&")},t(Ec,eb),Ec.prototype.g=function(){return new Fc(this.i,this.h)},t(Fc,C),(h=Fc.prototype).open=function(a,b){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=b,this.readyState=1,Gc(this)},h.send=function(a){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(b.body=a),(this.H||l).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},h.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,Hc(this)),this.readyState=0},h.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Gc(this)),this.g&&(this.readyState=3,Gc(this),this.g)))if("arraybuffer"===this.responseType)a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(void 0!==l.ReadableStream&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ic(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))},h.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var b=a.value?a.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!a.done}))&&(this.response=this.responseText+=b)}a.done?Hc(this):Gc(this),3==this.readyState&&Ic(this)}},h.Oa=function(a){this.g&&(this.response=this.responseText=a,Hc(this))},h.Na=function(a){this.g&&(this.response=a,Hc(this))},h.ga=function(){this.g&&Hc(this)},h.setRequestHeader=function(a,b){this.A.append(a,b)},h.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},h.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],b=this.h.entries();for(var c=b.next();!c.done;)c=c.value,a.push(c[0]+": "+c[1]),c=b.next();return a.join("\r\n")},Object.defineProperty(Fc.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(a){this.m=a?"include":"same-origin"}}),t(X,C);var Lc=/^https?$/i,Mc=["POST","PUT"];function Nc(a,b){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=b,a.o=5,Oc(a),Pc(a)}function Oc(a){a.A||(a.A=!0,D(a,"complete"),D(a,"error"))}function Qc(a){if(a.h&&void 0!==ea)if(a.v&&4==P(a))setTimeout(a.Ca.bind(a),0);else if(D(a,"readystatechange"),4==P(a)){a.h=!1;try{const f=a.ca();a:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break a;default:b=!1}var c;if(!(c=b)){var d;if(d=0===f){let g=String(a.D).match(ic)[1]||null;!g&&l.self&&l.self.location&&(g=l.self.location.protocol.slice(0,-1)),d=!Lc.test(g?g.toLowerCase():"")}c=d}if(c)D(a,"complete"),D(a,"success");else{a.o=6;try{var e=P(a)>2?a.g.statusText:""}catch(g){e=""}a.l=e+" ["+a.ca()+"]",Oc(a)}}finally{Pc(a)}}}function Pc(a,b){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const c=a.g;a.g=null,b||D(a,"ready");try{c.onreadystatechange=null}catch(d){}}}function P(a){return a.g?a.g.readyState:0}function Ib(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch(b){return null}}function Rc(a,b,c){return c&&c.internalChannelParams&&c.internalChannelParams[a]||b}function Sc(a){this.za=0,this.i=[],this.j=new pb,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Rc("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Rc("baseRetryDelayMs",5e3,a),this.Za=Rc("retryDelaySeedMs",1e4,a),this.Ta=Rc("forwardChannelMaxRetries",2,a),this.va=Rc("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new ec(a&&a.concurrentRequestLimit),this.Ba=new Dc,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function cc(a){if(Tc(a),3==a.I){var b=a.V++,c=O(a.J);if(S(c,"SID",a.M),S(c,"RID",b),S(c,"TYPE","terminate"),Uc(a,c),(b=new N(a,a.j,b)).M=2,b.A=Db(O(c)),c=!1,l.navigator&&l.navigator.sendBeacon)try{c=l.navigator.sendBeacon(b.A.toString(),"")}catch(d){}!c&&l.Image&&((new Image).src=b.A,c=!0),c||(b.g=Hb(b.j,null),b.g.ea(b.A)),b.F=Date.now(),Fb(b)}Vc(a)}function Vb(a){a.g&&(Pb(a),a.g.cancel(),a.g=null)}function Tc(a){Vb(a),a.v&&(l.clearTimeout(a.v),a.v=null),Ub(a),a.h.cancel(),a.m&&("number"==typeof a.m&&l.clearTimeout(a.m),a.m=null)}function bc(a){if(!fc(a.h)&&!a.m){a.m=!0;var b=a.Ea;u||ta(),v||(u(),v=!0),oa.add(b,a),a.D=0}}function Zc(a,b){var c;c=b?b.l:a.V++;const d=O(a.J);S(d,"SID",a.M),S(d,"RID",c),S(d,"AID",a.K),Uc(a,d),a.u&&a.o&&Kc(d,a.u,a.o),c=new N(a,a.j,c,a.D+1),null===a.u&&(c.J=a.o),b&&(a.i=b.G.concat(a.i)),b=Yc(a,c,1e3),c.H=Math.round(.5*a.va)+Math.round(.5*a.va*Math.random()),Yb(a.h,c),Cb(c,d,b)}function Uc(a,b){a.H&&ya(a.H,function(c,d){S(b,d,c)}),a.l&&ya({},function(c,d){S(b,d,c)})}function Yc(a,b,c){c=Math.min(a.i.length,c);const d=a.l?p(a.l.Ka,a.l,a):null;a:{var e=a.i;let k=-1;for(;;){const q=["count="+c];-1==k?c>0?(k=e[0].g,q.push("ofs="+k)):k=0:q.push("ofs="+k);let m=!0;for(let r=0;r<c;r++){var f=e[r].g;const A=e[r].map;if((f-=k)<0)k=Math.max(0,e[r].g-100),m=!1;else try{f="req"+f+"_"||0;try{var g=A instanceof Map?A:Object.entries(A);for(const[M,F]of g){let G=F;n(F)&&(G=ab(F)),q.push(f+M+"="+encodeURIComponent(G))}}catch(M){throw q.push(f+"type="+encodeURIComponent("_badmap")),M}}catch(M){d&&d(A)}}if(m){g=q.join("&");break a}}g=void 0}return a=a.i.splice(0,c),b.G=a,g}function ac(a){if(!a.g&&!a.v){a.Y=1;var b=a.Da;u||ta(),v||(u(),v=!0),oa.add(b,a),a.A=0}}function Wb(a){return!(a.g||a.v||a.A>=3)&&(a.Y++,a.v=ob(p(a.Da,a),Xc(a,a.A)),a.A++,!0)}function Pb(a){null!=a.B&&(l.clearTimeout(a.B),a.B=null)}function $c(a){a.g=new N(a,a.j,"rpc",a.Y),null===a.u&&(a.g.J=a.o),a.g.P=0;var b=O(a.na);S(b,"RID","rpc"),S(b,"SID",a.M),S(b,"AID",a.K),S(b,"CI",a.F?"0":"1"),!a.F&&a.ia&&S(b,"TO",a.ia),S(b,"TYPE","xmlhttp"),Uc(a,b),a.u&&a.o&&Kc(b,a.u,a.o),a.O&&(a.g.H=a.O);var c=a.g;a=a.ba,c.M=1,c.A=Db(O(b)),c.u=null,c.R=!0,Eb(c,a)}function Ub(a){null!=a.C&&(l.clearTimeout(a.C),a.C=null)}function Qb(a,b){var c=null;if(a.g==b){Ub(a),Pb(a),a.g=null;var d=2}else{if(!Tb(a.h,b))return;c=b.G,$b(a.h,b),d=1}if(0!=a.I)if(b.o)if(1==d){c=b.u?b.u.length:0,b=Date.now()-b.F;var e=a.D;D(d=jb(),new nb(d,c)),bc(a)}else ac(a);else if(3==(e=b.m)||0==e&&b.X>0||!(1==d&&function Wc(a,b){return!(Xb(a.h)>=a.h.j-(a.m?1:0)||(a.m?(a.i=b.G.concat(a.i),0):1==a.I||2==a.I||a.D>=(a.Sa?0:a.Ta)||(a.m=ob(p(a.Ea,a,b),Xc(a,a.D)),a.D++,0)))}(a,b)||2==d&&Wb(a)))switch(c&&c.length>0&&(b=a.h,b.i=b.i.concat(c)),e){case 1:R(a,5);break;case 4:R(a,10);break;case 3:R(a,6);break;default:R(a,2)}}function Xc(a,b){let c=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(c*=2),c*b}function R(a,b){if(a.j.info("Error code "+b),2==b){var c=p(a.bb,a),d=a.Ua;const e=!d;d=new T(d||"//www.google.com/images/cleardot.gif"),l.location&&"http"==l.location.protocol||kc(d,"https"),Db(d),e?function Bc(a,b){const c=new pb;if(l.Image){const d=new Image;d.onload=ha(W,c,"TestLoadImage: loaded",!0,b,d),d.onerror=ha(W,c,"TestLoadImage: error",!1,b,d),d.onabort=ha(W,c,"TestLoadImage: abort",!1,b,d),d.ontimeout=ha(W,c,"TestLoadImage: timeout",!1,b,d),l.setTimeout(function(){d.ontimeout&&d.ontimeout()},1e4),d.src=a}else b(!1)}(d.toString(),c):function Cc(a,b){new pb;const d=new AbortController,e=setTimeout(()=>{d.abort(),W(0,0,!1,b)},1e4);fetch(a,{signal:d.signal}).then(f=>{clearTimeout(e),f.ok?W(0,0,!0,b):W(0,0,!1,b)}).catch(()=>{clearTimeout(e),W(0,0,!1,b)})}(d.toString(),c)}else J(2);a.I=0,a.l&&a.l.pa(b),Vc(a),Tc(a)}function Vc(a){if(a.I=0,a.ja=[],a.l){const b=hc(a.h);0==b.length&&0==a.i.length||(ka(a.ja,b),ka(a.ja,a.i),a.h.i.length=0,ja(a.i),a.i.length=0),a.l.oa()}}function Zb(a,b,c){var d=c instanceof T?O(c):new T(c);if(""!=d.g)b&&(d.g=b+"."+d.g),lc(d,d.u);else{var e=l.location;d=e.protocol,b=b?b+"."+e.hostname:e.hostname,e=+e.port;const f=new T(null);d&&kc(f,d),b&&(f.g=b),e&&lc(f,e),c&&(f.h=c),d=f}return c=a.G,b=a.wa,c&&b&&S(d,c,b),S(d,"VER",a.ka),Uc(a,d),d}function Hb(a,b,c){if(b&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return(b=a.Aa&&!a.ma?new X(new Ec({ab:c})):new X(a.ma)).Fa(a.L),b}function ad(){}function bd(){}function Y(a,b){C.call(this),this.g=new Sc(b),this.l=a,this.h=b&&b.messageUrlParams||null,a=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(a?a["X-WebChannel-Content-Type"]=b.messageContentType:a={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(a?a["X-WebChannel-Client-Profile"]=b.sa:a={"X-WebChannel-Client-Profile":b.sa}),this.g.U=a,(a=b&&b.Qb)&&!y(a)&&(this.g.u=a),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!y(b)&&(this.g.G=b,null!==(a=this.h)&&b in a&&(b in(a=this.h)&&delete a[b])),this.j=new Z(this)}function cd(a){gb.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var b=a.__sm__;if(b){a:{for(const c in b){a=c;break a}a=void 0}(this.i=a)&&(a=this.i,b=null!==b&&a in b?b[a]:void 0),this.data=b}else this.data=a}function dd(){hb.call(this),this.status=1}function Z(a){this.g=a}(h=X.prototype).Fa=function(a){this.H=a},h.ea=function(a,b,c,d){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);b=b?b.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():wb.g(),this.g.onreadystatechange=ia(p(this.Ca,this));try{this.B=!0,this.g.open(b,String(a),!0),this.B=!1}catch(f){return void Nc(this,f)}if(a=c||"",c=new Map(this.headers),d)if(Object.getPrototypeOf(d)===Object.prototype)for(var e in d)c.set(e,d[e]);else{if("function"!=typeof d.keys||"function"!=typeof d.get)throw Error("Unknown input type for opt_headers: "+String(d));for(const f of d.keys())c.set(f,d.get(f))}d=Array.from(c.keys()).find(f=>"content-type"==f.toLowerCase()),e=l.FormData&&a instanceof l.FormData,!(Array.prototype.indexOf.call(Mc,b,void 0)>=0)||d||e||c.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[f,g]of c)this.g.setRequestHeader(f,g);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(f){Nc(this,f)}},h.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,D(this,"complete"),D(this,"abort"),Pc(this))},h.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pc(this,!0)),X.Z.N.call(this)},h.Ca=function(){this.u||(this.B||this.v||this.j?Qc(this):this.Xa())},h.Xa=function(){Qc(this)},h.isActive=function(){return!!this.g},h.ca=function(){try{return P(this)>2?this.g.status:-1}catch(a){return-1}},h.la=function(){try{return this.g?this.g.responseText:""}catch(a){return""}},h.La=function(a){if(this.g){var b=this.g.responseText;return a&&0==b.indexOf(a)&&(b=b.substring(a.length)),cb(b)}},h.ya=function(){return this.o},h.Ha=function(){return"string"==typeof this.l?this.l:String(this.l)},(h=Sc.prototype).ka=8,h.I=1,h.connect=function(a,b,c,d){J(0),this.W=a,this.H=b||{},c&&void 0!==d&&(this.H.OSID=c,this.H.OAID=d),this.F=this.X,this.J=Zb(this,null,this.W),bc(this)},h.Ea=function(a){if(this.m)if(this.m=null,1==this.I){if(!a){this.V=Math.floor(1e5*Math.random()),a=this.V++;const e=new N(this,this.j,a);let f=this.o;if(this.U&&(f?(f=Ba(f),Da(f,this.U)):f=this.U),null!==this.u||this.R||(e.J=f,f=null),this.S)a:{for(var b=0,c=0;c<this.i.length;c++){var d=this.i[c];if(void 0===(d="__data__"in d.map&&"string"==typeof(d=d.map.__data__)?d.length:void 0))break;if((b+=d)>4096){b=c;break a}if(4096===b||c===this.i.length-1){b=c+1;break a}}b=1e3}else b=1e3;b=Yc(this,e,b),S(c=O(this.J),"RID",a),S(c,"CVER",22),this.G&&S(c,"X-HTTP-Session-Id",this.G),Uc(this,c),f&&(this.R?b="headers="+L(Jc(f))+"&"+b:this.u&&Kc(c,this.u,f)),Yb(this.h,e),this.Ra&&S(c,"TYPE","init"),this.S?(S(c,"$req",b),S(c,"SID","null"),e.U=!0,Cb(e,c,null)):Cb(e,c,b),this.I=2}}else 3==this.I&&(a?Zc(this,a):0==this.i.length||fc(this.h)||Zc(this))},h.Da=function(){if(this.v=null,$c(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=ob(p(this.Wa,this),a)}},h.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,J(10),Vb(this),$c(this))},h.Va=function(){null!=this.C&&(this.C=null,Vb(this),Wb(this),J(19))},h.bb=function(a){a?(this.j.info("Successfully pinged google.com"),J(2)):(this.j.info("Failed to ping google.com"),J(1))},h.isActive=function(){return!!this.l&&this.l.isActive(this)},(h=ad.prototype).ra=function(){},h.qa=function(){},h.pa=function(){},h.oa=function(){},h.isActive=function(){return!0},h.Ka=function(){},bd.prototype.g=function(a,b){return new Y(a,b)},t(Y,C),Y.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Y.prototype.close=function(){cc(this.g)},Y.prototype.o=function(a){var b=this.g;if("string"==typeof a){var c={};c.__data__=a,a=c}else this.v&&((c={}).__data__=ab(a),a=c);b.i.push(new dc(b.Ya++,a)),3==b.I&&bc(b)},Y.prototype.N=function(){this.g.l=null,delete this.j,cc(this.g),delete this.g,Y.Z.N.call(this)},t(cd,gb),t(dd,hb),t(Z,ad),Z.prototype.ra=function(){D(this.g,"a")},Z.prototype.qa=function(a){D(this.g,new cd(a))},Z.prototype.pa=function(a){D(this.g,new dd)},Z.prototype.oa=function(){D(this.g,"b")},bd.prototype.createWebChannel=bd.prototype.g,Y.prototype.send=Y.prototype.o,Y.prototype.open=Y.prototype.m,Y.prototype.close=Y.prototype.close,createWebChannelTransport=webchannel_blob_es2018.createWebChannelTransport=function(){return new bd},getStatEventTarget=webchannel_blob_es2018.getStatEventTarget=function(){return jb()},Event=webchannel_blob_es2018.Event=I,Stat=webchannel_blob_es2018.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ub.NO_ERROR=0,ub.TIMEOUT=8,ub.HTTP_ERROR=6,ErrorCode=webchannel_blob_es2018.ErrorCode=ub,vb.COMPLETE="complete",EventType=webchannel_blob_es2018.EventType=vb,fb.EventType=H,H.OPEN="a",H.CLOSE="b",H.ERROR="c",H.MESSAGE="d",C.prototype.listen=C.prototype.J,WebChannel=webchannel_blob_es2018.WebChannel=fb,webchannel_blob_es2018.FetchXmlHttpFactory=Ec,X.prototype.listenOnce=X.prototype.K,X.prototype.getLastError=X.prototype.Ha,X.prototype.getLastErrorCode=X.prototype.ya,X.prototype.getStatus=X.prototype.ca,X.prototype.getResponseJson=X.prototype.La,X.prototype.getResponseText=X.prototype.la,X.prototype.send=X.prototype.ea,X.prototype.setWithCredentials=X.prototype.Fa,XhrIo=webchannel_blob_es2018.XhrIo=X}).apply(void 0!==webchannel_blob_es2018_commonjsGlobal?webchannel_blob_es2018_commonjsGlobal:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});__webpack_require__("./node_modules/process/browser.js");const F="@firebase/firestore",M="4.9.2";class User{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}User.UNAUTHENTICATED=new User(null),User.GOOGLE_CREDENTIALS=new User("google-credentials-uid"),User.FIRST_PARTY=new User("first-party-uid"),User.MOCK_USER=new User("mock-user");let x="12.3.0";const O=new dist_esm_index_esm.Vy("@firebase/firestore");function __PRIVATE_getLogLevel(){return O.logLevel}function __PRIVATE_logDebug(e,...t){if(O.logLevel<=dist_esm_index_esm.$b.DEBUG){const n=t.map(__PRIVATE_argToString);O.debug(`Firestore (${x}): ${e}`,...n)}}function __PRIVATE_logError(e,...t){if(O.logLevel<=dist_esm_index_esm.$b.ERROR){const n=t.map(__PRIVATE_argToString);O.error(`Firestore (${x}): ${e}`,...n)}}function __PRIVATE_logWarn(e,...t){if(O.logLevel<=dist_esm_index_esm.$b.WARN){const n=t.map(__PRIVATE_argToString);O.warn(`Firestore (${x}): ${e}`,...n)}}function __PRIVATE_argToString(e){if("string"==typeof e)return e;try{return function __PRIVATE_formatJSON(e){return JSON.stringify(e)}(e)}catch(t){return e}}function fail(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,__PRIVATE__fail(e,r,n)}function __PRIVATE__fail(e,t,n){let r=`FIRESTORE (${x}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw __PRIVATE_logError(r),new Error(r)}function __PRIVATE_hardAssert(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||__PRIVATE__fail(t,i,r)}function __PRIVATE_debugCast(e,t){return e}const N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class FirestoreError extends dist_index_esm.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class __PRIVATE_Deferred{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class __PRIVATE_OAuthToken{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class __PRIVATE_EmptyAuthCredentialsProvider{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(User.UNAUTHENTICATED))}shutdown(){}}class __PRIVATE_EmulatorAuthCredentialsProvider{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class __PRIVATE_FirebaseAuthCredentialsProvider{constructor(e){this.t=e,this.currentUser=User.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){__PRIVATE_hardAssert(void 0===this.o,42304);let n=this.i;const __PRIVATE_guardedChangeListener=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let r=new __PRIVATE_Deferred;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new __PRIVATE_Deferred,e.enqueueRetryable(()=>__PRIVATE_guardedChangeListener(this.currentUser))};const __PRIVATE_awaitNextToken=()=>{const t=r;e.enqueueRetryable(async()=>{await t.promise,await __PRIVATE_guardedChangeListener(this.currentUser)})},__PRIVATE_registerAuth=e=>{__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),__PRIVATE_awaitNextToken())};this.t.onInit(e=>__PRIVATE_registerAuth(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?__PRIVATE_registerAuth(e):(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new __PRIVATE_Deferred)}},0),__PRIVATE_awaitNextToken()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(__PRIVATE_hardAssert("string"==typeof t.accessToken,31837,{l:t}),new __PRIVATE_OAuthToken(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return __PRIVATE_hardAssert(null===e||"string"==typeof e,2055,{h:e}),new User(e)}}class __PRIVATE_FirstPartyToken{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=User.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class __PRIVATE_FirstPartyAuthCredentialsProvider{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new __PRIVATE_FirstPartyToken(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(User.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AppCheckToken{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class __PRIVATE_FirebaseAppCheckTokenProvider{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,(0,index_esm.xZ)(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(e,t){__PRIVATE_hardAssert(void 0===this.o,3512);const onTokenChanged=e=>{null!=e.error&&__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.m;return this.m=e.token,__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>onTokenChanged(t))};const __PRIVATE_registerAppCheck=e=>{__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>__PRIVATE_registerAppCheck(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?__PRIVATE_registerAppCheck(e):__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new AppCheckToken(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(__PRIVATE_hardAssert("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new AppCheckToken(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function __PRIVATE_randomBytes(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}class __PRIVATE_AutoId{static newId(){const t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=__PRIVATE_randomBytes(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(r[i]%62))}return n}}function __PRIVATE_primitiveComparator(e,t){return e<t?-1:e>t?1:0}function __PRIVATE_compareUtf8Strings(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return __PRIVATE_isSurrogate(n)===__PRIVATE_isSurrogate(i)?__PRIVATE_primitiveComparator(n,i):__PRIVATE_isSurrogate(n)?1:-1}return __PRIVATE_primitiveComparator(e.length,t.length)}const B=55296,L=57343;function __PRIVATE_isSurrogate(e){const t=e.charCodeAt(0);return t>=B&&t<=L}function __PRIVATE_arrayEquals(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const k="__name__";class BasePath{constructor(e,t,n){void 0===t?t=0:t>e.length&&fail(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&fail(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===BasePath.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof BasePath?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=BasePath.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return __PRIVATE_primitiveComparator(e.length,t.length)}static compareSegments(e,t){const n=BasePath.isNumericId(e),r=BasePath.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?BasePath.extractNumericId(e).compare(BasePath.extractNumericId(t)):__PRIVATE_compareUtf8Strings(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Integer.fromString(e.substring(4,e.length-2))}}class ResourcePath extends BasePath{construct(e,t,n){return new ResourcePath(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new ResourcePath(t)}static emptyPath(){return new ResourcePath([])}}const q=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class FieldPath$1 extends BasePath{construct(e,t,n){return new FieldPath$1(e,t,n)}static isValidIdentifier(e){return q.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),FieldPath$1.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===k}static keyField(){return new FieldPath$1([k])}static fromServerFormat(e){const t=[];let n="",r=0;const __PRIVATE_addCurrentSegment=()=>{if(0===n.length)throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new FirestoreError(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new FirestoreError(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(__PRIVATE_addCurrentSegment(),r++)}if(__PRIVATE_addCurrentSegment(),i)throw new FirestoreError(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new FieldPath$1(t)}static emptyPath(){return new FieldPath$1([])}}class DocumentKey{constructor(e){this.path=e}static fromPath(e){return new DocumentKey(ResourcePath.fromString(e))}static fromName(e){return new DocumentKey(ResourcePath.fromString(e).popFirst(5))}static empty(){return new DocumentKey(ResourcePath.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ResourcePath.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ResourcePath.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new DocumentKey(new ResourcePath(e.slice()))}}function __PRIVATE_validateNonEmptyArgument(e,t,n){if(!n)throw new FirestoreError(N.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function __PRIVATE_validateDocumentPath(e){if(!DocumentKey.isDocumentKey(e))throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function __PRIVATE_isPlainObject(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function __PRIVATE_valueDescription(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function __PRIVATE_tryGetCustomObjectType(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":fail(12329,{type:typeof e})}function __PRIVATE_cast(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new FirestoreError(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=__PRIVATE_valueDescription(e);throw new FirestoreError(N.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function property(e,t){const n={typeString:e};return t&&(n.value=t),n}function __PRIVATE_validateJSON(e,t){if(!__PRIVATE_isPlainObject(e))throw new FirestoreError(N.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const o=e[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(void 0!==s&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new FirestoreError(N.INVALID_ARGUMENT,n);return!0}const Q=-62135596800,$=1e6;class Timestamp{static now(){return Timestamp.fromMillis(Date.now())}static fromDate(e){return Timestamp.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*$);return new Timestamp(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new FirestoreError(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new FirestoreError(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Q)throw new FirestoreError(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new FirestoreError(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$}_compareTo(e){return this.seconds===e.seconds?__PRIVATE_primitiveComparator(this.nanoseconds,e.nanoseconds):__PRIVATE_primitiveComparator(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Timestamp._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(__PRIVATE_validateJSON(e,Timestamp._jsonSchema))return new Timestamp(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Q;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Timestamp._jsonSchemaVersion="firestore/timestamp/1.0",Timestamp._jsonSchema={type:property("string",Timestamp._jsonSchemaVersion),seconds:property("number"),nanoseconds:property("number")};class SnapshotVersion{static fromTimestamp(e){return new SnapshotVersion(e)}static min(){return new SnapshotVersion(new Timestamp(0,0))}static max(){return new SnapshotVersion(new Timestamp(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const U=-1;class FieldIndex{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}FieldIndex.UNKNOWN_ID=-1;function __PRIVATE_newIndexOffsetSuccessorFromReadTime(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=SnapshotVersion.fromTimestamp(1e9===r?new Timestamp(n+1,0):new Timestamp(n,r));return new IndexOffset(i,DocumentKey.empty(),t)}function __PRIVATE_newIndexOffsetFromDocument(e){return new IndexOffset(e.readTime,e.key,U)}class IndexOffset{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new IndexOffset(SnapshotVersion.min(),DocumentKey.empty(),U)}static max(){return new IndexOffset(SnapshotVersion.max(),DocumentKey.empty(),U)}}function __PRIVATE_indexOffsetComparator(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=DocumentKey.comparator(e.documentKey,t.documentKey),0!==n?n:__PRIVATE_primitiveComparator(e.largestBatchId,t.largestBatchId))}const K="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PersistenceTransaction{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function __PRIVATE_ignoreIfPrimaryLeaseLoss(e){if(e.code!==N.FAILED_PRECONDITION||e.message!==K)throw e;__PRIVATE_logDebug("LocalStore","Unexpectedly lost primary lease")}class PersistencePromise{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&fail(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new PersistencePromise((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof PersistencePromise?t:PersistencePromise.resolve(t)}catch(e){return PersistencePromise.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):PersistencePromise.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):PersistencePromise.reject(t)}static resolve(e){return new PersistencePromise((t,n)=>{t(e)})}static reject(e){return new PersistencePromise((t,n)=>{n(e)})}static waitFor(e){return new PersistencePromise((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=PersistencePromise.resolve(!1);for(const n of e)t=t.next(e=>e?PersistencePromise.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new PersistencePromise((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let _=0;_<i;_++){const a=_;t(e[a]).next(e=>{s[a]=e,++o,o===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new PersistencePromise((n,r)=>{const process=()=>{!0===e()?t().next(()=>{process()},r):n()};process()})}}function __PRIVATE_getAndroidVersion(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function __PRIVATE_isIndexedDbTransactionError(e){return"IndexedDbTransactionError"===e.name}class __PRIVATE_ListenSequence{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}__PRIVATE_ListenSequence.ce=-1;const j=-1;function __PRIVATE_isNullOrUndefined(e){return null==e}function __PRIVATE_isNegativeZero(e){return 0===e&&1/e==-1/0}function isSafeInteger(e){return"number"==typeof e&&Number.isInteger(e)&&!__PRIVATE_isNegativeZero(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const J="";function __PRIVATE_encodeResourcePath(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=__PRIVATE_encodeSeparator(t)),t=__PRIVATE_encodeSegment(e.get(n),t);return __PRIVATE_encodeSeparator(t)}function __PRIVATE_encodeSegment(e,t){let n=t;const r=e.length;for(let t=0;t<r;t++){const r=e.charAt(t);switch(r){case"\0":n+="";break;case J:n+="";break;default:n+=r}}return n}function __PRIVATE_encodeSeparator(e){return e+J+""}const H="remoteDocuments",Y="owner",X="mutationQueues",te="mutations";const oe="documentMutations",_e="remoteDocumentsV14",Pe="remoteDocumentGlobal",Ie="targets",Ae="targetDocuments",ge="targetGlobal",pe="collectionParents",we="clientMetadata",be="bundles",Ce="namedQueries",Fe="indexConfiguration",Ne="indexState",qe="indexEntries",Ke="documentOverlays",He="globals",Ze=[X,te,oe,H,Ie,Y,ge,Ae,we,Pe,pe,be,Ce],et=[X,te,oe,_e,Ie,Y,ge,Ae,we,Pe,pe,be,Ce,Ke],tt=et,nt=[...tt,Fe,Ne,qe];function __PRIVATE_objectSize(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function forEach(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function isEmpty(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class SortedMap{constructor(e,t){this.comparator=e,this.root=t||LLRBNode.EMPTY}insert(e,t){return new SortedMap(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}remove(e){return new SortedMap(this.comparator,this.root.remove(e,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new SortedMapIterator(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!1)}getReverseIterator(){return new SortedMapIterator(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!0)}}class SortedMapIterator{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class LLRBNode{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:LLRBNode.RED,this.left=null!=r?r:LLRBNode.EMPTY,this.right=null!=i?i:LLRBNode.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new LLRBNode(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return LLRBNode.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return LLRBNode.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,LLRBNode.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,LLRBNode.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fail(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fail(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw fail(27949);return e+(this.isRed()?0:1)}}LLRBNode.EMPTY=null,LLRBNode.RED=!0,LLRBNode.BLACK=!1,LLRBNode.EMPTY=new class LLRBEmptyNode{constructor(){this.size=0}get key(){throw fail(57766)}get value(){throw fail(16141)}get color(){throw fail(16727)}get left(){throw fail(29726)}get right(){throw fail(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new LLRBNode(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class SortedSet{constructor(e){this.comparator=e,this.data=new SortedMap(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new SortedSetIterator(this.data.getIterator())}getIteratorFrom(e){return new SortedSetIterator(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof SortedSet))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new SortedSet(this.comparator);return t.data=e,t}}class SortedSetIterator{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class FieldMask{constructor(e){this.fields=e,e.sort(FieldPath$1.comparator)}static empty(){return new FieldMask([])}unionWith(e){let t=new SortedSet(FieldPath$1.comparator);for(const e of this.fields)t=t.add(e);for(const n of e)t=t.add(n);return new FieldMask(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return __PRIVATE_arrayEquals(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class __PRIVATE_Base64DecodeError extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ByteString{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function __PRIVATE_decodeBase64(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new __PRIVATE_Base64DecodeError("Invalid base64 string: "+e):e}}(e);return new ByteString(t)}static fromUint8Array(e){const t=function __PRIVATE_binaryStringFromUint8Array(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ByteString(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function __PRIVATE_encodeBase64(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function __PRIVATE_uint8ArrayFromBinaryString(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return __PRIVATE_primitiveComparator(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ByteString.EMPTY_BYTE_STRING=new ByteString("");const ot=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function __PRIVATE_normalizeTimestamp(e){if(__PRIVATE_hardAssert(!!e,39018),"string"==typeof e){let t=0;const n=ot.exec(e);if(__PRIVATE_hardAssert(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:__PRIVATE_normalizeNumber(e.seconds),nanos:__PRIVATE_normalizeNumber(e.nanos)}}function __PRIVATE_normalizeNumber(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function __PRIVATE_normalizeByteString(e){return"string"==typeof e?ByteString.fromBase64String(e):ByteString.fromUint8Array(e)}const _t="server_timestamp",at="__type__",ut="__previous_value__",ct="__local_write_time__";function __PRIVATE_isServerTimestamp(e){const t=(e?.mapValue?.fields||{})[at]?.stringValue;return t===_t}function __PRIVATE_getPreviousValue(e){const t=e.mapValue.fields[ut];return __PRIVATE_isServerTimestamp(t)?__PRIVATE_getPreviousValue(t):t}function __PRIVATE_getLocalWriteTime(e){const t=__PRIVATE_normalizeTimestamp(e.mapValue.fields[ct].timestampValue);return new Timestamp(t.seconds,t.nanos)}class DatabaseInfo{constructor(e,t,n,r,i,s,o,_,a,u){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=_,this.useFetchStreams=a,this.isUsingEmulator=u}}const lt="(default)";class DatabaseId{constructor(e,t){this.projectId=e,this.database=t||lt}static empty(){return new DatabaseId("","")}get isDefaultDatabase(){return this.database===lt}isEqual(e){return e instanceof DatabaseId&&e.projectId===this.projectId&&e.database===this.database}}const ht="__type__",Pt="__max__",Tt={mapValue:{fields:{__type__:{stringValue:Pt}}}},It="__vector__",Et="value";function __PRIVATE_typeOrder(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?__PRIVATE_isServerTimestamp(e)?4:__PRIVATE_isMaxValue(e)?9007199254740991:__PRIVATE_isVectorValue(e)?10:11:fail(28295,{value:e})}function __PRIVATE_valueEquals(e,t){if(e===t)return!0;const n=__PRIVATE_typeOrder(e);if(n!==__PRIVATE_typeOrder(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return __PRIVATE_getLocalWriteTime(e).isEqual(__PRIVATE_getLocalWriteTime(t));case 3:return function __PRIVATE_timestampEquals(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=__PRIVATE_normalizeTimestamp(e.timestampValue),r=__PRIVATE_normalizeTimestamp(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function __PRIVATE_blobEquals(e,t){return __PRIVATE_normalizeByteString(e.bytesValue).isEqual(__PRIVATE_normalizeByteString(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function __PRIVATE_geoPointEquals(e,t){return __PRIVATE_normalizeNumber(e.geoPointValue.latitude)===__PRIVATE_normalizeNumber(t.geoPointValue.latitude)&&__PRIVATE_normalizeNumber(e.geoPointValue.longitude)===__PRIVATE_normalizeNumber(t.geoPointValue.longitude)}(e,t);case 2:return function __PRIVATE_numberEquals(e,t){if("integerValue"in e&&"integerValue"in t)return __PRIVATE_normalizeNumber(e.integerValue)===__PRIVATE_normalizeNumber(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=__PRIVATE_normalizeNumber(e.doubleValue),r=__PRIVATE_normalizeNumber(t.doubleValue);return n===r?__PRIVATE_isNegativeZero(n)===__PRIVATE_isNegativeZero(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return __PRIVATE_arrayEquals(e.arrayValue.values||[],t.arrayValue.values||[],__PRIVATE_valueEquals);case 10:case 11:return function __PRIVATE_objectEquals(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(__PRIVATE_objectSize(n)!==__PRIVATE_objectSize(r))return!1;for(const e in n)if(n.hasOwnProperty(e)&&(void 0===r[e]||!__PRIVATE_valueEquals(n[e],r[e])))return!1;return!0}(e,t);default:return fail(52216,{left:e})}}function __PRIVATE_arrayValueContains(e,t){return void 0!==(e.values||[]).find(e=>__PRIVATE_valueEquals(e,t))}function __PRIVATE_valueCompare(e,t){if(e===t)return 0;const n=__PRIVATE_typeOrder(e),r=__PRIVATE_typeOrder(t);if(n!==r)return __PRIVATE_primitiveComparator(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return __PRIVATE_primitiveComparator(e.booleanValue,t.booleanValue);case 2:return function __PRIVATE_compareNumbers(e,t){const n=__PRIVATE_normalizeNumber(e.integerValue||e.doubleValue),r=__PRIVATE_normalizeNumber(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return __PRIVATE_compareTimestamps(e.timestampValue,t.timestampValue);case 4:return __PRIVATE_compareTimestamps(__PRIVATE_getLocalWriteTime(e),__PRIVATE_getLocalWriteTime(t));case 5:return __PRIVATE_compareUtf8Strings(e.stringValue,t.stringValue);case 6:return function __PRIVATE_compareBlobs(e,t){const n=__PRIVATE_normalizeByteString(e),r=__PRIVATE_normalizeByteString(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function __PRIVATE_compareReferences(e,t){const n=e.split("/"),r=t.split("/");for(let e=0;e<n.length&&e<r.length;e++){const t=__PRIVATE_primitiveComparator(n[e],r[e]);if(0!==t)return t}return __PRIVATE_primitiveComparator(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function __PRIVATE_compareGeoPoints(e,t){const n=__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(e.latitude),__PRIVATE_normalizeNumber(t.latitude));return 0!==n?n:__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(e.longitude),__PRIVATE_normalizeNumber(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return __PRIVATE_compareArrays(e.arrayValue,t.arrayValue);case 10:return function __PRIVATE_compareVectors(e,t){const n=e.fields||{},r=t.fields||{},i=n[Et]?.arrayValue,s=r[Et]?.arrayValue,o=__PRIVATE_primitiveComparator(i?.values?.length||0,s?.values?.length||0);return 0!==o?o:__PRIVATE_compareArrays(i,s)}(e.mapValue,t.mapValue);case 11:return function __PRIVATE_compareMaps(e,t){if(e===Tt.mapValue&&t===Tt.mapValue)return 0;if(e===Tt.mapValue)return 1;if(t===Tt.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let e=0;e<r.length&&e<s.length;++e){const t=__PRIVATE_compareUtf8Strings(r[e],s[e]);if(0!==t)return t;const o=__PRIVATE_valueCompare(n[r[e]],i[s[e]]);if(0!==o)return o}return __PRIVATE_primitiveComparator(r.length,s.length)}(e.mapValue,t.mapValue);default:throw fail(23264,{he:n})}}function __PRIVATE_compareTimestamps(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return __PRIVATE_primitiveComparator(e,t);const n=__PRIVATE_normalizeTimestamp(e),r=__PRIVATE_normalizeTimestamp(t),i=__PRIVATE_primitiveComparator(n.seconds,r.seconds);return 0!==i?i:__PRIVATE_primitiveComparator(n.nanos,r.nanos)}function __PRIVATE_compareArrays(e,t){const n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){const t=__PRIVATE_valueCompare(n[e],r[e]);if(t)return t}return __PRIVATE_primitiveComparator(n.length,r.length)}function canonicalId(e){return __PRIVATE_canonifyValue(e)}function __PRIVATE_canonifyValue(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function __PRIVATE_canonifyTimestamp(e){const t=__PRIVATE_normalizeTimestamp(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function __PRIVATE_canonifyByteString(e){return __PRIVATE_normalizeByteString(e).toBase64()}(e.bytesValue):"referenceValue"in e?function __PRIVATE_canonifyReference(e){return DocumentKey.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function __PRIVATE_canonifyGeoPoint(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function __PRIVATE_canonifyArray(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=__PRIVATE_canonifyValue(r);return t+"]"}(e.arrayValue):"mapValue"in e?function __PRIVATE_canonifyMap(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${__PRIVATE_canonifyValue(e.fields[i])}`;return n+"}"}(e.mapValue):fail(61005,{value:e})}function __PRIVATE_estimateByteSize(e){switch(__PRIVATE_typeOrder(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=__PRIVATE_getPreviousValue(e);return t?16+__PRIVATE_estimateByteSize(t):16;case 5:return 2*e.stringValue.length;case 6:return __PRIVATE_normalizeByteString(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function __PRIVATE_estimateArrayByteSize(e){return(e.values||[]).reduce((e,t)=>e+__PRIVATE_estimateByteSize(t),0)}(e.arrayValue);case 10:case 11:return function __PRIVATE_estimateMapByteSize(e){let t=0;return forEach(e.fields,(e,n)=>{t+=e.length+__PRIVATE_estimateByteSize(n)}),t}(e.mapValue);default:throw fail(13486,{value:e})}}function isInteger(e){return!!e&&"integerValue"in e}function isArray(e){return!!e&&"arrayValue"in e}function __PRIVATE_isMapValue(e){return!!e&&"mapValue"in e}function __PRIVATE_isVectorValue(e){const t=(e?.mapValue?.fields||{})[ht]?.stringValue;return t===It}function __PRIVATE_deepClone(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return forEach(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=__PRIVATE_deepClone(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=__PRIVATE_deepClone(e.arrayValue.values[n]);return t}return{...e}}function __PRIVATE_isMaxValue(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Pt}class ObjectValue{constructor(e){this.value=e}static empty(){return new ObjectValue({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!__PRIVATE_isMapValue(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=__PRIVATE_deepClone(t)}setAll(e){let t=FieldPath$1.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=__PRIVATE_deepClone(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());__PRIVATE_isMapValue(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return __PRIVATE_valueEquals(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];__PRIVATE_isMapValue(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){forEach(t,(t,n)=>e[t]=n);for(const t of n)delete e[t]}clone(){return new ObjectValue(__PRIVATE_deepClone(this.value))}}function __PRIVATE_extractFieldMask(e){const t=[];return forEach(e.fields,(e,n)=>{const r=new FieldPath$1([e]);if(__PRIVATE_isMapValue(n)){const e=__PRIVATE_extractFieldMask(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new FieldMask(t)}class MutableDocument{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new MutableDocument(e,0,SnapshotVersion.min(),SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newFoundDocument(e,t,n,r){return new MutableDocument(e,1,t,SnapshotVersion.min(),n,r,0)}static newNoDocument(e,t){return new MutableDocument(e,2,t,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newUnknownDocument(e,t){return new MutableDocument(e,3,t,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(SnapshotVersion.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ObjectValue.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ObjectValue.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=SnapshotVersion.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof MutableDocument&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new MutableDocument(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Bound{constructor(e,t){this.position=e,this.inclusive=t}}function __PRIVATE_boundCompareToDocument(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?DocumentKey.comparator(DocumentKey.fromName(o.referenceValue),n.key):__PRIVATE_valueCompare(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function __PRIVATE_boundEquals(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!__PRIVATE_valueEquals(e.position[n],t.position[n]))return!1;return!0}class OrderBy{constructor(e,t="asc"){this.field=e,this.dir=t}}function __PRIVATE_orderByEquals(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Filter{}class FieldFilter extends Filter{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new __PRIVATE_KeyFieldFilter(e,t,n):"array-contains"===t?new __PRIVATE_ArrayContainsFilter(e,n):"in"===t?new __PRIVATE_InFilter(e,n):"not-in"===t?new __PRIVATE_NotInFilter(e,n):"array-contains-any"===t?new __PRIVATE_ArrayContainsAnyFilter(e,n):new FieldFilter(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new __PRIVATE_KeyFieldInFilter(e,n):new __PRIVATE_KeyFieldNotInFilter(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(__PRIVATE_valueCompare(t,this.value)):null!==t&&__PRIVATE_typeOrder(this.value)===__PRIVATE_typeOrder(t)&&this.matchesComparison(__PRIVATE_valueCompare(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return fail(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class CompositeFilter extends Filter{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new CompositeFilter(e,t)}matches(e){return __PRIVATE_compositeFilterIsConjunction(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function __PRIVATE_compositeFilterIsConjunction(e){return"and"===e.op}function __PRIVATE_compositeFilterIsFlatConjunction(e){return __PRIVATE_compositeFilterIsFlat(e)&&__PRIVATE_compositeFilterIsConjunction(e)}function __PRIVATE_compositeFilterIsFlat(e){for(const t of e.filters)if(t instanceof CompositeFilter)return!1;return!0}function __PRIVATE_canonifyFilter(e){if(e instanceof FieldFilter)return e.field.canonicalString()+e.op.toString()+canonicalId(e.value);if(__PRIVATE_compositeFilterIsFlatConjunction(e))return e.filters.map(e=>__PRIVATE_canonifyFilter(e)).join(",");{const t=e.filters.map(e=>__PRIVATE_canonifyFilter(e)).join(",");return`${e.op}(${t})`}}function __PRIVATE_filterEquals(e,t){return e instanceof FieldFilter?function __PRIVATE_fieldFilterEquals(e,t){return t instanceof FieldFilter&&e.op===t.op&&e.field.isEqual(t.field)&&__PRIVATE_valueEquals(e.value,t.value)}(e,t):e instanceof CompositeFilter?function __PRIVATE_compositeFilterEquals(e,t){return t instanceof CompositeFilter&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&__PRIVATE_filterEquals(n,t.filters[r]),!0)}(e,t):void fail(19439)}function __PRIVATE_stringifyFilter(e){return e instanceof FieldFilter?function __PRIVATE_stringifyFieldFilter(e){return`${e.field.canonicalString()} ${e.op} ${canonicalId(e.value)}`}(e):e instanceof CompositeFilter?function __PRIVATE_stringifyCompositeFilter(e){return e.op.toString()+" {"+e.getFilters().map(__PRIVATE_stringifyFilter).join(" ,")+"}"}(e):"Filter"}class __PRIVATE_KeyFieldFilter extends FieldFilter{constructor(e,t,n){super(e,t,n),this.key=DocumentKey.fromName(n.referenceValue)}matches(e){const t=DocumentKey.comparator(e.key,this.key);return this.matchesComparison(t)}}class __PRIVATE_KeyFieldInFilter extends FieldFilter{constructor(e,t){super(e,"in",t),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class __PRIVATE_KeyFieldNotInFilter extends FieldFilter{constructor(e,t){super(e,"not-in",t),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function __PRIVATE_extractDocumentKeysFromArrayValue(e,t){return(t.arrayValue?.values||[]).map(e=>DocumentKey.fromName(e.referenceValue))}class __PRIVATE_ArrayContainsFilter extends FieldFilter{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return isArray(t)&&__PRIVATE_arrayValueContains(t.arrayValue,this.value)}}class __PRIVATE_InFilter extends FieldFilter{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&__PRIVATE_arrayValueContains(this.value.arrayValue,t)}}class __PRIVATE_NotInFilter extends FieldFilter{constructor(e,t){super(e,"not-in",t)}matches(e){if(__PRIVATE_arrayValueContains(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!__PRIVATE_arrayValueContains(this.value.arrayValue,t)}}class __PRIVATE_ArrayContainsAnyFilter extends FieldFilter{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!isArray(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>__PRIVATE_arrayValueContains(this.value.arrayValue,e))}}class __PRIVATE_TargetImpl{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.Te=null}}function __PRIVATE_newTarget(e,t=null,n=[],r=[],i=null,s=null,o=null){return new __PRIVATE_TargetImpl(e,t,n,r,i,s,o)}function __PRIVATE_canonifyTarget(e){const t=__PRIVATE_debugCast(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>__PRIVATE_canonifyFilter(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function __PRIVATE_canonifyOrderBy(e){return e.field.canonicalString()+e.dir}(e)).join(","),__PRIVATE_isNullOrUndefined(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>canonicalId(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>canonicalId(e)).join(",")),t.Te=e}return t.Te}function __PRIVATE_targetEquals(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!__PRIVATE_orderByEquals(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!__PRIVATE_filterEquals(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!__PRIVATE_boundEquals(e.startAt,t.startAt)&&__PRIVATE_boundEquals(e.endAt,t.endAt)}class __PRIVATE_QueryImpl{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=_,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function __PRIVATE_newQuery(e,t,n,r,i,s,o,_){return new __PRIVATE_QueryImpl(e,t,n,r,i,s,o,_)}function __PRIVATE_newQueryForPath(e){return new __PRIVATE_QueryImpl(e)}function __PRIVATE_queryMatchesAllDocuments(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function __PRIVATE_isCollectionGroupQuery(e){return null!==e.collectionGroup}function __PRIVATE_queryNormalizedOrderBy(e){const t=__PRIVATE_debugCast(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const n of t.explicitOrderBy)t.Ie.push(n),e.add(n.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function __PRIVATE_getInequalityFilterFields(e){let t=new SortedSet(FieldPath$1.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new OrderBy(r,n))}),e.has(FieldPath$1.keyField().canonicalString())||t.Ie.push(new OrderBy(FieldPath$1.keyField(),n))}return t.Ie}function __PRIVATE_queryToTarget(e){const t=__PRIVATE_debugCast(e);return t.Ee||(t.Ee=__PRIVATE__queryToTarget(t,__PRIVATE_queryNormalizedOrderBy(e))),t.Ee}function __PRIVATE__queryToTarget(e,t){if("F"===e.limitType)return __PRIVATE_newTarget(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new OrderBy(e.field,t)});const n=e.endAt?new Bound(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Bound(e.startAt.position,e.startAt.inclusive):null;return __PRIVATE_newTarget(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function __PRIVATE_queryWithLimit(e,t,n){return new __PRIVATE_QueryImpl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function __PRIVATE_queryEquals(e,t){return __PRIVATE_targetEquals(__PRIVATE_queryToTarget(e),__PRIVATE_queryToTarget(t))&&e.limitType===t.limitType}function __PRIVATE_canonifyQuery(e){return`${__PRIVATE_canonifyTarget(__PRIVATE_queryToTarget(e))}|lt:${e.limitType}`}function __PRIVATE_stringifyQuery(e){return`Query(target=${function __PRIVATE_stringifyTarget(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>__PRIVATE_stringifyFilter(e)).join(", ")}]`),__PRIVATE_isNullOrUndefined(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function __PRIVATE_stringifyOrderBy(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>canonicalId(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>canonicalId(e)).join(",")),`Target(${t})`}(__PRIVATE_queryToTarget(e))}; limitType=${e.limitType})`}function __PRIVATE_queryMatches(e,t){return t.isFoundDocument()&&function __PRIVATE_queryMatchesPathAndCollectionGroup(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):DocumentKey.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function __PRIVATE_queryMatchesOrderBy(e,t){for(const n of __PRIVATE_queryNormalizedOrderBy(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function __PRIVATE_queryMatchesFilters(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function __PRIVATE_queryMatchesBounds(e,t){return!(e.startAt&&!function __PRIVATE_boundSortsBeforeDocument(e,t,n){const r=__PRIVATE_boundCompareToDocument(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,__PRIVATE_queryNormalizedOrderBy(e),t))&&!(e.endAt&&!function __PRIVATE_boundSortsAfterDocument(e,t,n){const r=__PRIVATE_boundCompareToDocument(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,__PRIVATE_queryNormalizedOrderBy(e),t))}(e,t)}function __PRIVATE_newQueryComparator(e){return(t,n)=>{let r=!1;for(const i of __PRIVATE_queryNormalizedOrderBy(e)){const e=__PRIVATE_compareDocs(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function __PRIVATE_compareDocs(e,t,n){const r=e.field.isKeyField()?DocumentKey.comparator(t.key,n.key):function __PRIVATE_compareDocumentsByField(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?__PRIVATE_valueCompare(r,i):fail(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return fail(19790,{direction:e.dir})}}class ObjectMap{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[t,r]of n)if(this.equalsFn(t,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){forEach(this.inner,(t,n)=>{for(const[t,r]of n)e(t,r)})}isEmpty(){return isEmpty(this.inner)}size(){return this.innerSize}}const Rt=new SortedMap(DocumentKey.comparator);function __PRIVATE_mutableDocumentMap(){return Rt}const Vt=new SortedMap(DocumentKey.comparator);function documentMap(...e){let t=Vt;for(const n of e)t=t.insert(n.key,n);return t}function __PRIVATE_convertOverlayedDocumentMapToDocumentMap(e){let t=Vt;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function __PRIVATE_newOverlayMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newMutationMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newDocumentKeyMap(){return new ObjectMap(e=>e.toString(),(e,t)=>e.isEqual(t))}const mt=new SortedMap(DocumentKey.comparator),ft=new SortedSet(DocumentKey.comparator);function __PRIVATE_documentKeySet(...e){let t=ft;for(const n of e)t=t.add(n);return t}const gt=new SortedSet(__PRIVATE_primitiveComparator);function __PRIVATE_targetIdSet(){return gt}function __PRIVATE_toDouble(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:__PRIVATE_isNegativeZero(t)?"-0":t}}function __PRIVATE_toInteger(e){return{integerValue:""+e}}function toNumber(e,t){return isSafeInteger(t)?__PRIVATE_toInteger(t):__PRIVATE_toDouble(e,t)}class TransformOperation{constructor(){this._=void 0}}function __PRIVATE_applyTransformOperationToLocalView(e,t,n){return e instanceof __PRIVATE_ServerTimestampTransform?function serverTimestamp$1(e,t){const n={fields:{[at]:{stringValue:_t},[ct]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&__PRIVATE_isServerTimestamp(t)&&(t=__PRIVATE_getPreviousValue(t)),t&&(n.fields[ut]=t),{mapValue:n}}(n,t):e instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(e,t):e instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(e,t):function __PRIVATE_applyNumericIncrementTransformOperationToLocalView(e,t){const n=__PRIVATE_computeTransformOperationBaseValue(e,t),r=asNumber(n)+asNumber(e.Ae);return isInteger(n)&&isInteger(e.Ae)?__PRIVATE_toInteger(r):__PRIVATE_toDouble(e.serializer,r)}(e,t)}function __PRIVATE_applyTransformOperationToRemoteDocument(e,t,n){return e instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(e,t):e instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(e,t):n}function __PRIVATE_computeTransformOperationBaseValue(e,t){return e instanceof __PRIVATE_NumericIncrementTransformOperation?function __PRIVATE_isNumber(e){return isInteger(e)||function __PRIVATE_isDouble(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class __PRIVATE_ServerTimestampTransform extends TransformOperation{}class __PRIVATE_ArrayUnionTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}}function __PRIVATE_applyArrayUnionTransformOperation(e,t){const n=__PRIVATE_coercedFieldValuesArray(t);for(const t of e.elements)n.some(e=>__PRIVATE_valueEquals(e,t))||n.push(t);return{arrayValue:{values:n}}}class __PRIVATE_ArrayRemoveTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}}function __PRIVATE_applyArrayRemoveTransformOperation(e,t){let n=__PRIVATE_coercedFieldValuesArray(t);for(const t of e.elements)n=n.filter(e=>!__PRIVATE_valueEquals(e,t));return{arrayValue:{values:n}}}class __PRIVATE_NumericIncrementTransformOperation extends TransformOperation{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function asNumber(e){return __PRIVATE_normalizeNumber(e.integerValue||e.doubleValue)}function __PRIVATE_coercedFieldValuesArray(e){return isArray(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class FieldTransform{constructor(e,t){this.field=e,this.transform=t}}class MutationResult{constructor(e,t){this.version=e,this.transformResults=t}}class Precondition{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Precondition}static exists(e){return new Precondition(void 0,e)}static updateTime(e){return new Precondition(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function __PRIVATE_preconditionIsValidForDocument(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Mutation{}function __PRIVATE_calculateOverlayMutation(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new __PRIVATE_DeleteMutation(e.key,Precondition.none()):new __PRIVATE_SetMutation(e.key,e.data,Precondition.none());{const n=e.data,r=ObjectValue.empty();let i=new SortedSet(FieldPath$1.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new __PRIVATE_PatchMutation(e.key,r,new FieldMask(i.toArray()),Precondition.none())}}function __PRIVATE_mutationApplyToRemoteDocument(e,t,n){e instanceof __PRIVATE_SetMutation?function __PRIVATE_setMutationApplyToRemoteDocument(e,t,n){const r=e.value.clone(),i=__PRIVATE_serverTransformResults(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof __PRIVATE_PatchMutation?function __PRIVATE_patchMutationApplyToRemoteDocument(e,t,n){if(!__PRIVATE_preconditionIsValidForDocument(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=__PRIVATE_serverTransformResults(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(__PRIVATE_getPatch(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function __PRIVATE_deleteMutationApplyToRemoteDocument(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function __PRIVATE_mutationApplyToLocalView(e,t,n,r){return e instanceof __PRIVATE_SetMutation?function __PRIVATE_setMutationApplyToLocalView(e,t,n,r){if(!__PRIVATE_preconditionIsValidForDocument(e.precondition,t))return n;const i=e.value.clone(),s=__PRIVATE_localTransformResults(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof __PRIVATE_PatchMutation?function __PRIVATE_patchMutationApplyToLocalView(e,t,n,r){if(!__PRIVATE_preconditionIsValidForDocument(e.precondition,t))return n;const i=__PRIVATE_localTransformResults(e.fieldTransforms,r,t),s=t.data;return s.setAll(__PRIVATE_getPatch(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function __PRIVATE_deleteMutationApplyToLocalView(e,t,n){return __PRIVATE_preconditionIsValidForDocument(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function __PRIVATE_mutationExtractBaseValue(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=__PRIVATE_computeTransformOperationBaseValue(r.transform,e||null);null!=i&&(null===n&&(n=ObjectValue.empty()),n.set(r.field,i))}return n||null}function __PRIVATE_mutationEquals(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function __PRIVATE_fieldTransformsAreEqual(e,t){return void 0===e&&void 0===t||!(!e||!t)&&__PRIVATE_arrayEquals(e,t,(e,t)=>function __PRIVATE_fieldTransformEquals(e,t){return e.field.isEqual(t.field)&&function __PRIVATE_transformOperationEquals(e,t){return e instanceof __PRIVATE_ArrayUnionTransformOperation&&t instanceof __PRIVATE_ArrayUnionTransformOperation||e instanceof __PRIVATE_ArrayRemoveTransformOperation&&t instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_arrayEquals(e.elements,t.elements,__PRIVATE_valueEquals):e instanceof __PRIVATE_NumericIncrementTransformOperation&&t instanceof __PRIVATE_NumericIncrementTransformOperation?__PRIVATE_valueEquals(e.Ae,t.Ae):e instanceof __PRIVATE_ServerTimestampTransform&&t instanceof __PRIVATE_ServerTimestampTransform}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class __PRIVATE_SetMutation extends Mutation{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class __PRIVATE_PatchMutation extends Mutation{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function __PRIVATE_getPatch(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function __PRIVATE_serverTransformResults(e,t,n){const r=new Map;__PRIVATE_hardAssert(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,_=t.data.field(s.field);r.set(s.field,__PRIVATE_applyTransformOperationToRemoteDocument(o,_,n[i]))}return r}function __PRIVATE_localTransformResults(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,__PRIVATE_applyTransformOperationToLocalView(e,s,t))}return r}class __PRIVATE_DeleteMutation extends Mutation{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class __PRIVATE_VerifyMutation extends Mutation{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class MutationBatch{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){const r=this.mutations[t];r.key.isEqual(e.key)&&__PRIVATE_mutationApplyToRemoteDocument(r,e,n[t])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=__PRIVATE_mutationApplyToLocalView(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=__PRIVATE_mutationApplyToLocalView(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=__PRIVATE_newMutationMap();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const _=__PRIVATE_calculateOverlayMutation(s,o);null!==_&&n.set(r.key,_),s.isValidDocument()||s.convertToNoDocument(SnapshotVersion.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),__PRIVATE_documentKeySet())}isEqual(e){return this.batchId===e.batchId&&__PRIVATE_arrayEquals(this.mutations,e.mutations,(e,t)=>__PRIVATE_mutationEquals(e,t))&&__PRIVATE_arrayEquals(this.baseMutations,e.baseMutations,(e,t)=>__PRIVATE_mutationEquals(e,t))}}class MutationBatchResult{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){__PRIVATE_hardAssert(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=function __PRIVATE_documentVersionMap(){return mt}();const i=e.mutations;for(let e=0;e<i.length;e++)r=r.insert(i[e].key,n[e].version);return new MutationBatchResult(e,t,n,r)}}class Overlay{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}var pt,yt;function __PRIVATE_isPermanentError(e){switch(e){case N.OK:return fail(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return fail(15467,{code:e})}}function __PRIVATE_mapCodeFromRpcCode(e){if(void 0===e)return __PRIVATE_logError("GRPC error has no .code"),N.UNKNOWN;switch(e){case pt.OK:return N.OK;case pt.CANCELLED:return N.CANCELLED;case pt.UNKNOWN:return N.UNKNOWN;case pt.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case pt.INTERNAL:return N.INTERNAL;case pt.UNAVAILABLE:return N.UNAVAILABLE;case pt.UNAUTHENTICATED:return N.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case pt.NOT_FOUND:return N.NOT_FOUND;case pt.ALREADY_EXISTS:return N.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return N.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case pt.ABORTED:return N.ABORTED;case pt.OUT_OF_RANGE:return N.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return N.UNIMPLEMENTED;case pt.DATA_LOSS:return N.DATA_LOSS;default:return fail(39323,{code:e})}}(yt=pt||(pt={}))[yt.OK=0]="OK",yt[yt.CANCELLED=1]="CANCELLED",yt[yt.UNKNOWN=2]="UNKNOWN",yt[yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt[yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt[yt.NOT_FOUND=5]="NOT_FOUND",yt[yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt[yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt[yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt[yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt[yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt[yt.ABORTED=10]="ABORTED",yt[yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt[yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt[yt.INTERNAL=13]="INTERNAL",yt[yt.UNAVAILABLE=14]="UNAVAILABLE",yt[yt.DATA_LOSS=15]="DATA_LOSS";new Integer([4294967295,4294967295],0);Error;class JsonProtoSerializer{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function toTimestamp(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function __PRIVATE_toBytes(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function __PRIVATE_toVersion(e,t){return toTimestamp(e,t.toTimestamp())}function __PRIVATE_fromVersion(e){return __PRIVATE_hardAssert(!!e,49232),SnapshotVersion.fromTimestamp(function fromTimestamp(e){const t=__PRIVATE_normalizeTimestamp(e);return new Timestamp(t.seconds,t.nanos)}(e))}function __PRIVATE_toResourceName(e,t){return __PRIVATE_toResourcePath(e,t).canonicalString()}function __PRIVATE_toResourcePath(e,t){const n=function __PRIVATE_fullyQualifiedPrefixPath(e){return new ResourcePath(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function __PRIVATE_fromResourceName(e){const t=ResourcePath.fromString(e);return __PRIVATE_hardAssert(__PRIVATE_isValidResourceName(t),10190,{key:t.toString()}),t}function __PRIVATE_toName(e,t){return __PRIVATE_toResourceName(e.databaseId,t.path)}function __PRIVATE_fromQueryPath(e){const t=__PRIVATE_fromResourceName(e);return 4===t.length?ResourcePath.emptyPath():__PRIVATE_extractLocalPathFromResourceName(t)}function __PRIVATE_getEncodedDatabaseId(e){return new ResourcePath(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function __PRIVATE_extractLocalPathFromResourceName(e){return __PRIVATE_hardAssert(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function __PRIVATE_toMutationDocument(e,t,n){return{name:__PRIVATE_toName(e,t),fields:n.value.mapValue.fields}}function toMutation(e,t){let n;if(t instanceof __PRIVATE_SetMutation)n={update:__PRIVATE_toMutationDocument(e,t.key,t.value)};else if(t instanceof __PRIVATE_DeleteMutation)n={delete:__PRIVATE_toName(e,t.key)};else if(t instanceof __PRIVATE_PatchMutation)n={update:__PRIVATE_toMutationDocument(e,t.key,t.data),updateMask:__PRIVATE_toDocumentMask(t.fieldMask)};else{if(!(t instanceof __PRIVATE_VerifyMutation))return fail(16599,{Vt:t.type});n={verify:__PRIVATE_toName(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function __PRIVATE_toFieldTransform(e,t){const n=t.transform;if(n instanceof __PRIVATE_ServerTimestampTransform)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof __PRIVATE_ArrayUnionTransformOperation)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof __PRIVATE_ArrayRemoveTransformOperation)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof __PRIVATE_NumericIncrementTransformOperation)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw fail(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function __PRIVATE_toPrecondition(e,t){return void 0!==t.updateTime?{updateTime:__PRIVATE_toVersion(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:fail(27497)}(e,t.precondition)),n}function __PRIVATE_convertQueryTargetToQuery(e){let t=__PRIVATE_fromQueryPath(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){__PRIVATE_hardAssert(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function __PRIVATE_fromFilters(e){const t=__PRIVATE_fromFilter(e);return t instanceof CompositeFilter&&__PRIVATE_compositeFilterIsFlatConjunction(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function __PRIVATE_fromOrder(e){return e.map(e=>function __PRIVATE_fromPropertyOrder(e){return new OrderBy(__PRIVATE_fromFieldPathReference(e.field),function __PRIVATE_fromDirection(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let _=null;n.limit&&(_=function __PRIVATE_fromInt32Proto(e){let t;return t="object"==typeof e?e.value:e,__PRIVATE_isNullOrUndefined(t)?null:t}(n.limit));let a=null;n.startAt&&(a=function __PRIVATE_fromStartAtCursor(e){const t=!!e.before,n=e.values||[];return new Bound(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function __PRIVATE_fromEndAtCursor(e){const t=!e.before,n=e.values||[];return new Bound(n,t)}(n.endAt)),__PRIVATE_newQuery(t,i,o,s,_,"F",a,u)}function __PRIVATE_fromFilter(e){return void 0!==e.unaryFilter?function __PRIVATE_fromUnaryFilter(e){switch(e.unaryFilter.op){case"IS_NAN":const t=__PRIVATE_fromFieldPathReference(e.unaryFilter.field);return FieldFilter.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=__PRIVATE_fromFieldPathReference(e.unaryFilter.field);return FieldFilter.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=__PRIVATE_fromFieldPathReference(e.unaryFilter.field);return FieldFilter.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=__PRIVATE_fromFieldPathReference(e.unaryFilter.field);return FieldFilter.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fail(61313);default:return fail(60726)}}(e):void 0!==e.fieldFilter?function __PRIVATE_fromFieldFilter(e){return FieldFilter.create(__PRIVATE_fromFieldPathReference(e.fieldFilter.field),function __PRIVATE_fromOperatorName(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fail(58110);default:return fail(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function __PRIVATE_fromCompositeFilter(e){return CompositeFilter.create(e.compositeFilter.filters.map(e=>__PRIVATE_fromFilter(e)),function __PRIVATE_fromCompositeOperatorName(e){switch(e){case"AND":return"and";case"OR":return"or";default:return fail(1026)}}(e.compositeFilter.op))}(e):fail(30097,{filter:e})}function __PRIVATE_fromFieldPathReference(e){return FieldPath$1.fromServerFormat(e.fieldPath)}function __PRIVATE_toDocumentMask(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function __PRIVATE_isValidResourceName(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class __PRIVATE_LocalSerializer{constructor(e){this.yt=e}}function __PRIVATE_fromBundledQuery(e){const t=__PRIVATE_convertQueryTargetToQuery({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?__PRIVATE_queryWithLimit(t,t.limit,"L"):t}class __PRIVATE_FirestoreIndexValueWriter{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(__PRIVATE_normalizeNumber(e.integerValue));else if("doubleValue"in e){const n=__PRIVATE_normalizeNumber(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),__PRIVATE_isNegativeZero(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=__PRIVATE_normalizeTimestamp(n)),t.xt(`${n.seconds||""}`),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(__PRIVATE_normalizeByteString(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?__PRIVATE_isMaxValue(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):__PRIVATE_isVectorValue(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):fail(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const e of Object.keys(n))this.Ot(e,t),this.Ct(n[e],t)}kt(e,t){const n=e.fields||{};this.Ft(t,53);const r=Et,i=n[r].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(__PRIVATE_normalizeNumber(i)),this.Ot(r,t),this.Ct(n[r],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const e of n)this.Ct(e,t)}Lt(e,t){this.Ft(t,37),DocumentKey.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}__PRIVATE_FirestoreIndexValueWriter.Kt=new __PRIVATE_FirestoreIndexValueWriter;class __PRIVATE_MemoryIndexManager{constructor(){this.Cn=new __PRIVATE_MemoryCollectionParentIndex}addToCollectionParentIndex(e,t){return this.Cn.add(t),PersistencePromise.resolve()}getCollectionParents(e,t){return PersistencePromise.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return PersistencePromise.resolve()}deleteFieldIndex(e,t){return PersistencePromise.resolve()}deleteAllFieldIndexes(e){return PersistencePromise.resolve()}createTargetIndexes(e,t){return PersistencePromise.resolve()}getDocumentsMatchingTarget(e,t){return PersistencePromise.resolve(null)}getIndexType(e,t){return PersistencePromise.resolve(0)}getFieldIndexes(e,t){return PersistencePromise.resolve([])}getNextCollectionGroupToUpdate(e){return PersistencePromise.resolve(null)}getMinOffset(e,t){return PersistencePromise.resolve(IndexOffset.min())}getMinOffsetFromCollectionGroup(e,t){return PersistencePromise.resolve(IndexOffset.min())}updateCollectionGroup(e,t,n){return PersistencePromise.resolve()}updateIndexEntries(e,t){return PersistencePromise.resolve()}}class __PRIVATE_MemoryCollectionParentIndex{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new SortedSet(ResourcePath.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new SortedSet(ResourcePath.comparator)).toArray()}}new Uint8Array(0);const xt={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class LruParams{static withCacheSize(e){return new LruParams(e,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}LruParams.DEFAULT_COLLECTION_PERCENTILE=10,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,LruParams.DEFAULT=new LruParams(41943040,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),LruParams.DISABLED=new LruParams(-1,0,0);class __PRIVATE_TargetIdGenerator{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new __PRIVATE_TargetIdGenerator(0)}static cr(){return new __PRIVATE_TargetIdGenerator(-1)}}const Nt="LruGarbageCollector";function __PRIVATE_bufferEntryComparator([e,t],[n,r]){const i=__PRIVATE_primitiveComparator(e,n);return 0===i?__PRIVATE_primitiveComparator(t,r):i}class __PRIVATE_RollingSequenceNumberBuffer{constructor(e){this.Ir=e,this.buffer=new SortedSet(__PRIVATE_bufferEntryComparator),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();__PRIVATE_bufferEntryComparator(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class __PRIVATE_LruScheduler{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){__PRIVATE_logDebug(Nt,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){__PRIVATE_isIndexedDbTransactionError(e)?__PRIVATE_logDebug(Nt,"Ignoring IndexedDB error during garbage collection: ",e):await __PRIVATE_ignoreIfPrimaryLeaseLoss(e)}await this.Vr(3e5)})}}class __PRIVATE_LruGarbageCollectorImpl{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return PersistencePromise.resolve(__PRIVATE_ListenSequence.ce);const n=new __PRIVATE_RollingSequenceNumberBuffer(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(__PRIVATE_logDebug("LruGarbageCollector","Garbage collection skipped; disabled"),PersistencePromise.resolve(xt)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(__PRIVATE_logDebug("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xt):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,s,o,_,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(__PRIVATE_logDebug("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,_=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(u=Date.now(),__PRIVATE_getLogLevel()<=dist_esm_index_esm.$b.DEBUG&&__PRIVATE_logDebug("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-c}ms\n\tDetermined least recently used ${r} in `+(o-s)+"ms\n"+`\tRemoved ${i} targets in `+(_-o)+"ms\n"+`\tRemoved ${e} documents in `+(u-_)+"ms\n"+`Total Duration: ${u-c}ms`),PersistencePromise.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function __PRIVATE_newLruGarbageCollector(e,t){return new __PRIVATE_LruGarbageCollectorImpl(e,t)}class RemoteDocumentChangeBuffer{constructor(){this.changes=new ObjectMap(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,MutableDocument.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?PersistencePromise.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class OverlayedDocument{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class LocalDocumentsView{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&__PRIVATE_mutationApplyToLocalView(n.mutation,e,FieldMask.empty(),Timestamp.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,__PRIVATE_documentKeySet()).next(()=>t))}getLocalViewOfDocuments(e,t,n=__PRIVATE_documentKeySet()){const r=__PRIVATE_newOverlayMap();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=documentMap();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=__PRIVATE_newOverlayMap();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,__PRIVATE_documentKeySet()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=__PRIVATE_mutableDocumentMap();const s=__PRIVATE_newDocumentKeyMap(),o=function __PRIVATE_newOverlayedDocumentMap(){return __PRIVATE_newDocumentKeyMap()}();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof __PRIVATE_PatchMutation)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),__PRIVATE_mutationApplyToLocalView(o.mutation,t,o.mutation.getFieldMask(),Timestamp.now())):s.set(t.key,FieldMask.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>o.set(e,new OverlayedDocument(t,s.get(e)??null))),o))}recalculateAndSaveOverlays(e,t){const n=__PRIVATE_newDocumentKeyMap();let r=new SortedMap((e,t)=>e-t),i=__PRIVATE_documentKeySet();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||FieldMask.empty();o=i.applyToLocalView(s,o),n.set(e,o);const _=(r.get(i.batchId)||__PRIVATE_documentKeySet()).add(e);r=r.insert(i.batchId,_)})}).next(()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),_=r.key,a=r.value,u=__PRIVATE_newMutationMap();a.forEach(e=>{if(!i.has(e)){const r=__PRIVATE_calculateOverlayMutation(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,_,u))}return PersistencePromise.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function __PRIVATE_isDocumentQuery$1(e){return DocumentKey.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):__PRIVATE_isCollectionGroupQuery(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):PersistencePromise.resolve(__PRIVATE_newOverlayMap());let o=U,_=i;return s.next(t=>PersistencePromise.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?PersistencePromise.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{_=_.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,_,t,__PRIVATE_documentKeySet())).next(e=>({batchId:o,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new DocumentKey(t)).next(e=>{let t=documentMap();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=documentMap();return this.indexManager.getCollectionParents(e,i).next(o=>PersistencePromise.forEach(o,o=>{const _=function __PRIVATE_asCollectionQueryAtPath(e,t){return new __PRIVATE_QueryImpl(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,_,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,MutableDocument.newInvalidDocument(r)))});let n=documentMap();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&__PRIVATE_mutationApplyToLocalView(s.mutation,r,FieldMask.empty(),Timestamp.now()),__PRIVATE_queryMatches(t,r)&&(n=n.insert(e,r))}),n})}}class __PRIVATE_MemoryBundleCache{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return PersistencePromise.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function __PRIVATE_fromBundleMetadata(e){return{id:e.id,version:e.version,createTime:__PRIVATE_fromVersion(e.createTime)}}(t)),PersistencePromise.resolve()}getNamedQuery(e,t){return PersistencePromise.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function __PRIVATE_fromProtoNamedQuery(e){return{name:e.name,query:__PRIVATE_fromBundledQuery(e.bundledQuery),readTime:__PRIVATE_fromVersion(e.readTime)}}(t)),PersistencePromise.resolve()}}class __PRIVATE_MemoryDocumentOverlayCache{constructor(){this.overlays=new SortedMap(DocumentKey.comparator),this.qr=new Map}getOverlay(e,t){return PersistencePromise.resolve(this.overlays.get(t))}getOverlays(e,t){const n=__PRIVATE_newOverlayMap();return PersistencePromise.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),PersistencePromise.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),PersistencePromise.resolve()}getOverlaysForCollection(e,t,n){const r=__PRIVATE_newOverlayMap(),i=t.length+1,s=new DocumentKey(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return PersistencePromise.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new SortedMap((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=__PRIVATE_newOverlayMap(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=__PRIVATE_newOverlayMap(),_=i.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return PersistencePromise.resolve(o)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Overlay(t,n));let i=this.qr.get(t);void 0===i&&(i=__PRIVATE_documentKeySet(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}class __PRIVATE_MemoryGlobalsCache{constructor(){this.sessionToken=ByteString.EMPTY_BYTE_STRING}getSessionToken(e){return PersistencePromise.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,PersistencePromise.resolve()}}class __PRIVATE_ReferenceSet{constructor(){this.Qr=new SortedSet(__PRIVATE_DocReference.$r),this.Ur=new SortedSet(__PRIVATE_DocReference.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new __PRIVATE_DocReference(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new __PRIVATE_DocReference(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new DocumentKey(new ResourcePath([])),n=new __PRIVATE_DocReference(t,e),r=new __PRIVATE_DocReference(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new DocumentKey(new ResourcePath([])),n=new __PRIVATE_DocReference(t,e),r=new __PRIVATE_DocReference(t,e+1);let i=__PRIVATE_documentKeySet();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new __PRIVATE_DocReference(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class __PRIVATE_DocReference{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return DocumentKey.comparator(e.key,t.key)||__PRIVATE_primitiveComparator(e.Yr,t.Yr)}static Kr(e,t){return __PRIVATE_primitiveComparator(e.Yr,t.Yr)||DocumentKey.comparator(e.key,t.key)}}class __PRIVATE_MemoryMutationQueue{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new SortedSet(__PRIVATE_DocReference.$r)}checkEmpty(e){return PersistencePromise.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new MutationBatch(i,t,n,r);this.mutationQueue.push(s);for(const t of r)this.Zr=this.Zr.add(new __PRIVATE_DocReference(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return PersistencePromise.resolve(s)}lookupMutationBatch(e,t){return PersistencePromise.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return PersistencePromise.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return PersistencePromise.resolve(0===this.mutationQueue.length?j:this.tr-1)}getAllMutationBatches(e){return PersistencePromise.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new __PRIVATE_DocReference(t,0),r=new __PRIVATE_DocReference(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),PersistencePromise.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new SortedSet(__PRIVATE_primitiveComparator);return t.forEach(e=>{const t=new __PRIVATE_DocReference(e,0),r=new __PRIVATE_DocReference(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),PersistencePromise.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;DocumentKey.isDocumentKey(i)||(i=i.child(""));const s=new __PRIVATE_DocReference(new DocumentKey(i),0);let o=new SortedSet(__PRIVATE_primitiveComparator);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Yr)),!0)},s),PersistencePromise.resolve(this.ti(o))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){__PRIVATE_hardAssert(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return PersistencePromise.forEach(t.mutations,r=>{const i=new __PRIVATE_DocReference(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new __PRIVATE_DocReference(t,0),r=this.Zr.firstAfterOrEqual(n);return PersistencePromise.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,PersistencePromise.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class __PRIVATE_MemoryRemoteDocumentCacheImpl{constructor(e){this.ri=e,this.docs=function __PRIVATE_documentEntryMap(){return new SortedMap(DocumentKey.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return PersistencePromise.resolve(n?n.document.mutableCopy():MutableDocument.newInvalidDocument(t))}getEntries(e,t){let n=__PRIVATE_mutableDocumentMap();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():MutableDocument.newInvalidDocument(e))}),PersistencePromise.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=__PRIVATE_mutableDocumentMap();const s=t.path,o=new DocumentKey(s.child("__id-9223372036854775808__")),_=this.docs.getIteratorFrom(o);for(;_.hasNext();){const{key:e,value:{document:o}}=_.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||__PRIVATE_indexOffsetComparator(__PRIVATE_newIndexOffsetFromDocument(o),n)<=0||(r.has(o.key)||__PRIVATE_queryMatches(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return PersistencePromise.resolve(i)}getAllFromCollectionGroup(e,t,n,r){fail(9500)}ii(e,t){return PersistencePromise.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new __PRIVATE_MemoryRemoteDocumentChangeBuffer(this)}getSize(e){return PersistencePromise.resolve(this.size)}}class __PRIVATE_MemoryRemoteDocumentChangeBuffer extends RemoteDocumentChangeBuffer{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),PersistencePromise.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class __PRIVATE_MemoryTargetCache{constructor(e){this.persistence=e,this.si=new ObjectMap(e=>__PRIVATE_canonifyTarget(e),__PRIVATE_targetEquals),this.lastRemoteSnapshotVersion=SnapshotVersion.min(),this.highestTargetId=0,this.oi=0,this._i=new __PRIVATE_ReferenceSet,this.targetCount=0,this.ai=__PRIVATE_TargetIdGenerator.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),PersistencePromise.resolve()}getLastRemoteSnapshotVersion(e){return PersistencePromise.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return PersistencePromise.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),PersistencePromise.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),PersistencePromise.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new __PRIVATE_TargetIdGenerator(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,PersistencePromise.resolve()}updateTargetData(e,t){return this.Pr(t),PersistencePromise.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,PersistencePromise.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.si.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),PersistencePromise.waitFor(i).next(()=>r)}getTargetCount(e){return PersistencePromise.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return PersistencePromise.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),PersistencePromise.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),PersistencePromise.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),PersistencePromise.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return PersistencePromise.resolve(n)}containsKey(e,t){return PersistencePromise.resolve(this._i.containsKey(t))}}class __PRIVATE_MemoryPersistence{constructor(e,t){this.ui={},this.overlays={},this.ci=new __PRIVATE_ListenSequence(0),this.li=!1,this.li=!0,this.hi=new __PRIVATE_MemoryGlobalsCache,this.referenceDelegate=e(this),this.Pi=new __PRIVATE_MemoryTargetCache(this),this.indexManager=new __PRIVATE_MemoryIndexManager,this.remoteDocumentCache=function __PRIVATE_newMemoryRemoteDocumentCache(e){return new __PRIVATE_MemoryRemoteDocumentCacheImpl(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new __PRIVATE_LocalSerializer(t),this.Ii=new __PRIVATE_MemoryBundleCache(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new __PRIVATE_MemoryDocumentOverlayCache,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new __PRIVATE_MemoryMutationQueue(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){__PRIVATE_logDebug("MemoryPersistence","Starting transaction:",e);const r=new __PRIVATE_MemoryTransaction(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return PersistencePromise.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class __PRIVATE_MemoryTransaction extends PersistenceTransaction{constructor(e){super(),this.currentSequenceNumber=e}}class __PRIVATE_MemoryEagerDelegate{constructor(e){this.persistence=e,this.Ri=new __PRIVATE_ReferenceSet,this.Vi=null}static mi(e){return new __PRIVATE_MemoryEagerDelegate(e)}get fi(){if(this.Vi)return this.Vi;throw fail(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),PersistencePromise.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),PersistencePromise.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),PersistencePromise.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return PersistencePromise.forEach(this.fi,n=>{const r=DocumentKey.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,SnapshotVersion.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return PersistencePromise.or([()=>PersistencePromise.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class __PRIVATE_MemoryLruDelegate{constructor(e,t){this.persistence=e,this.pi=new ObjectMap(e=>__PRIVATE_encodeResourcePath(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=__PRIVATE_newLruGarbageCollector(this,t)}static mi(e,t){return new __PRIVATE_MemoryLruDelegate(e,t)}Ei(){}di(e){return PersistencePromise.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return PersistencePromise.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?PersistencePromise.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,i.removeEntry(r,SnapshotVersion.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),PersistencePromise.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),PersistencePromise.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),PersistencePromise.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),PersistencePromise.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=__PRIVATE_estimateByteSize(e.data.value)),t}br(e,t,n){return PersistencePromise.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return PersistencePromise.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class __PRIVATE_LocalViewChanges{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=__PRIVATE_documentKeySet(),r=__PRIVATE_documentKeySet();for(const e of t.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:r=r.add(e.doc.key)}return new __PRIVATE_LocalViewChanges(e,t.fromCache,n,r)}}class QueryContext{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class __PRIVATE_QueryEngine{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function __PRIVATE_getDefaultRelativeIndexReadCostPerDocument(){return(0,dist_index_esm.nr)()?8:__PRIVATE_getAndroidVersion((0,dist_index_esm.ZQ)())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new QueryContext;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(__PRIVATE_getLogLevel()<=dist_esm_index_esm.$b.DEBUG&&__PRIVATE_logDebug("QueryEngine","SDK will not create cache indexes for query:",__PRIVATE_stringifyQuery(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),PersistencePromise.resolve()):(__PRIVATE_getLogLevel()<=dist_esm_index_esm.$b.DEBUG&&__PRIVATE_logDebug("QueryEngine","Query:",__PRIVATE_stringifyQuery(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(__PRIVATE_getLogLevel()<=dist_esm_index_esm.$b.DEBUG&&__PRIVATE_logDebug("QueryEngine","The SDK decides to create cache indexes for query:",__PRIVATE_stringifyQuery(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,__PRIVATE_queryToTarget(t))):PersistencePromise.resolve())}ys(e,t){if(__PRIVATE_queryMatchesAllDocuments(t))return PersistencePromise.resolve(null);let n=__PRIVATE_queryToTarget(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=__PRIVATE_queryWithLimit(t,null,"F"),n=__PRIVATE_queryToTarget(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=__PRIVATE_documentKeySet(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.Ds(t,r);return this.Cs(t,s,i,n.readTime)?this.ys(e,__PRIVATE_queryWithLimit(t,null,"F")):this.vs(e,s,t,n)}))})))}ws(e,t,n,r){return __PRIVATE_queryMatchesAllDocuments(t)||r.isEqual(SnapshotVersion.min())?PersistencePromise.resolve(null):this.ps.getDocuments(e,n).next(i=>{const s=this.Ds(t,i);return this.Cs(t,s,n,r)?PersistencePromise.resolve(null):(__PRIVATE_getLogLevel()<=dist_esm_index_esm.$b.DEBUG&&__PRIVATE_logDebug("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),__PRIVATE_stringifyQuery(t)),this.vs(e,s,t,__PRIVATE_newIndexOffsetSuccessorFromReadTime(r,U)).next(e=>e))})}Ds(e,t){let n=new SortedSet(__PRIVATE_newQueryComparator(e));return t.forEach((t,r)=>{__PRIVATE_queryMatches(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return __PRIVATE_getLogLevel()<=dist_esm_index_esm.$b.DEBUG&&__PRIVATE_logDebug("QueryEngine","Using full collection scan to execute query:",__PRIVATE_stringifyQuery(t)),this.ps.getDocumentsMatchingQuery(e,t,IndexOffset.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Ut="LocalStore";class __PRIVATE_LocalStoreImpl{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new SortedMap(__PRIVATE_primitiveComparator),this.xs=new ObjectMap(e=>__PRIVATE_canonifyTarget(e),__PRIVATE_targetEquals),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LocalDocumentsView(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function __PRIVATE_newLocalStore(e,t,n,r){return new __PRIVATE_LocalStoreImpl(e,t,n,r)}async function __PRIVATE_localStoreHandleUserChange(e,t){const n=__PRIVATE_debugCast(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let o=__PRIVATE_documentKeySet();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:s}))})})}function __PRIVATE_localStoreGetLastRemoteSnapshotVersion(e){const t=__PRIVATE_debugCast(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function __PRIVATE_localStoreGetNextMutationBatch(e,t){const n=__PRIVATE_debugCast(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=j),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}class __PRIVATE_LocalClientState{constructor(){this.activeTargetIds=__PRIVATE_targetIdSet()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class __PRIVATE_MemorySharedClientState{constructor(){this.Mo=new __PRIVATE_LocalClientState,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new __PRIVATE_LocalClientState,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class __PRIVATE_NoopConnectivityMonitor{Oo(e){}shutdown(){}}const Jt="ConnectivityMonitor";class __PRIVATE_BrowserConnectivityMonitor{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){__PRIVATE_logDebug(Jt,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){__PRIVATE_logDebug(Jt,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Ht=null;function __PRIVATE_generateUniqueDebugId(){return null===Ht?Ht=function __PRIVATE_generateInitialUniqueDebugId(){return 268435456+Math.round(2147483648*Math.random())}():Ht++,"0x"+Ht.toString(16)}const Yt="RestConnection",Zt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class __PRIVATE_RestConnection{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${r}`,this.Wo=this.databaseId.database===lt?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Go(e,t,n,r,i){const s=__PRIVATE_generateUniqueDebugId(),o=this.zo(e,t.toUriEncodedString());__PRIVATE_logDebug(Yt,`Sending RPC '${e}' ${s}:`,o,n);const _={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(_,r,i);const{host:a}=new URL(o),u=(0,dist_index_esm.zJ)(a);return this.Jo(e,o,_,n,u).then(t=>(__PRIVATE_logDebug(Yt,`Received RPC '${e}' ${s}: `,t),t),t=>{throw __PRIVATE_logWarn(Yt,`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t})}Ho(e,t,n,r,i,s){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]=function __PRIVATE_getGoogApiClientValue(){return"gl-js/ fire/"+x}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=Zt[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}class __PRIVATE_StreamBridge{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Xt="WebChannelConnection";class __PRIVATE_WebChannelConnection extends __PRIVATE_RestConnection{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const s=__PRIVATE_generateUniqueDebugId();return new Promise((i,o)=>{const _=new XhrIo;_.setWithCredentials(!0),_.listenOnce(EventType.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case ErrorCode.NO_ERROR:const t=_.getResponseJson();__PRIVATE_logDebug(Xt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(t)),i(t);break;case ErrorCode.TIMEOUT:__PRIVATE_logDebug(Xt,`RPC '${e}' ${s} timed out`),o(new FirestoreError(N.DEADLINE_EXCEEDED,"Request time out"));break;case ErrorCode.HTTP_ERROR:const n=_.getStatus();if(__PRIVATE_logDebug(Xt,`RPC '${e}' ${s} failed with status:`,n,"response text:",_.getResponseText()),n>0){let e=_.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=e?.error;if(t&&t.status&&t.message){const e=function __PRIVATE_mapCodeFromHttpResponseErrorStatus(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(t)>=0?t:N.UNKNOWN}(t.status);o(new FirestoreError(e,t.message))}else o(new FirestoreError(N.UNKNOWN,"Server responded with status "+_.getStatus()))}else o(new FirestoreError(N.UNAVAILABLE,"Connection failed."));break;default:fail(9055,{l_:e,streamId:s,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{__PRIVATE_logDebug(Xt,`RPC '${e}' ${s} completed.`)}});const a=JSON.stringify(r);__PRIVATE_logDebug(Xt,`RPC '${e}' ${s} sending request:`,r),_.send(t,"POST",a,n,15)})}T_(e,t,n){const r=__PRIVATE_generateUniqueDebugId(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=createWebChannelTransport(),o=getStatEventTarget(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},a=this.longPollingOptions.timeoutSeconds;void 0!==a&&(_.longPollingTimeout=Math.round(1e3*a)),this.useFetchStreams&&(_.useFetchStreams=!0),this.jo(_.initMessageHeaders,t,n),_.encodeInitMessageHeaders=!0;const u=i.join("");__PRIVATE_logDebug(Xt,`Creating RPC '${e}' stream ${r}: ${u}`,_);const c=s.createWebChannel(u,_);this.I_(c);let l=!1,h=!1;const P=new __PRIVATE_StreamBridge({Yo:t=>{h?__PRIVATE_logDebug(Xt,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(l||(__PRIVATE_logDebug(Xt,`Opening RPC '${e}' stream ${r} transport.`),c.open(),l=!0),__PRIVATE_logDebug(Xt,`RPC '${e}' stream ${r} sending:`,t),c.send(t))},Zo:()=>c.close()}),__PRIVATE_unguardedEventListen=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return __PRIVATE_unguardedEventListen(c,WebChannel.EventType.OPEN,()=>{h||(__PRIVATE_logDebug(Xt,`RPC '${e}' stream ${r} transport opened.`),P.o_())}),__PRIVATE_unguardedEventListen(c,WebChannel.EventType.CLOSE,()=>{h||(h=!0,__PRIVATE_logDebug(Xt,`RPC '${e}' stream ${r} transport closed`),P.a_(),this.E_(c))}),__PRIVATE_unguardedEventListen(c,WebChannel.EventType.ERROR,t=>{h||(h=!0,__PRIVATE_logWarn(Xt,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,"Message:",t.message),P.a_(new FirestoreError(N.UNAVAILABLE,"The operation could not be completed")))}),__PRIVATE_unguardedEventListen(c,WebChannel.EventType.MESSAGE,t=>{if(!h){const n=t.data[0];__PRIVATE_hardAssert(!!n,16349);const i=n,s=i?.error||i[0]?.error;if(s){__PRIVATE_logDebug(Xt,`RPC '${e}' stream ${r} received error:`,s);const t=s.status;let n=function __PRIVATE_mapCodeFromRpcStatus(e){const t=pt[e];if(void 0!==t)return __PRIVATE_mapCodeFromRpcCode(t)}(t),i=s.message;void 0===n&&(n=N.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),h=!0,P.a_(new FirestoreError(n,i)),c.close()}else __PRIVATE_logDebug(Xt,`RPC '${e}' stream ${r} received:`,n),P.u_(n)}}),__PRIVATE_unguardedEventListen(o,Event.STAT_EVENT,t=>{t.stat===Stat.PROXY?__PRIVATE_logDebug(Xt,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Stat.NOPROXY&&__PRIVATE_logDebug(Xt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{P.__()},0),P}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function getDocument(){return"undefined"!=typeof document?document:null}function __PRIVATE_newSerializer(e){return new JsonProtoSerializer(e,!0)}class __PRIVATE_ExponentialBackoff{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&__PRIVATE_logDebug("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const en="PersistentStream";class __PRIVATE_PersistentStream{constructor(e,t,n,r,i,s,o,_){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=_,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new __PRIVATE_ExponentialBackoff(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(__PRIVATE_logError(t.toString()),__PRIVATE_logError("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===N.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,n])=>{this.D_===t&&this.G_(e,n)},t=>{e(()=>{const e=new FirestoreError(N.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return __PRIVATE_logDebug(en,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(__PRIVATE_logDebug(en,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class __PRIVATE_PersistentWriteStream extends __PRIVATE_PersistentStream{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return __PRIVATE_hardAssert(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,__PRIVATE_hardAssert(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){__PRIVATE_hardAssert(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function __PRIVATE_fromWriteResults(e,t){return e&&e.length>0?(__PRIVATE_hardAssert(void 0!==t,14353),e.map(e=>function __PRIVATE_fromWriteResult(e,t){let n=e.updateTime?__PRIVATE_fromVersion(e.updateTime):__PRIVATE_fromVersion(t);return n.isEqual(SnapshotVersion.min())&&(n=__PRIVATE_fromVersion(t)),new MutationResult(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=__PRIVATE_fromVersion(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=__PRIVATE_getEncodedDatabaseId(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>toMutation(this.serializer,e))};this.q_(t)}}class Datastore{}class __PRIVATE_DatastoreImpl extends Datastore{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new FirestoreError(N.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Go(e,__PRIVATE_toResourcePath(t,n),r,i,s)).catch(e=>{throw"FirebaseError"===e.name?(e.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new FirestoreError(N.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Ho(e,__PRIVATE_toResourcePath(t,n),r,s,o,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new FirestoreError(N.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class __PRIVATE_OnlineStateTracker{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(__PRIVATE_logError(t),this.aa=!1):__PRIVATE_logDebug("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const tn="RemoteStore";class __PRIVATE_RemoteStoreImpl{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{__PRIVATE_canUseNetwork(this)&&(__PRIVATE_logDebug(tn,"Restarting streams for network reachability change."),await async function __PRIVATE_restartNetwork(e){const t=__PRIVATE_debugCast(e);t.Ea.add(4),await __PRIVATE_disableNetworkInternal(t),t.Ra.set("Unknown"),t.Ea.delete(4),await __PRIVATE_enableNetworkInternal(t)}(this))})}),this.Ra=new __PRIVATE_OnlineStateTracker(n,r)}}async function __PRIVATE_enableNetworkInternal(e){if(__PRIVATE_canUseNetwork(e))for(const t of e.da)await t(!0)}async function __PRIVATE_disableNetworkInternal(e){for(const t of e.da)await t(!1)}function __PRIVATE_canUseNetwork(e){return 0===__PRIVATE_debugCast(e).Ea.size}async function __PRIVATE_disableNetworkUntilRecovery(e,t,n){if(!__PRIVATE_isIndexedDbTransactionError(t))throw t;e.Ea.add(1),await __PRIVATE_disableNetworkInternal(e),e.Ra.set("Offline"),n||(n=()=>__PRIVATE_localStoreGetLastRemoteSnapshotVersion(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{__PRIVATE_logDebug(tn,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await __PRIVATE_enableNetworkInternal(e)})}function __PRIVATE_executeWithRecovery(e,t){return t().catch(n=>__PRIVATE_disableNetworkUntilRecovery(e,n,t))}async function __PRIVATE_fillWritePipeline(e){const t=__PRIVATE_debugCast(e),n=__PRIVATE_ensureWriteStream(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:j;for(;__PRIVATE_canAddToWritePipeline(t);)try{const e=await __PRIVATE_localStoreGetNextMutationBatch(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,__PRIVATE_addToWritePipeline(t,e)}catch(e){await __PRIVATE_disableNetworkUntilRecovery(t,e)}__PRIVATE_shouldStartWriteStream(t)&&__PRIVATE_startWriteStream(t)}function __PRIVATE_canAddToWritePipeline(e){return __PRIVATE_canUseNetwork(e)&&e.Ta.length<10}function __PRIVATE_addToWritePipeline(e,t){e.Ta.push(t);const n=__PRIVATE_ensureWriteStream(e);n.O_()&&n.X_&&n.ea(t.mutations)}function __PRIVATE_shouldStartWriteStream(e){return __PRIVATE_canUseNetwork(e)&&!__PRIVATE_ensureWriteStream(e).x_()&&e.Ta.length>0}function __PRIVATE_startWriteStream(e){__PRIVATE_ensureWriteStream(e).start()}async function __PRIVATE_onWriteStreamOpen(e){__PRIVATE_ensureWriteStream(e).ra()}async function __PRIVATE_onWriteHandshakeComplete(e){const t=__PRIVATE_ensureWriteStream(e);for(const n of e.Ta)t.ea(n.mutations)}async function __PRIVATE_onMutationResult(e,t,n){const r=e.Ta.shift(),i=MutationBatchResult.from(r,t,n);await __PRIVATE_executeWithRecovery(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await __PRIVATE_fillWritePipeline(e)}async function __PRIVATE_onWriteStreamClose(e,t){t&&__PRIVATE_ensureWriteStream(e).X_&&await async function __PRIVATE_handleWriteError(e,t){if(function __PRIVATE_isPermanentWriteError(e){return __PRIVATE_isPermanentError(e)&&e!==N.ABORTED}(t.code)){const n=e.Ta.shift();__PRIVATE_ensureWriteStream(e).B_(),await __PRIVATE_executeWithRecovery(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await __PRIVATE_fillWritePipeline(e)}}(e,t),__PRIVATE_shouldStartWriteStream(e)&&__PRIVATE_startWriteStream(e)}async function __PRIVATE_remoteStoreHandleCredentialChange(e,t){const n=__PRIVATE_debugCast(e);n.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(tn,"RemoteStore received new credentials");const r=__PRIVATE_canUseNetwork(n);n.Ea.add(3),await __PRIVATE_disableNetworkInternal(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await __PRIVATE_enableNetworkInternal(n)}async function __PRIVATE_remoteStoreApplyPrimaryState(e,t){const n=__PRIVATE_debugCast(e);t?(n.Ea.delete(2),await __PRIVATE_enableNetworkInternal(n)):t||(n.Ea.add(2),await __PRIVATE_disableNetworkInternal(n),n.Ra.set("Unknown"))}function __PRIVATE_ensureWriteStream(e){return e.fa||(e.fa=function __PRIVATE_newPersistentWriteStream(e,t,n){const r=__PRIVATE_debugCast(e);return r.sa(),new __PRIVATE_PersistentWriteStream(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:__PRIVATE_onWriteStreamOpen.bind(null,e),r_:__PRIVATE_onWriteStreamClose.bind(null,e),ta:__PRIVATE_onWriteHandshakeComplete.bind(null,e),na:__PRIVATE_onMutationResult.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await __PRIVATE_fillWritePipeline(e)):(await e.fa.stop(),e.Ta.length>0&&(__PRIVATE_logDebug(tn,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}class DelayedOperation{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new __PRIVATE_Deferred,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new DelayedOperation(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new FirestoreError(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function __PRIVATE_wrapInUserErrorIfRecoverable(e,t){if(__PRIVATE_logError("AsyncQueue",`${t}: ${e}`),__PRIVATE_isIndexedDbTransactionError(e))return new FirestoreError(N.UNAVAILABLE,`${t}: ${e}`);throw e}class __PRIVATE_EventManagerImpl{constructor(){this.queries=__PRIVATE_newQueriesObjectMap(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function __PRIVATE_errorAllTargets(e,t){const n=__PRIVATE_debugCast(e),r=n.queries;n.queries=__PRIVATE_newQueriesObjectMap(),r.forEach((e,n)=>{for(const e of n.Sa)e.onError(t)})}(this,new FirestoreError(N.ABORTED,"Firestore shutting down"))}}function __PRIVATE_newQueriesObjectMap(){return new ObjectMap(e=>__PRIVATE_canonifyQuery(e),__PRIVATE_queryEquals)}function __PRIVATE_raiseSnapshotsInSyncEvent(e){e.Ca.forEach(e=>{e.next()})}var nn,rn;(rn=nn||(nn={})).Ma="default",rn.Cache="cache";const sn="SyncEngine";class __PRIVATE_SyncEngineImpl{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new ObjectMap(e=>__PRIVATE_canonifyQuery(e),__PRIVATE_queryEquals),this.Iu=new Map,this.Eu=new Set,this.du=new SortedMap(DocumentKey.comparator),this.Au=new Map,this.Ru=new __PRIVATE_ReferenceSet,this.Vu={},this.mu=new Map,this.fu=__PRIVATE_TargetIdGenerator.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}function __PRIVATE_syncEngineApplyOnlineStateChange(e,t,n){const r=__PRIVATE_debugCast(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function __PRIVATE_eventManagerOnOnlineStateChange(e,t){const n=__PRIVATE_debugCast(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const e of n.Sa)e.va(t)&&(r=!0)}),r&&__PRIVATE_raiseSnapshotsInSyncEvent(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function __PRIVATE_syncEngineApplySuccessfulWrite(e,t){const n=__PRIVATE_debugCast(e),r=t.batch.batchId;try{const e=await function __PRIVATE_localStoreAcknowledgeBatch(e,t){const n=__PRIVATE_debugCast(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function __PRIVATE_applyWriteToRemoteDocuments(e,t,n,r){const i=n.batch,s=i.keys();let o=PersistencePromise.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);__PRIVATE_hardAssert(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function __PRIVATE_getKeysWithTransformResults(e){let t=__PRIVATE_documentKeySet();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);__PRIVATE_processUserCallback(n,r,null),__PRIVATE_triggerPendingWritesCallbacks(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(n,e)}catch(e){await __PRIVATE_ignoreIfPrimaryLeaseLoss(e)}}async function __PRIVATE_syncEngineRejectFailedWrite(e,t,n){const r=__PRIVATE_debugCast(e);try{const e=await function __PRIVATE_localStoreRejectBatch(e,t){const n=__PRIVATE_debugCast(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(__PRIVATE_hardAssert(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);__PRIVATE_processUserCallback(r,t,n),__PRIVATE_triggerPendingWritesCallbacks(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(r,e)}catch(n){await __PRIVATE_ignoreIfPrimaryLeaseLoss(n)}}function __PRIVATE_triggerPendingWritesCallbacks(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function __PRIVATE_processUserCallback(e,t,n){const r=__PRIVATE_debugCast(e);let i=r.Vu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}async function __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(e,t,n){const r=__PRIVATE_debugCast(e),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((e,_)=>{o.push(r.pu(_,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){const t=e?!e.fromCache:n?.targetChanges.get(_.targetId)?.current;r.sharedClientState.updateQueryState(_.targetId,t?"current":"not-current")}if(e){i.push(e);const t=__PRIVATE_LocalViewChanges.As(_.targetId,e);s.push(t)}}))}),await Promise.all(o),r.Pu.H_(i),await async function __PRIVATE_localStoreNotifyLocalViewChanges(e,t){const n=__PRIVATE_debugCast(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>PersistencePromise.forEach(t,t=>PersistencePromise.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>PersistencePromise.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;__PRIVATE_logDebug(Ut,"Failed to update sequence numbers: "+e)}for(const e of t){const t=e.targetId;if(!e.fromCache){const e=n.Ms.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(t,i)}}}(r.localStore,s))}async function __PRIVATE_syncEngineHandleCredentialChange(e,t){const n=__PRIVATE_debugCast(e);if(!n.currentUser.isEqual(t)){__PRIVATE_logDebug(sn,"User change. New user:",t.toKey());const e=await __PRIVATE_localStoreHandleUserChange(n.localStore,t);n.currentUser=t,function __PRIVATE_rejectOutstandingPendingWritesCallbacks(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new FirestoreError(N.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(n,e.Ls)}}function __PRIVATE_syncEngineEnsureWriteCallbacks(e){const t=__PRIVATE_debugCast(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=__PRIVATE_syncEngineApplySuccessfulWrite.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=__PRIVATE_syncEngineRejectFailedWrite.bind(null,t),t}class __PRIVATE_MemoryOfflineComponentProvider{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=__PRIVATE_newSerializer(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return __PRIVATE_newLocalStore(this.persistence,new __PRIVATE_QueryEngine,e.initialUser,this.serializer)}Cu(e){return new __PRIVATE_MemoryPersistence(__PRIVATE_MemoryEagerDelegate.mi,this.serializer)}Du(e){return new __PRIVATE_MemorySharedClientState}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}__PRIVATE_MemoryOfflineComponentProvider.provider={build:()=>new __PRIVATE_MemoryOfflineComponentProvider};class __PRIVATE_LruGcMemoryOfflineComponentProvider extends __PRIVATE_MemoryOfflineComponentProvider{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){__PRIVATE_hardAssert(this.persistence.referenceDelegate instanceof __PRIVATE_MemoryLruDelegate,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new __PRIVATE_LruScheduler(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?LruParams.withCacheSize(this.cacheSizeBytes):LruParams.DEFAULT;return new __PRIVATE_MemoryPersistence(e=>__PRIVATE_MemoryLruDelegate.mi(e,t),this.serializer)}}class OnlineComponentProvider{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=__PRIVATE_syncEngineHandleCredentialChange.bind(null,this.syncEngine),await __PRIVATE_remoteStoreApplyPrimaryState(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function __PRIVATE_newEventManager(){return new __PRIVATE_EventManagerImpl}()}createDatastore(e){const t=__PRIVATE_newSerializer(e.databaseInfo.databaseId),n=function __PRIVATE_newConnection(e){return new __PRIVATE_WebChannelConnection(e)}(e.databaseInfo);return function __PRIVATE_newDatastore(e,t,n,r){return new __PRIVATE_DatastoreImpl(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function __PRIVATE_newRemoteStore(e,t,n,r,i){return new __PRIVATE_RemoteStoreImpl(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,e,0),function __PRIVATE_newConnectivityMonitor(){return __PRIVATE_BrowserConnectivityMonitor.v()?new __PRIVATE_BrowserConnectivityMonitor:new __PRIVATE_NoopConnectivityMonitor}())}createSyncEngine(e,t){return function __PRIVATE_newSyncEngine(e,t,n,r,i,s,o){const _=new __PRIVATE_SyncEngineImpl(e,t,n,r,i,s);return o&&(_.gu=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function __PRIVATE_remoteStoreShutdown(e){const t=__PRIVATE_debugCast(e);__PRIVATE_logDebug(tn,"RemoteStore shutting down."),t.Ea.add(5),await __PRIVATE_disableNetworkInternal(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}OnlineComponentProvider.provider={build:()=>new OnlineComponentProvider};const on="FirestoreClient";class FirestoreClient{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=User.UNAUTHENTICATED,this.clientId=__PRIVATE_AutoId.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{__PRIVATE_logDebug(on,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(__PRIVATE_logDebug(on,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new __PRIVATE_Deferred;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=__PRIVATE_wrapInUserErrorIfRecoverable(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function __PRIVATE_setOfflineComponentProvider(e,t){e.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(on,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await __PRIVATE_localStoreHandleUserChange(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function __PRIVATE_setOnlineComponentProvider(e,t){e.asyncQueue.verifyOperationInProgress();const n=await __PRIVATE_ensureOfflineComponents(e);__PRIVATE_logDebug(on,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>__PRIVATE_remoteStoreHandleCredentialChange(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>__PRIVATE_remoteStoreHandleCredentialChange(t.remoteStore,n)),e._onlineComponents=t}async function __PRIVATE_ensureOfflineComponents(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){__PRIVATE_logDebug(on,"Using user provided OfflineComponentProvider");try{await __PRIVATE_setOfflineComponentProvider(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function __PRIVATE_canFallbackFromIndexedDbError(e){return"FirebaseError"===e.name?e.code===N.FAILED_PRECONDITION||e.code===N.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;__PRIVATE_logWarn("Error using user provided cache. Falling back to memory cache: "+n),await __PRIVATE_setOfflineComponentProvider(e,new __PRIVATE_MemoryOfflineComponentProvider)}}else __PRIVATE_logDebug(on,"Using default OfflineComponentProvider"),await __PRIVATE_setOfflineComponentProvider(e,new __PRIVATE_LruGcMemoryOfflineComponentProvider(void 0));return e._offlineComponents}async function __PRIVATE_ensureOnlineComponents(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(__PRIVATE_logDebug(on,"Using user provided OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(e,e._uninitializedComponentsProvider._online)):(__PRIVATE_logDebug(on,"Using default OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(e,new OnlineComponentProvider))),e._onlineComponents}function __PRIVATE_getSyncEngine(e){return __PRIVATE_ensureOnlineComponents(e).then(e=>e.syncEngine)}function __PRIVATE_cloneLongPollingOptions(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const _n=new Map,an="firestore.googleapis.com";class FirestoreSettingsImpl{constructor(e){if(void 0===e.host){if(void 0!==e.ssl)throw new FirestoreError(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=an,this.ssl=true}else this.host=e.host,this.ssl=e.ssl??true;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new FirestoreError(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function __PRIVATE_validateIsNotUsedTogether(e,t,n,r){if(!0===t&&!0===r)throw new FirestoreError(N.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=__PRIVATE_cloneLongPollingOptions(e.experimentalLongPollingOptions??{}),function __PRIVATE_validateLongPollingOptions(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new FirestoreError(N.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new FirestoreError(N.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new FirestoreError(N.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function __PRIVATE_longPollingOptionsEqual(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Firestore$1{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FirestoreSettingsImpl({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new FirestoreError(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new FirestoreError(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FirestoreSettingsImpl(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function __PRIVATE_makeAuthCredentialsProvider(e){if(!e)return new __PRIVATE_EmptyAuthCredentialsProvider;switch(e.type){case"firstParty":return new __PRIVATE_FirstPartyAuthCredentialsProvider(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new FirestoreError(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function __PRIVATE_removeComponents(e){const t=_n.get(e);t&&(__PRIVATE_logDebug("ComponentProvider","Removing Datastore"),_n.delete(e),t.terminate())}(this),Promise.resolve()}}class Query{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Query(this.firestore,e,this._query)}}class DocumentReference{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new CollectionReference(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new DocumentReference(this.firestore,e,this._key)}toJSON(){return{type:DocumentReference._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(__PRIVATE_validateJSON(t,DocumentReference._jsonSchema))return new DocumentReference(e,n||null,new DocumentKey(ResourcePath.fromString(t.referencePath)))}}DocumentReference._jsonSchemaVersion="firestore/documentReference/1.0",DocumentReference._jsonSchema={type:property("string",DocumentReference._jsonSchemaVersion),referencePath:property("string")};class CollectionReference extends Query{constructor(e,t,n){super(e,t,__PRIVATE_newQueryForPath(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new DocumentReference(this.firestore,null,new DocumentKey(e))}withConverter(e){return new CollectionReference(this.firestore,e,this._path)}}function doc(e,t,...n){if(e=(0,dist_index_esm.Ku)(e),1===arguments.length&&(t=__PRIVATE_AutoId.newId()),__PRIVATE_validateNonEmptyArgument("doc","path",t),e instanceof Firestore$1){const r=ResourcePath.fromString(t,...n);return __PRIVATE_validateDocumentPath(r),new DocumentReference(e,null,new DocumentKey(r))}{if(!(e instanceof DocumentReference||e instanceof CollectionReference))throw new FirestoreError(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ResourcePath.fromString(t,...n));return __PRIVATE_validateDocumentPath(r),new DocumentReference(e.firestore,e instanceof CollectionReference?e.converter:null,new DocumentKey(r))}}const cn="AsyncQueue";class __PRIVATE_AsyncQueueImpl{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new __PRIVATE_ExponentialBackoff(this,"async_queue_retry"),this._c=()=>{const e=getDocument();e&&__PRIVATE_logDebug(cn,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=getDocument();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=getDocument();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new __PRIVATE_Deferred;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;__PRIVATE_logDebug(cn,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,__PRIVATE_logError("INTERNAL UNHANDLED ERROR: ",__PRIVATE_getMessageOrStack(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=DelayedOperation.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&fail(47125,{Pc:__PRIVATE_getMessageOrStack(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function __PRIVATE_getMessageOrStack(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class Firestore extends Firestore$1{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new __PRIVATE_AsyncQueueImpl,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new __PRIVATE_AsyncQueueImpl(e),this._firestoreClient=void 0,await e}}}function getFirestore(e,n){const r="object"==typeof e?e:(0,index_esm.Sx)(),i="string"==typeof e?e:n||lt,s=(0,index_esm.j6)(r,"firestore").getImmediate({identifier:i});if(!s._initialized){const e=(0,dist_index_esm.yU)("firestore");e&&function connectFirestoreEmulator(e,t,n,r={}){e=__PRIVATE_cast(e,Firestore$1);const i=(0,dist_index_esm.zJ)(t),s=e._getSettings(),o={...s,emulatorOptions:e._getEmulatorOptions()},_=`${t}:${n}`;i&&((0,dist_index_esm.gE)(`https://${_}`),(0,dist_index_esm.P1)("Firestore",!0)),s.host!==an&&s.host!==_&&__PRIVATE_logWarn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const a={...s,host:_,ssl:i,emulatorOptions:r};if(!(0,dist_index_esm.bD)(a,o)&&(e._setSettings(a),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=User.MOCK_USER;else{t=(0,dist_index_esm.Fy)(r.mockUserToken,e._app?.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new FirestoreError(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new User(i)}e._authCredentials=new __PRIVATE_EmulatorAuthCredentialsProvider(new __PRIVATE_OAuthToken(t,n))}}(s,...e)}return s}function ensureFirestoreConfigured(e){if(e._terminated)throw new FirestoreError(N.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||__PRIVATE_configureFirestore(e),e._firestoreClient}function __PRIVATE_configureFirestore(e){const t=e._freezeSettings(),n=function __PRIVATE_makeDatabaseInfo(e,t,n,r){return new DatabaseInfo(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,__PRIVATE_cloneLongPollingOptions(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,e._app?.options.appId||"",e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new FirestoreClient(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function __PRIVATE_buildComponentProvider(e){const t=e?._online.build();return{_offline:e?._offline.build(t),_online:t}}(e._componentsProvider))}class Bytes{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bytes(ByteString.fromBase64String(e))}catch(e){throw new FirestoreError(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Bytes(ByteString.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Bytes._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(__PRIVATE_validateJSON(e,Bytes._jsonSchema))return Bytes.fromBase64String(e.bytes)}}Bytes._jsonSchemaVersion="firestore/bytes/1.0",Bytes._jsonSchema={type:property("string",Bytes._jsonSchemaVersion),bytes:property("string")};class FieldPath{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new FirestoreError(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new FieldPath$1(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class FieldValue{constructor(e){this._methodName=e}}class GeoPoint{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new FirestoreError(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new FirestoreError(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return __PRIVATE_primitiveComparator(this._lat,e._lat)||__PRIVATE_primitiveComparator(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:GeoPoint._jsonSchemaVersion}}static fromJSON(e){if(__PRIVATE_validateJSON(e,GeoPoint._jsonSchema))return new GeoPoint(e.latitude,e.longitude)}}GeoPoint._jsonSchemaVersion="firestore/geoPoint/1.0",GeoPoint._jsonSchema={type:property("string",GeoPoint._jsonSchemaVersion),latitude:property("number"),longitude:property("number")};class VectorValue{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function __PRIVATE_isPrimitiveArrayEqual(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:VectorValue._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(__PRIVATE_validateJSON(e,VectorValue._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new VectorValue(e.vectorValues);throw new FirestoreError(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}VectorValue._jsonSchemaVersion="firestore/vectorValue/1.0",VectorValue._jsonSchema={type:property("string",VectorValue._jsonSchemaVersion),vectorValues:property("object")};const hn=/^__.*__$/;class ParsedUpdateData{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new __PRIVATE_PatchMutation(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function __PRIVATE_isWrite(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fail(40011,{Ac:e})}}class __PRIVATE_ParseContextImpl{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new __PRIVATE_ParseContextImpl({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return __PRIVATE_createError(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(__PRIVATE_isWrite(this.Ac)&&hn.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class __PRIVATE_UserDataReader{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||__PRIVATE_newSerializer(e)}Cc(e,t,n,r=!1){return new __PRIVATE_ParseContextImpl({Ac:e,methodName:t,Dc:n,path:FieldPath$1.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function __PRIVATE_newUserDataReader(e){const t=e._freezeSettings(),n=__PRIVATE_newSerializer(e._databaseId);return new __PRIVATE_UserDataReader(e._databaseId,!!t.ignoreUndefinedProperties,n)}class __PRIVATE_DeleteFieldValueImpl extends FieldValue{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof __PRIVATE_DeleteFieldValueImpl}}class __PRIVATE_ServerTimestampFieldValueImpl extends FieldValue{_toFieldTransform(e){return new FieldTransform(e.path,new __PRIVATE_ServerTimestampTransform)}isEqual(e){return e instanceof __PRIVATE_ServerTimestampFieldValueImpl}}function __PRIVATE_parseUpdateData(e,t,n,r){const i=e.Cc(1,t,n);__PRIVATE_validatePlainObject("Data must be an object, but it was:",i,r);const s=[],o=ObjectValue.empty();forEach(r,(e,r)=>{const _=__PRIVATE_fieldPathFromDotSeparatedString(t,e,n);r=(0,dist_index_esm.Ku)(r);const a=i.yc(_);if(r instanceof __PRIVATE_DeleteFieldValueImpl)s.push(_);else{const e=__PRIVATE_parseData(r,a);null!=e&&(s.push(_),o.set(_,e))}});const _=new FieldMask(s);return new ParsedUpdateData(o,_,i.fieldTransforms)}function __PRIVATE_parseUpdateVarargs(e,t,n,r,i,s){const o=e.Cc(1,t,n),_=[__PRIVATE_fieldPathFromArgument$1(t,r,n)],a=[i];if(s.length%2!=0)throw new FirestoreError(N.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<s.length;e+=2)_.push(__PRIVATE_fieldPathFromArgument$1(t,s[e])),a.push(s[e+1]);const u=[],c=ObjectValue.empty();for(let e=_.length-1;e>=0;--e)if(!__PRIVATE_fieldMaskContains(u,_[e])){const t=_[e];let n=a[e];n=(0,dist_index_esm.Ku)(n);const r=o.yc(t);if(n instanceof __PRIVATE_DeleteFieldValueImpl)u.push(t);else{const e=__PRIVATE_parseData(n,r);null!=e&&(u.push(t),c.set(t,e))}}const l=new FieldMask(u);return new ParsedUpdateData(c,l,o.fieldTransforms)}function __PRIVATE_parseData(e,t){if(__PRIVATE_looksLikeJsonObject(e=(0,dist_index_esm.Ku)(e)))return __PRIVATE_validatePlainObject("Unsupported field value:",t,e),__PRIVATE_parseObject(e,t);if(e instanceof FieldValue)return function __PRIVATE_parseSentinelFieldValue(e,t){if(!__PRIVATE_isWrite(t.Ac))throw t.Sc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Sc(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function __PRIVATE_parseArray(e,t){const n=[];let r=0;for(const i of e){let e=__PRIVATE_parseData(i,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function __PRIVATE_parseScalarValue(e,t){if(null===(e=(0,dist_index_esm.Ku)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return toNumber(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Timestamp.fromDate(e);return{timestampValue:toTimestamp(t.serializer,n)}}if(e instanceof Timestamp){const n=new Timestamp(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:toTimestamp(t.serializer,n)}}if(e instanceof GeoPoint)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Bytes)return{bytesValue:__PRIVATE_toBytes(t.serializer,e._byteString)};if(e instanceof DocumentReference){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:__PRIVATE_toResourceName(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof VectorValue)return function __PRIVATE_parseVectorValue(e,t){return{mapValue:{fields:{[ht]:{stringValue:It},[Et]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return __PRIVATE_toDouble(t.serializer,e)})}}}}}}(e,t);throw t.Sc(`Unsupported field value: ${__PRIVATE_valueDescription(e)}`)}(e,t)}function __PRIVATE_parseObject(e,t){const n={};return isEmpty(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):forEach(e,(e,r)=>{const i=__PRIVATE_parseData(r,t.mc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function __PRIVATE_looksLikeJsonObject(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Timestamp||e instanceof GeoPoint||e instanceof Bytes||e instanceof DocumentReference||e instanceof FieldValue||e instanceof VectorValue)}function __PRIVATE_validatePlainObject(e,t,n){if(!__PRIVATE_looksLikeJsonObject(n)||!__PRIVATE_isPlainObject(n)){const r=__PRIVATE_valueDescription(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function __PRIVATE_fieldPathFromArgument$1(e,t,n){if((t=(0,dist_index_esm.Ku)(t))instanceof FieldPath)return t._internalPath;if("string"==typeof t)return __PRIVATE_fieldPathFromDotSeparatedString(e,t);throw __PRIVATE_createError("Field path arguments must be of type string or ",e,!1,void 0,n)}const Pn=new RegExp("[~\\*/\\[\\]]");function __PRIVATE_fieldPathFromDotSeparatedString(e,t,n){if(t.search(Pn)>=0)throw __PRIVATE_createError(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new FieldPath(...t.split("."))._internalPath}catch(r){throw __PRIVATE_createError(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function __PRIVATE_createError(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let _=`Function ${t}() called with invalid data`;n&&(_+=" (via `toFirestore()`)"),_+=". ";let a="";return(s||o)&&(a+=" (found",s&&(a+=` in field ${r}`),o&&(a+=` in document ${i}`),a+=")"),new FirestoreError(N.INVALID_ARGUMENT,_+e+a)}function __PRIVATE_fieldMaskContains(e,t){return e.some(e=>e.isEqual(t))}class DocumentSnapshot$1{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new DocumentReference(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new QueryDocumentSnapshot$1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class QueryDocumentSnapshot$1 extends DocumentSnapshot$1{data(){return super.data()}}function __PRIVATE_fieldPathFromArgument(e,t){return"string"==typeof t?__PRIVATE_fieldPathFromDotSeparatedString(e,t):t instanceof FieldPath?t._internalPath:t._delegate._internalPath}class SnapshotMetadata{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class DocumentSnapshot extends DocumentSnapshot$1{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new QueryDocumentSnapshot(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new FirestoreError(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=DocumentSnapshot._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}DocumentSnapshot._jsonSchemaVersion="firestore/documentSnapshot/1.0",DocumentSnapshot._jsonSchema={type:property("string",DocumentSnapshot._jsonSchemaVersion),bundleSource:property("string","DocumentSnapshot"),bundleName:property("string"),bundle:property("string")};class QueryDocumentSnapshot extends DocumentSnapshot{data(e={}){return super.data(e)}}class QuerySnapshot{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new SnapshotMetadata(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new QueryDocumentSnapshot(this._firestore,this._userDataWriter,n.key,n,new SnapshotMetadata(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new FirestoreError(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function __PRIVATE_changesFromSnapshot(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new QueryDocumentSnapshot(e._firestore,e._userDataWriter,n.doc.key,n.doc,new SnapshotMetadata(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new QueryDocumentSnapshot(e._firestore,e._userDataWriter,t.doc.key,t.doc,new SnapshotMetadata(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:__PRIVATE_resultChangeType(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new FirestoreError(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=QuerySnapshot._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=__PRIVATE_AutoId.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function __PRIVATE_resultChangeType(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fail(61501,{type:e})}}QuerySnapshot._jsonSchemaVersion="firestore/querySnapshot/1.0",QuerySnapshot._jsonSchema={type:property("string",QuerySnapshot._jsonSchemaVersion),bundleSource:property("string","QuerySnapshot"),bundleName:property("string"),bundle:property("string")};function updateDoc(e,t,n,...r){e=__PRIVATE_cast(e,DocumentReference);const i=__PRIVATE_cast(e.firestore,Firestore),s=__PRIVATE_newUserDataReader(i);let o;return o="string"==typeof(t=(0,dist_index_esm.Ku)(t))||t instanceof FieldPath?__PRIVATE_parseUpdateVarargs(s,"updateDoc",e._key,t,n,r):__PRIVATE_parseUpdateData(s,"updateDoc",e._key,t),executeWrite(i,[o.toMutation(e._key,Precondition.exists(!0))])}function executeWrite(e,t){return function __PRIVATE_firestoreClientWrite(e,t){const n=new __PRIVATE_Deferred;return e.asyncQueue.enqueueAndForget(async()=>async function __PRIVATE_syncEngineWrite(e,t,n){const r=__PRIVATE_syncEngineEnsureWriteCallbacks(e);try{const e=await function __PRIVATE_localStoreWriteLocally(e,t){const n=__PRIVATE_debugCast(e),r=Timestamp.now(),i=t.reduce((e,t)=>e.add(t.key),__PRIVATE_documentKeySet());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let _=__PRIVATE_mutableDocumentMap(),a=__PRIVATE_documentKeySet();return n.Ns.getEntries(e,i).next(e=>{_=e,_.forEach((e,t)=>{t.isValidDocument()||(a=a.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,_)).next(i=>{s=i;const o=[];for(const e of t){const t=__PRIVATE_mutationExtractBaseValue(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new __PRIVATE_PatchMutation(e.key,t,__PRIVATE_extractFieldMask(t.value.mapValue),Precondition.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(s,a);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function __PRIVATE_addMutationCallback(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new SortedMap(__PRIVATE_primitiveComparator)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(r,e.changes),await __PRIVATE_fillWritePipeline(r.remoteStore)}catch(e){const t=__PRIVATE_wrapInUserErrorIfRecoverable(e,"Failed to persist write");n.reject(t)}}(await __PRIVATE_getSyncEngine(e),t,n)),n.promise}(ensureFirestoreConfigured(e),t)}function serverTimestamp(){return new __PRIVATE_ServerTimestampFieldValueImpl("serverTimestamp")}new WeakMap;!function __PRIVATE_registerFirestore(e,t=!0){!function __PRIVATE_setSDKVersion(e){x=e}(index_esm.MF),(0,index_esm.om)(new esm_index_esm.uA("firestore",(e,{instanceIdentifier:n,options:r})=>{const i=e.getProvider("app").getImmediate(),s=new Firestore(new __PRIVATE_FirebaseAuthCredentialsProvider(e.getProvider("auth-internal")),new __PRIVATE_FirebaseAppCheckTokenProvider(i,e.getProvider("app-check-internal")),function __PRIVATE_databaseIdFromApp(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new FirestoreError(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new DatabaseId(e.options.projectId,t)}(i,n),i);return r={useFetchStreams:t,...r},s._setSettings(r),s},"PUBLIC").setMultipleInstances(!0)),(0,index_esm.KO)(F,M,e),(0,index_esm.KO)(F,M,"esm2020")}()},"./node_modules/firebase/storage/dist/esm/index.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{c7:()=>getStorage});var index_esm=__webpack_require__("./node_modules/@firebase/app/dist/esm/index.esm.js"),dist_index_esm=__webpack_require__("./node_modules/@firebase/util/dist/index.esm.js"),esm_index_esm=__webpack_require__("./node_modules/@firebase/component/dist/esm/index.esm.js");class StorageError extends dist_index_esm.g{constructor(code,message,status_=0){super(prependCode(code),`Firebase Storage: ${message} (${prependCode(code)})`),this.status_=status_,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,StorageError.prototype)}get status(){return this.status_}set status(status){this.status_=status}_codeEquals(code){return prependCode(code)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(serverResponse){this.customData.serverResponse=serverResponse,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var StorageErrorCode,ErrorCode;function prependCode(code){return"storage/"+code}function unknown(){return new StorageError(StorageErrorCode.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function retryLimitExceeded(){return new StorageError(StorageErrorCode.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function canceled(){return new StorageError(StorageErrorCode.CANCELED,"User canceled the upload/download.")}function invalidArgument(message){return new StorageError(StorageErrorCode.INVALID_ARGUMENT,message)}function appDeleted(){return new StorageError(StorageErrorCode.APP_DELETED,"The Firebase app was deleted.")}!function(StorageErrorCode){StorageErrorCode.UNKNOWN="unknown",StorageErrorCode.OBJECT_NOT_FOUND="object-not-found",StorageErrorCode.BUCKET_NOT_FOUND="bucket-not-found",StorageErrorCode.PROJECT_NOT_FOUND="project-not-found",StorageErrorCode.QUOTA_EXCEEDED="quota-exceeded",StorageErrorCode.UNAUTHENTICATED="unauthenticated",StorageErrorCode.UNAUTHORIZED="unauthorized",StorageErrorCode.UNAUTHORIZED_APP="unauthorized-app",StorageErrorCode.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",StorageErrorCode.INVALID_CHECKSUM="invalid-checksum",StorageErrorCode.CANCELED="canceled",StorageErrorCode.INVALID_EVENT_NAME="invalid-event-name",StorageErrorCode.INVALID_URL="invalid-url",StorageErrorCode.INVALID_DEFAULT_BUCKET="invalid-default-bucket",StorageErrorCode.NO_DEFAULT_BUCKET="no-default-bucket",StorageErrorCode.CANNOT_SLICE_BLOB="cannot-slice-blob",StorageErrorCode.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",StorageErrorCode.NO_DOWNLOAD_URL="no-download-url",StorageErrorCode.INVALID_ARGUMENT="invalid-argument",StorageErrorCode.INVALID_ARGUMENT_COUNT="invalid-argument-count",StorageErrorCode.APP_DELETED="app-deleted",StorageErrorCode.INVALID_ROOT_OPERATION="invalid-root-operation",StorageErrorCode.INVALID_FORMAT="invalid-format",StorageErrorCode.INTERNAL_ERROR="internal-error",StorageErrorCode.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(StorageErrorCode||(StorageErrorCode={}));class Location{constructor(bucket,path){this.bucket=bucket,this.path_=path}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const encode=encodeURIComponent;return"/b/"+encode(this.bucket)+"/o/"+encode(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(bucketString,host){let bucketLocation;try{bucketLocation=Location.makeFromUrl(bucketString,host)}catch(e){return new Location(bucketString,"")}if(""===bucketLocation.path)return bucketLocation;throw function invalidDefaultBucket(bucket){return new StorageError(StorageErrorCode.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+bucket+"'.")}(bucketString)}static makeFromUrl(url,host){let location=null;const gsRegex=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i");function httpModify(loc){loc.path_=decodeURIComponent(loc.path)}const firebaseStorageHost=host.replace(/[.]/g,"\\."),groups=[{regex:gsRegex,indices:{bucket:1,path:3},postModify:function gsModify(loc){"/"===loc.path.charAt(loc.path.length-1)&&(loc.path_=loc.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${firebaseStorageHost}/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:httpModify},{regex:new RegExp(`^https?://${"firebasestorage.googleapis.com"===host?"(?:storage.googleapis.com|storage.cloud.google.com)":host}/([A-Za-z0-9.\\-_]+)/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:httpModify}];for(let i=0;i<groups.length;i++){const group=groups[i],captures=group.regex.exec(url);if(captures){const bucketValue=captures[group.indices.bucket];let pathValue=captures[group.indices.path];pathValue||(pathValue=""),location=new Location(bucketValue,pathValue),group.postModify(location);break}}if(null==location)throw function invalidUrl(url){return new StorageError(StorageErrorCode.INVALID_URL,"Invalid URL '"+url+"'.")}(url);return location}}class FailRequest{constructor(error){this.promise_=Promise.reject(error)}getPromise(){return this.promise_}cancel(_appDelete=!1){}}function validateNumber(argument,minValue,maxValue,value){if(value<minValue)throw invalidArgument(`Invalid value for '${argument}'. Expected ${minValue} or greater.`);if(value>maxValue)throw invalidArgument(`Invalid value for '${argument}'. Expected ${maxValue} or less.`)}function makeQueryString(params){const encode=encodeURIComponent;let queryPart="?";for(const key in params)if(params.hasOwnProperty(key)){queryPart=queryPart+(encode(key)+"="+encode(params[key]))+"&"}return queryPart=queryPart.slice(0,-1),queryPart}function isRetryStatusCode(status,additionalRetryCodes){const isFiveHundredCode=status>=500&&status<600,isExtraRetryCode=-1!==[408,429].indexOf(status),isAdditionalRetryCode=-1!==additionalRetryCodes.indexOf(status);return isFiveHundredCode||isExtraRetryCode||isAdditionalRetryCode}!function(ErrorCode){ErrorCode[ErrorCode.NO_ERROR=0]="NO_ERROR",ErrorCode[ErrorCode.NETWORK_ERROR=1]="NETWORK_ERROR",ErrorCode[ErrorCode.ABORT=2]="ABORT"}(ErrorCode||(ErrorCode={}));class NetworkRequest{constructor(url_,method_,headers_,body_,successCodes_,additionalRetryCodes_,callback_,errorCallback_,timeout_,progressCallback_,connectionFactory_,retry=!0,isUsingEmulator=!1){this.url_=url_,this.method_=method_,this.headers_=headers_,this.body_=body_,this.successCodes_=successCodes_,this.additionalRetryCodes_=additionalRetryCodes_,this.callback_=callback_,this.errorCallback_=errorCallback_,this.timeout_=timeout_,this.progressCallback_=progressCallback_,this.connectionFactory_=connectionFactory_,this.retry=retry,this.isUsingEmulator=isUsingEmulator,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((resolve,reject)=>{this.resolve_=resolve,this.reject_=reject,this.start_()})}start_(){const doTheRequest=(backoffCallback,canceled)=>{if(canceled)return void backoffCallback(!1,new RequestEndStatus(!1,null,!0));const connection=this.connectionFactory_();this.pendingConnection_=connection;const progressListener=progressEvent=>{const loaded=progressEvent.loaded,total=progressEvent.lengthComputable?progressEvent.total:-1;null!==this.progressCallback_&&this.progressCallback_(loaded,total)};null!==this.progressCallback_&&connection.addUploadProgressListener(progressListener),connection.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&connection.removeUploadProgressListener(progressListener),this.pendingConnection_=null;const hitServer=connection.getErrorCode()===ErrorCode.NO_ERROR,status=connection.getStatus();if(!hitServer||isRetryStatusCode(status,this.additionalRetryCodes_)&&this.retry){const wasCanceled=connection.getErrorCode()===ErrorCode.ABORT;return void backoffCallback(!1,new RequestEndStatus(!1,null,wasCanceled))}const successCode=-1!==this.successCodes_.indexOf(status);backoffCallback(!0,new RequestEndStatus(successCode,connection))})},backoffDone=(requestWentThrough,status)=>{const resolve=this.resolve_,reject=this.reject_,connection=status.connection;if(status.wasSuccessCode)try{const result=this.callback_(connection,connection.getResponse());!function isJustDef(p){return void 0!==p}(result)?resolve():resolve(result)}catch(e){reject(e)}else if(null!==connection){const err=unknown();err.serverResponse=connection.getErrorText(),this.errorCallback_?reject(this.errorCallback_(connection,err)):reject(err)}else if(status.canceled){reject(this.appDelete_?appDeleted():canceled())}else{reject(retryLimitExceeded())}};this.canceled_?backoffDone(0,new RequestEndStatus(!1,null,!0)):this.backoffId_=function start(doRequest,backoffCompleteCb,timeout){let waitSeconds=1,retryTimeoutId=null,globalTimeoutId=null,hitTimeout=!1,cancelState=0;function canceled(){return 2===cancelState}let triggeredCallback=!1;function triggerCallback(...args){triggeredCallback||(triggeredCallback=!0,backoffCompleteCb.apply(null,args))}function callWithDelay(millis){retryTimeoutId=setTimeout(()=>{retryTimeoutId=null,doRequest(responseHandler,canceled())},millis)}function clearGlobalTimeout(){globalTimeoutId&&clearTimeout(globalTimeoutId)}function responseHandler(success,...args){if(triggeredCallback)return void clearGlobalTimeout();if(success)return clearGlobalTimeout(),void triggerCallback.call(null,success,...args);if(canceled()||hitTimeout)return clearGlobalTimeout(),void triggerCallback.call(null,success,...args);let waitMillis;waitSeconds<64&&(waitSeconds*=2),1===cancelState?(cancelState=2,waitMillis=0):waitMillis=1e3*(waitSeconds+Math.random()),callWithDelay(waitMillis)}let stopped=!1;function stop(wasTimeout){stopped||(stopped=!0,clearGlobalTimeout(),triggeredCallback||(null!==retryTimeoutId?(wasTimeout||(cancelState=2),clearTimeout(retryTimeoutId),callWithDelay(0)):wasTimeout||(cancelState=1)))}return callWithDelay(0),globalTimeoutId=setTimeout(()=>{hitTimeout=!0,stop(!0)},timeout),stop}(doTheRequest,backoffDone,this.timeout_)}getPromise(){return this.promise_}cancel(appDelete){this.canceled_=!0,this.appDelete_=appDelete||!1,null!==this.backoffId_&&function stop(id){id(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class RequestEndStatus{constructor(wasSuccessCode,connection,canceled){this.wasSuccessCode=wasSuccessCode,this.connection=connection,this.canceled=!!canceled}}function lastComponent(path){const index=path.lastIndexOf("/",path.length-2);return-1===index?path:path.slice(index+1)}class Reference{constructor(_service,location){this._service=_service,this._location=location instanceof Location?location:Location.makeFromUrl(location,_service.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(service,location){return new Reference(service,location)}get root(){const location=new Location(this._location.bucket,"");return this._newRef(this._service,location)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lastComponent(this._location.path)}get storage(){return this._service}get parent(){const newPath=function index_esm_parent(path){if(0===path.length)return null;const index=path.lastIndexOf("/");return-1===index?"":path.slice(0,index)}(this._location.path);if(null===newPath)return null;const location=new Location(this._location.bucket,newPath);return new Reference(this._service,location)}_throwIfRoot(name){if(""===this._location.path)throw function invalidRootOperation(name){return new StorageError(StorageErrorCode.INVALID_ROOT_OPERATION,"The operation '"+name+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(name)}}function extractBucket(host,config){const bucketString=config?.storageBucket;return null==bucketString?null:Location.makeFromBucketSpec(bucketString,host)}class FirebaseStorageImpl{constructor(app,_authProvider,_appCheckProvider,_url,_firebaseVersion,_isUsingEmulator=!1){this.app=app,this._authProvider=_authProvider,this._appCheckProvider=_appCheckProvider,this._url=_url,this._firebaseVersion=_firebaseVersion,this._isUsingEmulator=_isUsingEmulator,this._bucket=null,this._host="firebasestorage.googleapis.com",this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=_url?Location.makeFromBucketSpec(_url,this._host):extractBucket(this._host,this.app.options)}get host(){return this._host}set host(host){this._host=host,null!=this._url?this._bucket=Location.makeFromBucketSpec(this._url,host):this._bucket=extractBucket(host,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(time){validateNumber("time",0,Number.POSITIVE_INFINITY,time),this._maxUploadRetryTime=time}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(time){validateNumber("time",0,Number.POSITIVE_INFINITY,time),this._maxOperationRetryTime=time}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const auth=this._authProvider.getImmediate({optional:!0});if(auth){const tokenData=await auth.getToken();if(null!==tokenData)return tokenData.accessToken}return null}async _getAppCheckToken(){if((0,index_esm.xZ)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const appCheck=this._appCheckProvider.getImmediate({optional:!0});if(appCheck){return(await appCheck.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(request=>request.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(loc){return new Reference(this,loc)}_makeRequest(requestInfo,requestFactory,authToken,appCheckToken,retry=!0){if(this._deleted)return new FailRequest(appDeleted());{const request=function makeRequest(requestInfo,appId,authToken,appCheckToken,requestFactory,firebaseVersion,retry=!0,isUsingEmulator=!1){const queryPart=makeQueryString(requestInfo.urlParams),url=requestInfo.url+queryPart,headers=Object.assign({},requestInfo.headers);return function addGmpidHeader_(headers,appId){appId&&(headers["X-Firebase-GMPID"]=appId)}(headers,appId),function addAuthHeader_(headers,authToken){null!==authToken&&authToken.length>0&&(headers.Authorization="Firebase "+authToken)}(headers,authToken),function addVersionHeader_(headers,firebaseVersion){headers["X-Firebase-Storage-Version"]="webjs/"+(firebaseVersion??"AppManager")}(headers,firebaseVersion),function addAppCheckHeader_(headers,appCheckToken){null!==appCheckToken&&(headers["X-Firebase-AppCheck"]=appCheckToken)}(headers,appCheckToken),new NetworkRequest(url,requestInfo.method,headers,requestInfo.body,requestInfo.successCodes,requestInfo.additionalRetryCodes,requestInfo.handler,requestInfo.errorHandler,requestInfo.timeout,requestInfo.progressCallback,requestFactory,retry,isUsingEmulator)}(requestInfo,this._appId,authToken,appCheckToken,requestFactory,this._firebaseVersion,retry,this._isUsingEmulator);return this._requests.add(request),request.getPromise().then(()=>this._requests.delete(request),()=>this._requests.delete(request)),request}}async makeRequestWithTokens(requestInfo,requestFactory){const[authToken,appCheckToken]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(requestInfo,requestFactory,authToken,appCheckToken).getPromise()}}const STORAGE_TYPE="storage";function getStorage(app=(0,index_esm.Sx)(),bucketUrl){app=(0,dist_index_esm.Ku)(app);const storageInstance=(0,index_esm.j6)(app,STORAGE_TYPE).getImmediate({identifier:bucketUrl}),emulator=(0,dist_index_esm.yU)("storage");return emulator&&function connectStorageEmulator(storage,host,port,options={}){!function connectStorageEmulator$1(storage,host,port,options={}){storage.host=`${host}:${port}`;const useSsl=(0,dist_index_esm.zJ)(host);useSsl&&((0,dist_index_esm.gE)(`https://${storage.host}/b`),(0,dist_index_esm.P1)("Storage",!0)),storage._isUsingEmulator=!0,storage._protocol=useSsl?"https":"http";const{mockUserToken}=options;mockUserToken&&(storage._overrideAuthToken="string"==typeof mockUserToken?mockUserToken:(0,dist_index_esm.Fy)(mockUserToken,storage.app.options.projectId))}(storage,host,port,options)}(storageInstance,...emulator),storageInstance}function factory(container,{instanceIdentifier:url}){const app=container.getProvider("app").getImmediate(),authProvider=container.getProvider("auth-internal"),appCheckProvider=container.getProvider("app-check-internal");return new FirebaseStorageImpl(app,authProvider,appCheckProvider,url,index_esm.MF)}!function registerStorage(){(0,index_esm.om)(new esm_index_esm.uA(STORAGE_TYPE,factory,"PUBLIC").setMultipleInstances(!0)),(0,index_esm.KO)("@firebase/storage","0.14.0",""),(0,index_esm.KO)("@firebase/storage","0.14.0","esm2020")}()},"./node_modules/react-dom/cjs/react-dom.production.js":(__unused_webpack_module,exports,__webpack_require__)=>{var React=__webpack_require__("./node_modules/react/index.js");function formatProdErrorMessage(code){var url="https://react.dev/errors/"+code;if(1<arguments.length){url+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)url+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+code+"; visit "+url+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function noop(){}var Internals={d:{f:noop,r:function(){throw Error(formatProdErrorMessage(522))},D:noop,C:noop,L:noop,m:noop,X:noop,S:noop,M:noop},p:0,findDOMNode:null},REACT_PORTAL_TYPE=Symbol.for("react.portal");var ReactSharedInternals=React.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function getCrossOriginStringAs(as,input){return"font"===as?"":"string"==typeof input?"use-credentials"===input?input:"":void 0}exports.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Internals,exports.createPortal=function(children,container){var key=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!container||1!==container.nodeType&&9!==container.nodeType&&11!==container.nodeType)throw Error(formatProdErrorMessage(299));return function createPortal$1(children,containerInfo,implementation){var key=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:REACT_PORTAL_TYPE,key:null==key?null:""+key,children,containerInfo,implementation}}(children,container,null,key)},exports.flushSync=function(fn){var previousTransition=ReactSharedInternals.T,previousUpdatePriority=Internals.p;try{if(ReactSharedInternals.T=null,Internals.p=2,fn)return fn()}finally{ReactSharedInternals.T=previousTransition,Internals.p=previousUpdatePriority,Internals.d.f()}},exports.preconnect=function(href,options){"string"==typeof href&&(options?options="string"==typeof(options=options.crossOrigin)?"use-credentials"===options?options:"":void 0:options=null,Internals.d.C(href,options))},exports.prefetchDNS=function(href){"string"==typeof href&&Internals.d.D(href)},exports.preinit=function(href,options){if("string"==typeof href&&options&&"string"==typeof options.as){var as=options.as,crossOrigin=getCrossOriginStringAs(as,options.crossOrigin),integrity="string"==typeof options.integrity?options.integrity:void 0,fetchPriority="string"==typeof options.fetchPriority?options.fetchPriority:void 0;"style"===as?Internals.d.S(href,"string"==typeof options.precedence?options.precedence:void 0,{crossOrigin,integrity,fetchPriority}):"script"===as&&Internals.d.X(href,{crossOrigin,integrity,fetchPriority,nonce:"string"==typeof options.nonce?options.nonce:void 0})}},exports.preinitModule=function(href,options){if("string"==typeof href)if("object"==typeof options&&null!==options){if(null==options.as||"script"===options.as){var crossOrigin=getCrossOriginStringAs(options.as,options.crossOrigin);Internals.d.M(href,{crossOrigin,integrity:"string"==typeof options.integrity?options.integrity:void 0,nonce:"string"==typeof options.nonce?options.nonce:void 0})}}else null==options&&Internals.d.M(href)},exports.preload=function(href,options){if("string"==typeof href&&"object"==typeof options&&null!==options&&"string"==typeof options.as){var as=options.as,crossOrigin=getCrossOriginStringAs(as,options.crossOrigin);Internals.d.L(href,as,{crossOrigin,integrity:"string"==typeof options.integrity?options.integrity:void 0,nonce:"string"==typeof options.nonce?options.nonce:void 0,type:"string"==typeof options.type?options.type:void 0,fetchPriority:"string"==typeof options.fetchPriority?options.fetchPriority:void 0,referrerPolicy:"string"==typeof options.referrerPolicy?options.referrerPolicy:void 0,imageSrcSet:"string"==typeof options.imageSrcSet?options.imageSrcSet:void 0,imageSizes:"string"==typeof options.imageSizes?options.imageSizes:void 0,media:"string"==typeof options.media?options.media:void 0})}},exports.preloadModule=function(href,options){if("string"==typeof href)if(options){var crossOrigin=getCrossOriginStringAs(options.as,options.crossOrigin);Internals.d.m(href,{as:"string"==typeof options.as&&"script"!==options.as?options.as:void 0,crossOrigin,integrity:"string"==typeof options.integrity?options.integrity:void 0})}else Internals.d.m(href)},exports.requestFormReset=function(form){Internals.d.r(form)},exports.unstable_batchedUpdates=function(fn,a){return fn(a)},exports.useFormState=function(action,initialState,permalink){return ReactSharedInternals.H.useFormState(action,initialState,permalink)},exports.useFormStatus=function(){return ReactSharedInternals.H.useHostTransitionStatus()},exports.version="19.1.1"},"./node_modules/react-dom/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{!function checkDCE(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(err){console.error(err)}}(),module.exports=__webpack_require__("./node_modules/react-dom/cjs/react-dom.production.js")},"./node_modules/react-firebase-hooks/auth/dist/index.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{hD:()=>useAuthState});var firebase_auth__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/firebase/auth/dist/esm/index.esm.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js");function __awaiter(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})}function __generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}var __assign=function(){return __assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)},defaultState=function(defaultValue){return{loading:null==defaultValue,value:defaultValue}},useLoadingValue=function(getDefaultValue){var defaultValue=getDefaultValue?getDefaultValue():void 0,_a=(0,react__WEBPACK_IMPORTED_MODULE_1__.useReducer)(function(state,action){switch(action.type){case"error":return __assign(__assign({},state),{error:action.error,loading:!1,value:void 0});case"reset":return defaultState(action.defaultValue);case"value":return __assign(__assign({},state),{error:void 0,loading:!1,value:action.value});default:return state}},defaultState(defaultValue)),state=_a[0],dispatch=_a[1],reset=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function(){var defaultValue=getDefaultValue?getDefaultValue():void 0;dispatch({type:"reset",defaultValue})},[getDefaultValue]),setError=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function(error){dispatch({type:"error",error})},[]),setValue=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function(value){dispatch({type:"value",value})},[]);return(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(function(){return{error:state.error,loading:state.loading,reset,setError,setValue,value:state.value}},[state.error,state.loading,reset,setError,setValue,state.value])},useAuthState=function(auth,options){var _a=useLoadingValue(function(){return auth.currentUser}),error=_a.error,loading=_a.loading,setError=_a.setError,setValue=_a.setValue,value=_a.value;return(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(function(){var listener=(0,firebase_auth__WEBPACK_IMPORTED_MODULE_0__.hg)(auth,function(user){return __awaiter(void 0,void 0,void 0,function(){var e_1;return __generator(this,function(_a){switch(_a.label){case 0:if(!(null==options?void 0:options.onUserChanged))return[3,4];_a.label=1;case 1:return _a.trys.push([1,3,,4]),[4,options.onUserChanged(user)];case 2:return _a.sent(),[3,4];case 3:return e_1=_a.sent(),setError(e_1),[3,4];case 4:return setValue(user),[2]}})})},setError);return function(){listener()}},[auth]),[value,loading,error]}}}]);