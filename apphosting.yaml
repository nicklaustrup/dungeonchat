# apphosting.yaml
# Configuration for your Firebase App Hosting backend

# This section configures how your app is built and served.
# It tells Firebase App Hosting which commands to run and what to deploy.
build:
  # The command to execute to build your application for production.
  # For Create React App, this typically generates optimized static assets
  # into a 'build' folder.
  command: "npm run build"

  # The directory where your production-ready static assets are located
  # after the build command completes. Firebase App Hosting will serve
  # these files.
  outputDirectory: "build"

serve:
  # This command tells App Hosting to start a static file server
  # that serves the contents of the 'build' directory.
  # The '--single' flag ensures that all requests fall back to index.html,
  # which is standard for single-page applications (SPAs) like React.
  # The '-l 8080' specifies the port Cloud Run (which App Hosting uses) expects.
  command: "npx serve -s build -l 8080"

# Optional: Runtime configuration for the Cloud Run service that serves your app.
# Since your React app will be served as static files after building,
# these settings primarily affect the underlying server's performance.
runConfig:
  # Minimum number of instances to keep warm. Increase for faster cold starts.
  # Starting with 0 is often good for cost-efficiency on low-traffic apps.
  minInstances: 0

  # Maximum number of instances that can run simultaneously.
  # Adjust based on expected traffic.
  maxInstances: 2

  # CPU allocated to each instance. 1 CPU is often sufficient for serving static content.
  cpu: 1

  # Memory allocated to each instance. 512 MiB is a common starting point
  # for serving static content efficiently.
  memoryMiB: 512

# Environment variables for your application.
# These will be injected into your application's build and/or runtime.
env:
  # Example: If you have a Firebase project config, you'd put it here.
  # These values will be available as process.env.NEXT_PUBLIC_FIREBASE_API_KEY
  # in your React app after being built.
  - variable: REACT_APP_FIREBASE_API_KEY
    value: "AIzaSyDkaNKFFSvbphzzTRWPsDJtDP45boXqELY"
    availability:
      - BUILD
      - RUNTIME

  - variable: REACT_APP_FIREBASE_AUTH_DOMAIN
    value: "superchat-58b43.firebaseapp.com"
    availability:
      - BUILD
      - RUNTIME

  - variable: REACT_APP_FIREBASE_PROJECT_ID
    value: "superchat-58b43"
    availability:
      - BUILD
      - RUNTIME

  - variable: REACT_APP_FIREBASE_STORAGE_BUCKET
    value: "superchat-58b43.firebasestorage.app"
    availability:
      - BUILD
      - RUNTIME

  - variable: REACT_APP_FIREBASE_MESSAGING_SENDER_ID
    value: "131619204399"
    availability:
      - BUILD
      - RUNTIME

  - variable: REACT_APP_FIREBASE_APP_ID
    value: "1:131619204399:web:3cf92be0cd8c606ea245da"
    availability:
      - BUILD
      - RUNTIME

  - variable: REACT_APP_FIREBASE_DATABASE_URL
    value: "https://superchat-58b43-default-rtdb.firebaseio.com"
    availability:
      - BUILD
      - RUNTIME
  # ... add other Firebase config variables or any other env vars your app needs
  # For sensitive information, consider using `secret` instead of `value`.
  # For example:
  # - variable: MY_SECRET_API_KEY
  #   secret: myApiSecretName
